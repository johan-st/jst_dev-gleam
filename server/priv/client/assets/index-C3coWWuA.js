var pt=Object.defineProperty;var qe=e=>{throw TypeError(e)};var yt=(e,t,n)=>t in e?pt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Be=(e,t,n)=>yt(e,typeof t!="symbol"?t+"":t,n),le=(e,t,n)=>t.has(e)||qe("Cannot "+n);var m=(e,t,n)=>(le(e,t,"read from private field"),n?n.call(e):t.get(e)),q=(e,t,n)=>t.has(e)?qe("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),y=(e,t,n,r)=>(le(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),K=(e,t,n)=>(le(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();class h{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}}class P{static fromArray(t,n){let r=n||new Xe;for(let s=t.length-1;s>=0;--s)r=new ve(t[s],r);return r}[Symbol.iterator](){return new mt(this)}toArray(){return[...this]}atLeastLength(t){for(let n of this){if(t<=0)return!0;t--}return t<=0}hasLength(t){for(let n of this){if(t<=0)return!1;t--}return t===0}countLength(){let t=0;for(let n of this)t++;return t}}function Ae(e,t){return new ve(e,t)}function f(e,t){return P.fromArray(e,t)}var C;class mt{constructor(t){q(this,C);y(this,C,t)}next(){if(m(this,C)instanceof Xe)return{done:!0};{let{head:t,tail:n}=m(this,C);return y(this,C,n),{value:t,done:!1}}}}C=new WeakMap;class Xe extends P{}class ve extends P{constructor(t,n){super(),this.head=t,this.tail=n}}class V{constructor(t){if(!(t instanceof Uint8Array))throw"BitArray can only be constructed from a Uint8Array";this.buffer=t}get length(){return this.buffer.length}byteAt(t){return this.buffer[t]}floatFromSlice(t,n,r){return gt(this.buffer,t,n,r)}intFromSlice(t,n,r,s){return bt(this.buffer,t,n,r,s)}binaryFromSlice(t,n){return new V(this.buffer.slice(t,n))}sliceAfter(t){return new V(this.buffer.slice(t))}}class wt{constructor(t){this.value=t}}function bt(e,t,n,r,s){let i=0;if(r)for(let u=t;u<n;u++)i=i*256+e[u];else for(let u=n-1;u>=t;u--)i=i*256+e[u];if(s){const o=2**((n-t)*8-1);i>=o&&(i-=o*2)}return i}function gt(e,t,n,r){const s=new DataView(e.buffer),i=n-t;if(i===8)return s.getFloat64(t,!r);if(i===4)return s.getFloat32(t,!r);{const u=`Sized floats must be 32-bit or 64-bit on JavaScript, got size of ${i*8} bits`;throw new globalThis.Error(u)}}class Z extends h{static isResult(t){return t instanceof Z}}class A extends Z{constructor(t){super(),this[0]=t}isOk(){return!0}}class M extends Z{constructor(t){super(),this[0]=t}isOk(){return!1}}function B(e,t){let n=[e,t];for(;n.length;){let r=n.pop(),s=n.pop();if(r===s)continue;if(!Ue(r)||!Ue(s)||!$t(r,s)||At(r,s)||xt(r,s)||Et(r,s)||St(r,s)||Ot(r,s)||Nt(r,s))return!1;const u=Object.getPrototypeOf(r);if(u!==null&&typeof u.equals=="function")try{if(r.equals(s))continue;return!1}catch{}let[o,c]=_t(r);for(let l of o(r))n.push(c(r,l),c(s,l))}return!0}function _t(e){if(e instanceof Map)return[t=>t.keys(),(t,n)=>t.get(n)];{let t=e instanceof globalThis.Error?["message"]:[];return[n=>[...t,...Object.keys(n)],(n,r)=>n[r]]}}function At(e,t){return e instanceof Date&&(e>t||e<t)}function xt(e,t){return e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((n,r)=>n===t[r]))}function Et(e,t){return Array.isArray(e)&&e.length!==t.length}function St(e,t){return e instanceof Map&&e.size!==t.size}function Ot(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(n=>!t.has(n)))}function Nt(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function Ue(e){return typeof e=="object"&&e!==null}function $t(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(r=>e instanceof r)?!1:e.constructor===t.constructor}function kt(e,t,n,r,s,i){let u=new globalThis.Error(s);u.gleam_error=e,u.module=t,u.line=n,u.fn=r;for(let o in i)u[o]=i[o];return u}class xe extends h{constructor(t){super(),this[0]=t}}class ye extends h{}function jt(e,t){if(e instanceof xe){let n=e[0];return new A(n)}else return new M(t)}function Tt(e){return Zt(e)}function Je(e,t){if(e.isOk()){let n=e[0];return new A(t(n))}else{let n=e[0];return new M(n)}}function zt(e,t){if(e.isOk()){let n=e[0];return new A(n)}else{let n=e[0];return new M(t(n))}}function Ce(e,t){if(e.isOk()){let n=e[0];return t(n)}else{let n=e[0];return new M(n)}}function Mt(e){return en(e)}function Ve(e){return e}class Ee extends h{constructor(t,n,r){super(),this.expected=t,this.found=n,this.path=r}}function Ze(e){return st(e)}function Lt(e){return un(e)}function Qe(e){return t=>{if(e.hasLength(0))return new M(f([new Ee("another type",Ze(t),f([]))]));{let n=e.head,r=e.tail,s=n(t);if(s.isOk()){let i=s[0];return new A(i)}else return Qe(r)(t)}}}function It(e,t){let n=t,r=Qe(f([et,i=>Je(Lt(i),Tt)])),s=(()=>{let i=r(n);if(i.isOk())return i[0];{let u=f(["<",Ze(n),">"]),o=Mt(u);return Ve(o)}})();return e.withFields({path:Ae(s,e.path)})}function Ft(e,t){return zt(e,n=>bn(n,t))}function et(e){return sn(e)}function Re(e,t){return n=>{let r=new Ee("field","nothing",f([]));return Ce(on(n,e),s=>{let u=jt(s,f([r])),o=Ce(u,t);return Ft(o,c=>It(c,e))})}}const Pe=new WeakMap,ae=new DataView(new ArrayBuffer(8));let de=0;function me(e){const t=Pe.get(e);if(t!==void 0)return t;const n=de++;return de===2147483647&&(de=0),Pe.set(e,n),n}function we(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function Se(e){let t=0;const n=e.length;for(let r=0;r<n;r++)t=Math.imul(31,t)+e.charCodeAt(r)|0;return t}function tt(e){ae.setFloat64(0,e);const t=ae.getInt32(0),n=ae.getInt32(4);return Math.imul(73244475,t>>16^t)^n}function Dt(e){return Se(e.toString())}function qt(e){const t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{const r=e.hashCode(e);if(typeof r=="number")return r}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return me(e);if(e instanceof Date)return tt(e.getTime());let n=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let r=0;r<e.length;r++)n=Math.imul(31,n)+N(e[r])|0;else if(e instanceof Set)e.forEach(r=>{n=n+N(r)|0});else if(e instanceof Map)e.forEach((r,s)=>{n=n+we(N(r),N(s))|0});else{const r=Object.keys(e);for(let s=0;s<r.length;s++){const i=r[s],u=e[i];n=n+we(N(u),Se(i))|0}}return n}function N(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return tt(e);case"string":return Se(e);case"bigint":return Dt(e);case"object":return qt(e);case"symbol":return me(e);case"function":return me(e);default:return 0}}const z=5,Oe=Math.pow(2,z),Bt=Oe-1,Ut=Oe/2,Ct=Oe/4,_=0,T=1,O=2,H=3,Ne={type:O,bitmap:0,array:[]};function Q(e,t){return e>>>t&Bt}function oe(e,t){return 1<<Q(e,t)}function Rt(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function $e(e,t){return Rt(e&t-1)}function $(e,t,n){const r=e.length,s=new Array(r);for(let i=0;i<r;++i)s[i]=e[i];return s[t]=n,s}function Pt(e,t,n){const r=e.length,s=new Array(r+1);let i=0,u=0;for(;i<t;)s[u++]=e[i++];for(s[u++]=n;i<r;)s[u++]=e[i++];return s}function be(e,t){const n=e.length,r=new Array(n-1);let s=0,i=0;for(;s<t;)r[i++]=e[s++];for(++s;s<n;)r[i++]=e[s++];return r}function nt(e,t,n,r,s,i){const u=N(t);if(u===r)return{type:H,hash:u,array:[{type:_,k:t,v:n},{type:_,k:s,v:i}]};const o={val:!1};return ee(ke(Ne,e,u,t,n,o),e,r,s,i,o)}function ee(e,t,n,r,s,i){switch(e.type){case T:return Ht(e,t,n,r,s,i);case O:return ke(e,t,n,r,s,i);case H:return Wt(e,t,n,r,s,i)}}function Ht(e,t,n,r,s,i){const u=Q(n,t),o=e.array[u];if(o===void 0)return i.val=!0,{type:T,size:e.size+1,array:$(e.array,u,{type:_,k:r,v:s})};if(o.type===_)return B(r,o.k)?s===o.v?e:{type:T,size:e.size,array:$(e.array,u,{type:_,k:r,v:s})}:(i.val=!0,{type:T,size:e.size,array:$(e.array,u,nt(t+z,o.k,o.v,n,r,s))});const c=ee(o,t+z,n,r,s,i);return c===o?e:{type:T,size:e.size,array:$(e.array,u,c)}}function ke(e,t,n,r,s,i){const u=oe(n,t),o=$e(e.bitmap,u);if(e.bitmap&u){const c=e.array[o];if(c.type!==_){const p=ee(c,t+z,n,r,s,i);return p===c?e:{type:O,bitmap:e.bitmap,array:$(e.array,o,p)}}const l=c.k;return B(r,l)?s===c.v?e:{type:O,bitmap:e.bitmap,array:$(e.array,o,{type:_,k:r,v:s})}:(i.val=!0,{type:O,bitmap:e.bitmap,array:$(e.array,o,nt(t+z,l,c.v,n,r,s))})}else{const c=e.array.length;if(c>=Ut){const l=new Array(32),p=Q(n,t);l[p]=ke(Ne,t+z,n,r,s,i);let g=0,x=e.bitmap;for(let W=0;W<32;W++){if(x&1){const E=e.array[g++];l[W]=E}x=x>>>1}return{type:T,size:c+1,array:l}}else{const l=Pt(e.array,o,{type:_,k:r,v:s});return i.val=!0,{type:O,bitmap:e.bitmap|u,array:l}}}}function Wt(e,t,n,r,s,i){if(n===e.hash){const u=je(e,r);if(u!==-1)return e.array[u].v===s?e:{type:H,hash:n,array:$(e.array,u,{type:_,k:r,v:s})};const o=e.array.length;return i.val=!0,{type:H,hash:n,array:$(e.array,o,{type:_,k:r,v:s})}}return ee({type:O,bitmap:oe(e.hash,t),array:[e]},t,n,r,s,i)}function je(e,t){const n=e.array.length;for(let r=0;r<n;r++)if(B(t,e.array[r].k))return r;return-1}function ue(e,t,n,r){switch(e.type){case T:return Kt(e,t,n,r);case O:return Yt(e,t,n,r);case H:return Gt(e,r)}}function Kt(e,t,n,r){const s=Q(n,t),i=e.array[s];if(i!==void 0){if(i.type!==_)return ue(i,t+z,n,r);if(B(r,i.k))return i}}function Yt(e,t,n,r){const s=oe(n,t);if(!(e.bitmap&s))return;const i=$e(e.bitmap,s),u=e.array[i];if(u.type!==_)return ue(u,t+z,n,r);if(B(r,u.k))return u}function Gt(e,t){const n=je(e,t);if(!(n<0))return e.array[n]}function Te(e,t,n,r){switch(e.type){case T:return Xt(e,t,n,r);case O:return vt(e,t,n,r);case H:return Jt(e,r)}}function Xt(e,t,n,r){const s=Q(n,t),i=e.array[s];if(i===void 0)return e;let u;if(i.type===_){if(!B(i.k,r))return e}else if(u=Te(i,t+z,n,r),u===i)return e;if(u===void 0){if(e.size<=Ct){const o=e.array,c=new Array(e.size-1);let l=0,p=0,g=0;for(;l<s;){const x=o[l];x!==void 0&&(c[p]=x,g|=1<<l,++p),++l}for(++l;l<o.length;){const x=o[l];x!==void 0&&(c[p]=x,g|=1<<l,++p),++l}return{type:O,bitmap:g,array:c}}return{type:T,size:e.size-1,array:$(e.array,s,u)}}return{type:T,size:e.size,array:$(e.array,s,u)}}function vt(e,t,n,r){const s=oe(n,t);if(!(e.bitmap&s))return e;const i=$e(e.bitmap,s),u=e.array[i];if(u.type!==_){const o=Te(u,t+z,n,r);return o===u?e:o!==void 0?{type:O,bitmap:e.bitmap,array:$(e.array,i,o)}:e.bitmap===s?void 0:{type:O,bitmap:e.bitmap^s,array:be(e.array,i)}}return B(r,u.k)?e.bitmap===s?void 0:{type:O,bitmap:e.bitmap^s,array:be(e.array,i)}:e}function Jt(e,t){const n=je(e,t);if(n<0)return e;if(e.array.length!==1)return{type:H,hash:e.hash,array:be(e.array,n)}}function rt(e,t){if(e===void 0)return;const n=e.array,r=n.length;for(let s=0;s<r;s++){const i=n[s];if(i!==void 0){if(i.type===_){t(i.v,i.k);continue}rt(i,t)}}}class j{static fromObject(t){const n=Object.keys(t);let r=j.new();for(let s=0;s<n.length;s++){const i=n[s];r=r.set(i,t[i])}return r}static fromMap(t){let n=j.new();return t.forEach((r,s)=>{n=n.set(s,r)}),n}static new(){return new j(void 0,0)}constructor(t,n){this.root=t,this.size=n}get(t,n){if(this.root===void 0)return n;const r=ue(this.root,0,N(t),t);return r===void 0?n:r.v}set(t,n){const r={val:!1},s=this.root===void 0?Ne:this.root,i=ee(s,0,N(t),t,n,r);return i===this.root?this:new j(i,r.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;const n=Te(this.root,0,N(t),t);return n===this.root?this:n===void 0?j.new():new j(n,this.size-1)}has(t){return this.root===void 0?!1:ue(this.root,0,N(t),t)!==void 0}entries(){if(this.root===void 0)return[];const t=[];return this.forEach((n,r)=>t.push([r,n])),t}forEach(t){rt(this.root,t)}hashCode(){let t=0;return this.forEach((n,r)=>{t=t+we(N(n),N(r))|0}),t}equals(t){if(!(t instanceof j)||this.size!==t.size)return!1;let n=!0;return this.forEach((r,s)=>{n=n&&B(t.get(s,!r),r)}),n}}const Vt=void 0,He={};function Zt(e){return e.toString()}function Qt(e){const t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{const n=t.indexOf("e");return n>=0?t.slice(0,n)+".0"+t.slice(n):t+".0"}}function en(e){let t="";for(const n of e)t=t+n;return t}function tn(e){var t;typeof process=="object"&&((t=process.stderr)!=null&&t.write)?process.stderr.write(e+`
`):typeof Deno=="object"?Deno.stderr.writeSync(new TextEncoder().encode(e+`
`)):console.log(e)}function nn(e,t){const n=e.get(t,He);return n===He?new M(Vt):new A(n)}function st(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof Z)return"Result";if(e instanceof P)return"List";if(e instanceof V)return"BitArray";if(e instanceof j)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{const t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function ze(e,t){return rn(e,st(t))}function rn(e,t){return new M(P.fromArray([new Ee(e,t,P.fromArray([]))]))}function sn(e){return typeof e=="string"?new A(e):ze("String",e)}function un(e){return Number.isInteger(e)?new A(e):ze("Int",e)}function on(e,t){const n=()=>ze("Dict",e);if(e instanceof j||e instanceof WeakMap||e instanceof Map){const r=nn(e,t);return new A(r.isOk()?new xe(r[0]):new ye)}else return e===null?n():Object.getPrototypeOf(e)==Object.prototype?We(e,t,()=>new A(new ye)):We(e,t,n)}function We(e,t,n){try{return t in e?new A(new xe(e[t])):n()}catch{return n()}}function D(e){const t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return cn(e);if(t==="bigint"||Number.isInteger(e))return e.toString();if(t==="number")return Qt(e);if(Array.isArray(e))return`#(${e.map(D).join(", ")})`;if(e instanceof P)return dn(e);if(e instanceof wt)return pn(e);if(e instanceof V)return hn(e);if(e instanceof h)return an(e);if(e instanceof j)return fn(e);if(e instanceof Set)return`//js(Set(${[...e].map(D).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){const n=[];for(const r of Array(e.length).keys())n.push(String.fromCharCode(r+97));return`//fn(${n.join(", ")}) { ... }`}return ln(e)}function cn(e){let t='"';for(let n=0;n<e.length;n++){let r=e[n];switch(r){case`
`:t+="\\n";break;case"\r":t+="\\r";break;case"	":t+="\\t";break;case"\f":t+="\\f";break;case"\\":t+="\\\\";break;case'"':t+='\\"';break;default:r<" "||r>"~"&&r<" "?t+="\\u{"+r.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=r}}return t+='"',t}function fn(e){let t="dict.from_list([",n=!0;return e.forEach((r,s)=>{n||(t=t+", "),t=t+"#("+D(s)+", "+D(r)+")",n=!1}),t+"])"}function ln(e){var i,u;const t=((u=(i=Object.getPrototypeOf(e))==null?void 0:i.constructor)==null?void 0:u.name)||"Object",n=[];for(const o of Object.keys(e))n.push(`${D(o)}: ${D(e[o])}`);const r=n.length?" "+n.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${r}})`}function an(e){const t=Object.keys(e).map(n=>{const r=D(e[n]);return isNaN(parseInt(n))?`${n}: ${r}`:r}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function dn(e){return`[${e.toArray().map(D).join(", ")}]`}function hn(e){return`<<${Array.from(e.buffer).join(", ")}>>`}function pn(e){return`//utfcodepoint(${String.fromCodePoint(e.value)})`}function yn(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let s=n.head;e=n.tail,t=Ae(s,r)}}}function mn(e){return yn(e,f([]))}function wn(e,t,n){for(;;){let r=e,s=t,i=n;if(r.hasLength(0))return mn(i);{let u=r.head;e=r.tail,t=s,n=Ae(s(u),i)}}}function bn(e,t){return wn(e,t,f([]))}function gn(e,t,n){for(;;){let r=e,s=t,i=n;if(r.hasLength(0))return s;{let u=r.head;e=r.tail,t=i(s,u),n=i}}}function _n(e){let t=D(e);return Ve(t)}function An(e){let n=_n(e);return tn(n),e}function xn(e,t,n){return e?t:n()}class En extends h{constructor(t){super(),this.content=t}}class b extends h{constructor(t,n,r,s,i,u,o){super(),this.key=t,this.namespace=n,this.tag=r,this.attrs=s,this.children=i,this.self_closing=u,this.void=o}}class it extends h{constructor(t,n,r){super(),this[0]=t,this[1]=n,this.as_property=r}}class Sn extends h{constructor(t,n){super(),this[0]=t,this[1]=n}}function On(e,t){return new it(e,t,!1)}function Nn(e,t){return new Sn("on"+e,t)}function $n(e){return On("style",gn(e,"",(t,n)=>{let r=n[0],s=n[1];return t+r+":"+s+";"}))}function U(e,t,n){return e==="area"?new b("","",e,t,f([]),!1,!0):e==="base"?new b("","",e,t,f([]),!1,!0):e==="br"?new b("","",e,t,f([]),!1,!0):e==="col"?new b("","",e,t,f([]),!1,!0):e==="embed"?new b("","",e,t,f([]),!1,!0):e==="hr"?new b("","",e,t,f([]),!1,!0):e==="img"?new b("","",e,t,f([]),!1,!0):e==="input"?new b("","",e,t,f([]),!1,!0):e==="link"?new b("","",e,t,f([]),!1,!0):e==="meta"?new b("","",e,t,f([]),!1,!0):e==="param"?new b("","",e,t,f([]),!1,!0):e==="source"?new b("","",e,t,f([]),!1,!0):e==="track"?new b("","",e,t,f([]),!1,!0):e==="wbr"?new b("","",e,t,f([]),!1,!0):new b("","",e,t,n,!1,!1)}function kn(e){return new En(e)}class jn extends h{constructor(t){super(),this[0]=t}}class te extends h{constructor(t){super(),this[0]=t}}class Tn extends h{constructor(t,n){super(),this[0]=t,this[1]=n}}class zn extends h{}class Mn extends h{constructor(t){super(),this[0]=t}}class Ln extends h{constructor(t){super(),this.selector=t}}let In=class extends h{};window&&window.customElements&&window.customElements.define("lustre-fragment",class extends HTMLElement{constructor(){super()}});function Ke(e,t,n){let r,s=[{prev:e,next:t,parent:e.parentNode}];for(;s.length;){let{prev:i,next:u,parent:o}=s.pop();for(;u.subtree!==void 0;)u=u.subtree();if(u.content!==void 0)if(i)if(i.nodeType===Node.TEXT_NODE)i.textContent!==u.content&&(i.textContent=u.content),r??(r=i);else{const c=document.createTextNode(u.content);o.replaceChild(c,i),r??(r=c)}else{const c=document.createTextNode(u.content);o.appendChild(c),r??(r=c)}else if(u.tag!==void 0){const c=Fn({prev:i,next:u,dispatch:n,stack:s});i?i!==c&&o.replaceChild(c,i):o.appendChild(c),r??(r=c)}}return r}function Fn({prev:e,next:t,dispatch:n,stack:r}){var De;const s=t.namespace||"http://www.w3.org/1999/xhtml",i=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),u=i?e:s?document.createElementNS(s,t.tag):document.createElement(t.tag);let o;if(v.has(u))o=v.get(u);else{const a=new Map;v.set(u,a),o=a}const c=i?new Set(o.keys()):null,l=i?new Set(Array.from(e.attributes,a=>a.name)):null;let p=null,g=null,x=null;if(i&&t.tag==="textarea"){const a=(De=t.children[Symbol.iterator]().next().value)==null?void 0:De.content;a!==void 0&&(u.value=a)}const W=[];for(const a of t.attrs){const d=a[0],w=a[1];if(a.as_property)u[d]!==w&&(u[d]=w),i&&l.delete(d);else if(d.startsWith("on")){const L=d.slice(2),fe=n(w,L==="input");o.has(L)||u.addEventListener(L,J),o.set(L,fe),i&&c.delete(L)}else if(d.startsWith("data-lustre-on-")){const L=d.slice(15),fe=n(Dn);o.has(L)||u.addEventListener(L,J),o.set(L,fe),u.setAttribute(d,w)}else d.startsWith("delegate:data-")||d.startsWith("delegate:aria-")?(u.setAttribute(d,w),W.push([d.slice(10),w])):d==="class"?p=p===null?w:p+" "+w:d==="style"?g=g===null?w:g+w:d==="dangerous-unescaped-html"?x=w:(u.getAttribute(d)!==w&&u.setAttribute(d,w),(d==="value"||d==="selected")&&(u[d]=w),i&&l.delete(d))}if(p!==null&&(u.setAttribute("class",p),i&&l.delete("class")),g!==null&&(u.setAttribute("style",g),i&&l.delete("style")),i){for(const a of l)u.removeAttribute(a);for(const a of c)o.delete(a),u.removeEventListener(a,J)}if(t.tag==="slot"&&window.queueMicrotask(()=>{for(const a of u.assignedElements())for(const[d,w]of W)a.hasAttribute(d)||a.setAttribute(d,w)}),t.key!==void 0&&t.key!=="")u.setAttribute("data-lustre-key",t.key);else if(x!==null)return u.innerHTML=x,u;let E=u.firstChild,Le=null,Ie=null,Fe=null,ce=ne(t).next().value;if(i&&ce!==void 0&&ce.key!==void 0&&ce.key!==""){Le=new Set,Ie=Ye(e),Fe=Ye(t);for(const a of ne(t))E=qn(E,a,u,r,Fe,Ie,Le)}else for(const a of ne(t))r.unshift({prev:E,next:a,parent:u}),E=E==null?void 0:E.nextSibling;for(;E;){const a=E.nextSibling;u.removeChild(E),E=a}return u}const v=new WeakMap;function J(e){const t=e.currentTarget;if(!v.has(t)){t.removeEventListener(e.type,J);return}const n=v.get(t);if(!n.has(e.type)){t.removeEventListener(e.type,J);return}n.get(e.type)(e)}function Dn(e){const t=e.currentTarget,n=t.getAttribute(`data-lustre-on-${e.type}`),r=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),s=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":s.push("target.value");break}return{tag:n,data:s.reduce((i,u)=>{var c;const o=u.split(".");for(let l=0,p=i,g=e;l<o.length;l++)l===o.length-1?p[o[l]]=g[o[l]]:(p[c=o[l]]??(p[c]={}),g=g[o[l]],p=p[o[l]]);return i},{data:r})}}function Ye(e){var n;const t=new Map;if(e)for(const r of ne(e)){const s=(r==null?void 0:r.key)||((n=r==null?void 0:r.getAttribute)==null?void 0:n.call(r,"data-lustre-key"));s&&t.set(s,r)}return t}function qn(e,t,n,r,s,i,u){for(;e&&!s.has(e.getAttribute("data-lustre-key"));){const c=e.nextSibling;n.removeChild(e),e=c}if(i.size===0)return r.unshift({prev:e,next:t,parent:n}),e=e==null?void 0:e.nextSibling,e;if(u.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),r.unshift({prev:null,next:t,parent:n}),e;u.add(t.key);const o=i.get(t.key);if(!o&&!e)return r.unshift({prev:null,next:t,parent:n}),e;if(!o&&e!==null){const c=document.createTextNode("");return n.insertBefore(c,e),r.unshift({prev:c,next:t,parent:n}),e}return!o||o===e?(r.unshift({prev:e,next:t,parent:n}),e=e==null?void 0:e.nextSibling,e):(n.insertBefore(o,e),r.unshift({prev:o,next:t,parent:n}),e)}function*ne(e){for(const t of e.children)yield*ut(t)}function*ut(e){e.subtree!==void 0?yield*ut(e.subtree()):yield e}var k,G,R,I,S,F,re,_e;const Me=class Me{constructor(t,[n,r],s,i){q(this,F);Be(this,"root");q(this,k);q(this,G);q(this,R);q(this,I,[]);q(this,S);this.root=t,y(this,k,n),y(this,G,s),y(this,R,i),y(this,S,window.requestAnimationFrame(()=>K(this,F,re).call(this,r.all.toArray(),!0)))}static start({init:t,update:n,view:r},s,i){if(!ot())return new M(new In);const u=s instanceof HTMLElement?s:document.querySelector(s);if(!u)return new M(new Ln(s));const o=new Me(u,t(i),n,r);return new A(c=>o.send(c))}send(t){if(t instanceof jn){if(t[0]instanceof Mn){y(this,S,window.cancelAnimationFrame(m(this,S))),y(this,I,[]),y(this,k,t[0][0]);const n=m(this,R).call(this,m(this,k)),r=(i,u=!1)=>o=>{const c=i(o);c instanceof A&&this.send(new te(c[0],u))},s=this.root.firstChild??this.root.appendChild(document.createTextNode(""));Ke(s,n,r)}}else if(t instanceof te){const n=t[0],r=t[1]??!1;m(this,I).push(n),r?(y(this,S,window.cancelAnimationFrame(m(this,S))),K(this,F,re).call(this)):m(this,S)||y(this,S,window.requestAnimationFrame(()=>K(this,F,re).call(this)))}else if(t instanceof Tn){const n=t[0],r=t[1];this.root.dispatchEvent(new CustomEvent(n,{detail:r,bubbles:!0,composed:!0}))}else if(t instanceof zn)for(y(this,S,window.cancelAnimationFrame(m(this,S))),y(this,k,null),y(this,G,null),y(this,R,null),y(this,I,null);this.root.firstChild;)this.root.firstChild.remove()}};k=new WeakMap,G=new WeakMap,R=new WeakMap,I=new WeakMap,S=new WeakMap,F=new WeakSet,re=function(t=[],n=!1){if(y(this,S,void 0),!K(this,F,_e).call(this,t,n))return;const r=m(this,R).call(this,m(this,k)),s=(u,o=!1)=>c=>{const l=u(c);l instanceof A&&this.send(new te(l[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));Ke(i,r,s)},_e=function(t=[],n=!1){for(;m(this,I).length>0;){const r=m(this,I).shift(),[s,i]=m(this,G).call(this,m(this,k),r);n||(n=m(this,k)!==s),t=t.concat(i.all.toArray()),y(this,k,s)}for(;t.length>0;){const r=t.shift(),s=c=>this.send(new te(c)),i=(c,l)=>this.root.dispatchEvent(new CustomEvent(c,{detail:l,bubbles:!0,composed:!0})),u=()=>{},o=this.root;r({dispatch:s,emit:i,select:u,root:o})}return m(this,I).length>0?K(this,F,_e).call(this,t,n):n};let ge=Me;const Bn=ge.start,ot=()=>globalThis.window&&window.document,Un=e=>e.preventDefault();class Cn extends h{constructor(t,n,r,s){super(),this.init=t,this.update=n,this.view=r,this.on_attribute_change=s}}class Rn extends h{}function Pn(e,t,n){return new Cn(e,t,n,new ye)}function Hn(e,t,n){return xn(!ot(),new M(new Rn),()=>Bn(e,t,n))}function X(e,t){return new it(e,t,!1)}function Wn(e){return X("class",e)}function Kn(e){return X("id",e)}function ct(e){return X("type",e)}function ft(e){return X("value",e)}function Yn(e){return X("for",e)}function he(e){return X("href",e)}class Gn extends h{constructor(t){super(),this.all=t}}function se(){return new Gn(f([]))}function Xn(e,t,n){return new b("","",e,t,n,!1,!1)}function vn(e){return Xn("lustre-fragment",f([$n(f([["display","contents"]]))]),e)}function Y(e){return kn(e)}function Jn(e,t){return U("footer",e,t)}function Vn(e,t){return U("header",e,t)}function Zn(e,t){return U("nav",e,t)}function Qn(e,t){return U("div",e,t)}function pe(e,t){return U("a",e,t)}function er(e,t){return U("form",e,t)}function lt(e){return U("input",e,f([]))}function tr(e,t){return U("label",e,t)}function at(e,t){return Nn(e,t)}function nr(e){let t=e;return Re("target",Re("value",et))(t)}function rr(e){return at("input",t=>{let n=nr(t);return Je(n,e)})}function sr(e){return at("submit",t=>(Un(t),new A(e)))}class ie extends h{constructor(t,n,r){super(),this.url_to_shorten=t,this.url_shortened=n,this.submitted=r}}class dt extends h{constructor(t){super(),this[0]=t}}class ht extends h{constructor(t){super(),this[0]=t}}class ir extends h{}function ur(e){let t=new ie("","",!1),n=se();return[t,n]}function or(e,t){let n=An(t);if(n instanceof dt){let r=n[0],s=new ie(r,e.url_shortened,e.submitted),i=se();return[s,i]}else if(n instanceof ht){let r=n[0],s=new ie(e.url_to_shorten,r,e.submitted),i=se();return[s,i]}else{let r=new ie(e.url_to_shorten,e.url_shortened,!0),s=se();return[r,s]}}function Ge(e,t,n,r){return vn(f([tr(f([Yn(e)]),f([Y(t)])),lt(f([Kn(e),ct("text"),ft(n),rr(r)]))]))}function cr(e){return er(f([Wn("url_shortener__form")]),f([Y("Url shortener"),Ge("url_to_shorten","Original",e.url_to_shorten,t=>new dt(t)),Ge("url_shortened","Short",e.url_shortened,t=>new ht(t)),lt(f([sr(new ir),ct("submit"),ft("Submit")]))]))}function fr(e){let t=cr(e);return Qn(f([]),f([Vn(f([]),f([Zn(f([]),f([pe(f([he("/")]),f([Y("Go home")])),pe(f([he("/dbg")]),f([Y("Go to debug")])),pe(f([he("/url")]),f([Y("Go to url shortener")]))]))])),t,Jn(f([]),f([Y("Footer")]))]))}function lr(){let e=Pn(ur,or,fr),t=Hn(e,"#app",void 0);if(!t.isOk())throw kt("assignment_no_match","client",24,"main","Assignment pattern did not match",{value:t})}lr();
