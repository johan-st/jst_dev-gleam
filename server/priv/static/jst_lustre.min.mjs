var a=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},R=class{static fromArray(t,r){let n=r||new $e;for(let i=t.length-1;i>=0;--i)n=new ue(t[i],n);return n}[Symbol.iterator](){return new _t(this)}toArray(){return[...this]}atLeastLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return r!==void 0}hasLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return t===-1&&r instanceof $e}countLength(){let t=this,r=0;for(;t;)t=t.tail,r++;return r-1}};function p(e,t){return new ue(e,t)}function u(e,t){return R.fromArray(e,t)}var _t=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof $e)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},$e=class extends R{},ue=class extends R{constructor(t,r){super(),this.head=t,this.tail=r}},we=class{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,r,n){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=r??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=n??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return _e(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;let r=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<r;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;let n=this.bitSize%8;if(n){let i=8-n;if(this.rawBuffer[r]>>i!==t.rawBuffer[r]>>i)return!1}}else{for(let i=0;i<r;i++){let s=_e(this.rawBuffer,this.bitOffset,i),o=_e(t.rawBuffer,t.bitOffset,i);if(s!==o)return!1}let n=this.bitSize%8;if(n){let i=_e(this.rawBuffer,this.bitOffset,r),s=_e(t.rawBuffer,t.bitOffset,r),o=8-n;if(i>>o!==s>>o)return!1}}return!0}get buffer(){if(rr("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(rr("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}};function _e(e,t,r){if(t===0)return e[r]??0;{let n=e[r]<<t&255,i=e[r+1]>>8-t;return n|i}}var tr={};function rr(e,t){tr[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),tr[e]=!0)}var xe=class e extends a{static isResult(t){return t instanceof e}},x=class extends xe{constructor(t){super(),this[0]=t}isOk(){return!0}},$=class extends xe{constructor(t){super(),this[0]=t}isOk(){return!1}};function y(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!nr(n)||!nr(i)||!cn(n,i)||nn(n,i)||sn(n,i)||on(n,i)||ln(n,i)||un(n,i)||fn(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[l,f]=rn(n);for(let c of l(n))r.push(f(n,c),f(i,c))}return!0}function rn(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function nn(e,t){return e instanceof Date&&(e>t||e<t)}function sn(e,t){return!(e instanceof we)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function on(e,t){return Array.isArray(e)&&e.length!==t.length}function ln(e,t){return e instanceof Map&&e.size!==t.size}function un(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function fn(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function nr(e){return typeof e=="object"&&e!==null}function cn(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function Fe(e,t,r,n,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=r,o.function=n,o.fn=n;for(let l in s)o[l]=s[l];return o}var L=class extends a{constructor(t){super(),this[0]=t}},O=class extends a{};var B=class extends a{},I=class extends a{},N=class extends a{};function Re(e,t){return e===t?new I:e<t?new B:new N}var v=class extends a{},J=class extends a{};function ye(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=p(i,n)}}}function A(e){return ye(e,u([]))}function $n(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return A(s);{let o=n.head,l=n.tail,f,c=i(o);if(c.isOk()){let m=c[0];f=p(m,s)}else f=s;let d=f;e=l,t=i,r=d}}}function Ge(e,t){return $n(e,t,u([]))}function wn(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return A(s);{let o=n.head;e=n.tail,t=i,r=p(i(o),s)}}}function H(e,t){return wn(e,t,u([]))}function fe(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return i;{let o=n.head;e=n.tail,t=s(i,o),r=s}}}function xn(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(i.hasLength(0))return s;{let f=i.head;e=i.tail,t=o(s,f,l),r=o,n=l+1}}}function wt(e,t,r){return xn(e,t,r,0)}function gn(e,t,r,n,i,s){for(;;){let o=e,l=t,f=r,c=n,d=i,m=s,_=p(d,f);if(o.hasLength(0))return c instanceof v?p(A(_),m):p(_,m);{let k=o.head,b=o.tail,ee=l(d,k);if(ee instanceof N&&c instanceof J)e=b,t=l,r=_,n=c,i=k,s=m;else if(ee instanceof B&&c instanceof v)e=b,t=l,r=_,n=c,i=k,s=m;else if(ee instanceof I&&c instanceof v)e=b,t=l,r=_,n=c,i=k,s=m;else if(ee instanceof N&&c instanceof v){let T;c instanceof v?T=p(A(_),m):T=p(_,m);let P=T;if(b.hasLength(0))return p(u([k]),P);{let U=b.head,w=b.tail,h,g=l(k,U);g instanceof B?h=new v:g instanceof I?h=new v:h=new J;let E=h;e=w,t=l,r=u([k]),n=E,i=U,s=P}}else if(ee instanceof B&&c instanceof J){let T;c instanceof v?T=p(A(_),m):T=p(_,m);let P=T;if(b.hasLength(0))return p(u([k]),P);{let U=b.head,w=b.tail,h,g=l(k,U);g instanceof B?h=new v:g instanceof I?h=new v:h=new J;let E=h;e=w,t=l,r=u([k]),n=E,i=U,s=P}}else{let T;c instanceof v?T=p(A(_),m):T=p(_,m);let P=T;if(b.hasLength(0))return p(u([k]),P);{let U=b.head,w=b.tail,h,g=l(k,U);g instanceof B?h=new v:g instanceof I?h=new v:h=new J;let E=h;e=w,t=l,r=u([k]),n=E,i=U,s=P}}}}}function yn(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(i.hasLength(0))return ye(s,l);if(s.hasLength(0))return ye(i,l);{let f=i.head,c=i.tail,d=s.head,m=s.tail,_=o(f,d);_ instanceof B?(e=c,t=s,r=o,n=p(f,l)):_ instanceof N?(e=i,t=m,r=o,n=p(d,l)):(e=i,t=m,r=o,n=p(d,l))}}}function bn(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return A(s);if(n.hasLength(1)){let o=n.head;return A(p(A(o),s))}else{let o=n.head,l=n.tail.head,f=n.tail.tail,c=yn(o,l,i,u([]));e=f,t=i,r=p(c,s)}}}function kn(e,t,r,n){for(;;){let i=e,s=t,o=r,l=n;if(i.hasLength(0))return ye(s,l);if(s.hasLength(0))return ye(i,l);{let f=i.head,c=i.tail,d=s.head,m=s.tail,_=o(f,d);_ instanceof B?(e=i,t=m,r=o,n=p(d,l)):_ instanceof N?(e=c,t=s,r=o,n=p(f,l)):(e=c,t=s,r=o,n=p(f,l))}}}function On(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return A(s);if(n.hasLength(1)){let o=n.head;return A(p(A(o),s))}else{let o=n.head,l=n.tail.head,f=n.tail.tail,c=kn(o,l,i,u([]));e=f,t=i,r=p(c,s)}}}function Ln(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return u([]);if(n.hasLength(1)&&i instanceof v)return n.head;if(n.hasLength(1)&&i instanceof J){let o=n.head;return A(o)}else i instanceof v?(e=bn(n,s,u([])),t=new J,r=s):(e=On(n,s,u([])),t=new v,r=s)}}function xt(e,t){if(e.hasLength(0))return u([]);if(e.hasLength(1)){let r=e.head;return u([r])}else{let r=e.head,n=e.tail.head,i=e.tail.tail,s,o=t(r,n);o instanceof B?s=new v:o instanceof I?s=new v:s=new J;let l=s,f=gn(i,t,u([r]),l,n,u([]));return Ln(f,new v,t)}}function En(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return s;{let o=n.head;e=n.tail,t=i,r=s+i+o}}}function Je(e,t){if(e.hasLength(0))return"";{let r=e.head,n=e.tail;return En(n,t,r)}}function kt(e,t){for(;;){let r=e,n=t;if(n>0){let s=ur(r);if(s.isOk())e=s[0][1],t=n-1;else return r}else return r}}function Ot(e,t){if(t==="")return yt(e);{let n=e,i=bt(n,t);return H(i,S)}}var fr=new WeakMap,vt=new DataView(new ArrayBuffer(8)),St=0;function At(e){let t=fr.get(e);if(t!==void 0)return t;let r=St++;return St===2147483647&&(St=0),fr.set(e,r),r}function jt(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function Et(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function ar(e){vt.setFloat64(0,e);let t=vt.getInt32(0),r=vt.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function Dn(e){return Et(e.toString())}function Fn(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return At(e);if(e instanceof Date)return ar(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+D(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+D(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+jt(D(n),D(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+jt(D(o),Et(s))|0}}return r}function D(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return ar(e);case"string":return Et(e);case"bigint":return Dn(e);case"object":return Fn(e);case"symbol":return At(e);case"function":return At(e);default:return 0}}var K=5,zt=Math.pow(2,K),Pn=zt-1,Rn=zt/2,Hn=zt/4,q=0,Y=1,W=2,oe=3,Ct={type:W,bitmap:0,array:[]};function ve(e,t){return e>>>t&Pn}function Ze(e,t){return 1<<ve(e,t)}function Gn(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function qt(e,t){return Gn(e&t-1)}function F(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function Vn(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function Bt(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function pr(e,t,r,n,i,s){let o=D(t);if(o===n)return{type:oe,hash:o,array:[{type:q,k:t,v:r},{type:q,k:i,v:s}]};let l={val:!1};return Se(Tt(Ct,e,o,t,r,l),e,n,i,s,l)}function Se(e,t,r,n,i,s){switch(e.type){case Y:return Jn(e,t,r,n,i,s);case W:return Tt(e,t,r,n,i,s);case oe:return Yn(e,t,r,n,i,s)}}function Jn(e,t,r,n,i,s){let o=ve(r,t),l=e.array[o];if(l===void 0)return s.val=!0,{type:Y,size:e.size+1,array:F(e.array,o,{type:q,k:n,v:i})};if(l.type===q)return y(n,l.k)?i===l.v?e:{type:Y,size:e.size,array:F(e.array,o,{type:q,k:n,v:i})}:(s.val=!0,{type:Y,size:e.size,array:F(e.array,o,pr(t+K,l.k,l.v,r,n,i))});let f=Se(l,t+K,r,n,i,s);return f===l?e:{type:Y,size:e.size,array:F(e.array,o,f)}}function Tt(e,t,r,n,i,s){let o=Ze(r,t),l=qt(e.bitmap,o);if((e.bitmap&o)!==0){let f=e.array[l];if(f.type!==q){let d=Se(f,t+K,r,n,i,s);return d===f?e:{type:W,bitmap:e.bitmap,array:F(e.array,l,d)}}let c=f.k;return y(n,c)?i===f.v?e:{type:W,bitmap:e.bitmap,array:F(e.array,l,{type:q,k:n,v:i})}:(s.val=!0,{type:W,bitmap:e.bitmap,array:F(e.array,l,pr(t+K,c,f.v,r,n,i))})}else{let f=e.array.length;if(f>=Rn){let c=new Array(32),d=ve(r,t);c[d]=Tt(Ct,t+K,r,n,i,s);let m=0,_=e.bitmap;for(let k=0;k<32;k++){if((_&1)!==0){let b=e.array[m++];c[k]=b}_=_>>>1}return{type:Y,size:f+1,array:c}}else{let c=Vn(e.array,l,{type:q,k:n,v:i});return s.val=!0,{type:W,bitmap:e.bitmap|o,array:c}}}}function Yn(e,t,r,n,i,s){if(r===e.hash){let o=It(e,n);if(o!==-1)return e.array[o].v===i?e:{type:oe,hash:r,array:F(e.array,o,{type:q,k:n,v:i})};let l=e.array.length;return s.val=!0,{type:oe,hash:r,array:F(e.array,l,{type:q,k:n,v:i})}}return Se({type:W,bitmap:Ze(e.hash,t),array:[e]},t,r,n,i,s)}function It(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(y(t,e.array[n].k))return n;return-1}function Xe(e,t,r,n){switch(e.type){case Y:return Kn(e,t,r,n);case W:return Xn(e,t,r,n);case oe:return Zn(e,n)}}function Kn(e,t,r,n){let i=ve(r,t),s=e.array[i];if(s!==void 0){if(s.type!==q)return Xe(s,t+K,r,n);if(y(n,s.k))return s}}function Xn(e,t,r,n){let i=Ze(r,t);if((e.bitmap&i)===0)return;let s=qt(e.bitmap,i),o=e.array[s];if(o.type!==q)return Xe(o,t+K,r,n);if(y(n,o.k))return o}function Zn(e,t){let r=It(e,t);if(!(r<0))return e.array[r]}function Nt(e,t,r,n){switch(e.type){case Y:return Qn(e,t,r,n);case W:return ei(e,t,r,n);case oe:return ti(e,n)}}function Qn(e,t,r,n){let i=ve(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===q){if(!y(s.k,n))return e}else if(o=Nt(s,t+K,r,n),o===s)return e;if(o===void 0){if(e.size<=Hn){let l=e.array,f=new Array(e.size-1),c=0,d=0,m=0;for(;c<i;){let _=l[c];_!==void 0&&(f[d]=_,m|=1<<c,++d),++c}for(++c;c<l.length;){let _=l[c];_!==void 0&&(f[d]=_,m|=1<<c,++d),++c}return{type:W,bitmap:m,array:f}}return{type:Y,size:e.size-1,array:F(e.array,i,o)}}return{type:Y,size:e.size,array:F(e.array,i,o)}}function ei(e,t,r,n){let i=Ze(r,t);if((e.bitmap&i)===0)return e;let s=qt(e.bitmap,i),o=e.array[s];if(o.type!==q){let l=Nt(o,t+K,r,n);return l===o?e:l!==void 0?{type:W,bitmap:e.bitmap,array:F(e.array,s,l)}:e.bitmap===i?void 0:{type:W,bitmap:e.bitmap^i,array:Bt(e.array,s)}}return y(n,o.k)?e.bitmap===i?void 0:{type:W,bitmap:e.bitmap^i,array:Bt(e.array,s)}:e}function ti(e,t){let r=It(e,t);if(r<0)return e;if(e.array.length!==1)return{type:oe,hash:e.hash,array:Bt(e.array,r)}}function dr(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===q){t(s.v,s.k);continue}dr(s,t)}}}var ae=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=Xe(this.root,0,D(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?Ct:this.root,s=Se(i,0,D(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=Nt(this.root,0,D(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:Xe(this.root,0,D(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){dr(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+jt(D(r),D(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((r,n)=>{if(!y(t.get(n,!r),r))throw cr}),!0}catch(r){if(r===cr)return!1;throw r}}},cr=Symbol();var Wt=void 0,hr={};function S(e){return e}function He(e){return/^[-+]?(\d+)$/.test(e)?new x(parseInt(e)):new $(Wt)}function V(e){return e.toString()}function yt(e){let t=_r(e);return t?R.fromArray(Array.from(t).map(r=>r.segment)):R.fromArray(e.match(/./gsu))}var mr;function _r(e){if(globalThis.Intl&&Intl.Segmenter)return mr||=new Intl.Segmenter,mr.segment(e)[Symbol.iterator]()}function ur(e){let t,r=_r(e);return r?t=r.next().value?.segment:t=e.match(/./su)?.[0],t?new x([t,e.slice(t.length)]):new $(Wt)}function bt(e,t){return R.fromArray(e.split(t))}var $r=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),Mo=new RegExp(`^[${$r}]*`),Uo=new RegExp(`[${$r}]*$`);function G(){return ae.new()}function Le(e){return R.fromArray(e.entries())}function ce(e,t){let r=e.get(t,hr);return r===hr?new $(Wt):new x(r)}function wr(e,t,r){return r.set(e,t)}function ie(e,t,r){return wr(t,r,e)}function ni(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head[0],s=r.head[1];e=r.tail,t=ie(n,i,s)}}}function Ve(e){return ni(e,G())}function xr(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=p(i,n)}}}function ii(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return xr(n,u([]));{let i=r.head[0];e=r.tail,t=p(i,n)}}}function Mt(e){return ii(Le(e),u([]))}function si(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return xr(n,u([]));{let i=r.head[1];e=r.tail,t=p(i,n)}}}function gt(e){let t=Le(e);return si(t,u([]))}var Ae=class extends a{constructor(t,r,n,i,s,o,l){super(),this.scheme=t,this.userinfo=r,this.host=n,this.port=i,this.path=s,this.query=o,this.fragment=l}};function oi(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return A(n);{let i=r.head,s=r.tail,o;i===""||i==="."?o=n:i===".."&&n.hasLength(0)?o=u([]):i===".."&&n.atLeastLength(1)?o=n.tail:o=p(i,n);let l=o;e=s,t=l}}}function li(e){return oi(e,u([]))}function gr(e){return li(Ot(e,"/"))}function je(e,t,r){return e?t:r()}var Qe=class extends a{constructor(t){super(),this.all=t}};function br(e){return new Qe(u([t=>e(t.dispatch,t.emit,t.select,t.root)]))}function kr(e){return br((t,r,n,i)=>e(t))}function Pt(){return new Qe(u([]))}var pe=class extends a{constructor(t){super(),this.content=t}},j=class extends a{constructor(t,r,n,i,s,o,l){super(),this.key=t,this.namespace=r,this.tag=n,this.attrs=i,this.children=s,this.self_closing=o,this.void=l}},Be=class extends a{constructor(t){super(),this.subtree=t}},de=class extends a{constructor(t,r,n){super(),this[0]=t,this[1]=r,this.as_property=n}};function $i(e){if(e instanceof de)return new $(void 0);{let t=e[0],r=e[1],n=kt(t,2);return new x([n,r])}}function wi(e,t,r){return wt(e,t,(n,i,s)=>{let o=r+"-"+V(s);return Or(i,n,o)})}function Or(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof pe)return i;if(n instanceof Be){let o=n.subtree;e=o(),t=i,r=s}else{let o=n.attrs,l=n.children,f=fe(o,i,(c,d)=>{let m=$i(d);if(m.isOk()){let _=m[0][0],k=m[0][1];return ie(c,s+"-"+_,k)}else return c});return wi(l,f,s)}}}function Lr(e){return Or(e,G(),"0")}function Rt(e,t){return new de(e,t,!1)}function z(e){return Rt("class",e)}function Sr(e){return Rt("class",(()=>{let r=Ge(e,n=>n[1]?new x(n[0]):new $(void 0));return Je(r," ")})())}function Ar(e){return Rt("href",e)}function M(e,t,r){return e==="area"?new j("","",e,t,u([]),!1,!0):e==="base"?new j("","",e,t,u([]),!1,!0):e==="br"?new j("","",e,t,u([]),!1,!0):e==="col"?new j("","",e,t,u([]),!1,!0):e==="embed"?new j("","",e,t,u([]),!1,!0):e==="hr"?new j("","",e,t,u([]),!1,!0):e==="img"?new j("","",e,t,u([]),!1,!0):e==="input"?new j("","",e,t,u([]),!1,!0):e==="link"?new j("","",e,t,u([]),!1,!0):e==="meta"?new j("","",e,t,u([]),!1,!0):e==="param"?new j("","",e,t,u([]),!1,!0):e==="source"?new j("","",e,t,u([]),!1,!0):e==="track"?new j("","",e,t,u([]),!1,!0):e==="wbr"?new j("","",e,t,u([]),!1,!0):new j("","",e,t,r,!1,!1)}function Br(e){return new pe(e)}var Ht=class extends a{constructor(t){super(),this.dict=t}};function Er(){return new Ht(G())}var tt=class extends a{constructor(t){super(),this[0]=t}},rt=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}},nt=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}};function zr(e){return y(e.created,G())&&y(e.removed,Er())&&y(e.updated,G())}var it=class extends a{constructor(t){super(),this[0]=t}},st=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}},Ee=class extends a{constructor(t){super(),this[0]=t}},X=class extends a{constructor(t){super(),this[0]=t}},ze=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}},ot=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}};var Ce=class extends a{},lt=class extends a{constructor(t,r){super(),this[0]=t,this[1]=r}},ut=class extends a{constructor(t){super(),this[0]=t}},ft=class extends a{constructor(t){super(),this[0]=t}};globalThis.customElements&&!globalThis.customElements.get("lustre-fragment")&&globalThis.customElements.define("lustre-fragment",class extends HTMLElement{constructor(){super()}});function Gt(e,t,r){let n,i=[{prev:e,next:t,parent:e.parentNode}];for(;i.length;){let{prev:s,next:o,parent:l}=i.pop();for(;o.subtree!==void 0;)o=o.subtree();if(o.content!==void 0)if(s)if(s.nodeType===Node.TEXT_NODE)s.textContent!==o.content&&(s.textContent=o.content),n??=s;else{let f=document.createTextNode(o.content);l.replaceChild(f,s),n??=f}else{let f=document.createTextNode(o.content);l.appendChild(f),n??=f}else if(o.tag!==void 0){let f=Li({prev:s,next:o,dispatch:r,stack:i});s?s!==f&&l.replaceChild(f,s):l.appendChild(f),n??=f}}return n}function Li({prev:e,next:t,dispatch:r,stack:n}){let i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),o=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag),l;if(qe.has(o))l=qe.get(o);else{let w=new Map;qe.set(o,w),l=w}let f=s?new Set(l.keys()):null,c=s?new Set(Array.from(e.attributes,w=>w.name)):null,d=null,m=null,_=null;if(s&&t.tag==="textarea"){let w=t.children[Symbol.iterator]().next().value?.content;w!==void 0&&(o.value=w)}let k=[];for(let w of t.attrs){let h=w[0],g=w[1];if(w.as_property)o[h]!==g&&(o[h]=g),s&&c.delete(h);else if(h.startsWith("on")){let E=h.slice(2),mt=r(g,E==="input");l.has(E)||o.addEventListener(E,Te),l.set(E,mt),s&&f.delete(E)}else if(h.startsWith("data-lustre-on-")){let E=h.slice(15),mt=r(vi);l.has(E)||o.addEventListener(E,Te),l.set(E,mt),o.setAttribute(h,g),s&&(f.delete(E),c.delete(h))}else h.startsWith("delegate:data-")||h.startsWith("delegate:aria-")?(o.setAttribute(h,g),k.push([h.slice(10),g])):h==="class"?d=d===null?g:d+" "+g:h==="style"?m=m===null?g:m+g:h==="dangerous-unescaped-html"?_=g:(o.getAttribute(h)!==g&&o.setAttribute(h,g),(h==="value"||h==="selected")&&(o[h]=g),s&&c.delete(h))}if(d!==null&&(o.setAttribute("class",d),s&&c.delete("class")),m!==null&&(o.setAttribute("style",m),s&&c.delete("style")),s){for(let w of c)o.removeAttribute(w);for(let w of f)l.delete(w),o.removeEventListener(w,Te)}if(t.tag==="slot"&&window.queueMicrotask(()=>{for(let w of o.assignedElements())for(let[h,g]of k)w.hasAttribute(h)||w.setAttribute(h,g)}),t.key!==void 0&&t.key!=="")o.setAttribute("data-lustre-key",t.key);else if(_!==null)return o.innerHTML=_,o;let b=o.firstChild,ee=null,T=null,P=null,U=ct(t).next().value;if(s&&U!==void 0&&U.key!==void 0&&U.key!==""){ee=new Set,T=Cr(e),P=Cr(t);for(let w of ct(t))b=Si(b,w,o,n,P,T,ee)}else for(let w of ct(t))n.unshift({prev:b,next:w,parent:o}),b=b?.nextSibling;for(;b;){let w=b.nextSibling;o.removeChild(b),b=w}return o}var qe=new WeakMap;function Te(e){let t=e.currentTarget;if(!qe.has(t)){t.removeEventListener(e.type,Te);return}let r=qe.get(t);if(!r.has(e.type)){t.removeEventListener(e.type,Te);return}r.get(e.type)(e)}function vi(e){let t=e.currentTarget,r=t.getAttribute(`data-lustre-on-${e.type}`),n=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:r,data:i.reduce((s,o)=>{let l=o.split(".");for(let f=0,c=s,d=e;f<l.length;f++)f===l.length-1?c[l[f]]=d[l[f]]:(c[l[f]]??={},d=d[l[f]],c=c[l[f]]);return s},{data:n})}}function Cr(e){let t=new Map;if(e)for(let r of ct(e)){let n=r?.key||r?.getAttribute?.("data-lustre-key");n&&t.set(n,r)}return t}function Si(e,t,r,n,i,s,o){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){let f=e.nextSibling;r.removeChild(e),e=f}if(s.size===0)return n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e;if(o.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),n.unshift({prev:null,next:t,parent:r}),e;o.add(t.key);let l=s.get(t.key);if(!l&&!e)return n.unshift({prev:null,next:t,parent:r}),e;if(!l&&e!==null){let f=document.createTextNode("");return r.insertBefore(f,e),n.unshift({prev:f,next:t,parent:r}),e}return!l||l===e?(n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e):(r.insertBefore(l,e),n.unshift({prev:l,next:t,parent:r}),e)}function*ct(e){for(let t of e.children)yield*qr(t)}function*qr(e){e.subtree!==void 0?yield*qr(e.subtree()):yield e}var Vt=class e{static start({init:t,update:r,view:n},i,s){if(!Ie())return new $(new Ne);let o=i instanceof HTMLElement?i:document.querySelector(i);if(!o)return new $(new at(i));let l=new e(o,t(s),r,n);return new x(f=>l.send(f))}constructor(t,[r,n],i,s){this.root=t,this.#e=r,this.#s=i,this.#r=s,this.#t=window.setTimeout(()=>this.#n(n.all.toArray(),!0),0)}root;send(t){if(t instanceof Ee){if(t[0]instanceof ft){this.#t=window.clearTimeout(this.#t),this.#i=[],this.#e=t[0][0];let r=this.#r(this.#e),n=(s,o=!1)=>l=>{let f=s(l);f instanceof x&&this.send(new X(f[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));Gt(i,r,n)}}else if(t instanceof X){let r=t[0],n=t[1]??!1;this.#i.push(r),n?(this.#t=window.clearTimeout(this.#t),this.#n()):this.#t||(this.#t=window.setTimeout(()=>this.#n()))}else if(t instanceof ze){let r=t[0],n=t[1];this.root.dispatchEvent(new CustomEvent(r,{detail:n,bubbles:!0,composed:!0}))}else if(t instanceof Ce)for(this.#t=window.clearTimeout(this.#t),this.#e=null,this.#s=null,this.#r=null,this.#i=null;this.root.firstChild;)this.root.firstChild.remove()}#e;#s;#r;#i=[];#t;#n(t=[]){this.#t=void 0,this.#o(t);let r=this.#r(this.#e),n=(s,o=!1)=>l=>{let f=s(l);f instanceof x&&this.send(new X(f[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));Gt(i,r,n)}#o(t=[]){for(;this.#i.length>0;){let r=this.#i.shift(),[n,i]=this.#s(this.#e,r);t=t.concat(i.all.toArray()),this.#e=n}for(;t.length>0;){let r=t.shift(),n=l=>this.send(new X(l)),i=(l,f)=>this.root.dispatchEvent(new CustomEvent(l,{detail:f,bubbles:!0,composed:!0})),s=()=>{},o=this.root;r({dispatch:n,emit:i,select:s,root:o})}this.#i.length>0&&this.#o(t)}},Tr=Vt.start;var Jt=class e{static start({init:t,update:r,view:n,on_attribute_change:i},s){let o=new e(t(s),r,n,i);return new x(l=>o.send(l))}constructor([t,r],n,i,s){this.#e=t,this.#s=n,this.#i=i,this.#t=i(t),this.#u=s,this.#n=new Map,this.#o=Lr(this.#t),this.#l(r.all.toArray())}send(t){if(t instanceof it){for(let r of t[0]){let n=this.#u.get(r[0]);if(!n)continue;let i=n(r[1]);i instanceof $||this.#r.push(i)}this.#l()}else if(t instanceof st)this.#r=this.#r.concat(t[0].toArray()),this.#l(t[1].all.toArray());else if(!(t instanceof Ee))if(t instanceof X)this.#r.push(t[0]),this.#l();else if(t instanceof ze){let r=new rt(t[0],t[1]);for(let[n,i]of this.#n)i(r)}else if(t instanceof ot){let r=this.#o.get(t[0]);if(!r)return;let n=r(t[1]);if(n instanceof $)return;this.#r.push(n[0]),this.#l()}else if(t instanceof lt){let r=Mt(this.#u),n=new nt(r,this.#t);this.#n=this.#n.set(t[0],t[1]),t[1](n)}else t instanceof ut&&(this.#n=this.#n.delete(t[0]))}#e;#s;#r;#i;#t;#n;#o;#u;#l(t=[]){this.#f(t);let r=this.#i(this.#e),n=elements(this.#t,r);if(!zr(n)){let i=new tt(n);for(let[s,o]of this.#n)o(i)}this.#t=r,this.#o=n.handlers}#f(t=[]){for(;this.#r.length>0;){let r=this.#r.shift(),[n,i]=this.#s(this.#e,r);t=t.concat(i.all.toArray()),this.#e=n}for(;t.length>0;)t.shift()({dispatch:l=>this.send(new X(l)),emit:(l,f)=>this.root.dispatchEvent(new CustomEvent(l,{detail:f,bubbles:!0,composed:!0})),select:()=>{},root:null});this.#r.length>0&&this.#f(t)}},Ai=Jt.start,Ie=()=>globalThis.window&&window.document;var Yt=class extends a{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.on_attribute_change=i}};var at=class extends a{constructor(t){super(),this.selector=t}},Ne=class extends a{};function Ir(e,t,r){return new Yt(e,t,r,new O)}function Nr(e,t,r){return je(!Ie(),new $(new Ne),()=>Tr(e,t,r))}function Z(e){return Br(e)}function Kt(e,t){return M("article",e,t)}function Mr(e,t){return M("h1",e,t)}function Ur(e,t){return M("h2",e,t)}function Dr(e,t){return M("h3",e,t)}function Fr(e,t){return M("main",e,t)}function Pr(e,t){return M("nav",e,t)}function Rr(e,t){return M("div",e,t)}function Hr(e,t){return M("li",e,t)}function he(e,t){return M("p",e,t)}function Gr(e,t){return M("ul",e,t)}function We(e,t){return M("a",e,t)}var Bi={handle_external_links:!1,handle_internal_links:!0},Vr=window?.location?.href,Zt=()=>Vr?new x(Xt(new URL(Vr))):new $(void 0),Qt=(e,t=Bi)=>{document.addEventListener("click",r=>{let n=Jr(r.target);if(n)try{let i=new URL(n.href),s=Xt(i),o=i.host!==window.location.host;return!t.handle_external_links&&o||!t.handle_internal_links&&!o?void 0:(r.preventDefault(),o||(window.history.pushState({},"",n.href),window.requestAnimationFrame(()=>{i.hash&&document.getElementById(i.hash.slice(1))?.scrollIntoView()})),e(s))}catch{return}}),window.addEventListener("popstate",r=>{r.preventDefault();let n=new URL(window.location.href),i=Xt(n);window.requestAnimationFrame(()=>{n.hash&&document.getElementById(n.hash.slice(1))?.scrollIntoView()}),e(i)}),window.addEventListener("modem-push",({detail:r})=>{e(r)}),window.addEventListener("modem-replace",({detail:r})=>{e(r)})};var Jr=e=>!e||e.tagName==="BODY"?null:e.tagName==="A"?e:Jr(e.parentElement),Xt=e=>new Ae(e.protocol?new L(e.protocol.slice(0,-1)):new O,new O,e.hostname?new L(e.hostname):new O,e.port?new L(Number(e.port)):new O,e.pathname,e.search?new L(e.search.slice(1)):new O,e.hash?new L(e.hash.slice(1)):new O);function Yr(e){return kr(t=>je(!Ie(),void 0,()=>Qt(r=>{let i=e(r);return t(i)})))}var pt=class extends a{constructor(t,r){super(),this.posts=t,this.route=r}},Me=class extends a{constructor(t,r,n,i){super(),this.id=t,this.title=r,this.summary=n,this.text=i}},ne=class extends a{},Q=class extends a{},le=class extends a{constructor(t){super(),this.id=t}},me=class extends a{},dt=class extends a{constructor(t){super(),this.uri=t}},er=class extends a{constructor(t){super(),this.route=t}};function Kr(e){let t=gr(e.path);if(t.hasLength(0))return new ne;if(t.hasLength(1)&&t.head==="")return new ne;if(t.hasLength(1)&&t.head==="posts")return new Q;if(t.hasLength(2)&&t.head==="post"){let r=t.tail.head,n=He(r);if(n.isOk()){let i=n[0];return new le(i)}else return new dt(e)}else return t.hasLength(1)&&t.head==="about"?new me:new dt(e)}function ht(e){let t;if(e instanceof ne)t="/";else if(e instanceof me)t="/about";else if(e instanceof Q)t="/posts";else if(e instanceof le){let n=e.id;t="/post/"+V(n)}else t="/404";return Ar(t)}function zi(e,t){{let r=t.route;return[(()=>{let n=e;return new pt(n.posts,r)})(),Pt()]}}function Xr(e,t,r){let n;return t instanceof le&&e instanceof Q?n=!0:n=y(t,e),Hr(u([Sr(u([["border-transparent border-b-2 hover:border-purple-600",!0],["text-purple-600",n]]))]),u([We(u([ht(e)]),u([Z(r)]))]))}function De(e){return Ur(u([z("text-3xl text-purple-800 font-light")]),u([Z(e)]))}function Ci(e){let t,r=e.posts,n=gt(r),i=xt(n,(o,l)=>Re(o.id,l.id));t=H(i,o=>Kt(u([z("mt-14")]),u([Dr(u([z("text-xl text-purple-600 font-light")]),u([We(u([z("hover:underline"),ht(new le(o.id))]),u([Z(o.title)]))])),he(u([z("mt-1")]),u([Z(o.summary)]))])));let s=t;return p(De("Posts"),s)}function Zr(e){return he(u([z("mt-8 text-lg")]),u([Z(e)]))}function Ue(e){return he(u([z("mt-14")]),u([Z(e)]))}function qi(){return u([De("Me"),Ue(`I document the odd occurrences that catch my attention and rewrite my own
       narrative along the way. I'm fine being referred to with pronouns.`),Ue(`If you enjoy these glimpses into my mind, feel free to come back
       semi-regularly. But not too regularly, you creep.`)])}function Qr(){return u([De("Not found"),Ue(`You glimpse into the void and see -- nothing?
       Well that was somewhat expected.`)])}function en(e,t){return We(u([ht(e),z("text-purple-600 hover:underline cursor-pointer")]),u([Z(t)]))}function Ti(){return u([De("Hello, Joe"),Zr(`Or whoever you may be! This is were I will share random ramblings
       and thoughts about life.`),he(u([z("mt-14")]),u([Z("There is not much going on at the moment, but you can still "),en(new Q,"read my ramblings ->")])),Ue("If you like <3")])}function Ii(e,t){let r=ce(e.posts,t);if(r.isOk()){let n=r[0];return u([Kt(u([]),u([De(n.title),Zr(n.summary),Ue(n.text)])),he(u([z("mt-14")]),u([en(new Q,"<- Go back?")]))])}else return Qr()}function Ni(e){return Rr(u([z("mx-auto max-w-2xl px-32")]),u([Pr(u([z("flex justify-between items-center my-16")]),u([Mr(u([z("text-purple-600 font-medium text-xl")]),u([We(u([ht(new ne)]),u([Z("My little Blog")]))])),Gr(u([z("flex space-x-8")]),u([Xr(new Q,e.route,"Posts"),Xr(new me,e.route,"About")]))])),Fr(u([z("my-16")]),(()=>{let t=e.route;if(t instanceof ne)return Ti();if(t instanceof Q)return Ci(e);if(t instanceof le){let r=t.id;return Ii(e,r)}else return t instanceof me?qi():Qr()})())]))}var Wi=u([new Me(1,"The Empty Chair","A guide to uninvited furniture and its temporal implications",`
      There's an empty chair in my home that wasn't there yesterday. When I sit
      in it, I start to remember things that haven't happened yet. The chair is
      getting closer to my bedroom each night, though I never caught it move.
      Last night, I dreamt it was watching me sleep. This morning, it offered
      me coffee.
    `),new Me(2,"The Library of Unwritten Books","Warning: Reading this may shorten your narrative arc",`
      Between the shelves in the public library exists a thin space where
      books that were never written somehow exist. Their pages change when you
      blink. Forms shifting to match the souls blueprint. Librarians warn
      against reading the final chapter of any unwritten book \u2013 those who do
      find their own stories mysteriously concluding. Yourself is just another
      draft to be rewritten.
    `),new Me(3,"The Hum","A frequency analysis of the collective forgetting",`
      The citywide hum started Tuesday. Not everyone can hear it, but those who
      can't are slowly being replaced by perfect copies who smile too widely.
      The hum isn't sound \u2013 it's the universe forgetting our coordinates.
      Reports suggest humming back in harmony might postpone whatever comes
      next. Or perhaps accelerate it.
    `)]);function Mi(e){let t,r=Zt();if(r.isOk()){let d=r[0];t=Kr(d)}else t=new ne;let n=t,i,o=H(Wi,d=>[d.id,d]);i=Ve(o);let l=i,f=new pt(l,n),c=Yr(d=>{let _=Kr(d);return new er(_)});return[f,c]}function tn(){let e=Ir(Mi,zi,Ni),t=Nr(e,"#app",void 0);if(!t.isOk())throw Fe("let_assert","jst_lustre",22,"main","Pattern match failed, no pattern matched the value.",{value:t})}tn();
