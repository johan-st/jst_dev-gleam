var St=Object.defineProperty;var Je=e=>{throw TypeError(e)};var kt=(e,t,n)=>t in e?St(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ve=(e,t,n)=>kt(e,typeof t!="symbol"?t+"":t,n),we=(e,t,n)=>t.has(e)||Je("Cannot "+n);var g=(e,t,n)=>(we(e,t,"read from private field"),n?n.call(e):t.get(e)),q=(e,t,n)=>t.has(e)?Je("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),w=(e,t,n,r)=>(we(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),C=(e,t,n)=>(we(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();class y{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}}class D{static fromArray(t,n){let r=n||new ct;for(let i=t.length-1;i>=0;--i)r=new ft(t[i],r);return r}[Symbol.iterator](){return new Tt(this)}toArray(){return[...this]}atLeastLength(t){for(let n of this){if(t<=0)return!0;t--}return t<=0}hasLength(t){for(let n of this){if(t<=0)return!1;t--}return t===0}countLength(){let t=0;for(let n of this)t++;return t}}function H(e,t){return new ft(e,t)}function f(e,t){return D.fromArray(e,t)}var R;class Tt{constructor(t){q(this,R);w(this,R,t)}next(){if(g(this,R)instanceof ct)return{done:!0};{let{head:t,tail:n}=g(this,R);return w(this,R,n),{value:t,done:!1}}}}R=new WeakMap;class ct extends D{}class ft extends D{constructor(t,n){super(),this.head=t,this.tail=n}}class ce{constructor(t){if(!(t instanceof Uint8Array))throw"BitArray can only be constructed from a Uint8Array";this.buffer=t}get length(){return this.buffer.length}byteAt(t){return this.buffer[t]}floatFromSlice(t,n,r){return Lt(this.buffer,t,n,r)}intFromSlice(t,n,r,i){return vt(this.buffer,t,n,r,i)}binaryFromSlice(t,n){return new ce(this.buffer.slice(t,n))}sliceAfter(t){return new ce(this.buffer.slice(t))}}function vt(e,t,n,r,i){let s=0;if(r)for(let u=t;u<n;u++)s=s*256+e[u];else for(let u=n-1;u>=t;u--)s=s*256+e[u];if(i){const l=2**((n-t)*8-1);s>=l&&(s-=l*2)}return s}function Lt(e,t,n,r){const i=new DataView(e.buffer),s=n-t;if(s===8)return i.getFloat64(t,!r);if(s===4)return i.getFloat32(t,!r);{const u=`Sized floats must be 32-bit or 64-bit on JavaScript, got size of ${s*8} bits`;throw new globalThis.Error(u)}}class ee extends y{static isResult(t){return t instanceof ee}}class h extends ee{constructor(t){super(),this[0]=t}isOk(){return!0}}class m extends ee{constructor(t){super(),this[0]=t}isOk(){return!1}}function B(e,t){let n=[e,t];for(;n.length;){let r=n.pop(),i=n.pop();if(r===i)continue;if(!Ge(r)||!Ge(i)||!Bt(r,i)||Mt(r,i)||It(r,i)||Ft(r,i)||qt(r,i)||jt(r,i)||Dt(r,i))return!1;const u=Object.getPrototypeOf(r);if(u!==null&&typeof u.equals=="function")try{if(r.equals(i))continue;return!1}catch{}let[l,c]=zt(r);for(let o of l(r))n.push(c(r,o),c(i,o))}return!0}function zt(e){if(e instanceof Map)return[t=>t.keys(),(t,n)=>t.get(n)];{let t=e instanceof globalThis.Error?["message"]:[];return[n=>[...t,...Object.keys(n)],(n,r)=>n[r]]}}function Mt(e,t){return e instanceof Date&&(e>t||e<t)}function It(e,t){return e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((n,r)=>n===t[r]))}function Ft(e,t){return Array.isArray(e)&&e.length!==t.length}function qt(e,t){return e instanceof Map&&e.size!==t.size}function jt(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(n=>!t.has(n)))}function Dt(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function Ge(e){return typeof e=="object"&&e!==null}function Bt(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(r=>e instanceof r)?!1:e.constructor===t.constructor}function J(e,t,n,r,i,s){let u=new globalThis.Error(i);u.gleam_error=e,u.module=t,u.line=n,u.fn=r;for(let l in s)u[l]=s[l];return u}function Rt(e,t,n){return e?t:n()}class Te extends y{constructor(t){super(),this[0]=t}}class _e extends y{}function Pt(e,t){if(e instanceof Te){let n=e[0];return new h(n)}else return new m(t)}function Ut(e,t){for(;;){let n=e,r=t;if(n.atLeastLength(1))e=n.tail,t=r+1;else return r}}function Wt(e){return Ut(e,0)}function Ht(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head;e=n.tail,t=H(i,r)}}}function ve(e){return Ht(e,f([]))}function Kt(e){if(e.hasLength(0))return new m(void 0);{let t=e.head;return new h(t)}}function Ct(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return ve(s);{let u=r.head;e=r.tail,t=i,n=H(i(u),s)}}}function ot(e,t){return Ct(e,t,f([]))}function Yt(e,t,n,r){for(;;){let i=e,s=t,u=n,l=r;if(i.hasLength(0))return ve(l);{let c=i.head,o=i.tail,d=H(s(c,u),l);e=o,t=s,n=u+1,r=d}}}function Xt(e,t){return Yt(e,t,0,f([]))}function Jt(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return new h(ve(s));{let u=r.head,l=r.tail,c=i(u);if(c.isOk()){let o=c[0];e=l,t=i,n=H(o,s)}else{let o=c[0];return new m(o)}}}}function Vt(e,t){return Jt(e,t,f([]))}function Gt(e,t){for(;;){let n=e,r=t;if(r<=0)return n;if(n.hasLength(0))return f([]);e=n.tail,t=r-1}}function Qt(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return i;{let u=r.head;e=r.tail,t=s(i,u),n=s}}}function Zt(e,t){if(e.isOk()){let n=e[0];return new h(t(n))}else{let n=e[0];return new m(n)}}function en(e,t){if(e.isOk()){let n=e[0];return new h(n)}else{let n=e[0];return new m(t(n))}}function U(e,t){if(e.isOk()){let n=e[0];return t(n)}else{let n=e[0];return new m(n)}}function xe(e,t){return U(e,t)}function tn(e,t){if(e.isOk()){let n=e[0];return new h(n)}else return new m(t)}function at(e){return An(e)}function ht(e){return e}class X extends y{constructor(t,n,r){super(),this.expected=t,this.found=n,this.path=r}}function Ae(e){return new h(e)}function Le(e){return bt(e)}function nn(e){return Nn(e)}function rn(e){return kn(e)}function Qe(e,t){let n=e===1?"":"s",r=(()=>{let i=f(["Tuple of at least ",j(e)," element",n]),s=at(i),u=ht(s);return new X(u,Le(t),f([]))})();return new m(f([r]))}function ze(e){return t=>{if(e.hasLength(0))return new m(f([new X("another type",Le(t),f([]))]));{let n=e.head,r=e.tail,i=n(t);if(i.isOk()){let s=i[0];return new h(s)}else return ze(r)(t)}}}function Me(e,t){let n=t,r=ze(f([dt,s=>Zt(nn(s),j)])),i=(()=>{let s=r(n);if(s.isOk())return s[0];{let u=f(["<",Le(n),">"]),l=at(u);return ht(l)}})();return e.withFields({path:H(i,e.path)})}function sn(e){return t=>U(rn(t),n=>{let i=Vt(n,e);return Ie(i,s=>Me(s,"*"))})}function Ie(e,t){return en(e,n=>ot(n,t))}function dt(e){return _t(e)}function fe(e,t){return n=>{let r=new X("field","nothing",f([]));return U(Tn(n,e),i=>{let u=Pt(i,f([r])),l=U(u,t);return Ie(l,c=>Me(c,e))})}}function un(e,t){return n=>U(Sn(n),r=>{let i=En(r);return U(e>=0?e<i?tt(r,e):Qe(e+1,n):rt(e)<=i?tt(r,i+e):Qe(rt(e),n),s=>{let u=t(s);return Ie(u,l=>Me(l,e))})})}const Ze=new WeakMap,ge=new DataView(new ArrayBuffer(8));let be=0;function Ee(e){const t=Ze.get(e);if(t!==void 0)return t;const n=be++;return be===2147483647&&(be=0),Ze.set(e,n),n}function $e(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function Fe(e){let t=0;const n=e.length;for(let r=0;r<n;r++)t=Math.imul(31,t)+e.charCodeAt(r)|0;return t}function pt(e){ge.setFloat64(0,e);const t=ge.getInt32(0),n=ge.getInt32(4);return Math.imul(73244475,t>>16^t)^n}function ln(e){return Fe(e.toString())}function cn(e){const t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{const r=e.hashCode(e);if(typeof r=="number")return r}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return Ee(e);if(e instanceof Date)return pt(e.getTime());let n=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let r=0;r<e.length;r++)n=Math.imul(31,n)+S(e[r])|0;else if(e instanceof Set)e.forEach(r=>{n=n+S(r)|0});else if(e instanceof Map)e.forEach((r,i)=>{n=n+$e(S(r),S(i))|0});else{const r=Object.keys(e);for(let i=0;i<r.length;i++){const s=r[i],u=e[s];n=n+$e(S(u),Fe(s))|0}}return n}function S(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return pt(e);case"string":return Fe(e);case"bigint":return ln(e);case"object":return cn(e);case"symbol":return Ee(e);case"function":return Ee(e);default:return 0}}const z=5,qe=Math.pow(2,z),fn=qe-1,on=qe/2,an=qe/4,A=0,L=1,N=2,W=3,je={type:N,bitmap:0,array:[]};function te(e,t){return e>>>t&fn}function he(e,t){return 1<<te(e,t)}function hn(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function De(e,t){return hn(e&t-1)}function k(e,t,n){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=e[s];return i[t]=n,i}function dn(e,t,n){const r=e.length,i=new Array(r+1);let s=0,u=0;for(;s<t;)i[u++]=e[s++];for(i[u++]=n;s<r;)i[u++]=e[s++];return i}function Oe(e,t){const n=e.length,r=new Array(n-1);let i=0,s=0;for(;i<t;)r[s++]=e[i++];for(++i;i<n;)r[s++]=e[i++];return r}function yt(e,t,n,r,i,s){const u=S(t);if(u===r)return{type:W,hash:u,array:[{type:A,k:t,v:n},{type:A,k:i,v:s}]};const l={val:!1};return ne(Be(je,e,u,t,n,l),e,r,i,s,l)}function ne(e,t,n,r,i,s){switch(e.type){case L:return pn(e,t,n,r,i,s);case N:return Be(e,t,n,r,i,s);case W:return yn(e,t,n,r,i,s)}}function pn(e,t,n,r,i,s){const u=te(n,t),l=e.array[u];if(l===void 0)return s.val=!0,{type:L,size:e.size+1,array:k(e.array,u,{type:A,k:r,v:i})};if(l.type===A)return B(r,l.k)?i===l.v?e:{type:L,size:e.size,array:k(e.array,u,{type:A,k:r,v:i})}:(s.val=!0,{type:L,size:e.size,array:k(e.array,u,yt(t+z,l.k,l.v,n,r,i))});const c=ne(l,t+z,n,r,i,s);return c===l?e:{type:L,size:e.size,array:k(e.array,u,c)}}function Be(e,t,n,r,i,s){const u=he(n,t),l=De(e.bitmap,u);if(e.bitmap&u){const c=e.array[l];if(c.type!==A){const d=ne(c,t+z,n,r,i,s);return d===c?e:{type:N,bitmap:e.bitmap,array:k(e.array,l,d)}}const o=c.k;return B(r,o)?i===c.v?e:{type:N,bitmap:e.bitmap,array:k(e.array,l,{type:A,k:r,v:i})}:(s.val=!0,{type:N,bitmap:e.bitmap,array:k(e.array,l,yt(t+z,o,c.v,n,r,i))})}else{const c=e.array.length;if(c>=on){const o=new Array(32),d=te(n,t);o[d]=Be(je,t+z,n,r,i,s);let x=0,E=e.bitmap;for(let K=0;K<32;K++){if(E&1){const $=e.array[x++];o[K]=$}E=E>>>1}return{type:L,size:c+1,array:o}}else{const o=dn(e.array,l,{type:A,k:r,v:i});return s.val=!0,{type:N,bitmap:e.bitmap|u,array:o}}}}function yn(e,t,n,r,i,s){if(n===e.hash){const u=Re(e,r);if(u!==-1)return e.array[u].v===i?e:{type:W,hash:n,array:k(e.array,u,{type:A,k:r,v:i})};const l=e.array.length;return s.val=!0,{type:W,hash:n,array:k(e.array,l,{type:A,k:r,v:i})}}return ne({type:N,bitmap:he(e.hash,t),array:[e]},t,n,r,i,s)}function Re(e,t){const n=e.array.length;for(let r=0;r<n;r++)if(B(t,e.array[r].k))return r;return-1}function oe(e,t,n,r){switch(e.type){case L:return mn(e,t,n,r);case N:return wn(e,t,n,r);case W:return gn(e,r)}}function mn(e,t,n,r){const i=te(n,t),s=e.array[i];if(s!==void 0){if(s.type!==A)return oe(s,t+z,n,r);if(B(r,s.k))return s}}function wn(e,t,n,r){const i=he(n,t);if(!(e.bitmap&i))return;const s=De(e.bitmap,i),u=e.array[s];if(u.type!==A)return oe(u,t+z,n,r);if(B(r,u.k))return u}function gn(e,t){const n=Re(e,t);if(!(n<0))return e.array[n]}function Pe(e,t,n,r){switch(e.type){case L:return bn(e,t,n,r);case N:return _n(e,t,n,r);case W:return xn(e,r)}}function bn(e,t,n,r){const i=te(n,t),s=e.array[i];if(s===void 0)return e;let u;if(s.type===A){if(!B(s.k,r))return e}else if(u=Pe(s,t+z,n,r),u===s)return e;if(u===void 0){if(e.size<=an){const l=e.array,c=new Array(e.size-1);let o=0,d=0,x=0;for(;o<i;){const E=l[o];E!==void 0&&(c[d]=E,x|=1<<o,++d),++o}for(++o;o<l.length;){const E=l[o];E!==void 0&&(c[d]=E,x|=1<<o,++d),++o}return{type:N,bitmap:x,array:c}}return{type:L,size:e.size-1,array:k(e.array,i,u)}}return{type:L,size:e.size,array:k(e.array,i,u)}}function _n(e,t,n,r){const i=he(n,t);if(!(e.bitmap&i))return e;const s=De(e.bitmap,i),u=e.array[s];if(u.type!==A){const l=Pe(u,t+z,n,r);return l===u?e:l!==void 0?{type:N,bitmap:e.bitmap,array:k(e.array,s,l)}:e.bitmap===i?void 0:{type:N,bitmap:e.bitmap^i,array:Oe(e.array,s)}}return B(r,u.k)?e.bitmap===i?void 0:{type:N,bitmap:e.bitmap^i,array:Oe(e.array,s)}:e}function xn(e,t){const n=Re(e,t);if(n<0)return e;if(e.array.length!==1)return{type:W,hash:e.hash,array:Oe(e.array,n)}}function mt(e,t){if(e===void 0)return;const n=e.array,r=n.length;for(let i=0;i<r;i++){const s=n[i];if(s!==void 0){if(s.type===A){t(s.v,s.k);continue}mt(s,t)}}}class v{static fromObject(t){const n=Object.keys(t);let r=v.new();for(let i=0;i<n.length;i++){const s=n[i];r=r.set(s,t[s])}return r}static fromMap(t){let n=v.new();return t.forEach((r,i)=>{n=n.set(i,r)}),n}static new(){return new v(void 0,0)}constructor(t,n){this.root=t,this.size=n}get(t,n){if(this.root===void 0)return n;const r=oe(this.root,0,S(t),t);return r===void 0?n:r.v}set(t,n){const r={val:!1},i=this.root===void 0?je:this.root,s=ne(i,0,S(t),t,n,r);return s===this.root?this:new v(s,r.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;const n=Pe(this.root,0,S(t),t);return n===this.root?this:n===void 0?v.new():new v(n,this.size-1)}has(t){return this.root===void 0?!1:oe(this.root,0,S(t),t)!==void 0}entries(){if(this.root===void 0)return[];const t=[];return this.forEach((n,r)=>t.push([r,n])),t}forEach(t){mt(this.root,t)}hashCode(){let t=0;return this.forEach((n,r)=>{t=t+$e(S(n),S(r))|0}),t}equals(t){if(!(t instanceof v)||this.size!==t.size)return!1;let n=!0;return this.forEach((r,i)=>{n=n&&B(t.get(i,!r),r)}),n}}const Ue=void 0,et={};function wt(e){return/^[-+]?(\d+)$/.test(e)?new h(parseInt(e)):new m(Ue)}function gt(e){return e.toString()}function An(e){let t="";for(const n of e)t=t+n;return t}function En(e){return e.length}function $n(e,t){const n=e.get(t,et);return n===et?new m(Ue):new h(n)}function bt(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof ee)return"Result";if(e instanceof D)return"List";if(e instanceof ce)return"BitArray";if(e instanceof v)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{const t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function re(e,t){return On(e,bt(t))}function On(e,t){return new m(D.fromArray([new X(e,t,D.fromArray([]))]))}function _t(e){return typeof e=="string"?new h(e):re("String",e)}function Nn(e){return Number.isInteger(e)?new h(e):re("Int",e)}function Sn(e){return Array.isArray(e)?new h(e):re("Tuple",e)}function tt(e,t){return t>=0&&e.length>t?new h(e[t]):new m(Ue)}function kn(e){return Array.isArray(e)?new h(D.fromArray(e)):e instanceof D?new h(e):re("List",e)}function Tn(e,t){const n=()=>re("Dict",e);if(e instanceof v||e instanceof WeakMap||e instanceof Map){const r=$n(e,t);return new h(r.isOk()?new Te(r[0]):new _e)}else return e===null?n():Object.getPrototypeOf(e)==Object.prototype?nt(e,t,()=>new h(new _e)):nt(e,t,n)}function nt(e,t,n){try{return t in e?new h(new Te(e[t])):n()}catch{return n()}}function rt(e){return e>=0?e:e*-1}function vn(e){return wt(e)}function j(e){return gt(e)}function Ln(e,t){return n=>U(sn(Ae)(n),r=>{if(e>=0){let u=Gt(r,e),l=Kt(u),c=tn(l,f([new X("A list with at least"+j(e+1)+"elements","A list with"+j(Wt(r))+"elements",f([j(e)]))]));return xe(c,t)}else return new m(f([new X("An 'index' decoder with a non-negative index",j(e),f([]))]))})}function zn(e,t){return ze(f([un(e,t),fe(j(e),t),Ln(e,t)]))}function Ne(e,t,n){if(e.hasLength(0))return t(n);{let r=e.head,i=e.tail,s=vn(r);if(s.isOk()){let u=s[0],l=n,c=zn(u,Ae)(l);return xe(c,o=>Ne(i,t,o))}else{let u=n,l=fe(r,Ae)(u);return xe(l,c=>Ne(i,t,c))}}}function Mn(e,t){return n=>Ne(e,t,n)}function In(e){return _t(e)}function Fn(e){return wt(e)}function qn(e){return gt(e)}function jn(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head;e=n.tail,t=H(i,r)}}}function Dn(e){return jn(e,f([]))}function Bn(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return Dn(s);{let u=r.head;e=r.tail,t=i,n=H(i(u),s)}}}function Rn(e,t){return Bn(e,t,f([]))}function xt(e,t){if(e.isOk()){let n=e[0];return new h(t(n))}else{let n=e[0];return new m(n)}}function Pn(e,t){if(e.isOk()){let n=e[0];return new h(n)}else{let n=e[0];return new m(t(n))}}function Un(e,t){if(e.isOk()){let n=e[0];return t(n)}else{let n=e[0];return new m(n)}}function Wn(e,t){return Un(e,t)}function Hn(e){return Pn(e,t=>{})}function Kn(e,t){if(e.isOk()){let n=e[0];return new h(n)}else return new m(t)}class Cn extends y{constructor(t){super(),this.content=t}}class b extends y{constructor(t,n,r,i,s,u,l){super(),this.key=t,this.namespace=n,this.tag=r,this.attrs=i,this.children=s,this.self_closing=u,this.void=l}}let it=class extends y{constructor(t){super(),this.subtree=t}};class st extends y{constructor(t,n){super(),this.elements=t,this.key=n}}class Yn extends y{constructor(t,n,r){super(),this[0]=t,this[1]=n,this.as_property=r}}class Xn extends y{constructor(t,n){super(),this[0]=t,this[1]=n}}function Jn(e,t){return new Xn("on"+e,t)}function de(e,t,n){return e==="area"?new b("","",e,t,f([]),!1,!0):e==="base"?new b("","",e,t,f([]),!1,!0):e==="br"?new b("","",e,t,f([]),!1,!0):e==="col"?new b("","",e,t,f([]),!1,!0):e==="embed"?new b("","",e,t,f([]),!1,!0):e==="hr"?new b("","",e,t,f([]),!1,!0):e==="img"?new b("","",e,t,f([]),!1,!0):e==="input"?new b("","",e,t,f([]),!1,!0):e==="link"?new b("","",e,t,f([]),!1,!0):e==="meta"?new b("","",e,t,f([]),!1,!0):e==="param"?new b("","",e,t,f([]),!1,!0):e==="source"?new b("","",e,t,f([]),!1,!0):e==="track"?new b("","",e,t,f([]),!1,!0):e==="wbr"?new b("","",e,t,f([]),!1,!0):new b("","",e,t,n,!1,!1)}function Vn(e){return new Cn(e)}class Gn extends y{constructor(t){super(),this[0]=t}}class ie extends y{constructor(t){super(),this[0]=t}}class Qn extends y{constructor(t,n){super(),this[0]=t,this[1]=n}}class Zn extends y{}class er extends y{constructor(t){super(),this[0]=t}}class tr extends y{constructor(t){super(),this.selector=t}}let nr=class extends y{};function ut(e,t,n){let r,i=[{prev:e,next:t,parent:e.parentNode}];for(;i.length;){let{prev:s,next:u,parent:l}=i.pop();for(;u.subtree!==void 0;)u=u.subtree();if(u.content!==void 0)if(s)if(s.nodeType===Node.TEXT_NODE)s.textContent!==u.content&&(s.textContent=u.content),r??(r=s);else{const c=document.createTextNode(u.content);l.replaceChild(c,s),r??(r=c)}else{const c=document.createTextNode(u.content);l.appendChild(c),r??(r=c)}else if(u.tag!==void 0){const c=rr({prev:s,next:u,dispatch:n,stack:i});s?s!==c&&l.replaceChild(c,s):l.appendChild(c),r??(r=c)}else if(u.elements!==void 0)for(const c of ae(u))i.unshift({prev:s,next:c,parent:l}),s=s==null?void 0:s.nextSibling}return r}function rr({prev:e,next:t,dispatch:n,stack:r}){var Xe;const i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),u=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag);let l;if(V.has(u))l=V.get(u);else{const a=new Map;V.set(u,a),l=a}const c=s?new Set(l.keys()):null,o=s?new Set(Array.from(e.attributes,a=>a.name)):null;let d=null,x=null,E=null;if(s&&t.tag==="textarea"){const a=(Xe=t.children[Symbol.iterator]().next().value)==null?void 0:Xe.content;a!==void 0&&(u.value=a)}const K=[];for(const a of t.attrs){const p=a[0],_=a[1];if(a.as_property)u[p]!==_&&(u[p]=_),s&&o.delete(p);else if(p.startsWith("on")){const M=p.slice(2),me=n(_,M==="input");l.has(M)||u.addEventListener(M,G),l.set(M,me),s&&c.delete(M)}else if(p.startsWith("data-lustre-on-")){const M=p.slice(15),me=n(ir);l.has(M)||u.addEventListener(M,G),l.set(M,me),u.setAttribute(p,_)}else p.startsWith("delegate:data-")||p.startsWith("delegate:aria-")?(u.setAttribute(p,_),K.push([p.slice(10),_])):p==="class"?d=d===null?_:d+" "+_:p==="style"?x=x===null?_:x+_:p==="dangerous-unescaped-html"?E=_:(u.getAttribute(p)!==_&&u.setAttribute(p,_),(p==="value"||p==="selected")&&(u[p]=_),s&&o.delete(p))}if(d!==null&&(u.setAttribute("class",d),s&&o.delete("class")),x!==null&&(u.setAttribute("style",x),s&&o.delete("style")),s){for(const a of o)u.removeAttribute(a);for(const a of c)l.delete(a),u.removeEventListener(a,G)}if(t.tag==="slot"&&window.queueMicrotask(()=>{for(const a of u.assignedElements())for(const[p,_]of K)a.hasAttribute(p)||a.setAttribute(p,_)}),t.key!==void 0&&t.key!=="")u.setAttribute("data-lustre-key",t.key);else if(E!==null)return u.innerHTML=E,u;let $=u.firstChild,Ke=null,Ce=null,Ye=null,ye=se(t).next().value;if(s&&ye!==void 0&&ye.key!==void 0&&ye.key!==""){Ke=new Set,Ce=lt(e),Ye=lt(t);for(const a of se(t))$=sr($,a,u,r,Ye,Ce,Ke)}else for(const a of se(t))r.unshift({prev:$,next:a,parent:u}),$=$==null?void 0:$.nextSibling;for(;$;){const a=$.nextSibling;u.removeChild($),$=a}return u}const V=new WeakMap;function G(e){const t=e.currentTarget;if(!V.has(t)){t.removeEventListener(e.type,G);return}const n=V.get(t);if(!n.has(e.type)){t.removeEventListener(e.type,G);return}n.get(e.type)(e)}function ir(e){const t=e.currentTarget,n=t.getAttribute(`data-lustre-on-${e.type}`),r=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:n,data:i.reduce((s,u)=>{var c;const l=u.split(".");for(let o=0,d=s,x=e;o<l.length;o++)o===l.length-1?d[l[o]]=x[l[o]]:(d[c=l[o]]??(d[c]={}),x=x[l[o]],d=d[l[o]]);return s},{data:r})}}function lt(e){var n;const t=new Map;if(e)for(const r of se(e)){const i=(r==null?void 0:r.key)||((n=r==null?void 0:r.getAttribute)==null?void 0:n.call(r,"data-lustre-key"));i&&t.set(i,r)}return t}function sr(e,t,n,r,i,s,u){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){const c=e.nextSibling;n.removeChild(e),e=c}if(s.size===0)return r.unshift({prev:e,next:t,parent:n}),e=e==null?void 0:e.nextSibling,e;if(u.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),r.unshift({prev:null,next:t,parent:n}),e;u.add(t.key);const l=s.get(t.key);if(!l&&!e)return r.unshift({prev:null,next:t,parent:n}),e;if(!l&&e!==null){const c=document.createTextNode("");return n.insertBefore(c,e),r.unshift({prev:c,next:t,parent:n}),e}return!l||l===e?(r.unshift({prev:e,next:t,parent:n}),e=e==null?void 0:e.nextSibling,e):(n.insertBefore(l,e),r.unshift({prev:l,next:t,parent:n}),e)}function*se(e){for(const t of e.children)yield*ae(t)}function*ae(e){if(e.elements!==void 0)for(const t of e.elements)yield*ae(t);else e.subtree!==void 0?yield*ae(e.subtree()):yield e}var T,Y,P,I,O,F,ue,ke;const He=class He{constructor(t,[n,r],i,s){q(this,F);Ve(this,"root");q(this,T);q(this,Y);q(this,P);q(this,I,[]);q(this,O);this.root=t,w(this,T,n),w(this,Y,i),w(this,P,s),w(this,O,window.requestAnimationFrame(()=>C(this,F,ue).call(this,r.all.toArray(),!0)))}static start({init:t,update:n,view:r},i,s){if(!At())return new m(new nr);const u=i instanceof HTMLElement?i:document.querySelector(i);if(!u)return new m(new tr(i));const l=new He(u,t(s),n,r);return new h(c=>l.send(c))}send(t){if(t instanceof Gn){if(t[0]instanceof er){w(this,O,window.cancelAnimationFrame(g(this,O))),w(this,I,[]),w(this,T,t[0][0]);const n=g(this,P).call(this,g(this,T)),r=(s,u=!1)=>l=>{const c=s(l);c instanceof h&&this.send(new ie(c[0],u))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));ut(i,n,r)}}else if(t instanceof ie){const n=t[0],r=t[1]??!1;g(this,I).push(n),r?(w(this,O,window.cancelAnimationFrame(g(this,O))),C(this,F,ue).call(this)):g(this,O)||w(this,O,window.requestAnimationFrame(()=>C(this,F,ue).call(this)))}else if(t instanceof Qn){const n=t[0],r=t[1];this.root.dispatchEvent(new CustomEvent(n,{detail:r,bubbles:!0,composed:!0}))}else if(t instanceof Zn)for(w(this,O,window.cancelAnimationFrame(g(this,O))),w(this,T,null),w(this,Y,null),w(this,P,null),w(this,I,null);this.root.firstChild;)this.root.firstChild.remove()}};T=new WeakMap,Y=new WeakMap,P=new WeakMap,I=new WeakMap,O=new WeakMap,F=new WeakSet,ue=function(t=[],n=!1){if(w(this,O,void 0),!C(this,F,ke).call(this,t,n))return;const r=g(this,P).call(this,g(this,T)),i=(u,l=!1)=>c=>{const o=u(c);o instanceof h&&this.send(new ie(o[0],l))},s=this.root.firstChild??this.root.appendChild(document.createTextNode(""));ut(s,r,i)},ke=function(t=[],n=!1){for(;g(this,I).length>0;){const r=g(this,I).shift(),[i,s]=g(this,Y).call(this,g(this,T),r);n||(n=g(this,T)!==i),t=t.concat(s.all.toArray()),w(this,T,i)}for(;t.length>0;)t.shift()({dispatch:l=>this.send(new ie(l)),emit:(l,c)=>this.root.dispatchEvent(new CustomEvent(l,{detail:c,bubbles:!0,composed:!0})),select:()=>{}});return g(this,I).length>0?C(this,F,ke).call(this,t,n):n};let Se=He;const ur=Se.start,At=()=>globalThis.window&&window.document;class lr extends y{constructor(t,n,r,i){super(),this.init=t,this.update=n,this.view=r,this.on_attribute_change=i}}class cr extends y{}function fr(e,t,n){return new lr(e,t,n,new _e)}function or(e,t,n){return Rt(!At(),new m(new cr),()=>ur(e,t,n))}function pe(e,t){return new Yn(e,t,!1)}function Q(e){return pe("style",Qt(e,"",(t,n)=>{let r=n[0],i=n[1];return t+r+":"+i+";"}))}function ar(e){return pe("type",e)}function hr(e){return pe("value",e)}function dr(e){return pe("min",e)}class pr extends y{constructor(t){super(),this.all=t}}function yr(){return new pr(f([]))}function le(e,t){if(e instanceof b){let n=e.namespace,r=e.tag,i=e.attrs,s=e.children,u=e.self_closing,l=e.void;return new b(t,n,r,i,s,u,l)}else if(e instanceof it){let n=e.subtree;return new it(()=>le(n(),t))}else if(e instanceof st){let r=e.elements,i=Xt(r,(s,u)=>{if(s instanceof b){let l=s.key,c=l===""?t+"-"+j(u):t+"-"+l;return le(s,c)}else return le(s,t)});return new st(i,t)}else return e}function mr(e,t){return e(ot(t,n=>{let r=n[0],i=n[1];return le(i,r)}))}function We(e){return Vn(e)}function Z(e,t){return de("div",e,t)}function wr(e,t){return de("span",e,t)}function Et(e,t){return de("button",e,t)}function $t(e){return de("input",e,f([]))}function Ot(e,t){return Jn(e,t)}function gr(e){let t=e;return fe("target",fe("value",dt))(t)}class br extends y{constructor(t){super(),this[0]=t}}class Nt extends y{constructor(t){super(),this.name=t}}class _r extends y{}class xr extends y{constructor(t,n){super(),this.name=t,this.amount=n}}function Ar(e){let t=f([]),n=yr();return[t,n]}function Er(e,t){throw t instanceof br?J("todo","client",41,"update","This has not yet been implemented",{}):t instanceof Nt?J("todo","client",42,"update","This has not yet been implemented",{}):t instanceof _r?J("todo","client",43,"update","This has not yet been implemented",{}):J("todo","client",44,"update","This has not yet been implemented",{})}function $r(){let e=t=>{let n=f(["target","previousElementSibling","value"]),r=t,i=Mn(n,In)(r);return xt(i,s=>new Nt(s))};return Z(f([]),f([$t(f([])),Et(f([Ot("click",e)]),f([We("Add")]))]))}function Or(e,t){let n=r=>{let i=gr(r),s=Hn(i),u=Wn(s,Fn),l=xt(u,c=>new xr(e,c));return Kn(l,f([]))};return Z(f([Q(f([["display","flex"],["gap","1em"]]))]),f([wr(f([Q(f([["flex","1"]]))]),f([We(e)])),$t(f([Q(f([["width","4em"]])),ar("number"),hr(qn(t)),dr("0"),Ot("input",n)]))]))}function Nr(e){let t=f([["display","flex"],["flex-direction","column-reverse"]]);return mr(n=>Z(f([Q(t)]),n),Rn(e,n=>{let r=n[0],i=n[1],s=Or(r,i);return[r,s]}))}function Sr(e){let t=f([["max-width","30ch"],["margin","0 auto"],["display","flex"],["flex-direction","column"],["gap","1em"]]);return Z(f([Q(t)]),f([Nr(e),$r(),Z(f([]),f([Et(f([]),f([We("Sync")]))]))]))}function kr(){let e=fr(Ar,Er,Sr),t=or(e,"#app",void 0);if(!t.isOk())throw J("assignment_no_match","client",15,"main","Assignment pattern did not match",{value:t})}kr();
