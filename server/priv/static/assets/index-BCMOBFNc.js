var Nt=Object.defineProperty;var Ce=e=>{throw TypeError(e)};var kt=(e,t,n)=>t in e?Nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Ye=(e,t,n)=>kt(e,typeof t!="symbol"?t+"":t,n),ye=(e,t,n)=>t.has(e)||Ce("Cannot "+n);var g=(e,t,n)=>(ye(e,t,"read from private field"),n?n.call(e):t.get(e)),q=(e,t,n)=>t.has(e)?Ce("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),m=(e,t,n,r)=>(ye(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),K=(e,t,n)=>(ye(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();class p{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}}class j{static fromArray(t,n){let r=n||new it;for(let i=t.length-1;i>=0;--i)r=new st(t[i],r);return r}[Symbol.iterator](){return new St(this)}toArray(){return[...this]}atLeastLength(t){for(let n of this){if(t<=0)return!0;t--}return t<=0}hasLength(t){for(let n of this){if(t<=0)return!1;t--}return t===0}countLength(){let t=0;for(let n of this)t++;return t}}function X(e,t){return new st(e,t)}function c(e,t){return j.fromArray(e,t)}var R;class St{constructor(t){q(this,R);m(this,R,t)}next(){if(g(this,R)instanceof it)return{done:!0};{let{head:t,tail:n}=g(this,R);return m(this,R,n),{value:t,done:!1}}}}R=new WeakMap;class it extends j{}class st extends j{constructor(t,n){super(),this.head=t,this.tail=n}}class le{constructor(t){if(!(t instanceof Uint8Array))throw"BitArray can only be constructed from a Uint8Array";this.buffer=t}get length(){return this.buffer.length}byteAt(t){return this.buffer[t]}floatFromSlice(t,n,r){return vt(this.buffer,t,n,r)}intFromSlice(t,n,r,i){return Tt(this.buffer,t,n,r,i)}binaryFromSlice(t,n){return new le(this.buffer.slice(t,n))}sliceAfter(t){return new le(this.buffer.slice(t))}}function Tt(e,t,n,r,i){let s=0;if(r)for(let u=t;u<n;u++)s=s*256+e[u];else for(let u=n-1;u>=t;u--)s=s*256+e[u];if(i){const l=2**((n-t)*8-1);s>=l&&(s-=l*2)}return s}function vt(e,t,n,r){const i=new DataView(e.buffer),s=n-t;if(s===8)return i.getFloat64(t,!r);if(s===4)return i.getFloat32(t,!r);{const u=`Sized floats must be 32-bit or 64-bit on JavaScript, got size of ${s*8} bits`;throw new globalThis.Error(u)}}class ee extends p{static isResult(t){return t instanceof ee}}class h extends ee{constructor(t){super(),this[0]=t}isOk(){return!0}}class w extends ee{constructor(t){super(),this[0]=t}isOk(){return!1}}function D(e,t){let n=[e,t];for(;n.length;){let r=n.pop(),i=n.pop();if(r===i)continue;if(!Xe(r)||!Xe(i)||!Dt(r,i)||Mt(r,i)||zt(r,i)||It(r,i)||Ft(r,i)||qt(r,i)||jt(r,i))return!1;const u=Object.getPrototypeOf(r);if(u!==null&&typeof u.equals=="function")try{if(r.equals(i))continue;return!1}catch{}let[l,o]=Lt(r);for(let f of l(r))n.push(o(r,f),o(i,f))}return!0}function Lt(e){if(e instanceof Map)return[t=>t.keys(),(t,n)=>t.get(n)];{let t=e instanceof globalThis.Error?["message"]:[];return[n=>[...t,...Object.keys(n)],(n,r)=>n[r]]}}function Mt(e,t){return e instanceof Date&&(e>t||e<t)}function zt(e,t){return e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((n,r)=>n===t[r]))}function It(e,t){return Array.isArray(e)&&e.length!==t.length}function Ft(e,t){return e instanceof Map&&e.size!==t.size}function qt(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(n=>!t.has(n)))}function jt(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function Xe(e){return typeof e=="object"&&e!==null}function Dt(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(r=>e instanceof r)?!1:e.constructor===t.constructor}function J(e,t,n,r,i,s){let u=new globalThis.Error(i);u.gleam_error=e,u.module=t,u.line=n,u.fn=r;for(let l in s)u[l]=s[l];return u}function Bt(e,t,n){return e?t:n()}class ke extends p{constructor(t){super(),this[0]=t}}class ge extends p{}function Rt(e,t){if(e instanceof ke){let n=e[0];return new h(n)}else return new w(t)}function Pt(e,t){for(;;){let n=e,r=t;if(n.atLeastLength(1))e=n.tail,t=r+1;else return r}}function Ht(e){return Pt(e,0)}function Ut(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head;e=n.tail,t=X(i,r)}}}function ut(e){return Ut(e,c([]))}function Wt(e){if(e.hasLength(0))return new w(void 0);{let t=e.head;return new h(t)}}function Kt(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return ut(s);{let u=r.head;e=r.tail,t=i,n=X(i(u),s)}}}function lt(e,t){return Kt(e,t,c([]))}function Ct(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return new h(ut(s));{let u=r.head,l=r.tail,o=i(u);if(o.isOk()){let f=o[0];e=l,t=i,n=X(f,s)}else{let f=o[0];return new w(f)}}}}function Yt(e,t){return Ct(e,t,c([]))}function Xt(e,t){for(;;){let n=e,r=t;if(r<=0)return n;if(n.hasLength(0))return c([]);e=n.tail,t=r-1}}function Jt(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return i;{let u=r.head;e=r.tail,t=s(i,u),n=s}}}function ot(e){return bn(e)}function ct(e){return e}function Vt(e,t){if(e.isOk()){let n=e[0];return new h(t(n))}else{let n=e[0];return new w(n)}}function Gt(e,t){if(e.isOk()){let n=e[0];return new h(n)}else{let n=e[0];return new w(t(n))}}function H(e,t){if(e.isOk()){let n=e[0];return t(n)}else{let n=e[0];return new w(n)}}function be(e,t){return H(e,t)}function Qt(e,t){if(e.isOk()){let n=e[0];return new h(n)}else return new w(t)}class Y extends p{constructor(t,n,r){super(),this.expected=t,this.found=n,this.path=r}}function _e(e){return new h(e)}function Se(e){return wt(e)}function Zt(e){return $n(e)}function en(e){return On(e)}function Je(e,t){let n=e===1?"":"s",r=(()=>{let i=c(["Tuple of at least ",B(e)," element",n]),s=ot(i),u=ct(s);return new Y(u,Se(t),c([]))})();return new w(c([r]))}function Te(e){return t=>{if(e.hasLength(0))return new w(c([new Y("another type",Se(t),c([]))]));{let n=e.head,r=e.tail,i=n(t);if(i.isOk()){let s=i[0];return new h(s)}else return Te(r)(t)}}}function ve(e,t){let n=t,r=Te(c([ft,s=>Vt(Zt(s),B)])),i=(()=>{let s=r(n);if(s.isOk())return s[0];{let u=c(["<",Se(n),">"]),l=ot(u);return ct(l)}})();return e.withFields({path:X(i,e.path)})}function tn(e){return t=>H(en(t),n=>{let i=Yt(n,e);return Le(i,s=>ve(s,"*"))})}function Le(e,t){return Gt(e,n=>lt(n,t))}function ft(e){return mt(e)}function oe(e,t){return n=>{let r=new Y("field","nothing",c([]));return H(Nn(n,e),i=>{let u=Rt(i,c([r])),l=H(u,t);return Le(l,o=>ve(o,e))})}}function nn(e,t){return n=>H(En(n),r=>{let i=_n(r);return H(e>=0?e<i?Qe(r,e):Je(e+1,n):et(e)<=i?Qe(r,i+e):Je(et(e),n),s=>{let u=t(s);return Le(u,l=>ve(l,e))})})}const Ve=new WeakMap,we=new DataView(new ArrayBuffer(8));let me=0;function Ae(e){const t=Ve.get(e);if(t!==void 0)return t;const n=me++;return me===2147483647&&(me=0),Ve.set(e,n),n}function xe(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function Me(e){let t=0;const n=e.length;for(let r=0;r<n;r++)t=Math.imul(31,t)+e.charCodeAt(r)|0;return t}function at(e){we.setFloat64(0,e);const t=we.getInt32(0),n=we.getInt32(4);return Math.imul(73244475,t>>16^t)^n}function rn(e){return Me(e.toString())}function sn(e){const t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{const r=e.hashCode(e);if(typeof r=="number")return r}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return Ae(e);if(e instanceof Date)return at(e.getTime());let n=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let r=0;r<e.length;r++)n=Math.imul(31,n)+k(e[r])|0;else if(e instanceof Set)e.forEach(r=>{n=n+k(r)|0});else if(e instanceof Map)e.forEach((r,i)=>{n=n+xe(k(r),k(i))|0});else{const r=Object.keys(e);for(let i=0;i<r.length;i++){const s=r[i],u=e[s];n=n+xe(k(u),Me(s))|0}}return n}function k(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return at(e);case"string":return Me(e);case"bigint":return rn(e);case"object":return sn(e);case"symbol":return Ae(e);case"function":return Ae(e);default:return 0}}const M=5,ze=Math.pow(2,M),un=ze-1,ln=ze/2,on=ze/4,x=0,L=1,N=2,U=3,Ie={type:N,bitmap:0,array:[]};function te(e,t){return e>>>t&un}function fe(e,t){return 1<<te(e,t)}function cn(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Fe(e,t){return cn(e&t-1)}function S(e,t,n){const r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=e[s];return i[t]=n,i}function fn(e,t,n){const r=e.length,i=new Array(r+1);let s=0,u=0;for(;s<t;)i[u++]=e[s++];for(i[u++]=n;s<r;)i[u++]=e[s++];return i}function $e(e,t){const n=e.length,r=new Array(n-1);let i=0,s=0;for(;i<t;)r[s++]=e[i++];for(++i;i<n;)r[s++]=e[i++];return r}function ht(e,t,n,r,i,s){const u=k(t);if(u===r)return{type:U,hash:u,array:[{type:x,k:t,v:n},{type:x,k:i,v:s}]};const l={val:!1};return ne(qe(Ie,e,u,t,n,l),e,r,i,s,l)}function ne(e,t,n,r,i,s){switch(e.type){case L:return an(e,t,n,r,i,s);case N:return qe(e,t,n,r,i,s);case U:return hn(e,t,n,r,i,s)}}function an(e,t,n,r,i,s){const u=te(n,t),l=e.array[u];if(l===void 0)return s.val=!0,{type:L,size:e.size+1,array:S(e.array,u,{type:x,k:r,v:i})};if(l.type===x)return D(r,l.k)?i===l.v?e:{type:L,size:e.size,array:S(e.array,u,{type:x,k:r,v:i})}:(s.val=!0,{type:L,size:e.size,array:S(e.array,u,ht(t+M,l.k,l.v,n,r,i))});const o=ne(l,t+M,n,r,i,s);return o===l?e:{type:L,size:e.size,array:S(e.array,u,o)}}function qe(e,t,n,r,i,s){const u=fe(n,t),l=Fe(e.bitmap,u);if(e.bitmap&u){const o=e.array[l];if(o.type!==x){const y=ne(o,t+M,n,r,i,s);return y===o?e:{type:N,bitmap:e.bitmap,array:S(e.array,l,y)}}const f=o.k;return D(r,f)?i===o.v?e:{type:N,bitmap:e.bitmap,array:S(e.array,l,{type:x,k:r,v:i})}:(s.val=!0,{type:N,bitmap:e.bitmap,array:S(e.array,l,ht(t+M,f,o.v,n,r,i))})}else{const o=e.array.length;if(o>=ln){const f=new Array(32),y=te(n,t);f[y]=qe(Ie,t+M,n,r,i,s);let A=0,$=e.bitmap;for(let W=0;W<32;W++){if($&1){const E=e.array[A++];f[W]=E}$=$>>>1}return{type:L,size:o+1,array:f}}else{const f=fn(e.array,l,{type:x,k:r,v:i});return s.val=!0,{type:N,bitmap:e.bitmap|u,array:f}}}}function hn(e,t,n,r,i,s){if(n===e.hash){const u=je(e,r);if(u!==-1)return e.array[u].v===i?e:{type:U,hash:n,array:S(e.array,u,{type:x,k:r,v:i})};const l=e.array.length;return s.val=!0,{type:U,hash:n,array:S(e.array,l,{type:x,k:r,v:i})}}return ne({type:N,bitmap:fe(e.hash,t),array:[e]},t,n,r,i,s)}function je(e,t){const n=e.array.length;for(let r=0;r<n;r++)if(D(t,e.array[r].k))return r;return-1}function ce(e,t,n,r){switch(e.type){case L:return dn(e,t,n,r);case N:return pn(e,t,n,r);case U:return yn(e,r)}}function dn(e,t,n,r){const i=te(n,t),s=e.array[i];if(s!==void 0){if(s.type!==x)return ce(s,t+M,n,r);if(D(r,s.k))return s}}function pn(e,t,n,r){const i=fe(n,t);if(!(e.bitmap&i))return;const s=Fe(e.bitmap,i),u=e.array[s];if(u.type!==x)return ce(u,t+M,n,r);if(D(r,u.k))return u}function yn(e,t){const n=je(e,t);if(!(n<0))return e.array[n]}function De(e,t,n,r){switch(e.type){case L:return wn(e,t,n,r);case N:return mn(e,t,n,r);case U:return gn(e,r)}}function wn(e,t,n,r){const i=te(n,t),s=e.array[i];if(s===void 0)return e;let u;if(s.type===x){if(!D(s.k,r))return e}else if(u=De(s,t+M,n,r),u===s)return e;if(u===void 0){if(e.size<=on){const l=e.array,o=new Array(e.size-1);let f=0,y=0,A=0;for(;f<i;){const $=l[f];$!==void 0&&(o[y]=$,A|=1<<f,++y),++f}for(++f;f<l.length;){const $=l[f];$!==void 0&&(o[y]=$,A|=1<<f,++y),++f}return{type:N,bitmap:A,array:o}}return{type:L,size:e.size-1,array:S(e.array,i,u)}}return{type:L,size:e.size,array:S(e.array,i,u)}}function mn(e,t,n,r){const i=fe(n,t);if(!(e.bitmap&i))return e;const s=Fe(e.bitmap,i),u=e.array[s];if(u.type!==x){const l=De(u,t+M,n,r);return l===u?e:l!==void 0?{type:N,bitmap:e.bitmap,array:S(e.array,s,l)}:e.bitmap===i?void 0:{type:N,bitmap:e.bitmap^i,array:$e(e.array,s)}}return D(r,u.k)?e.bitmap===i?void 0:{type:N,bitmap:e.bitmap^i,array:$e(e.array,s)}:e}function gn(e,t){const n=je(e,t);if(n<0)return e;if(e.array.length!==1)return{type:U,hash:e.hash,array:$e(e.array,n)}}function dt(e,t){if(e===void 0)return;const n=e.array,r=n.length;for(let i=0;i<r;i++){const s=n[i];if(s!==void 0){if(s.type===x){t(s.v,s.k);continue}dt(s,t)}}}class v{static fromObject(t){const n=Object.keys(t);let r=v.new();for(let i=0;i<n.length;i++){const s=n[i];r=r.set(s,t[s])}return r}static fromMap(t){let n=v.new();return t.forEach((r,i)=>{n=n.set(i,r)}),n}static new(){return new v(void 0,0)}constructor(t,n){this.root=t,this.size=n}get(t,n){if(this.root===void 0)return n;const r=ce(this.root,0,k(t),t);return r===void 0?n:r.v}set(t,n){const r={val:!1},i=this.root===void 0?Ie:this.root,s=ne(i,0,k(t),t,n,r);return s===this.root?this:new v(s,r.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;const n=De(this.root,0,k(t),t);return n===this.root?this:n===void 0?v.new():new v(n,this.size-1)}has(t){return this.root===void 0?!1:ce(this.root,0,k(t),t)!==void 0}entries(){if(this.root===void 0)return[];const t=[];return this.forEach((n,r)=>t.push([r,n])),t}forEach(t){dt(this.root,t)}hashCode(){let t=0;return this.forEach((n,r)=>{t=t+xe(k(n),k(r))|0}),t}equals(t){if(!(t instanceof v)||this.size!==t.size)return!1;let n=!0;return this.forEach((r,i)=>{n=n&&D(t.get(i,!r),r)}),n}}const Be=void 0,Ge={};function pt(e){return/^[-+]?(\d+)$/.test(e)?new h(parseInt(e)):new w(Be)}function yt(e){return e.toString()}function bn(e){let t="";for(const n of e)t=t+n;return t}function _n(e){return e.length}function An(e,t){const n=e.get(t,Ge);return n===Ge?new w(Be):new h(n)}function wt(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof ee)return"Result";if(e instanceof j)return"List";if(e instanceof le)return"BitArray";if(e instanceof v)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{const t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function re(e,t){return xn(e,wt(t))}function xn(e,t){return new w(j.fromArray([new Y(e,t,j.fromArray([]))]))}function mt(e){return typeof e=="string"?new h(e):re("String",e)}function $n(e){return Number.isInteger(e)?new h(e):re("Int",e)}function En(e){return Array.isArray(e)?new h(e):re("Tuple",e)}function Qe(e,t){return t>=0&&e.length>t?new h(e[t]):new w(Be)}function On(e){return Array.isArray(e)?new h(j.fromArray(e)):e instanceof j?new h(e):re("List",e)}function Nn(e,t){const n=()=>re("Dict",e);if(e instanceof v||e instanceof WeakMap||e instanceof Map){const r=An(e,t);return new h(r.isOk()?new ke(r[0]):new ge)}else return e===null?n():Object.getPrototypeOf(e)==Object.prototype?Ze(e,t,()=>new h(new ge)):Ze(e,t,n)}function Ze(e,t,n){try{return t in e?new h(new ke(e[t])):n()}catch{return n()}}function et(e){return e>=0?e:e*-1}function kn(e){return pt(e)}function B(e){return yt(e)}function Sn(e,t){return n=>H(tn(_e)(n),r=>{if(e>=0){let u=Xt(r,e),l=Wt(u),o=Qt(l,c([new Y("A list with at least"+B(e+1)+"elements","A list with"+B(Ht(r))+"elements",c([B(e)]))]));return be(o,t)}else return new w(c([new Y("An 'index' decoder with a non-negative index",B(e),c([]))]))})}function Tn(e,t){return Te(c([nn(e,t),oe(B(e),t),Sn(e,t)]))}function Ee(e,t,n){if(e.hasLength(0))return t(n);{let r=e.head,i=e.tail,s=kn(r);if(s.isOk()){let u=s[0],l=n,o=Tn(u,_e)(l);return be(o,f=>Ee(i,t,f))}else{let u=n,l=oe(r,_e)(u);return be(l,o=>Ee(i,t,o))}}}function vn(e,t){return n=>Ee(e,t,n)}function Ln(e){return mt(e)}function Mn(e){return pt(e)}function zn(e){return yt(e)}function In(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head;e=n.tail,t=X(i,r)}}}function Fn(e){return In(e,c([]))}function qn(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return Fn(s);{let u=r.head;e=r.tail,t=i,n=X(i(u),s)}}}function jn(e,t){return qn(e,t,c([]))}function gt(e,t){if(e.isOk()){let n=e[0];return new h(t(n))}else{let n=e[0];return new w(n)}}function Dn(e,t){if(e.isOk()){let n=e[0];return new h(n)}else{let n=e[0];return new w(t(n))}}function Bn(e,t){if(e.isOk()){let n=e[0];return t(n)}else{let n=e[0];return new w(n)}}function Rn(e,t){return Bn(e,t)}function Pn(e){return Dn(e,t=>{})}function Hn(e,t){if(e.isOk()){let n=e[0];return new h(n)}else return new w(t)}class Un extends p{constructor(t){super(),this.content=t}}class b extends p{constructor(t,n,r,i,s,u,l){super(),this.key=t,this.namespace=n,this.tag=r,this.attrs=i,this.children=s,this.self_closing=u,this.void=l}}let tt=class extends p{constructor(t){super(),this.subtree=t}};class Wn extends p{constructor(t,n,r){super(),this[0]=t,this[1]=n,this.as_property=r}}class Kn extends p{constructor(t,n){super(),this[0]=t,this[1]=n}}function Cn(e,t){return new Kn("on"+e,t)}function ae(e,t,n){return e==="area"?new b("","",e,t,c([]),!1,!0):e==="base"?new b("","",e,t,c([]),!1,!0):e==="br"?new b("","",e,t,c([]),!1,!0):e==="col"?new b("","",e,t,c([]),!1,!0):e==="embed"?new b("","",e,t,c([]),!1,!0):e==="hr"?new b("","",e,t,c([]),!1,!0):e==="img"?new b("","",e,t,c([]),!1,!0):e==="input"?new b("","",e,t,c([]),!1,!0):e==="link"?new b("","",e,t,c([]),!1,!0):e==="meta"?new b("","",e,t,c([]),!1,!0):e==="param"?new b("","",e,t,c([]),!1,!0):e==="source"?new b("","",e,t,c([]),!1,!0):e==="track"?new b("","",e,t,c([]),!1,!0):e==="wbr"?new b("","",e,t,c([]),!1,!0):new b("","",e,t,n,!1,!1)}function Yn(e){return new Un(e)}class Xn extends p{constructor(t){super(),this[0]=t}}class ie extends p{constructor(t){super(),this[0]=t}}class Jn extends p{constructor(t,n){super(),this[0]=t,this[1]=n}}class Vn extends p{}class Gn extends p{constructor(t){super(),this[0]=t}}class Qn extends p{constructor(t){super(),this.selector=t}}let Zn=class extends p{};window&&window.customElements&&window.customElements.define("lustre-fragment",class extends HTMLElement{constructor(){super()}});function nt(e,t,n){let r,i=[{prev:e,next:t,parent:e.parentNode}];for(;i.length;){let{prev:s,next:u,parent:l}=i.pop();for(;u.subtree!==void 0;)u=u.subtree();if(u.content!==void 0)if(s)if(s.nodeType===Node.TEXT_NODE)s.textContent!==u.content&&(s.textContent=u.content),r??(r=s);else{const o=document.createTextNode(u.content);l.replaceChild(o,s),r??(r=o)}else{const o=document.createTextNode(u.content);l.appendChild(o),r??(r=o)}else if(u.tag!==void 0){const o=er({prev:s,next:u,dispatch:n,stack:i});s?s!==o&&l.replaceChild(o,s):l.appendChild(o),r??(r=o)}}return r}function er({prev:e,next:t,dispatch:n,stack:r}){var Ke;const i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),u=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag);let l;if(V.has(u))l=V.get(u);else{const a=new Map;V.set(u,a),l=a}const o=s?new Set(l.keys()):null,f=s?new Set(Array.from(e.attributes,a=>a.name)):null;let y=null,A=null,$=null;if(s&&t.tag==="textarea"){const a=(Ke=t.children[Symbol.iterator]().next().value)==null?void 0:Ke.content;a!==void 0&&(u.value=a)}const W=[];for(const a of t.attrs){const d=a[0],_=a[1];if(a.as_property)u[d]!==_&&(u[d]=_),s&&f.delete(d);else if(d.startsWith("on")){const z=d.slice(2),pe=n(_,z==="input");l.has(z)||u.addEventListener(z,G),l.set(z,pe),s&&o.delete(z)}else if(d.startsWith("data-lustre-on-")){const z=d.slice(15),pe=n(tr);l.has(z)||u.addEventListener(z,G),l.set(z,pe),u.setAttribute(d,_)}else d.startsWith("delegate:data-")||d.startsWith("delegate:aria-")?(u.setAttribute(d,_),W.push([d.slice(10),_])):d==="class"?y=y===null?_:y+" "+_:d==="style"?A=A===null?_:A+_:d==="dangerous-unescaped-html"?$=_:(u.getAttribute(d)!==_&&u.setAttribute(d,_),(d==="value"||d==="selected")&&(u[d]=_),s&&f.delete(d))}if(y!==null&&(u.setAttribute("class",y),s&&f.delete("class")),A!==null&&(u.setAttribute("style",A),s&&f.delete("style")),s){for(const a of f)u.removeAttribute(a);for(const a of o)l.delete(a),u.removeEventListener(a,G)}if(t.tag==="slot"&&window.queueMicrotask(()=>{for(const a of u.assignedElements())for(const[d,_]of W)a.hasAttribute(d)||a.setAttribute(d,_)}),t.key!==void 0&&t.key!=="")u.setAttribute("data-lustre-key",t.key);else if($!==null)return u.innerHTML=$,u;let E=u.firstChild,He=null,Ue=null,We=null,de=se(t).next().value;if(s&&de!==void 0&&de.key!==void 0&&de.key!==""){He=new Set,Ue=rt(e),We=rt(t);for(const a of se(t))E=nr(E,a,u,r,We,Ue,He)}else for(const a of se(t))r.unshift({prev:E,next:a,parent:u}),E=E==null?void 0:E.nextSibling;for(;E;){const a=E.nextSibling;u.removeChild(E),E=a}return u}const V=new WeakMap;function G(e){const t=e.currentTarget;if(!V.has(t)){t.removeEventListener(e.type,G);return}const n=V.get(t);if(!n.has(e.type)){t.removeEventListener(e.type,G);return}n.get(e.type)(e)}function tr(e){const t=e.currentTarget,n=t.getAttribute(`data-lustre-on-${e.type}`),r=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:n,data:i.reduce((s,u)=>{var o;const l=u.split(".");for(let f=0,y=s,A=e;f<l.length;f++)f===l.length-1?y[l[f]]=A[l[f]]:(y[o=l[f]]??(y[o]={}),A=A[l[f]],y=y[l[f]]);return s},{data:r})}}function rt(e){var n;const t=new Map;if(e)for(const r of se(e)){const i=(r==null?void 0:r.key)||((n=r==null?void 0:r.getAttribute)==null?void 0:n.call(r,"data-lustre-key"));i&&t.set(i,r)}return t}function nr(e,t,n,r,i,s,u){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){const o=e.nextSibling;n.removeChild(e),e=o}if(s.size===0)return r.unshift({prev:e,next:t,parent:n}),e=e==null?void 0:e.nextSibling,e;if(u.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),r.unshift({prev:null,next:t,parent:n}),e;u.add(t.key);const l=s.get(t.key);if(!l&&!e)return r.unshift({prev:null,next:t,parent:n}),e;if(!l&&e!==null){const o=document.createTextNode("");return n.insertBefore(o,e),r.unshift({prev:o,next:t,parent:n}),e}return!l||l===e?(r.unshift({prev:e,next:t,parent:n}),e=e==null?void 0:e.nextSibling,e):(n.insertBefore(l,e),r.unshift({prev:l,next:t,parent:n}),e)}function*se(e){for(const t of e.children)yield*bt(t)}function*bt(e){e.subtree!==void 0?yield*bt(e.subtree()):yield e}var T,C,P,I,O,F,ue,Ne;const Pe=class Pe{constructor(t,[n,r],i,s){q(this,F);Ye(this,"root");q(this,T);q(this,C);q(this,P);q(this,I,[]);q(this,O);this.root=t,m(this,T,n),m(this,C,i),m(this,P,s),m(this,O,window.requestAnimationFrame(()=>K(this,F,ue).call(this,r.all.toArray(),!0)))}static start({init:t,update:n,view:r},i,s){if(!_t())return new w(new Zn);const u=i instanceof HTMLElement?i:document.querySelector(i);if(!u)return new w(new Qn(i));const l=new Pe(u,t(s),n,r);return new h(o=>l.send(o))}send(t){if(t instanceof Xn){if(t[0]instanceof Gn){m(this,O,window.cancelAnimationFrame(g(this,O))),m(this,I,[]),m(this,T,t[0][0]);const n=g(this,P).call(this,g(this,T)),r=(s,u=!1)=>l=>{const o=s(l);o instanceof h&&this.send(new ie(o[0],u))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));nt(i,n,r)}}else if(t instanceof ie){const n=t[0],r=t[1]??!1;g(this,I).push(n),r?(m(this,O,window.cancelAnimationFrame(g(this,O))),K(this,F,ue).call(this)):g(this,O)||m(this,O,window.requestAnimationFrame(()=>K(this,F,ue).call(this)))}else if(t instanceof Jn){const n=t[0],r=t[1];this.root.dispatchEvent(new CustomEvent(n,{detail:r,bubbles:!0,composed:!0}))}else if(t instanceof Vn)for(m(this,O,window.cancelAnimationFrame(g(this,O))),m(this,T,null),m(this,C,null),m(this,P,null),m(this,I,null);this.root.firstChild;)this.root.firstChild.remove()}};T=new WeakMap,C=new WeakMap,P=new WeakMap,I=new WeakMap,O=new WeakMap,F=new WeakSet,ue=function(t=[],n=!1){if(m(this,O,void 0),!K(this,F,Ne).call(this,t,n))return;const r=g(this,P).call(this,g(this,T)),i=(u,l=!1)=>o=>{const f=u(o);f instanceof h&&this.send(new ie(f[0],l))},s=this.root.firstChild??this.root.appendChild(document.createTextNode(""));nt(s,r,i)},Ne=function(t=[],n=!1){for(;g(this,I).length>0;){const r=g(this,I).shift(),[i,s]=g(this,C).call(this,g(this,T),r);n||(n=g(this,T)!==i),t=t.concat(s.all.toArray()),m(this,T,i)}for(;t.length>0;){const r=t.shift(),i=o=>this.send(new ie(o)),s=(o,f)=>this.root.dispatchEvent(new CustomEvent(o,{detail:f,bubbles:!0,composed:!0})),u=()=>{},l=this.root;r({dispatch:i,emit:s,select:u,root:l})}return g(this,I).length>0?K(this,F,Ne).call(this,t,n):n};let Oe=Pe;const rr=Oe.start,_t=()=>globalThis.window&&window.document;class ir extends p{constructor(t,n,r,i){super(),this.init=t,this.update=n,this.view=r,this.on_attribute_change=i}}class sr extends p{}function ur(e,t,n){return new ir(e,t,n,new ge)}function lr(e,t,n){return Bt(!_t(),new w(new sr),()=>rr(e,t,n))}function he(e,t){return new Wn(e,t,!1)}function Q(e){return he("style",Jt(e,"",(t,n)=>{let r=n[0],i=n[1];return t+r+":"+i+";"}))}function or(e){return he("type",e)}function cr(e){return he("value",e)}function fr(e){return he("min",e)}class ar extends p{constructor(t){super(),this.all=t}}function hr(){return new ar(c([]))}function At(e,t){if(e instanceof b){let n=e.namespace,r=e.tag,i=e.attrs,s=e.children,u=e.self_closing,l=e.void;return new b(t,n,r,i,s,u,l)}else if(e instanceof tt){let n=e.subtree;return new tt(()=>At(n(),t))}else return e}function dr(e,t){return e(lt(t,n=>{let r=n[0],i=n[1];return At(i,r)}))}function Re(e){return Yn(e)}function Z(e,t){return ae("div",e,t)}function pr(e,t){return ae("span",e,t)}function xt(e,t){return ae("button",e,t)}function $t(e){return ae("input",e,c([]))}function Et(e,t){return Cn(e,t)}function yr(e){let t=e;return oe("target",oe("value",ft))(t)}class wr extends p{constructor(t){super(),this[0]=t}}class Ot extends p{constructor(t){super(),this.name=t}}class mr extends p{}class gr extends p{constructor(t,n){super(),this.name=t,this.amount=n}}function br(e){let t=c([]),n=hr();return[t,n]}function _r(e,t){throw t instanceof wr?J("todo","client",39,"update","This has not yet been implemented",{}):t instanceof Ot?J("todo","client",40,"update","This has not yet been implemented",{}):t instanceof mr?J("todo","client",41,"update","This has not yet been implemented",{}):J("todo","client",42,"update","This has not yet been implemented",{})}function Ar(){let e=t=>{let n=c(["target","previousElementSibling","value"]),r=t,i=vn(n,Ln)(r);return gt(i,s=>new Ot(s))};return Z(c([]),c([$t(c([])),xt(c([Et("click",e)]),c([Re("Add")]))]))}function xr(e,t){let n=r=>{let i=yr(r),s=Pn(i),u=Rn(s,Mn),l=gt(u,o=>new gr(e,o));return Hn(l,c([]))};return Z(c([Q(c([["display","flex"],["gap","1em"]]))]),c([pr(c([Q(c([["flex","1"]]))]),c([Re(e)])),$t(c([Q(c([["width","4em"]])),or("number"),cr(zn(t)),fr("0"),Et("input",n)]))]))}function $r(e){let t=c([["display","flex"],["flex-direction","column-reverse"]]);return dr(n=>Z(c([Q(t)]),n),jn(e,n=>{let r=n[0],i=n[1],s=xr(r,i);return[r,s]}))}function Er(e){let t=c([["max-width","30ch"],["margin","0 auto"],["display","flex"],["flex-direction","column"],["gap","1em"]]);return Z(c([Q(t)]),c([$r(e),Ar(),Z(c([]),c([xt(c([]),c([Re("Sync")]))]))]))}function Or(){let e=ur(br,_r,Er),t=lr(e,"#app",void 0);if(!t.isOk())throw J("assignment_no_match","client",15,"main","Assignment pattern did not match",{value:t})}Or();
