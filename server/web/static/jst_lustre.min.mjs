var _=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},Y=class{static fromArray(t,r){let n=r||new En;for(let i=t.length-1;i>=0;--i)n=new fr(t[i],n);return n}[Symbol.iterator](){return new Mo(this)}toArray(){return[...this]}atLeastLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return r!==void 0}hasLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return t===-1&&r instanceof En}countLength(){let t=this,r=0;for(;t;)t=t.tail,r++;return r-1}};function w(e,t){return new fr(e,t)}function l(e,t){return Y.fromArray(e,t)}var Mo=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof En)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},En=class extends Y{},fr=class extends Y{constructor(t,r){super(),this.head=t,this.tail=r}},Ce=class{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,r,n){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=r??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=n??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return Sn(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;let r=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<r;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;let n=this.bitSize%8;if(n){let i=8-n;if(this.rawBuffer[r]>>i!==t.rawBuffer[r]>>i)return!1}}else{for(let i=0;i<r;i++){let s=Sn(this.rawBuffer,this.bitOffset,i),o=Sn(t.rawBuffer,t.bitOffset,i);if(s!==o)return!1}let n=this.bitSize%8;if(n){let i=Sn(this.rawBuffer,this.bitOffset,r),s=Sn(t.rawBuffer,t.bitOffset,r),o=8-n;if(i>>o!==s>>o)return!1}}return!0}get buffer(){if(pa("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(pa("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}};function Sn(e,t,r){if(t===0)return e[r]??0;{let n=e[r]<<t&255,i=e[r+1]>>8-t;return n|i}}var Dt=class{constructor(t){this.value=t}},fa={};function pa(e,t){fa[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),fa[e]=!0)}function pr(e,t,r){if(r??=e.bitSize,da(e,t,r),t===r)return new Ce(new Uint8Array);if(t===0&&r===e.bitSize)return e;t+=e.bitOffset,r+=e.bitOffset;let n=Math.trunc(t/8),s=Math.trunc((r+7)/8)-n,o;return n===0&&s===e.rawBuffer.byteLength?o=e.rawBuffer:o=new Uint8Array(e.rawBuffer.buffer,e.rawBuffer.byteOffset+n,s),new Ce(o,r-t,t%8)}function Ui(e,t,r,n,i){if(da(e,t,r),t===r)return 0;t+=e.bitOffset,r+=e.bitOffset;let s=t%8===0,o=r%8===0;if(s&&o)return _f(e,t/8,r/8,n,i);let a=r-t,u=Math.trunc(t/8),c=Math.trunc((r-1)/8);if(u==c){let d=255>>t%8,f=(8-r%8)%8,m=(e.rawBuffer[u]&d)>>f;if(i){let x=2**(a-1);m>=x&&(m-=x*2)}return m}return a<=53?$f(e.rawBuffer,t,r,n,i):mf(e.rawBuffer,t,r,n,i)}function _f(e,t,r,n,i){return r-t<=6?df(e.rawBuffer,t,r,n,i):hf(e.rawBuffer,t,r,n,i)}function df(e,t,r,n,i){let s=r-t,o=0;if(n)for(let a=t;a<r;a++)o*=256,o+=e[a];else for(let a=r-1;a>=t;a--)o*=256,o+=e[a];if(i){let a=2**(s*8-1);o>=a&&(o-=a*2)}return o}function hf(e,t,r,n,i){let s=r-t,o=0n;if(n)for(let a=t;a<r;a++)o*=256n,o+=BigInt(e[a]);else for(let a=r-1;a>=t;a--)o*=256n,o+=BigInt(e[a]);if(i){let a=1n<<BigInt(s*8-1);o>=a&&(o-=a*2n)}return Number(o)}function $f(e,t,r,n,i){let s=t%8===0,o=r-t,a=Math.trunc(t/8),u=0;if(n){if(!s){let c=8-t%8;u=e[a++]&(1<<c)-1,o-=c}for(;o>=8;)u*=256,u+=e[a++],o-=8;o>0&&(u*=2**o,u+=e[a]>>8-o)}else if(s){let c=r-t,d=1;for(;c>=8;)u+=e[a++]*d,d*=256,c-=8;u+=(e[a]>>8-c)*d}else{let c=t%8,d=8-c,f=r-t,m=1;for(;f>=8;){let x=e[a]<<c|e[a+1]>>d;u+=(x&255)*m,m*=256,f-=8,a++}if(f>0){let x=f-Math.max(0,f-d),v=(e[a]&(1<<d)-1)>>d-x;f-=x,f>0&&(v*=2**f,v+=e[a+1]>>8-f),u+=v*m}}if(i){let c=2**(r-t-1);u>=c&&(u-=c*2)}return u}function mf(e,t,r,n,i){let s=t%8===0,o=r-t,a=Math.trunc(t/8),u=0n;if(n){if(!s){let c=8-t%8;u=BigInt(e[a++]&(1<<c)-1),o-=c}for(;o>=8;)u*=256n,u+=BigInt(e[a++]),o-=8;o>0&&(u<<=BigInt(o),u+=BigInt(e[a]>>8-o))}else if(s){let c=r-t,d=0n;for(;c>=8;)u+=BigInt(e[a++])<<d,d+=8n,c-=8;u+=BigInt(e[a]>>8-c)<<d}else{let c=t%8,d=8-c,f=r-t,m=0n;for(;f>=8;){let x=e[a]<<c|e[a+1]>>d;u+=BigInt(x&255)<<m,m+=8n,f-=8,a++}if(f>0){let x=f-Math.max(0,f-d),v=(e[a]&(1<<d)-1)>>d-x;f-=x,f>0&&(v<<=f,v+=e[a+1]>>8-f),u+=BigInt(v)<<m}}if(i){let c=2n**BigInt(r-t-1);u>=c&&(u-=c*2n)}return Number(u)}function da(e,t,r){if(t<0||t>e.bitSize||r<t||r>e.bitSize){let n=`Invalid bit array slice: start = ${t}, end = ${r}, bit size = ${e.bitSize}`;throw new globalThis.Error(n)}}var Hr=class e extends _{static isResult(t){return t instanceof e}},y=class extends Hr{constructor(t){super(),this[0]=t}isOk(){return!0}},k=class extends Hr{constructor(t){super(),this[0]=t}isOk(){return!1}};function C(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!_a(n)||!_a(i)||!Lf(n,i)||gf(n,i)||xf(n,i)||bf(n,i)||yf(n,i)||kf(n,i)||vf(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[a,u]=wf(n);for(let c of a(n))r.push(u(n,c),u(i,c))}return!0}function wf(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function gf(e,t){return e instanceof Date&&(e>t||e<t)}function xf(e,t){return!(e instanceof Ce)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function bf(e,t){return Array.isArray(e)&&e.length!==t.length}function yf(e,t){return e instanceof Map&&e.size!==t.size}function kf(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function vf(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function _a(e){return typeof e=="object"&&e!==null}function Lf(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function _r(e,t){return t===0?0:e%t}function dr(e,t){return Math.trunc(Io(e,t))}function Io(e,t){return t===0?0:e/t}function G(e,t,r,n,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=r,o.function=n,o.fn=n;for(let a in s)o[a]=s[a];return o}var h=class extends _{constructor(t){super(),this[0]=t}},$=class extends _{};function Fi(e,t){if(e instanceof h){let r=e[0];return new y(r)}else return new k(t)}function Tn(e,t){if(e instanceof h){let r=e[0];return new h(t(r))}else return new $}function ha(e){return e instanceof h?e[0]:new $}function $a(e,t){if(e instanceof h){let r=e[0];return t(r)}else return new $}function st(e,t,r){return e?t:r()}var Q=class extends _{},ae=class extends _{},ie=class extends _{};function Re(e,t,r){return ga(t,r,e)}function jf(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=w(i,n)}}}function Of(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return jf(n,l([]));{let i=r.head[0];e=r.tail,t=w(i,n)}}}function Do(e){return Of(hr(e),l([]))}function Uo(e,t,r){let n=at(e,t);if(n.isOk()){let i=n[0];return Re(e,t,r(new h(i)))}else return Re(e,t,r(new $))}function xa(e,t){let r=e[0],n=e[1];return[r,t(n)]}var ne=class extends _{},ut=class extends _{};function Kr(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=w(i,n)}}}function q(e){return Kr(e,l([]))}function Tf(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return q(s);{let o=n.head,a=n.tail,u;i(o)?u=w(o,s):u=s;let d=u;e=a,t=i,r=d}}}function ct(e,t){return Tf(e,t,l([]))}function qf(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return q(s);{let o=n.head,a=n.tail,u,c=i(o);if(c.isOk()){let f=c[0];u=w(f,s)}else u=s;let d=u;e=a,t=i,r=d}}}function $r(e,t){return qf(e,t,l([]))}function Cf(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return q(s);{let o=n.head;e=n.tail,t=i,r=w(i(o),s)}}}function N(e,t){return Cf(e,t,l([]))}function Bf(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=w(i,n)}}}function X(e,t){return Bf(q(e),t)}function ze(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return i;{let o=n.head;e=n.tail,t=s(i,o),r=s}}}function Fo(e,t,r){let n=ze(e,[t,l([])],(i,s)=>{let o=i[0],a=i[1],u=r(o,s),c=u[0],d=u[1];return[c,w(d,a)]});return xa(n,q)}function Pf(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(i.hasLength(0))return s;{let u=i.head;e=i.tail,t=o(s,u,a),r=o,n=a+1}}}function Ro(e,t,r){return Pf(e,t,r,0)}function ft(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return new k(void 0);{let i=r.head,s=r.tail;if(n(i))return new y(i);e=s,t=n}}}function qn(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return!1;{let i=r.head,s=r.tail;if(n(i))return!0;e=s,t=n}}}function Nf(e,t,r,n,i,s){for(;;){let o=e,a=t,u=r,c=n,d=i,f=s,m=w(d,u);if(o.hasLength(0))return c instanceof ne?w(q(m),f):w(m,f);{let x=o.head,v=o.tail,B=a(d,x);if(B instanceof ie&&c instanceof ut)e=v,t=a,r=m,n=c,i=x,s=f;else if(B instanceof Q&&c instanceof ne)e=v,t=a,r=m,n=c,i=x,s=f;else if(B instanceof ae&&c instanceof ne)e=v,t=a,r=m,n=c,i=x,s=f;else if(B instanceof ie&&c instanceof ne){let j;c instanceof ne?j=w(q(m),f):j=w(m,f);let H=j;if(v.hasLength(0))return w(l([x]),H);{let F=v.head,E=v.tail,T,z=a(x,F);z instanceof Q?T=new ne:z instanceof ae?T=new ne:T=new ut;let te=T;e=E,t=a,r=l([x]),n=te,i=F,s=H}}else if(B instanceof Q&&c instanceof ut){let j;c instanceof ne?j=w(q(m),f):j=w(m,f);let H=j;if(v.hasLength(0))return w(l([x]),H);{let F=v.head,E=v.tail,T,z=a(x,F);z instanceof Q?T=new ne:z instanceof ae?T=new ne:T=new ut;let te=T;e=E,t=a,r=l([x]),n=te,i=F,s=H}}else{let j;c instanceof ne?j=w(q(m),f):j=w(m,f);let H=j;if(v.hasLength(0))return w(l([x]),H);{let F=v.head,E=v.tail,T,z=a(x,F);z instanceof Q?T=new ne:z instanceof ae?T=new ne:T=new ut;let te=T;e=E,t=a,r=l([x]),n=te,i=F,s=H}}}}}function Mf(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(i.hasLength(0))return Kr(s,a);if(s.hasLength(0))return Kr(i,a);{let u=i.head,c=i.tail,d=s.head,f=s.tail,m=o(u,d);m instanceof Q?(e=c,t=s,r=o,n=w(u,a)):m instanceof ie?(e=i,t=f,r=o,n=w(d,a)):(e=i,t=f,r=o,n=w(d,a))}}}function If(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return q(s);if(n.hasLength(1)){let o=n.head;return q(w(q(o),s))}else{let o=n.head,a=n.tail.head,u=n.tail.tail,c=Mf(o,a,i,l([]));e=u,t=i,r=w(c,s)}}}function Df(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(i.hasLength(0))return Kr(s,a);if(s.hasLength(0))return Kr(i,a);{let u=i.head,c=i.tail,d=s.head,f=s.tail,m=o(u,d);m instanceof Q?(e=i,t=f,r=o,n=w(d,a)):m instanceof ie?(e=c,t=s,r=o,n=w(u,a)):(e=c,t=s,r=o,n=w(u,a))}}}function Uf(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return q(s);if(n.hasLength(1)){let o=n.head;return q(w(q(o),s))}else{let o=n.head,a=n.tail.head,u=n.tail.tail,c=Df(o,a,i,l([]));e=u,t=i,r=w(c,s)}}}function Ff(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return l([]);if(n.hasLength(1)&&i instanceof ne)return n.head;if(n.hasLength(1)&&i instanceof ut){let o=n.head;return q(o)}else i instanceof ne?(e=If(n,s,l([])),t=new ut,r=s):(e=Uf(n,s,l([])),t=new ne,r=s)}}function Vr(e,t){if(e.hasLength(0))return l([]);if(e.hasLength(1)){let r=e.head;return l([r])}else{let r=e.head,n=e.tail.head,i=e.tail.tail,s,o=t(r,n);o instanceof Q?s=new ne:o instanceof ae?s=new ne:s=new ut;let a=s,u=Nf(i,t,l([r]),a,n,l([]));return Ff(u,new ne,t)}}function Rf(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(i.atLeastLength(1)&&C(i.head[0],s)){let u=i.head[0],c=i.tail;return Kr(a,w([u,o],c))}else if(i.atLeastLength(1)){let u=i.head;e=i.tail,t=s,r=o,n=w(u,a)}else return q(w([s,o],a))}}function Wo(e,t,r){return Rf(e,t,r,l([]))}function Ri(e,t,r){let i=e,s=Ho(i,t,r);return s}function Bn(e,t){return e===t?new ae:Aa(e,t)?new Q:new ie}function La(e,t,r){if(r<0)return"";if(t<0){let s=gr(e)+t;return s<0?"":Ko(e,s,r)}else return Ko(e,t,r)}function Vf(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1)){let i=r.head;e=r.tail,t=n+i}else return n}}function Ut(e){return Vf(e,"")}function Yf(e,t,r){for(;;){let n=e,i=t,s=r;if(i<=0)return s;e=n,t=i-1,r=s+n}}function Pn(e,t){return Yf(e,t,"")}function Zf(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return s;{let o=n.head;e=n.tail,t=i,r=s+i+o}}}function We(e,t){if(e.hasLength(0))return"";{let r=e.head,n=e.tail;return Zf(n,t,r)}}function Qf(e,t){let r=gr(t),n=dr(e,r),i=_r(e,r);return Pn(t,n)+La(t,0,i)}function Ft(e,t,r){let n=gr(e),i=t-n;return i<=0?e:Qf(i,r)+e}function Zr(e){let r=Ji(e);return Ki(r)}function Wi(e,t){for(;;){let r=e,n=t;if(n>0){let s=Gi(r);if(s.isOk())e=s[0][1],t=n-1;else return r}else return r}}function wr(e,t){if(t==="")return Yr(e);{let n=e,i=Jo(n,t);return N(i,ue)}}function Vo(e){let t=pt(e);return t}function Rt(e,t){if(e.isOk()){let r=e[0];return new y(t(r))}else{let r=e[0];return new k(r)}}function Vi(e,t){if(e.isOk()){let r=e[0];return new y(r)}else{let r=e[0];return new k(t(r))}}function Nn(e,t){if(e.isOk()){let r=e[0];return t(r)}else{let r=e[0];return new k(r)}}function Ge(e,t){return Nn(e,t)}var br=class extends _{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}};function ip(e,t){return Vi(e,r=>N(r,t))}function Ea(e){return el(e)}function Ta(e){return t=>{if(e.hasLength(0))return new k(l([new br("another type",Pe(t),l([]))]));{let r=e.head,n=e.tail,i=r(t);if(i.isOk()){let s=i[0];return new y(s)}else return Ta(n)(t)}}}function sp(e,t){let r=t,n=Ta(l([el,u=>Rt(qa(u),I)])),i,s=n(r);if(s.isOk())i=s[0];else{let u=l(["<",Pe(r),">"]),c=mr(u);i=c}let o=i,a=e;return new br(a.expected,a.found,w(o,e.path))}function Xo(e,t){return r=>{let n=new br("field","nothing",l([]));return Nn(Ca(r,e),i=>{let o=Fi(i,l([n])),a=Nn(o,t);return ip(a,u=>sp(u,e))})}}var Ba=new WeakMap,tl=new DataView(new ArrayBuffer(8)),rl=0;function nl(e){let t=Ba.get(e);if(t!==void 0)return t;let r=rl++;return rl===2147483647&&(rl=0),Ba.set(e,r),r}function il(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function ol(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function Na(e){tl.setFloat64(0,e);let t=tl.getInt32(0),r=tl.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function op(e){return ol(e.toString())}function lp(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return nl(e);if(e instanceof Date)return Na(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+Je(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+Je(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+il(Je(n),Je(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+il(Je(o),ol(s))|0}}return r}function Je(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return Na(e);case"string":return ol(e);case"bigint":return op(e);case"object":return lp(e);case"symbol":return nl(e);case"function":return nl(e);default:return 0}}var dt=5,ll=Math.pow(2,dt),ap=ll-1,up=ll/2,cp=ll/4,be=0,_t=1,Ne=2,kr=3,al={type:Ne,bitmap:0,array:[]};function Mn(e,t){return e>>>t&ap}function Zi(e,t){return 1<<Mn(e,t)}function fp(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function ul(e,t){return fp(e&t-1)}function Ke(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function pp(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function sl(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function Ma(e,t,r,n,i,s){let o=Je(t);if(o===n)return{type:kr,hash:o,array:[{type:be,k:t,v:r},{type:be,k:i,v:s}]};let a={val:!1};return In(cl(al,e,o,t,r,a),e,n,i,s,a)}function In(e,t,r,n,i,s){switch(e.type){case _t:return _p(e,t,r,n,i,s);case Ne:return cl(e,t,r,n,i,s);case kr:return dp(e,t,r,n,i,s)}}function _p(e,t,r,n,i,s){let o=Mn(r,t),a=e.array[o];if(a===void 0)return s.val=!0,{type:_t,size:e.size+1,array:Ke(e.array,o,{type:be,k:n,v:i})};if(a.type===be)return C(n,a.k)?i===a.v?e:{type:_t,size:e.size,array:Ke(e.array,o,{type:be,k:n,v:i})}:(s.val=!0,{type:_t,size:e.size,array:Ke(e.array,o,Ma(t+dt,a.k,a.v,r,n,i))});let u=In(a,t+dt,r,n,i,s);return u===a?e:{type:_t,size:e.size,array:Ke(e.array,o,u)}}function cl(e,t,r,n,i,s){let o=Zi(r,t),a=ul(e.bitmap,o);if((e.bitmap&o)!==0){let u=e.array[a];if(u.type!==be){let d=In(u,t+dt,r,n,i,s);return d===u?e:{type:Ne,bitmap:e.bitmap,array:Ke(e.array,a,d)}}let c=u.k;return C(n,c)?i===u.v?e:{type:Ne,bitmap:e.bitmap,array:Ke(e.array,a,{type:be,k:n,v:i})}:(s.val=!0,{type:Ne,bitmap:e.bitmap,array:Ke(e.array,a,Ma(t+dt,c,u.v,r,n,i))})}else{let u=e.array.length;if(u>=up){let c=new Array(32),d=Mn(r,t);c[d]=cl(al,t+dt,r,n,i,s);let f=0,m=e.bitmap;for(let x=0;x<32;x++){if((m&1)!==0){let v=e.array[f++];c[x]=v}m=m>>>1}return{type:_t,size:u+1,array:c}}else{let c=pp(e.array,a,{type:be,k:n,v:i});return s.val=!0,{type:Ne,bitmap:e.bitmap|o,array:c}}}}function dp(e,t,r,n,i,s){if(r===e.hash){let o=fl(e,n);if(o!==-1)return e.array[o].v===i?e:{type:kr,hash:r,array:Ke(e.array,o,{type:be,k:n,v:i})};let a=e.array.length;return s.val=!0,{type:kr,hash:r,array:Ke(e.array,a,{type:be,k:n,v:i})}}return In({type:Ne,bitmap:Zi(e.hash,t),array:[e]},t,r,n,i,s)}function fl(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(C(t,e.array[n].k))return n;return-1}function Yi(e,t,r,n){switch(e.type){case _t:return hp(e,t,r,n);case Ne:return $p(e,t,r,n);case kr:return mp(e,n)}}function hp(e,t,r,n){let i=Mn(r,t),s=e.array[i];if(s!==void 0){if(s.type!==be)return Yi(s,t+dt,r,n);if(C(n,s.k))return s}}function $p(e,t,r,n){let i=Zi(r,t);if((e.bitmap&i)===0)return;let s=ul(e.bitmap,i),o=e.array[s];if(o.type!==be)return Yi(o,t+dt,r,n);if(C(n,o.k))return o}function mp(e,t){let r=fl(e,t);if(!(r<0))return e.array[r]}function pl(e,t,r,n){switch(e.type){case _t:return wp(e,t,r,n);case Ne:return gp(e,t,r,n);case kr:return xp(e,n)}}function wp(e,t,r,n){let i=Mn(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===be){if(!C(s.k,n))return e}else if(o=pl(s,t+dt,r,n),o===s)return e;if(o===void 0){if(e.size<=cp){let a=e.array,u=new Array(e.size-1),c=0,d=0,f=0;for(;c<i;){let m=a[c];m!==void 0&&(u[d]=m,f|=1<<c,++d),++c}for(++c;c<a.length;){let m=a[c];m!==void 0&&(u[d]=m,f|=1<<c,++d),++c}return{type:Ne,bitmap:f,array:u}}return{type:_t,size:e.size-1,array:Ke(e.array,i,o)}}return{type:_t,size:e.size,array:Ke(e.array,i,o)}}function gp(e,t,r,n){let i=Zi(r,t);if((e.bitmap&i)===0)return e;let s=ul(e.bitmap,i),o=e.array[s];if(o.type!==be){let a=pl(o,t+dt,r,n);return a===o?e:a!==void 0?{type:Ne,bitmap:e.bitmap,array:Ke(e.array,s,a)}:e.bitmap===i?void 0:{type:Ne,bitmap:e.bitmap^i,array:sl(e.array,s)}}return C(n,o.k)?e.bitmap===i?void 0:{type:Ne,bitmap:e.bitmap^i,array:sl(e.array,s)}:e}function xp(e,t){let r=fl(e,t);if(r<0)return e;if(e.array.length!==1)return{type:kr,hash:e.hash,array:sl(e.array,r)}}function Ia(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===be){t(s.v,s.k);continue}Ia(s,t)}}}var Se=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=Yi(this.root,0,Je(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?al:this.root,s=In(i,0,Je(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=pl(this.root,0,Je(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:Yi(this.root,0,Je(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){Ia(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+il(Je(r),Je(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((r,n)=>{if(!C(t.get(n,!r),r))throw Pa}),!0}catch(r){if(r===Pa)return!1;throw r}}},Pa=Symbol();var Ga=void 0,Ua={};function ue(e){return e}function I(e){return e.toString()}function _l(e){let t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{let r=t.indexOf("e");return r>=0?t.slice(0,r)+".0"+t.slice(r):t+".0"}}function Ho(e,t,r){return typeof e.replaceAll<"u"?e.replaceAll(t,r):e.replace(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),r)}function gr(e){if(e==="")return 0;let t=Qi(e);if(t){let r=0;for(let n of t)r++;return r}else return e.match(/./gsu).length}function Yr(e){let t=Qi(e);return t?Y.fromArray(Array.from(t).map(r=>r.segment)):Y.fromArray(e.match(/./gsu))}var Fa;function Qi(e){if(globalThis.Intl&&Intl.Segmenter)return Fa||=new Intl.Segmenter,Fa.segment(e)[Symbol.iterator]()}function Gi(e){let t,r=Qi(e);return r?t=r.next().value?.segment:t=e.match(/./su)?.[0],t?new y([t,e.slice(t.length)]):new k(Ga)}function vr(e){return[e.charCodeAt(0)|0,e.slice(1)]}function Be(e){return e.toLowerCase()}function Aa(e,t){return e<t}function Jo(e,t){return Y.fromArray(e.split(t))}function mr(e){let t="";for(let r of e)t=t+r;return t}function Ko(e,t,r){if(r<=0||t>=e.length)return"";let n=Qi(e);if(n){for(;t-- >0;)n.next();let i="";for(;r-- >0;){let s=n.next().value;if(s===void 0)break;i+=s.segment}return i}else return e.match(/./gsu).slice(t,t+r).join("")}function de(e,t,r){return e.slice(t,t+r)}function xr(e,t){return e.startsWith(t)}function Hi(e,t){return e.endsWith(t)}var Ha=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),bp=new RegExp(`^[${Ha}]*`),yp=new RegExp(`[${Ha}]*$`);function Ji(e){return e.replace(bp,"")}function Ki(e){return e.replace(yp,"")}function J(){return Se.new()}function hr(e){return Y.fromArray(e.entries())}function at(e,t){let r=e.get(t,Ua);return r===Ua?new k(Ga):new y(r)}function ga(e,t,r){return r.set(e,t)}function Pe(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof Hr)return"Result";if(e instanceof Y)return"List";if(e instanceof Ce)return"BitArray";if(e instanceof Se)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function dl(e,t){return kp(e,Pe(t))}function kp(e,t){return new k(Y.fromArray([new br(e,t,Y.fromArray([]))]))}function el(e){return typeof e=="string"?new y(e):dl("String",e)}function qa(e){return Number.isInteger(e)?new y(e):dl("Int",e)}function Ca(e,t){let r=()=>dl("Dict",e);if(e instanceof Se||e instanceof WeakMap||e instanceof Map){let n=at(e,t);return new y(n.isOk()?new h(n[0]):new $)}else return e===null?r():Object.getPrototypeOf(e)==Object.prototype?Ra(e,t,()=>new y(new $)):Ra(e,t,r)}function Ra(e,t,r){try{return t in e?new y(new h(e[t])):r()}catch{return r()}}function pt(e){let t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return vp(e);if(t==="bigint"||Number.isInteger(e))return e.toString();if(t==="number")return _l(e);if(Array.isArray(e))return`#(${e.map(pt).join(", ")})`;if(e instanceof Y)return Op(e);if(e instanceof Dt)return zp(e);if(e instanceof Ce)return`<<${za(e,"")}>>`;if(e instanceof _)return jp(e);if(e instanceof Se)return Lp(e);if(e instanceof Set)return`//js(Set(${[...e].map(pt).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){let r=[];for(let n of Array(e.length).keys())r.push(String.fromCharCode(n+97));return`//fn(${r.join(", ")}) { ... }`}return Ap(e)}function vp(e){let t='"';for(let r=0;r<e.length;r++){let n=e[r];switch(n){case`
`:t+="\\n";break;case"\r":t+="\\r";break;case"	":t+="\\t";break;case"\f":t+="\\f";break;case"\\":t+="\\\\";break;case'"':t+='\\"';break;default:n<" "||n>"~"&&n<"\xA0"?t+="\\u{"+n.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=n}}return t+='"',t}function Lp(e){let t="dict.from_list([",r=!0;return e.forEach((n,i)=>{r||(t=t+", "),t=t+"#("+pt(i)+", "+pt(n)+")",r=!1}),t+"])"}function Ap(e){let t=Object.getPrototypeOf(e)?.constructor?.name||"Object",r=[];for(let s of Object.keys(e))r.push(`${pt(s)}: ${pt(e[s])}`);let n=r.length?" "+r.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${n}})`}function jp(e){let t=Object.keys(e).map(r=>{let n=pt(e[r]);return isNaN(parseInt(r))?`${r}: ${n}`:n}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function Op(e){return`[${e.toArray().map(pt).join(", ")}]`}function zp(e){return`//utfcodepoint(${String.fromCodePoint(e.value)})`}function za(e,t){if(e.bitSize===0)return t;for(let r=0;r<e.byteSize-1;r++)t+=e.byteAt(r).toString(),t+=", ";if(e.byteSize*8===e.bitSize)t+=e.byteAt(e.byteSize-1).toString();else{let r=e.bitSize%8;t+=e.byteAt(e.byteSize-1)>>8-r,t+=`:size(${r})`}return t}function yr(e){return e>=0?e:e*-1}var Xi=class extends _{constructor(t){super(),this[0]=t}},Xr=class extends _{},Dn=class extends _{},Un=class extends _{},en=class extends _{},Lr=class extends _{},Fn=class extends _{},Rn=class extends _{},Wn=class extends _{},es=class extends _{};function Wt(e,t){return[dr(e,t),_r(e,t)]}var Ja=1e3;var Ka=1e6;var Va=6e7;var Ya=36e8;var Za=864e8;var Qa=6048e8;var Xa=2592e9;var eu=31536e9;function tu(e){let r=ze(e,0,(n,i)=>{if(i[1]instanceof Xr){let s=i[0];return n+s}else if(i[1]instanceof Dn){let s=i[0];return n+s*Ja}else if(i[1]instanceof Un){let s=i[0];return n+s*Ka}else if(i[1]instanceof en){let s=i[0];return n+s*Va}else if(i[1]instanceof Lr){let s=i[0];return n+s*Ya}else if(i[1]instanceof Fn){let s=i[0];return n+s*Za}else if(i[1]instanceof Rn){let s=i[0];return n+s*Qa}else if(i[1]instanceof Wn){let s=i[0];return n+s*Xa}else{let s=i[0];return n+s*eu}});return new Xi(r)}function ru(e){let t=e[0],r=yr(t),n=Wt(r,eu),i=n[0],s=n[1],o=Wt(s,Xa),a=o[0],u=o[1],c=Wt(u,Qa),d=c[0],f=c[1],m=Wt(f,Za),x=m[0],v=m[1],B=Wt(v,Ya),j=B[0],H=B[1],F=Wt(H,Va),E=F[0],T=F[1],z=Wt(T,Ka),te=z[0],cr=z[1],ca=Wt(cr,Ja),uf=ca[0],cf=ca[1],ff=l([[i,new es],[a,new Wn],[d,new Rn],[x,new Fn],[j,new Lr],[E,new en],[te,new Un],[uf,new Dn],[cf,new Xr]]),pf=ct(ff,zn=>zn[0]>0);return N(pf,zn=>t<0?[-1*zn[0],zn[1]]:zn)}var nu=l([["Africa/Abidjan",0],["Africa/Algiers",3600],["Africa/Bissau",0],["Africa/Cairo",7200],["Africa/Casablanca",3600],["Africa/Ceuta",3600],["Africa/El_Aaiun",3600],["Africa/Johannesburg",7200],["Africa/Juba",7200],["Africa/Khartoum",7200],["Africa/Lagos",3600],["Africa/Maputo",7200],["Africa/Monrovia",0],["Africa/Nairobi",10800],["Africa/Ndjamena",3600],["Africa/Sao_Tome",0],["Africa/Tripoli",7200],["Africa/Tunis",3600],["Africa/Windhoek",7200],["America/Adak",-36e3],["America/Anchorage",-32400],["America/Araguaina",-10800],["America/Argentina/Buenos_Aires",-10800],["America/Argentina/Catamarca",-10800],["America/Argentina/Cordoba",-10800],["America/Argentina/Jujuy",-10800],["America/Argentina/La_Rioja",-10800],["America/Argentina/Mendoza",-10800],["America/Argentina/Rio_Gallegos",-10800],["America/Argentina/Salta",-10800],["America/Argentina/San_Juan",-10800],["America/Argentina/San_Luis",-10800],["America/Argentina/Tucuman",-10800],["America/Argentina/Ushuaia",-10800],["America/Asuncion",-14400],["America/Bahia",-10800],["America/Bahia_Banderas",-21600],["America/Barbados",-14400],["America/Belem",-10800],["America/Belize",-21600],["America/Boa_Vista",-14400],["America/Bogota",-18e3],["America/Boise",-25200],["America/Cambridge_Bay",-25200],["America/Campo_Grande",-14400],["America/Cancun",-18e3],["America/Caracas",-14400],["America/Cayenne",-10800],["America/Chicago",-21600],["America/Chihuahua",-21600],["America/Ciudad_Juarez",-25200],["America/Costa_Rica",-21600],["America/Cuiaba",-14400],["America/Danmarkshavn",0],["America/Dawson",-25200],["America/Dawson_Creek",-25200],["America/Denver",-25200],["America/Detroit",-18e3],["America/Edmonton",-25200],["America/Eirunepe",-18e3],["America/El_Salvador",-21600],["America/Fort_Nelson",-25200],["America/Fortaleza",-10800],["America/Glace_Bay",-14400],["America/Goose_Bay",-14400],["America/Grand_Turk",-18e3],["America/Guatemala",-21600],["America/Guayaquil",-18e3],["America/Guyana",-14400],["America/Halifax",-14400],["America/Havana",-18e3],["America/Hermosillo",-25200],["America/Indiana/Indianapolis",-18e3],["America/Indiana/Knox",-21600],["America/Indiana/Marengo",-18e3],["America/Indiana/Petersburg",-18e3],["America/Indiana/Tell_City",-21600],["America/Indiana/Vevay",-18e3],["America/Indiana/Vincennes",-18e3],["America/Indiana/Winamac",-18e3],["America/Inuvik",-25200],["America/Iqaluit",-18e3],["America/Jamaica",-18e3],["America/Juneau",-32400],["America/Kentucky/Louisville",-18e3],["America/Kentucky/Monticello",-18e3],["America/La_Paz",-14400],["America/Lima",-18e3],["America/Los_Angeles",-28800],["America/Maceio",-10800],["America/Managua",-21600],["America/Manaus",-14400],["America/Martinique",-14400],["America/Matamoros",-21600],["America/Mazatlan",-25200],["America/Menominee",-21600],["America/Merida",-21600],["America/Metlakatla",-32400],["America/Mexico_City",-21600],["America/Miquelon",-10800],["America/Moncton",-14400],["America/Monterrey",-21600],["America/Montevideo",-10800],["America/New_York",-18e3],["America/Nome",-32400],["America/Noronha",-7200],["America/North_Dakota/Beulah",-21600],["America/North_Dakota/Center",-21600],["America/North_Dakota/New_Salem",-21600],["America/Nuuk",-7200],["America/Ojinaga",-21600],["America/Panama",-18e3],["America/Paramaribo",-10800],["America/Phoenix",-25200],["America/Port-au-Prince",-18e3],["America/Porto_Velho",-14400],["America/Puerto_Rico",-14400],["America/Punta_Arenas",-10800],["America/Rankin_Inlet",-21600],["America/Recife",-10800],["America/Regina",-21600],["America/Resolute",-21600],["America/Rio_Branco",-18e3],["America/Santarem",-10800],["America/Santiago",-14400],["America/Santo_Domingo",-14400],["America/Sao_Paulo",-10800],["America/Scoresbysund",-7200],["America/Sitka",-32400],["America/St_Johns",-12600],["America/Swift_Current",-21600],["America/Tegucigalpa",-21600],["America/Thule",-14400],["America/Tijuana",-28800],["America/Toronto",-18e3],["America/Vancouver",-28800],["America/Whitehorse",-25200],["America/Winnipeg",-21600],["America/Yakutat",-32400],["Antarctica/Casey",28800],["Antarctica/Davis",25200],["Antarctica/Macquarie",36e3],["Antarctica/Mawson",18e3],["Antarctica/Palmer",-10800],["Antarctica/Rothera",-10800],["Antarctica/Troll",0],["Antarctica/Vostok",18e3],["Asia/Almaty",18e3],["Asia/Amman",10800],["Asia/Anadyr",43200],["Asia/Aqtau",18e3],["Asia/Aqtobe",18e3],["Asia/Ashgabat",18e3],["Asia/Atyrau",18e3],["Asia/Baghdad",10800],["Asia/Baku",14400],["Asia/Bangkok",25200],["Asia/Barnaul",25200],["Asia/Beirut",7200],["Asia/Bishkek",21600],["Asia/Chita",32400],["Asia/Colombo",19800],["Asia/Damascus",10800],["Asia/Dhaka",21600],["Asia/Dili",32400],["Asia/Dubai",14400],["Asia/Dushanbe",18e3],["Asia/Famagusta",7200],["Asia/Gaza",7200],["Asia/Hebron",7200],["Asia/Ho_Chi_Minh",25200],["Asia/Hong_Kong",28800],["Asia/Hovd",25200],["Asia/Irkutsk",28800],["Asia/Jakarta",25200],["Asia/Jayapura",32400],["Asia/Jerusalem",7200],["Asia/Kabul",16200],["Asia/Kamchatka",43200],["Asia/Karachi",18e3],["Asia/Kathmandu",20700],["Asia/Khandyga",32400],["Asia/Kolkata",19800],["Asia/Krasnoyarsk",25200],["Asia/Kuching",28800],["Asia/Macau",28800],["Asia/Magadan",39600],["Asia/Makassar",28800],["Asia/Manila",28800],["Asia/Nicosia",7200],["Asia/Novokuznetsk",25200],["Asia/Novosibirsk",25200],["Asia/Omsk",21600],["Asia/Oral",18e3],["Asia/Pontianak",25200],["Asia/Pyongyang",32400],["Asia/Qatar",10800],["Asia/Qostanay",18e3],["Asia/Qyzylorda",18e3],["Asia/Riyadh",10800],["Asia/Sakhalin",39600],["Asia/Samarkand",18e3],["Asia/Seoul",32400],["Asia/Shanghai",28800],["Asia/Singapore",28800],["Asia/Srednekolymsk",39600],["Asia/Taipei",28800],["Asia/Tashkent",18e3],["Asia/Tbilisi",14400],["Asia/Tehran",12600],["Asia/Thimphu",21600],["Asia/Tokyo",32400],["Asia/Tomsk",25200],["Asia/Ulaanbaatar",28800],["Asia/Urumqi",21600],["Asia/Ust-Nera",36e3],["Asia/Vladivostok",36e3],["Asia/Yakutsk",32400],["Asia/Yangon",23400],["Asia/Yekaterinburg",18e3],["Asia/Yerevan",14400],["Atlantic/Azores",-3600],["Atlantic/Bermuda",-14400],["Atlantic/Canary",0],["Atlantic/Cape_Verde",-3600],["Atlantic/Faroe",0],["Atlantic/Madeira",0],["Atlantic/South_Georgia",-7200],["Atlantic/Stanley",-10800],["Australia/Adelaide",34200],["Australia/Brisbane",36e3],["Australia/Broken_Hill",34200],["Australia/Darwin",34200],["Australia/Eucla",31500],["Australia/Hobart",36e3],["Australia/Lindeman",36e3],["Australia/Lord_Howe",37800],["Australia/Melbourne",36e3],["Australia/Perth",28800],["Australia/Sydney",36e3],["Etc/GMT",0],["Etc/GMT+1",-3600],["Etc/GMT+10",-36e3],["Etc/GMT+11",-39600],["Etc/GMT+12",-43200],["Etc/GMT+2",-7200],["Etc/GMT+3",-10800],["Etc/GMT+4",-14400],["Etc/GMT+5",-18e3],["Etc/GMT+6",-21600],["Etc/GMT+7",-25200],["Etc/GMT+8",-28800],["Etc/GMT+9",-32400],["Etc/GMT-1",3600],["Etc/GMT-10",36e3],["Etc/GMT-11",39600],["Etc/GMT-12",43200],["Etc/GMT-13",46800],["Etc/GMT-14",50400],["Etc/GMT-2",7200],["Etc/GMT-3",10800],["Etc/GMT-4",14400],["Etc/GMT-5",18e3],["Etc/GMT-6",21600],["Etc/GMT-7",25200],["Etc/GMT-8",28800],["Etc/GMT-9",32400],["Etc/UTC",0],["Europe/Andorra",3600],["Europe/Astrakhan",14400],["Europe/Athens",7200],["Europe/Belgrade",3600],["Europe/Berlin",3600],["Europe/Brussels",3600],["Europe/Bucharest",7200],["Europe/Budapest",3600],["Europe/Chisinau",7200],["Europe/Dublin",3600],["Europe/Gibraltar",3600],["Europe/Helsinki",7200],["Europe/Istanbul",10800],["Europe/Kaliningrad",7200],["Europe/Kirov",10800],["Europe/Kyiv",7200],["Europe/Lisbon",0],["Europe/London",0],["Europe/Madrid",3600],["Europe/Malta",3600],["Europe/Minsk",10800],["Europe/Moscow",10800],["Europe/Paris",3600],["Europe/Prague",3600],["Europe/Riga",7200],["Europe/Rome",3600],["Europe/Samara",14400],["Europe/Saratov",14400],["Europe/Simferopol",10800],["Europe/Sofia",7200],["Europe/Tallinn",7200],["Europe/Tirane",3600],["Europe/Ulyanovsk",14400],["Europe/Vienna",3600],["Europe/Vilnius",7200],["Europe/Volgograd",10800],["Europe/Warsaw",3600],["Europe/Zurich",3600],["Indian/Chagos",21600],["Indian/Maldives",18e3],["Indian/Mauritius",14400],["Pacific/Apia",46800],["Pacific/Auckland",43200],["Pacific/Bougainville",39600],["Pacific/Chatham",45900],["Pacific/Easter",-21600],["Pacific/Efate",39600],["Pacific/Fakaofo",46800],["Pacific/Fiji",43200],["Pacific/Galapagos",-21600],["Pacific/Gambier",-32400],["Pacific/Guadalcanal",39600],["Pacific/Guam",36e3],["Pacific/Honolulu",-36e3],["Pacific/Kanton",46800],["Pacific/Kiritimati",50400],["Pacific/Kosrae",39600],["Pacific/Kwajalein",43200],["Pacific/Marquesas",-34200],["Pacific/Nauru",43200],["Pacific/Niue",-39600],["Pacific/Norfolk",39600],["Pacific/Noumea",39600],["Pacific/Pago_Pago",-39600],["Pacific/Palau",32400],["Pacific/Pitcairn",-28800],["Pacific/Port_Moresby",36e3],["Pacific/Rarotonga",-36e3],["Pacific/Tahiti",-36e3],["Pacific/Tarawa",43200],["Pacific/Tongatapu",46800]]);function iu(){return Date.now()*1e3}function su(){return-new Date().getTimezoneOffset()}function ou(){return new h(Intl.DateTimeFormat().resolvedOptions().timeZone)}function lu(){return Math.floor(globalThis.performance.now()*1e3)}function au(e,t){let r=new Date((e+t)/1e3);return[[r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate()],[r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds()]]}var ts=class extends _{constructor(t,r,n,i){super(),this.wall_time=t,this.offset=r,this.timezone=n,this.monotonic_time=i}};function cu(e){{let t=e.wall_time;return dr(t,1e3)}}function tn(e){return new ts(e*1e3,0,new $,new $)}function fu(e,t){let r=e.wall_time,n=e.monotonic_time,i=t.wall_time,s=t.monotonic_time,o;if(n instanceof h&&s instanceof h){let m=n[0],x=s[0];o=[m,x]}else o=[r,i];let a=o,u=a[0],c=a[1],d=u===c,f=u<c;return d?new ae:f?new Q:new ie}function Mp(e){return st(e===0,new y("Z"),()=>{let t=(()=>{let r=l([[e,new Xr]]),n=tu(r);return ru(n)})();if(t.hasLength(2)&&t.head[1]instanceof Lr&&t.tail.head[1]instanceof en){let r=t.head[0],n=t.tail.head[0],i=l([r>0?Ut(l(["+",(()=>{let u=I(r);return Ft(u,2,"0")})()])):Ut(l(["-",(()=>{let u=yr(r),c=I(u);return Ft(c,2,"0")})()])),(()=>{let a=yr(n),u=I(a);return Ft(u,2,"0")})()]),s=We(i,":");return new y(s)}else if(t.hasLength(1)&&t.head[1]instanceof Lr){let r=t.head[0],n=l([r>0?Ut(l(["+",(()=>{let a=I(r);return Ft(a,2,"0")})()])):Ut(l(["-",(()=>{let a=yr(r),u=I(a);return Ft(u,2,"0")})()])),"00"]),i=We(n,":");return new y(i)}else return new k(void 0)})}function Ip(e){{let t=e.wall_time,r=e.offset,n=au(t,r),i=n[0],s=n[1],o=Mp(r);if(!o.isOk())throw G("let_assert","birl",1324,"to_parts","Pattern match failed, no pattern matched the value.",{value:o});let a=o[0];return[i,s,a]}}function Gn(e){let t=Ip(e),r=t[0][0],n=t[0][1],i=t[0][2];return I(r)+"-"+(()=>{let o=I(n);return Ft(o,2,"0")})()+"-"+(()=>{let o=I(i);return Ft(o,2,"0")})()}function pu(){let e=iu(),t=su(),r=lu(),n=ou();return new ts(e,t*6e7,(()=>{let i=Tn(n,s=>qn(nu,a=>a[0]===s)?new h(s):new $);return ha(i)})(),new h(r))}var P=class extends _{constructor(t,r,n,i,s,o,a){super(),this.scheme=t,this.userinfo=r,this.host=n,this.port=i,this.path=s,this.query=o,this.fragment=a}};function Fp(e){return 48>=e&&e<=57||65>=e&&e<=90||97>=e&&e<=122||e===58||e===46}function $t(e,t){return new y((()=>{let r=t;return new P(r.scheme,r.userinfo,r.host,r.port,r.path,r.query,new h(e))})())}function Rp(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(s.startsWith("#")&&a===0){let u=s.slice(1);return $t(u,o)}else if(s.startsWith("#")){let u=s.slice(1),c=de(i,0,a),d,f=o;return d=new P(f.scheme,f.userinfo,f.host,f.port,f.path,new h(c),f.fragment),$t(u,d)}else{if(s==="")return new y((()=>{let u=o;return new P(u.scheme,u.userinfo,u.host,u.port,u.path,new h(i),u.fragment)})());{let c=vr(s)[1];e=i,t=c,r=o,n=a+1}}}}function Gt(e,t){return Rp(e,e,t,0)}function Wp(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(s.startsWith("?")){let u=s.slice(1),c=de(i,0,a),d,f=o;return d=new P(f.scheme,f.userinfo,f.host,f.port,c,f.query,f.fragment),Gt(u,d)}else if(s.startsWith("#")){let u=s.slice(1),c=de(i,0,a),d,f=o;return d=new P(f.scheme,f.userinfo,f.host,f.port,c,f.query,f.fragment),$t(u,d)}else{if(s==="")return new y((()=>{let u=o;return new P(u.scheme,u.userinfo,u.host,u.port,i,u.query,u.fragment)})());{let c=vr(s)[1];e=i,t=c,r=o,n=a+1}}}}function nn(e,t){return Wp(e,e,t,0)}function ht(e,t,r){for(;;){let n=e,i=t,s=r;if(n.startsWith("0"))e=n.slice(1),t=i,r=s*10;else if(n.startsWith("1"))e=n.slice(1),t=i,r=s*10+1;else if(n.startsWith("2"))e=n.slice(1),t=i,r=s*10+2;else if(n.startsWith("3"))e=n.slice(1),t=i,r=s*10+3;else if(n.startsWith("4"))e=n.slice(1),t=i,r=s*10+4;else if(n.startsWith("5"))e=n.slice(1),t=i,r=s*10+5;else if(n.startsWith("6"))e=n.slice(1),t=i,r=s*10+6;else if(n.startsWith("7"))e=n.slice(1),t=i,r=s*10+7;else if(n.startsWith("8"))e=n.slice(1),t=i,r=s*10+8;else if(n.startsWith("9"))e=n.slice(1),t=i,r=s*10+9;else if(n.startsWith("?")){let o=n.slice(1),a,u=i;return a=new P(u.scheme,u.userinfo,u.host,new h(s),u.path,u.query,u.fragment),Gt(o,a)}else if(n.startsWith("#")){let o=n.slice(1),a,u=i;return a=new P(u.scheme,u.userinfo,u.host,new h(s),u.path,u.query,u.fragment),$t(o,a)}else if(n.startsWith("/")){let o,a=i;return o=new P(a.scheme,a.userinfo,a.host,new h(s),a.path,a.query,a.fragment),nn(n,o)}else return n===""?new y((()=>{let o=i;return new P(o.scheme,o.userinfo,o.host,new h(s),o.path,o.query,o.fragment)})()):new k(void 0)}}function rs(e,t){if(e.startsWith(":0")){let r=e.slice(2);return ht(r,t,0)}else if(e.startsWith(":1")){let r=e.slice(2);return ht(r,t,1)}else if(e.startsWith(":2")){let r=e.slice(2);return ht(r,t,2)}else if(e.startsWith(":3")){let r=e.slice(2);return ht(r,t,3)}else if(e.startsWith(":4")){let r=e.slice(2);return ht(r,t,4)}else if(e.startsWith(":5")){let r=e.slice(2);return ht(r,t,5)}else if(e.startsWith(":6")){let r=e.slice(2);return ht(r,t,6)}else if(e.startsWith(":7")){let r=e.slice(2);return ht(r,t,7)}else if(e.startsWith(":8")){let r=e.slice(2);return ht(r,t,8)}else if(e.startsWith(":9")){let r=e.slice(2);return ht(r,t,9)}else{if(e.startsWith(":"))return new k(void 0);if(e.startsWith("?")){let r=e.slice(1);return Gt(r,t)}else if(e.startsWith("#")){let r=e.slice(1);return $t(r,t)}else return e.startsWith("/")?nn(e,t):e===""?new y(t):new k(void 0)}}function du(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(s==="")return new y((()=>{let u=o;return new P(u.scheme,u.userinfo,new h(i),u.port,u.path,u.query,u.fragment)})());if(s.startsWith(":")){let u=de(i,0,a),c,d=o;return c=new P(d.scheme,d.userinfo,new h(u),d.port,d.path,d.query,d.fragment),rs(s,c)}else if(s.startsWith("/")){let u=de(i,0,a),c,d=o;return c=new P(d.scheme,d.userinfo,new h(u),d.port,d.path,d.query,d.fragment),nn(s,c)}else if(s.startsWith("?")){let u=s.slice(1),c=de(i,0,a),d,f=o;return d=new P(f.scheme,f.userinfo,new h(c),f.port,f.path,f.query,f.fragment),Gt(u,d)}else if(s.startsWith("#")){let u=s.slice(1),c=de(i,0,a),d,f=o;return d=new P(f.scheme,f.userinfo,new h(c),f.port,f.path,f.query,f.fragment),$t(u,d)}else{let c=vr(s)[1];e=i,t=c,r=o,n=a+1}}}function Gp(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(s==="")return new y((()=>{let u=o;return new P(u.scheme,u.userinfo,new h(s),u.port,u.path,u.query,u.fragment)})());if(s.startsWith("]")&&a===0){let u=s.slice(1);return rs(u,o)}else if(s.startsWith("]")){let u=s.slice(1),c=de(i,0,a+1),d,f=o;return d=new P(f.scheme,f.userinfo,new h(c),f.port,f.path,f.query,f.fragment),rs(u,d)}else{if(s.startsWith("/")&&a===0)return nn(s,o);if(s.startsWith("/")){let u=de(i,0,a),c,d=o;return c=new P(d.scheme,d.userinfo,new h(u),d.port,d.path,d.query,d.fragment),nn(s,c)}else if(s.startsWith("?")&&a===0){let u=s.slice(1);return Gt(u,o)}else if(s.startsWith("?")){let u=s.slice(1),c=de(i,0,a),d,f=o;return d=new P(f.scheme,f.userinfo,new h(c),f.port,f.path,f.query,f.fragment),Gt(u,d)}else if(s.startsWith("#")&&a===0){let u=s.slice(1);return $t(u,o)}else if(s.startsWith("#")){let u=s.slice(1),c=de(i,0,a),d,f=o;return d=new P(f.scheme,f.userinfo,new h(c),f.port,f.path,f.query,f.fragment),$t(u,d)}else{let u=vr(s),c=u[0],d=u[1];if(Fp(c))e=i,t=d,r=o,n=a+1;else return du(i,i,o,0)}}}}function Hp(e,t){return Gp(e,e,t,0)}function Jp(e,t){return du(e,e,t,0)}function rn(e,t){if(e.startsWith("["))return Hp(e,t);if(e.startsWith(":")){let r,n=t;return r=new P(n.scheme,n.userinfo,new h(""),n.port,n.path,n.query,n.fragment),rs(e,r)}else return e===""?new y((()=>{let r=t;return new P(r.scheme,r.userinfo,new h(""),r.port,r.path,r.query,r.fragment)})()):Jp(e,t)}function Kp(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(s.startsWith("@")&&a===0){let u=s.slice(1);return rn(u,o)}else if(s.startsWith("@")){let u=s.slice(1),c=de(i,0,a),d,f=o;return d=new P(f.scheme,new h(c),f.host,f.port,f.path,f.query,f.fragment),rn(u,d)}else{if(s==="")return rn(i,o);if(s.startsWith("/"))return rn(i,o);if(s.startsWith("?"))return rn(i,o);if(s.startsWith("#"))return rn(i,o);{let c=vr(s)[1];e=i,t=c,r=o,n=a+1}}}}function Vp(e,t){return Kp(e,e,t,0)}function $l(e,t){if(e==="//")return new y((()=>{let r=t;return new P(r.scheme,r.userinfo,new h(""),r.port,r.path,r.query,r.fragment)})());if(e.startsWith("//")){let r=e.slice(2);return Vp(r,t)}else return nn(e,t)}function Yp(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(s.startsWith("/")&&a===0)return $l(s,o);if(s.startsWith("/")){let u=de(i,0,a),c,d=o;return c=new P(new h(Be(u)),d.userinfo,d.host,d.port,d.path,d.query,d.fragment),$l(s,c)}else if(s.startsWith("?")&&a===0){let u=s.slice(1);return Gt(u,o)}else if(s.startsWith("?")){let u=s.slice(1),c=de(i,0,a),d,f=o;return d=new P(new h(Be(c)),f.userinfo,f.host,f.port,f.path,f.query,f.fragment),Gt(u,d)}else if(s.startsWith("#")&&a===0){let u=s.slice(1);return $t(u,o)}else if(s.startsWith("#")){let u=s.slice(1),c=de(i,0,a),d,f=o;return d=new P(new h(Be(c)),f.userinfo,f.host,f.port,f.path,f.query,f.fragment),$t(u,d)}else{if(s.startsWith(":")&&a===0)return new k(void 0);if(s.startsWith(":")){let u=s.slice(1),c=de(i,0,a),d,f=o;return d=new P(new h(Be(c)),f.userinfo,f.host,f.port,f.path,f.query,f.fragment),$l(u,d)}else{if(s==="")return new y((()=>{let u=o;return new P(u.scheme,u.userinfo,u.host,u.port,i,u.query,u.fragment)})());{let c=vr(s)[1];e=i,t=c,r=o,n=a+1}}}}}function Zp(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return q(n);{let i=r.head,s=r.tail,o;i===""||i==="."?o=n:i===".."&&n.hasLength(0)?o=l([]):i===".."&&n.atLeastLength(1)?o=n.tail:o=w(i,n);let a=o;e=s,t=a}}}function Qp(e){return Zp(e,l([]))}function Hn(e){return Qp(wr(e,"/"))}function he(e){let t,r=e.fragment;if(r instanceof h){let z=r[0];t=l(["#",z])}else t=l([]);let n=t,i,s=e.query;if(s instanceof h){let z=s[0];i=w("?",w(z,n))}else i=n;let o=i,a=w(e.path,o),u,c=e.host,d=xr(e.path,"/");if(c instanceof h&&!d&&c[0]!==""){let z=c[0];u=w("/",a)}else u=a;let f=u,m,x=e.host,v=e.port;if(x instanceof h&&v instanceof h){let z=v[0];m=w(":",w(I(z),f))}else m=f;let B=m,j,H=e.scheme,F=e.userinfo,E=e.host;if(H instanceof h&&F instanceof h&&E instanceof h){let z=H[0],te=F[0],cr=E[0];j=w(z,w("://",w(te,w("@",w(cr,B)))))}else if(H instanceof h&&F instanceof $&&E instanceof h){let z=H[0],te=E[0];j=w(z,w("://",w(te,B)))}else if(H instanceof h&&F instanceof h&&E instanceof $){let z=H[0];j=w(z,w(":",B))}else if(H instanceof h&&F instanceof $&&E instanceof $){let z=H[0];j=w(z,w(":",B))}else if(H instanceof $&&F instanceof $&&E instanceof h){let z=E[0];j=w("//",w(z,B))}else j=B;return Ut(j)}var Xp=new P(new $,new $,new $,new $,"",new $,new $);function se(e){return Yp(e,e,Xp,0)}function ml(e,t){if(e instanceof Se||e instanceof WeakMap||e instanceof Map){let n={},i=e.get(t,n);return i===n?new y(new $):new y(new h(i))}let r=Number.isInteger(t);if(r&&t>=0&&t<8&&e instanceof Y){let n=0;for(let i of e){if(n===t)return new y(new h(i));n++}return new k("Indexable")}return r&&Array.isArray(e)||e&&typeof e=="object"||e&&Object.getPrototypeOf(e)===Object.prototype?t in e?new y(new h(e[t])):new y(new $):new k(r?"Indexable":"Dict")}function hu(e,t,r,n,i){if(!(e instanceof Y||Array.isArray(e))){let o=new mt("List",Pe(e),i);return[i,Y.fromArray([o])]}let s=[];for(let o of e){let a=t(o),[u,c]=a;if(c instanceof fr){let[d,f]=r(a,n.toString());return[i,f]}s.push(u),n++}return[Y.fromArray(s),i]}function $u(e){return Number.isInteger(e)?new y(e):new k(0)}function mu(e){return typeof e=="string"?new y(e):new k("")}var mt=class extends _{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}},Me=class extends _{constructor(t){super(),this.function=t}};function Kn(e,t){let r=t.function(e),n=r[0],i=r[1];return i.hasLength(0)?new y(n):new k(i)}function Ee(e){return new Me(t=>[e,l([])])}function gl(e,t){return new Me(r=>{let n=e.function(r),i=n[0],s=n[1];return[t(i),s]})}function wu(e,t){return new Me(r=>{let n=e.function(r),i=n[0],s=n[1],a=t(i).function(r),u=a,c=a[0];return s.hasLength(0)?u:[c,s]})}function e_(e,t,r){for(;;){let n=e,i=t,s=r;if(s.hasLength(0))return i;{let o=s.head,a=s.tail,u=o.function(n),c=u;if(u[1].hasLength(0))return c;e=n,t=i,r=a}}}function is(e,t){return new Me(r=>{let n=e.function(r),i=n;return n[1].hasLength(0)?i:e_(r,i,t)})}function gu(e,t){return l([new mt(e,Pe(t),l([]))])}function xu(e,t,r){let n=r(e);return n.isOk()?[n[0],l([])]:[n[0],l([new mt(t,Pe(e),l([]))])]}function t_(e){return C(!0,e)?[!0,l([])]:C(!1,e)?[!1,l([])]:[!1,gu("Bool",e)]}function r_(e){return xu(e,"Int",$u)}function bu(e,t){return new Me(r=>[e,gu(t,r)])}var yu=new Me(t_),me=new Me(r_);function n_(e){return xu(e,"String",mu)}var fe=new Me(n_);function Et(e){return new Me(t=>hu(t,e.function,(r,n)=>Jn(r,l([n])),0,l([])))}function Jn(e,t){let r=is(fe,l([gl(me,I)])),n=N(t,s=>{let o=s,a=Kn(o,r);return a.isOk()?a[0]:"<"+Pe(o)+">"}),i=N(e[1],s=>{let o=s;return new mt(o.expected,o.found,X(n,s.path))});return[e[0],i]}function i_(e,t,r,n,i){for(;;){let s=e,o=t,a=r,u=n,c=i;if(s.hasLength(0)){let d=a(u);return Jn(d,q(o))}else{let d=s.head,f=s.tail,m=ml(u,d);if(m.isOk()&&m[0]instanceof h){let x=m[0][0];e=f,t=w(d,o),r=a,n=x,i=c}else{if(m.isOk()&&m[0]instanceof $)return c(u,w(d,o));{let x=m[0],j=[a(u)[0],l([new mt(x,Pe(u),l([]))])];return Jn(j,q(o))}}}}}function s_(e,t,r){return new Me(n=>{let i=i_(e,l([]),t.function,n,(d,f)=>{let v=[t.function(d)[0],l([new mt("Field","Nothing",l([]))])];return Jn(v,q(f))}),s=i[0],o=i[1],a=r(s).function(n),u=a[0],c=a[1];return[u,X(o,c)]})}function D(e,t,r){return s_(l([e]),t,r)}function xl(e,t,r,n){return new Me(i=>{let s,o=ml(i,e);if(o.isOk()&&o[0]instanceof h){let B=o[0][0];s=r.function(B)}else if(o.isOk()&&o[0]instanceof $)s=[t,l([])];else{let B=o[0];s=[t,l([new mt(B,Pe(i),l([]))])]}let a;a=Jn(s,l([e]));let c=a,d=c[0],f=c[1],m=n(d).function(i),x=m[0],v=m[1];return[x,X(f,v)]})}function bl(e){return JSON.stringify(e)}function ku(e){return Object.fromEntries(e)}function vu(e){return e.toArray()}function Lu(e){try{let t=JSON.parse(e);return new y(t)}catch(t){return new k(l_(t,e))}}function l_(e,t){return a_(e)?new sn:u_(e,t)}function a_(e){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(e.message)}function u_(e,t){let r=[c_,f_,__,p_];for(let n of r){let i=n(e,t);if(i)return i}return new wt("",0)}function c_(e){let r=/unexpected token '(.)', ".+" is not valid JSON/i.exec(e.message);if(!r)return null;let n=ss(r[1]);return new wt(n,-1)}function f_(e){let r=/unexpected token (.) in JSON at position (\d+)/i.exec(e.message);if(!r)return null;let n=ss(r[1]),i=Number(r[2]);return new wt(n,i)}function p_(e,t){let n=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(e.message);if(!n)return null;let i=Number(n[2]),s=Number(n[3]),o=d_(i,s,t),a=ss(t[o]);return new wt(a,o)}function __(e){let r=/unexpected (identifier|token) "(.)"/i.exec(e.message);if(!r)return null;let n=ss(r[2]);return new wt(n,0)}function ss(e){return"0x"+e.charCodeAt(0).toString(16).toUpperCase()}function d_(e,t,r){if(e===1)return t-1;let n=1,i=0;return r.split("").find((s,o)=>(s===`
`&&(n+=1),n===e?(i=o+t,!0):!1)),i}var sn=class extends _{},wt=class extends _{constructor(t){super(),this[0]=t}},os=class extends _{constructor(t){super(),this[0]=t}},ls=class extends _{constructor(t){super(),this[0]=t}},yl=class extends _{constructor(t){super(),this[0]=t}};function h_(e,t){return Ge(Lu(e),r=>{let n=Kn(r,t);return Vi(n,i=>new yl(i))})}function Au(e,t){return h_(e,t)}function et(e){return bl(e)}function ce(e){return e}function vl(e){return e}function gt(e){return e}function tt(e){return ku(e)}function Ll(e){return vu(e)}function Yn(e,t){let n=N(e,t);return Ll(n)}var Zn=class extends _{constructor(t){super(),this.all=t}};function ju(e){return new Zn(l([t=>e(t.dispatch,t.emit,t.select,t.root)]))}function Ar(e){return ju((t,r,n,i)=>e(t))}function A(){return new Zn(l([]))}function jr(e){return new Zn(ze(e,l([]),(t,r)=>{let n=r.all;return X(t,n)}))}var zr=class extends _{constructor(t){super(),this.content=t}},oe=class extends _{constructor(t,r,n,i,s,o,a){super(),this.key=t,this.namespace=r,this.tag=n,this.attrs=i,this.children=s,this.self_closing=o,this.void=a}},Qn=class extends _{constructor(t){super(),this.subtree=t}},Sr=class extends _{constructor(t,r,n){super(),this[0]=t,this[1]=r,this.as_property=n}},Xn=class extends _{constructor(t,r){super(),this[0]=t,this[1]=r}};function w_(e){if(e instanceof Sr)return new k(void 0);{let t=e[0],r=e[1],n=Wi(t,2);return new y([n,r])}}function g_(e,t,r){return Ro(e,t,(n,i,s)=>{let o=r+"-"+I(s);return Ou(i,n,o)})}function Ou(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof zr)return i;if(n instanceof Qn){let o=n.subtree;e=o(),t=i,r=s}else{let o=n.attrs,a=n.children,u=ze(o,i,(c,d)=>{let f=w_(d);if(f.isOk()){let m=f[0][0],x=f[0][1];return Re(c,s+"-"+m,x)}else return c});return g_(a,u,s)}}}function zu(e){return Ou(e,J(),"0")}function O(e,t){return new Sr(e,t,!1)}function x_(e,t){return new Sr(e,t,!0)}function Eu(e,t){return new Xn("on"+e,t)}function Al(e){return O("style",ze(e,"",(t,r)=>{let n=r[0],i=r[1];return t+n+":"+i+";"}))}function p(e){return O("class",e)}function ei(e){return O("class",(()=>{let r=$r(e,n=>n[1]?new y(n[0]):new k(void 0));return We(r," ")})())}function Jt(e){return O("id",e)}function as(e){return O("title",e)}function jl(e){return O("type",e)}function Kt(e){return O("value",e)}function on(e){return O("placeholder",e)}function Ol(e){return x_("disabled",e)}function Vt(e){return O("href",e)}function Tu(e){return O("src",e)}function qu(e){return O("alt",e)}function R(e,t,r){return e==="area"?new oe("","",e,t,l([]),!1,!0):e==="base"?new oe("","",e,t,l([]),!1,!0):e==="br"?new oe("","",e,t,l([]),!1,!0):e==="col"?new oe("","",e,t,l([]),!1,!0):e==="embed"?new oe("","",e,t,l([]),!1,!0):e==="hr"?new oe("","",e,t,l([]),!1,!0):e==="img"?new oe("","",e,t,l([]),!1,!0):e==="input"?new oe("","",e,t,l([]),!1,!0):e==="link"?new oe("","",e,t,l([]),!1,!0):e==="meta"?new oe("","",e,t,l([]),!1,!0):e==="param"?new oe("","",e,t,l([]),!1,!0):e==="source"?new oe("","",e,t,l([]),!1,!0):e==="track"?new oe("","",e,t,l([]),!1,!0):e==="wbr"?new oe("","",e,t,l([]),!1,!0):new oe("","",e,t,r,!1,!1)}function ri(e,t,r,n){return new oe("",e,t,r,n,!1,!1)}function ni(e){return new zr(e)}function xt(){return new zr("")}var zl=class extends _{constructor(t){super(),this.dict=t}};function Cu(){return new zl(J())}var cs=class extends _{constructor(t){super(),this[0]=t}},fs=class extends _{constructor(t,r){super(),this[0]=t,this[1]=r}},ps=class extends _{constructor(t,r){super(),this[0]=t,this[1]=r}};function Bu(e){return C(e.created,J())&&C(e.removed,Cu())&&C(e.updated,J())}var _s=class extends _{constructor(t){super(),this[0]=t}},ds=class extends _{constructor(t,r){super(),this[0]=t,this[1]=r}},ii=class extends _{constructor(t){super(),this[0]=t}},bt=class extends _{constructor(t){super(),this[0]=t}},si=class extends _{constructor(t,r){super(),this[0]=t,this[1]=r}},hs=class extends _{constructor(t,r){super(),this[0]=t,this[1]=r}};var oi=class extends _{},$s=class extends _{constructor(t,r){super(),this[0]=t,this[1]=r}},ms=class extends _{constructor(t){super(),this[0]=t}},ws=class extends _{constructor(t){super(),this[0]=t}};globalThis.customElements&&!globalThis.customElements.get("lustre-fragment")&&globalThis.customElements.define("lustre-fragment",class extends HTMLElement{constructor(){super()}});function Sl(e,t,r){let n,i=[{prev:e,next:t,parent:e.parentNode}];for(;i.length;){let{prev:s,next:o,parent:a}=i.pop();for(;o.subtree!==void 0;)o=o.subtree();if(o.content!==void 0)if(s)if(s.nodeType===Node.TEXT_NODE)s.textContent!==o.content&&(s.textContent=o.content),n??=s;else{let u=document.createTextNode(o.content);a.replaceChild(u,s),n??=u}else{let u=document.createTextNode(o.content);a.appendChild(u),n??=u}else if(o.tag!==void 0){let u=L_({prev:s,next:o,dispatch:r,stack:i});s?s!==u&&a.replaceChild(u,s):a.appendChild(u),n??=u}}return n}function L_({prev:e,next:t,dispatch:r,stack:n}){let i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),o=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag),a;if(li.has(o))a=li.get(o);else{let E=new Map;li.set(o,E),a=E}let u=s?new Set(a.keys()):null,c=s?new Set(Array.from(e.attributes,E=>E.name)):null,d=null,f=null,m=null;if(s&&t.tag==="textarea"){let E=t.children[Symbol.iterator]().next().value?.content;E!==void 0&&(o.value=E)}let x=[];for(let E of t.attrs){let T=E[0],z=E[1];if(E.as_property)o[T]!==z&&(o[T]=z),s&&c.delete(T);else if(T.startsWith("on")){let te=T.slice(2),cr=r(z,te==="input");a.has(te)||o.addEventListener(te,ai),a.set(te,cr),s&&u.delete(te)}else if(T.startsWith("data-lustre-on-")){let te=T.slice(15),cr=r(A_);a.has(te)||o.addEventListener(te,ai),a.set(te,cr),o.setAttribute(T,z),s&&(u.delete(te),c.delete(T))}else T.startsWith("delegate:data-")||T.startsWith("delegate:aria-")?(o.setAttribute(T,z),x.push([T.slice(10),z])):T==="class"?d=d===null?z:d+" "+z:T==="style"?f=f===null?z:f+z:T==="dangerous-unescaped-html"?m=z:(o.getAttribute(T)!==z&&o.setAttribute(T,z),(T==="value"||T==="selected")&&(o[T]=z),s&&c.delete(T))}if(d!==null&&(o.setAttribute("class",d),s&&c.delete("class")),f!==null&&(o.setAttribute("style",f),s&&c.delete("style")),s){for(let E of c)o.removeAttribute(E);for(let E of u)a.delete(E),o.removeEventListener(E,ai)}if(t.tag==="slot"&&window.queueMicrotask(()=>{for(let E of o.assignedElements())for(let[T,z]of x)E.hasAttribute(T)||E.setAttribute(T,z)}),t.key!==void 0&&t.key!=="")o.setAttribute("data-lustre-key",t.key);else if(m!==null)return o.innerHTML=m,o;let v=o.firstChild,B=null,j=null,H=null,F=gs(t).next().value;if(s&&F!==void 0&&F.key!==void 0&&F.key!==""){B=new Set,j=Pu(e),H=Pu(t);for(let E of gs(t))v=j_(v,E,o,n,H,j,B)}else for(let E of gs(t))n.unshift({prev:v,next:E,parent:o}),v=v?.nextSibling;for(;v;){let E=v.nextSibling;o.removeChild(v),v=E}return o}var li=new WeakMap;function ai(e){let t=e.currentTarget;if(!li.has(t)){t.removeEventListener(e.type,ai);return}let r=li.get(t);if(!r.has(e.type)){t.removeEventListener(e.type,ai);return}r.get(e.type)(e)}function A_(e){let t=e.currentTarget,r=t.getAttribute(`data-lustre-on-${e.type}`),n=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:r,data:i.reduce((s,o)=>{let a=o.split(".");for(let u=0,c=s,d=e;u<a.length;u++)u===a.length-1?c[a[u]]=d[a[u]]:(c[a[u]]??={},d=d[a[u]],c=c[a[u]]);return s},{data:n})}}function Pu(e){let t=new Map;if(e)for(let r of gs(e)){let n=r?.key||r?.getAttribute?.("data-lustre-key");n&&t.set(n,r)}return t}function j_(e,t,r,n,i,s,o){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){let u=e.nextSibling;r.removeChild(e),e=u}if(s.size===0)return n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e;if(o.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),n.unshift({prev:null,next:t,parent:r}),e;o.add(t.key);let a=s.get(t.key);if(!a&&!e)return n.unshift({prev:null,next:t,parent:r}),e;if(!a&&e!==null){let u=document.createTextNode("");return r.insertBefore(u,e),n.unshift({prev:u,next:t,parent:r}),e}return!a||a===e?(n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e):(r.insertBefore(a,e),n.unshift({prev:a,next:t,parent:r}),e)}function*gs(e){for(let t of e.children)yield*Nu(t)}function*Nu(e){e.subtree!==void 0?yield*Nu(e.subtree()):yield e}var El=class e{static start({init:t,update:r,view:n},i,s){if(!ln())return new k(new ui);let o=i instanceof HTMLElement?i:document.querySelector(i);if(!o)return new k(new xs(i));let a=new e(o,t(s),r,n);return new y(u=>a.send(u))}constructor(t,[r,n],i,s){this.root=t,this.#e=r,this.#s=i,this.#r=s,this.#t=window.setTimeout(()=>this.#n(n.all.toArray(),!0),0)}root;send(t){if(t instanceof ii){if(t[0]instanceof ws){this.#t=window.clearTimeout(this.#t),this.#i=[],this.#e=t[0][0];let r=this.#r(this.#e),n=(s,o=!1)=>a=>{let u=s(a);u instanceof y&&this.send(new bt(u[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));Sl(i,r,n)}}else if(t instanceof bt){let r=t[0],n=t[1]??!1;this.#i.push(r),n?(this.#t=window.clearTimeout(this.#t),this.#n()):this.#t||(this.#t=window.setTimeout(()=>this.#n()))}else if(t instanceof si){let r=t[0],n=t[1];this.root.dispatchEvent(new CustomEvent(r,{detail:n,bubbles:!0,composed:!0}))}else if(t instanceof oi)for(this.#t=window.clearTimeout(this.#t),this.#e=null,this.#s=null,this.#r=null,this.#i=null;this.root.firstChild;)this.root.firstChild.remove()}#e;#s;#r;#i=[];#t;#n(t=[]){this.#t=void 0,this.#o(t);let r=this.#r(this.#e),n=(s,o=!1)=>a=>{let u=s(a);u instanceof y&&this.send(new bt(u[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));Sl(i,r,n)}#o(t=[]){for(;this.#i.length>0;){let r=this.#i.shift(),[n,i]=this.#s(this.#e,r);t=t.concat(i.all.toArray()),this.#e=n}for(;t.length>0;){let r=t.shift(),n=a=>this.send(new bt(a)),i=(a,u)=>this.root.dispatchEvent(new CustomEvent(a,{detail:u,bubbles:!0,composed:!0})),s=()=>{},o=this.root;r({dispatch:n,emit:i,select:s,root:o})}this.#i.length>0&&this.#o(t)}},Mu=El.start;var Tl=class e{static start({init:t,update:r,view:n,on_attribute_change:i},s){let o=new e(t(s),r,n,i);return new y(a=>o.send(a))}constructor([t,r],n,i,s){this.#e=t,this.#s=n,this.#i=i,this.#t=i(t),this.#a=s,this.#n=new Map,this.#o=zu(this.#t),this.#l(r.all.toArray())}send(t){if(t instanceof _s){for(let r of t[0]){let n=this.#a.get(r[0]);if(!n)continue;let i=n(r[1]);i instanceof k||this.#r.push(i)}this.#l()}else if(t instanceof ds)this.#r=this.#r.concat(t[0].toArray()),this.#l(t[1].all.toArray());else if(!(t instanceof ii))if(t instanceof bt)this.#r.push(t[0]),this.#l();else if(t instanceof si){let r=new fs(t[0],t[1]);for(let[n,i]of this.#n)i(r)}else if(t instanceof hs){let r=this.#o.get(t[0]);if(!r)return;let n=r(t[1]);if(n instanceof k)return;this.#r.push(n[0]),this.#l()}else if(t instanceof $s){let r=Do(this.#a),n=new ps(r,this.#t);this.#n=this.#n.set(t[0],t[1]),t[1](n)}else t instanceof ms&&(this.#n=this.#n.delete(t[0]))}#e;#s;#r;#i;#t;#n;#o;#a;#l(t=[]){this.#u(t);let r=this.#i(this.#e),n=elements(this.#t,r);if(!Bu(n)){let i=new cs(n);for(let[s,o]of this.#n)o(i)}this.#t=r,this.#o=n.handlers}#u(t=[]){for(;this.#r.length>0;){let r=this.#r.shift(),[n,i]=this.#s(this.#e,r);t=t.concat(i.all.toArray()),this.#e=n}for(;t.length>0;)t.shift()({dispatch:a=>this.send(new bt(a)),emit:(a,u)=>this.root.dispatchEvent(new CustomEvent(a,{detail:u,bubbles:!0,composed:!0})),select:()=>{},root:null});this.#r.length>0&&this.#u(t)}},O_=Tl.start,ln=()=>globalThis.window&&window.document;var ql=class extends _{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.on_attribute_change=i}};var xs=class extends _{constructor(t){super(),this.selector=t}},ui=class extends _{};function Iu(e,t,r){return new ql(e,t,r,new $)}function Du(e,t,r){return st(!ln(),new k(new ui),()=>Mu(e,t,r))}function g(e){return ni(e)}function Cl(e,t){return R("article",e,t)}function bs(e,t){return R("h1",e,t)}function ci(e,t){return R("h2",e,t)}function ye(e,t){return R("h3",e,t)}function ke(e,t){return R("h4",e,t)}function Fu(e,t){return R("h5",e,t)}function Ru(e,t){return R("h6",e,t)}function ys(e,t){return R("main",e,t)}function Wu(e,t){return R("nav",e,t)}function Bl(e,t){return R("section",e,t)}function b(e,t){return R("div",e,t)}function Gu(e){return R("hr",e,l([]))}function Hu(e,t){return R("li",e,t)}function yt(e,t){return R("p",e,t)}function ve(e,t){return R("pre",e,t)}function Pl(e,t){return R("ul",e,t)}function Yt(e,t){return R("a",e,t)}function Ju(e){return R("br",e,l([]))}function we(e,t){return R("code",e,t)}function Ku(e,t){return R("em",e,t)}function re(e,t){return R("span",e,t)}function fi(e,t){return R("strong",e,t)}function Vu(e){return R("img",e,l([]))}function ks(e,t){return ri("http://www.w3.org/2000/svg","svg",e,t)}function Z(e,t){return R("button",e,t)}function pi(e){return R("input",e,l([]))}function Er(e,t){return R("label",e,t)}function vs(e,t){return R("textarea",e,l([ni(t)]))}var Yu="http://www.w3.org/2000/svg";function an(e){return ri(Yu,"line",e,l([]))}function Zu(e){return ri(Yu,"polyline",e,l([]))}function Ls(e,t){return Eu(e,t)}function Qu(e){return Ls("click",t=>new y(e))}function U(e){return Ls("mousedown",t=>new y(e))}function Xu(e){return Ls("mouseenter",t=>new y(e))}function S_(e){let t=e;return Xo("target",Xo("value",Ea))(t)}function Zt(e){return Ls("input",t=>{let r=S_(t);return Rt(r,e)})}var T_={handle_external_links:!1,handle_internal_links:!0},ec=window?.location?.href,Il=()=>ec?new y(Ml(new URL(ec))):new k(void 0),Dl=(e,t=T_)=>{document.addEventListener("click",r=>{let n=rc(r.target);if(n)try{let i=new URL(n.href),s=Ml(i),o=i.host!==window.location.host;return!t.handle_external_links&&o||!t.handle_internal_links&&!o?void 0:(r.preventDefault(),o||(window.history.pushState({},"",n.href),window.requestAnimationFrame(()=>{i.hash&&document.getElementById(i.hash.slice(1))?.scrollIntoView()})),e(s))}catch{return}}),window.addEventListener("popstate",r=>{r.preventDefault();let n=new URL(window.location.href),i=Ml(n);window.requestAnimationFrame(()=>{n.hash&&document.getElementById(n.hash.slice(1))?.scrollIntoView()}),e(i)}),window.addEventListener("modem-push",({detail:r})=>{e(r)}),window.addEventListener("modem-replace",({detail:r})=>{e(r)})},tc=e=>{window.history.pushState({},"",he(e)),window.requestAnimationFrame(()=>{e.fragment[0]&&document.getElementById(e.fragment[0])?.scrollIntoView()}),window.dispatchEvent(new CustomEvent("modem-push",{detail:e}))};var rc=e=>!e||e.tagName==="BODY"?null:e.tagName==="A"?e:rc(e.parentElement),Ml=e=>new P(e.protocol?new h(e.protocol.slice(0,-1)):new $,new $,e.hostname?new h(e.hostname):new $,e.port?new h(Number(e.port)):new $,e.pathname,e.search?new h(e.search.slice(1)):new $,e.hash?new h(e.hash.slice(1)):new $);function nc(e){return Ar(t=>st(!ln(),void 0,()=>Dl(r=>{let i=e(r);return t(i)})))}var q_=new P(new $,new $,new $,new $,"",new $,new $);function Qt(e,t,r){return Ar(n=>st(!ln(),void 0,()=>tc((()=>{let i=q_;return new P(i.scheme,i.userinfo,i.host,i.port,e,t,r)})())))}function un(e,t){localStorage.setItem(e,t)}function ic(e){let t=localStorage.getItem(e);return t?new y(t):new k(void 0)}function sc(e){return JSON.parse(e)}function oc(e,t){navigator.clipboard.writeText(e).then(()=>{let r=document.querySelectorAll('[title="Copy short URL to clipboard"]'),n=null;if(r.forEach(i=>{i.textContent.trim()===t&&(n=i)}),n){let i=n.textContent,s=n.style.color;n.textContent="Copied!",n.style.color="#10b981",setTimeout(()=>{n.textContent=i,n.style.color=s},1e3)}}).catch(r=>{console.error("Failed to copy to clipboard:",r)})}var Ie=class extends _{},kt=class extends _{},Ul=class extends _{},Tr=class extends _{},qr=class extends _{},Fl=class extends _{},Rl=class extends _{},Wl=class extends _{},Gl=class extends _{};var Tt=class extends _{},Te=class extends _{};function lc(e){return e instanceof Rl?"CONNECT":e instanceof qr?"DELETE":e instanceof Ie?"GET":e instanceof Ul?"HEAD":e instanceof Wl?"OPTIONS":e instanceof Gl?"PATCH":e instanceof kt?"POST":e instanceof Tr?"PUT":e instanceof Fl?"TRACE":e[0]}function ac(e){return e instanceof Tt?"http":"https"}var vt=class extends _{constructor(t,r,n,i,s,o,a,u){super(),this.method=t,this.headers=r,this.body=n,this.scheme=i,this.host=s,this.port=o,this.path=a,this.query=u}};function cc(e){return new P(new h(ac(e.scheme)),new $,new h(e.host),e.port,e.path,e.query,new $)}function As(e,t,r){let n=Wo(e.headers,Be(t),r),i=e;return new vt(i.method,n,i.body,i.scheme,i.host,i.port,i.path,i.query)}function qt(e,t){let r=e.method,n=e.headers,i=e.scheme,s=e.host,o=e.port,a=e.path,u=e.query;return new vt(r,n,t,i,s,o,a,u)}function ge(e,t){let r=e;return new vt(t,r.headers,r.body,r.scheme,r.host,r.port,r.path,r.query)}function Le(){return new vt(new Ie,l([]),"",new Te,"localhost",new $,"",new $)}function Ve(e,t){let r=e;return new vt(r.method,r.headers,r.body,t,r.host,r.port,r.path,r.query)}function fn(e,t){let r=e;return new vt(r.method,r.headers,r.body,r.scheme,t,r.port,r.path,r.query)}function pn(e,t){let r=e;return new vt(r.method,r.headers,r.body,r.scheme,r.host,new h(t),r.path,r.query)}function Ae(e,t){let r=e;return new vt(r.method,r.headers,r.body,r.scheme,r.host,r.port,t,r.query)}var Xt=class extends _{constructor(t,r,n,i,s,o){super(),this.saving=t,this.slug=r,this.title=n,this.subtitle=i,this.leading=s,this.content=o}};function fc(e,t,r,n,i){return new Xt(!1,e,t,r,n,i)}function Os(e){return e.saving}function zs(e){return e.slug}function Ss(e){return e.title}function Es(e){return e.subtitle}function _i(e){return e.leading}function di(e){return e.content}function pc(e,t){{let r=e.saving,n=e.title,i=e.subtitle,s=e.leading,o=e.content;return new Xt(r,t,n,i,s,o)}}function _c(e,t){{let r=e.saving,n=e.slug,i=e.subtitle,s=e.leading,o=e.content;return new Xt(r,n,t,i,s,o)}}function dc(e,t){{let r=e.saving,n=e.slug,i=e.title,s=e.leading,o=e.content;return new Xt(r,n,i,t,s,o)}}function hc(e,t){{let r=e.saving,n=e.slug,i=e.title,s=e.subtitle,o=e.content;return new Xt(r,n,i,s,t,o)}}function $c(e,t){{let r=e.saving,n=e.slug,i=e.title,s=e.subtitle,o=e.leading;return new Xt(r,n,i,s,o,t)}}var Ct=class extends _{constructor(t,r,n){super(),this.status=t,this.headers=r,this.body=n}};var _n=class e{constructor(t){this.promise=t}static wrap(t){return t instanceof Promise?new e(t):t}static unwrap(t){return t instanceof e?t.promise:t}};function Ts(e){return Promise.resolve(_n.wrap(e))}function wc(e,t){return e.then(r=>t(_n.unwrap(r)))}function qs(e,t){return e.then(r=>_n.wrap(t(_n.unwrap(r))))}function Hl(e,t){return e.catch(r=>t(r))}function gc(e,t){return qs(e,n=>(t(n),n))}function Cs(e,t){return wc(e,n=>{if(n.isOk()){let i=n[0];return t(i)}else{let i=n[0];return Ts(new k(i))}})}async function bc(e){try{return new y(await fetch(e))}catch(t){return new k(new Bs(t.toString()))}}function yc(e){return new Ct(e.status,Y.fromArray([...e.headers]),e)}function I_(e){let t=he(cc(e)),r=lc(e.method).toUpperCase(),n={headers:D_(e.headers),method:r};return[t,n]}function kc(e){let[t,r]=I_(e);return r.method!=="GET"&&r.method!=="HEAD"&&(r.body=e.body),new globalThis.Request(t,r)}function D_(e){let t=new globalThis.Headers;for(let[r,n]of e)t.append(r.toLowerCase(),n);return t}async function Jl(e){let t;try{t=await e.body.text()}catch{return new k(new Ps)}return new y(e.withFields({body:t}))}var Bs=class extends _{constructor(t){super(),this[0]=t}},Ps=class extends _{};function vc(e){let r=kc(e),n=bc(r);return Cs(n,i=>Ts(new y(yc(i))))}var Ns=class extends _{constructor(t){super(),this[0]=t}},hi=class extends _{constructor(t){super(),this[0]=t}},$i=class extends _{constructor(t){super(),this[0]=t}},Ms=class extends _{},mi=class extends _{},wi=class extends _{constructor(t,r){super(),this[0]=t,this[1]=r}},gi=class extends _{},Is=class extends _{constructor(t){super(),this.run=t}};function F_(e,t,r){let n=vc(e),i=Cs(n,Jl),s=qs(i,a=>{if(a.isOk()){let u=a[0];return t.run(new y(u))}else return t.run(new k(new Ms))}),o=Hl(s,a=>t.run(new k(new Ms)));gc(o,r)}function je(e,t){return Ar(r=>F_(e,t,r))}function Lc(e){if(e instanceof Ct&&200<=e.status&&e.status<=299){let t=e.status,r=e.body;return new y(r)}else{if(e instanceof Ct&&e.status===401)return new k(new gi);if(e instanceof Ct&&e.status===404)return new k(new mi);if(e instanceof Ct&&e.status===500){let t=e.body;return new k(new hi(t))}else{let t=e.status,r=e.body;return new k(new wi(t,r))}}}function dn(e){return new Is(t=>{let n=Ge(t,Lc);return e(n)})}function Ye(e,t){return new Is(r=>{let i=Ge(r,Lc),s=Ge(i,o=>{let a=Au(o,e);if(a.isOk()){let u=a[0];return new y(u)}else{let u=a[0];return new k(new $i(u))}});return t(s)})}var M=class extends _{},W=class extends _{},S=class extends _{constructor(t){super(),this[0]=t}},Ze=class extends _{constructor(t){super(),this[0]=t}},Oe=class extends _{constructor(t){super(),this[0]=t}};function De(e,t){if(e instanceof S){let r=e[0];return new S(t(r))}else if(e instanceof Ze){let r=e[0];return new Ze(t(r))}else return e}var hn=class extends _{},Ue=class extends _{},er=class extends _{constructor(t){super(),this.session=t}},Vl=class extends _{constructor(t,r,n){super(),this.subject=t,this.expiry=r,this.permissions=n}};function R_(e){return e instanceof hn?l([]):e instanceof Ue?l([]):e.session.permissions}function Us(e,t){return qn(R_(e),r=>qn(t,n=>n===r))}function Yl(e,t){let r,n=t.scheme;n instanceof h&&n[0]==="http"?r=Ve(e,new Tt):n instanceof h&&n[0]==="https"?r=Ve(e,new Te):r=Ve(e,new Te);let i=r,s,o=t.host;if(o instanceof h){let f=o[0];s=fn(i,f)}else s=i;let a=s,u,c=t.port;if(c instanceof h){let f=c[0];u=pn(a,f)}else u=a;return u}function Ac(e,t){let r=Le(),n=ge(r,new Ie),i=Ae(n,"/api/auth/logout"),s=As(i,"credentials","include"),o=Yl(s,t);return je(o,dn(e))}function W_(){return D("subject",fe,e=>D("expiresAt",me,t=>D("permissions",Et(fe),r=>Ee(new Vl(e,t,r)))))}function jc(){let e=W_();return wu(e,t=>Ee(new er(t)))}function Oc(e,t,r,n){let i,s=tt(l([["username",ce(t)],["password",ce(r)]]));i=et(s);let o=i,a=Le(),u=ge(a,new kt),c=Ae(u,"/api/auth"),d=qt(c,o),f=Yl(d,n);return je(f,Ye(jc(),e))}function Zl(e,t){let r=Le(),n=ge(r,new Ie),i=Ae(n,"/api/auth"),s=As(i,"credentials","include"),o=Yl(s,t);return je(o,Ye(jc(),e))}var V=class extends _{constructor(t,r,n,i,s,o,a,u,c,d,f){super(),this.id=t,this.slug=r,this.revision=n,this.author=i,this.tags=s,this.published_at=o,this.title=a,this.subtitle=u,this.leading=c,this.content=d,this.draft=f}};function $n(e){if(e instanceof V&&e.content instanceof S){let t=e.slug,r=e.title,n=e.subtitle,i=e.leading,s=e.content[0],o=fc(t,r,n,i,s);return new h(o)}else return new $}function xi(e,t){return Us(t,l(["post_edit_any"]))}function Sc(e,t){return Us(t,l(["post_edit_any"]))}function Ec(e,t){return Us(t,l(["post_edit_any"]))}function bi(e,t){let r,n=t.scheme;n instanceof h&&n[0]==="http"?r=Ve(e,new Tt):n instanceof h&&n[0]==="https"?r=Ve(e,new Te):r=Ve(e,new Te);let i=r,s,o=t.host;if(o instanceof h){let f=o[0];s=fn(i,f)}else s=i;let a=s,u,c=t.port;if(c instanceof h){let f=c[0];u=pn(a,f)}else u=a;return u}function Tc(e,t,r){let n,i=Le(),s=ge(i,new qr),o=Ae(s,"/api/articles/"+t);return n=bi(o,r),je(n,dn(e))}function mn(){return xl("version",0,me,e=>D("id",fe,t=>D("author",fe,r=>D("tags",is(Et(fe),l([Ee(l([]))])),n=>D("published_at",gl(me,s=>s===0?new $:new h(tn(s))),i=>D("slug",fe,s=>D("revision",me,o=>D("title",fe,a=>D("leading",fe,u=>D("subtitle",fe,c=>xl("content","",fe,d=>{let f;d===""?f=new M:f=new S(d);let m=f;return Ee(new V(t,s,o,r,n,i,a,c,u,m,new $))})))))))))))}function tr(e,t,r){let n,i=Le(),s=ge(i,new Ie),o=Ae(s,"/api/articles/"+t);return n=bi(o,r),je(n,Ye(mn(),e))}function G_(){return D("articles",is(Et(mn()),l([Ee(l([]))])),e=>Ee(e))}function yi(e,t){let r,n=Le(),i=ge(n,new Ie),s=Ae(i,"/api/articles");return r=bi(s,t),je(r,Ye(G_(),e))}function Fs(e){{let t=e.id,r=e.slug,n=e.revision,i=e.author,s=e.tags,o=e.published_at,a=e.title,u=e.subtitle,c=e.leading,d=e.content,f;if(d instanceof S){let B=d[0];f=ce(B)}else f=ce("");let m=f,x;if(o instanceof h){let B=o[0];x=gt(cu(B))}else x=gt(0);let v=x;return tt(l([["struct_version",gt(1)],["id",ce(t)],["revision",gt(n)],["slug",ce(r)],["title",ce(a)],["leading",ce(c)],["subtitle",ce(u)],["author",ce(i)],["published_at",v],["tags",Yn(s,ce)],["content",m]]))}}function Rs(e,t,r){let n,i=Le(),s=ge(i,new Tr),o=Ae(s,"/api/articles/"+t.id),a=qt(o,(()=>{let c=Fs(t);return et(c)})());return n=bi(a,r),je(n,Ye(mn(),e))}function qc(e,t,r){let n,i=Le(),s=ge(i,new kt),o=Ae(s,"/api/articles"),a=qt(o,(()=>{let c=Fs(t);return et(c)})());return n=bi(a,r),je(n,Ye(mn(),e))}function wn(e,t){if(e instanceof V&&e.draft instanceof h){let r=e.draft[0],n=e;return new V(n.id,n.slug,n.revision,n.author,n.tags,n.published_at,n.title,n.subtitle,n.leading,n.content,new h(t(r)))}else return H_("draft_update: not an article with draft","src\\article\\article.gleam",316),e}function H_(e,t,r){let n="\x1B[90m",i="\x1B[39m",s=`${t}:${r}`,o=Bt(e);if(globalThis.process?.stderr?.write){let a=`${n}${s}${i}
${o}
`;process.stderr.write(a)}else if(globalThis.Deno){let a=`${n}${s}${i}
${o}
`;globalThis.Deno.stderr.writeSync(new TextEncoder().encode(a))}else{let a=`${s}
${o}`;globalThis.console.log(a)}return e}function J_(e){let t='"';for(let r=0;r<e.length;r++){let n=e[r];n==`
`?t+="\\n":n=="\r"?t+="\\r":n=="	"?t+="\\t":n=="\f"?t+="\\f":n=="\\"?t+="\\\\":n=='"'?t+='\\"':n<" "||n>"~"&&n<"\xA0"?t+="\\u{"+n.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=n}return t+='"',t}function K_(e){let t="dict.from_list([",r=!0,n=[];return e.forEach((i,s)=>{n.push([s,i])}),n.sort(),n.forEach(([i,s])=>{r||(t=t+", "),t=t+"#("+Bt(i)+", "+Bt(s)+")",r=!1}),t+"])"}function V_(e){let t=globalThis.Object.keys(e).map(r=>{let n=Bt(e[r]);return isNaN(parseInt(r))?`${r}: ${n}`:n}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function Y_(e){let t=Object.getPrototypeOf(e)?.constructor?.name||"Object",r=[];for(let s of Object.keys(e))r.push(`${Bt(s)}: ${Bt(e[s])}`);let n=r.length?" "+r.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${n}})`}function Bt(e){let t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return J_(e);if(t==="bigint"||t==="number")return e.toString();if(globalThis.Array.isArray(e))return`#(${e.map(Bt).join(", ")})`;if(e instanceof Y)return`[${e.toArray().map(Bt).join(", ")}]`;if(e instanceof Dt)return`//utfcodepoint(${String.fromCodePoint(e.value)})`;if(e instanceof Ce)return Z_(e);if(e instanceof _)return V_(e);if(Q_(e))return K_(e);if(e instanceof Set)return`//js(Set(${[...e].map(Bt).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){let r=[];for(let n of Array(e.length).keys())r.push(String.fromCharCode(n+97));return`//fn(${r.join(", ")}) { ... }`}return Y_(e)}function Z_(e){let t=e.bitOffset+8*Math.trunc(e.bitSize/8),r=pr(e,e.bitOffset,t),n=e.bitSize%8;if(n>0){let i=Ui(e,t,e.bitSize,!1,!1),s=Array.from(r.rawBuffer),o=`${i}:size(${n})`;return s.length===0?`<<${o}>>`:`<<${Array.from(r.rawBuffer).join(", ")}, ${o}>>`}else return`<<${Array.from(r.rawBuffer).join(", ")}>>`}function Q_(e){try{return e instanceof Se}catch{return!1}}var Pt=class extends _{},rt=class extends _{},Lt=class extends _{constructor(t){super(),this.slug=t}},nt=class extends _{constructor(t){super(),this.id=t}},At=class extends _{},jt=class extends _{},Qe=class extends _{},Nt=class extends _{constructor(t){super(),this[0]=t}},ki=class extends _{constructor(t){super(),this.uri=t}};function Xl(e){let t=Hn(e.path);if(t.hasLength(0))return new Pt;if(t.hasLength(1)&&t.head==="")return new Pt;if(t.hasLength(1)&&t.head==="articles")return new rt;if(t.hasLength(2)&&t.head==="article"){let r=t.tail.head;return new Lt(r)}else if(t.hasLength(3)&&t.head==="article"&&t.tail.tail.head==="edit"){let r=t.tail.head;return new nt(r)}else{if(t.hasLength(1)&&t.head==="about")return new At;if(t.hasLength(1)&&t.head==="djot-demo")return new jt;if(t.hasLength(1)&&t.head==="url")return new Qe;if(t.hasLength(2)&&t.head==="url"){let r=t.tail.head;return new Nt(r)}else return new ki(e)}}function gn(e){if(e instanceof Pt)return"/";if(e instanceof At)return"/about";if(e instanceof rt)return"/articles";if(e instanceof Lt)return"/article/"+e.slug;if(e instanceof nt)return"/article/"+e.id+"/edit";if(e instanceof jt)return"/djot-demo/";if(e instanceof Qe)return"/url/";if(e instanceof Nt)return"/url/"+e[0];{let t=e.uri;return"/404?uri="+he(t)}}function qe(e){let t,n=gn(e);t=se(n);let i=t;if(!i.isOk())throw G("let_assert","routes/routes",49,"to_uri","Pattern match failed, no pattern matched the value.",{value:i});return i[0]}function X_(e,t){for(;;){let r=e,n=t;if(r.hasLength(0)&&n.hasLength(0))return!0;if(r.hasLength(0))return!1;if(n.hasLength(0))return!1;{let i=r.head,s=r.tail,o=n.head,a=n.tail;if(C(i,o))e=s,t=a;else return!1}}}function Cc(e,t){let r,i=gn(e);r=Hn(i);let s=r,o,u=gn(t);return o=Hn(u),X_(s,o)}var vi=class extends _{constructor(t){super(),this[0]=t}},Cr=class extends _{},Mt=class extends _{constructor(t,r){super(),this.article=t,this.session=r}},Ot=class extends _{constructor(t){super(),this.article=t}},Br=class extends _{constructor(t,r){super(),this.articles=t,this.session=r}},rr=class extends _{},xn=class extends _{},bn=class extends _{constructor(t){super(),this.short=t}},$e=class extends _{constructor(t){super(),this.error=t}},yn=class extends _{},Ws=class extends _{constructor(t){super(),this.requested_uri=t}},Pr=class extends _{constructor(t){super(),this.content=t}},Nr=class extends _{constructor(t,r){super(),this.slug=t,this.available_slugs=r}},Mr=class extends _{constructor(t){super(),this.id=t}},nr=class extends _{constructor(t,r){super(),this.error=t,this.context=r}},Ir=class extends _{constructor(t){super(),this.attempted_action=t}},kn=class extends _{constructor(t){super(),this.msg=t}};function Gs(e){if(e instanceof vi){let t=e[0];return qe(t)}else if(e instanceof Cr){let t=se("/");if(!t.isOk())throw G("let_assert","pages/pages",51,"to_uri","Pattern match failed, no pattern matched the value.",{value:t});return t[0]}else if(e instanceof Br){let t=se("/articles");if(!t.isOk())throw G("let_assert","pages/pages",55,"to_uri","Pattern match failed, no pattern matched the value.",{value:t});return t[0]}else if(e instanceof rr){let t=se("/articles");if(!t.isOk())throw G("let_assert","pages/pages",59,"to_uri","Pattern match failed, no pattern matched the value.",{value:t});return t[0]}else if(e instanceof Mt){let t=e.article,r=se("/article/"+t.slug);if(!r.isOk())throw G("let_assert","pages/pages",63,"to_uri","Pattern match failed, no pattern matched the value.",{value:r});return r[0]}else if(e instanceof Ot){let t=e.article,r=se("/article/"+t.id+"/edit");if(!r.isOk())throw G("let_assert","pages/pages",67,"to_uri","Pattern match failed, no pattern matched the value.",{value:r});return r[0]}else if(e instanceof xn){let t=se("/url/");if(!t.isOk())throw G("let_assert","pages/pages",71,"to_uri","Pattern match failed, no pattern matched the value.",{value:t});return t[0]}else if(e instanceof bn){let t=e.short,r=se("/url/");if(!r.isOk())throw G("let_assert","pages/pages",75,"to_uri","Pattern match failed, no pattern matched the value.",{value:r});return r[0]}else if(e instanceof $e){let t=e.error;if(t instanceof Nr){let r=t.slug,n=se("/article/"+r);if(!n.isOk())throw G("let_assert","pages/pages",82,"to_uri","Pattern match failed, no pattern matched the value.",{value:n});return n[0]}else if(t instanceof Mr){let r=t.id,n=se("/article/"+r+"/edit");if(!n.isOk())throw G("let_assert","pages/pages",86,"to_uri","Pattern match failed, no pattern matched the value.",{value:n});return n[0]}else if(t instanceof nr){let r=se("/");if(!r.isOk())throw G("let_assert","pages/pages",90,"to_uri","Pattern match failed, no pattern matched the value.",{value:r});return r[0]}else if(t instanceof Ir){let r=se("/");if(!r.isOk())throw G("let_assert","pages/pages",94,"to_uri","Pattern match failed, no pattern matched the value.",{value:r});return r[0]}else{let r=se("/");if(!r.isOk())throw G("let_assert","pages/pages",98,"to_uri","Pattern match failed, no pattern matched the value.",{value:r});return r[0]}}else if(e instanceof yn){let t=se("/about");if(!t.isOk())throw G("let_assert","pages/pages",104,"to_uri","Pattern match failed, no pattern matched the value.",{value:t});return t[0]}else if(e instanceof Pr){let t=e.content,r=se("/djot-demo/"+t);if(!r.isOk())throw G("let_assert","pages/pages",108,"to_uri","Pattern match failed, no pattern matched the value.",{value:r});return r[0]}else return e.requested_uri}function ea(e){return N(e,t=>t.slug)}function td(e){{let t=e.expected,r=e.found,n=e.path;return"expected: "+t+", found: "+r+", path: "+We(n,"/")}}function Pc(e){if(e.hasLength(0))return"no errors";{let t=e.head,r=e.tail;return td(t)+`
`+Pc(r)}}function rd(e){{let t=e.expected,r=e.found,n=e.path;return"expected: "+t+", found: "+r+", path: "+We(n,"/")}}function Nc(e){if(e.hasLength(0))return"";{let t=e.head,r=e.tail;return rd(t)+`
`+Nc(r)}}function nd(e){if(e instanceof sn)return"unexpected end of input";if(e instanceof wt)return"unexpected byte: "+e[0];if(e instanceof os)return"unexpected sequence: "+e[0];if(e instanceof ls){let t=e[0];return`unexpected format
`+Pc(t)}else{let t=e[0];return`unable to decode
`+Nc(t)}}function Li(e){if(e instanceof Ns)return"bad url: "+e[0];if(e instanceof hi)return"internal server error: "+e[0];if(e instanceof $i){let t=e[0];return`json error
`+nd(t)}else{if(e instanceof mi)return"not found";if(e instanceof gi)return"unauthorized";if(e instanceof wi){let t=e[0],r=e[1];return"other error: "+I(t)+" "+r}else return"network error"}}var vn=class extends _{},Ai=class extends _{},Hs=class extends _{};function ji(e,t){return t instanceof vn?ks(X(e,l([O("viewBox","0 0 24 24"),O("fill","none"),O("stroke","currentColor"),O("stroke-width","2"),O("stroke-linecap","round"),O("stroke-linejoin","round")])),l([an(l([O("x1","18"),O("y1","6"),O("x2","6"),O("y2","18")])),an(l([O("x1","6"),O("y1","6"),O("x2","18"),O("y2","18")]))])):t instanceof Ai?ks(X(e,l([O("viewBox","0 0 24 24"),O("fill","none"),O("stroke","currentColor"),O("stroke-width","2"),O("stroke-linecap","round"),O("stroke-linejoin","round")])),l([an(l([O("x1","3"),O("y1","6"),O("x2","21"),O("y2","6")])),an(l([O("x1","3"),O("y1","12"),O("x2","21"),O("y2","12")])),an(l([O("x1","3"),O("y1","18"),O("x2","21"),O("y2","18")]))])):ks(X(e,l([O("viewBox","0 0 24 24"),O("fill","none"),O("stroke","currentColor"),O("stroke-width","2"),O("stroke-linecap","round"),O("stroke-linejoin","round")])),l([Zu(l([O("points","20,6 9,17 4,12")]))]))}var ta=class extends _{constructor(t,r){super(),this.content=t,this.references=r}},Ks=class extends _{},Oi=class extends _{constructor(t,r){super(),this.attributes=t,this.content=r}},zi=class extends _{constructor(t,r,n){super(),this.attributes=t,this.level=r,this.content=n}},Si=class extends _{constructor(t,r,n){super(),this.attributes=t,this.language=r,this.content=n}},Ei=class extends _{},Fe=class extends _{constructor(t){super(),this[0]=t}},Dr=class extends _{constructor(t,r){super(),this.content=t,this.destination=r}},Ur=class extends _{constructor(t,r){super(),this.content=t,this.destination=r}},Fr=class extends _{constructor(t){super(),this.content=t}},Rr=class extends _{constructor(t){super(),this.content=t}},Ln=class extends _{constructor(t){super(),this.content=t}},Ti=class extends _{constructor(t){super(),this[0]=t}},qi=class extends _{constructor(t){super(),this[0]=t}};function Js(e,t,r){return t==="class"?Uo(e,t,n=>n instanceof $?r:n[0]+" "+r):Re(e,t,r)}function od(e){for(;;){let t=e;if(t.hasLength(0))return l([]);if(t.atLeastLength(1)&&t.head===`
`)e=t.tail;else{let r=t.head,n=t.tail;return w(r,n)}}}function An(e){for(;;){let t=e;if(t.hasLength(0))return l([]);if(t.atLeastLength(1)&&t.head===" ")e=t.tail;else{let r=t.head,n=t.tail;return w(r,n)}}}function Mc(e,t){for(;;){let r=e,n=t;if(n.hasLength(0))return r>=3?new h([new Ks,n]):new $;if(n.atLeastLength(1)&&n.head===`
`)return r>=3?new h([new Ks,n]):new $;if(n.atLeastLength(1)&&n.head===" "){let i=n.tail;e=r,t=i}else if(n.atLeastLength(1)&&n.head==="	"){let i=n.tail;e=r,t=i}else if(n.atLeastLength(1)&&n.head==="-"){let i=n.tail;e=r+1,t=i}else if(n.atLeastLength(1)&&n.head==="*"){let i=n.tail;e=r+1,t=i}else return new $}}function ld(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return[n,l([])];if(r.atLeastLength(1)&&r.head===`
`){let i=r.tail;return[n+`
`,i]}else{let i=r.head;e=r.tail,t=n+i}}}function ad(e,t,r){for(;;){let n=e,i=t,s=r;if(n.atLeastLength(1)&&n.head===`
`&&s===0){let o=n.tail;return new h([o])}else{if(s===0)return new h([n]);if(n.atLeastLength(1)&&n.head===i){let o=n.head;e=n.tail,t=i,r=s-1}else return n.hasLength(0)?new h([n]):new $}}}function ud(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n,u=ad(i,s,o);if(u instanceof $){let c=ld(i,a),d=c[0];e=c[1],t=s,r=o,n=d}else{let c=u[0][0];return[a,c]}}}function cd(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1)&&r.head==="`")return new $;if(r.hasLength(0))return new h([new $,r]);if(r.atLeastLength(1)&&r.head===`
`&&n===""){let i=r.tail;return new h([new $,i])}else if(r.atLeastLength(1)&&r.head===`
`){let i=r.tail;return new h([new h(n),i])}else{let i=r.head;e=r.tail,t=n+i}}}function fd(e,t,r){for(;;){let n=e,i=t,s=r;if(n.atLeastLength(1)&&n.head===i){let o=n.head;e=n.tail,t=i,r=s+1}else if(n.atLeastLength(1)&&n.head===`
`&&s>=3){let o=n.tail;return new h([new $,s,o])}else if(n.atLeastLength(1)&&s>=3){let o=An(n);return Tn(cd(o,""),a=>{let u=a[0],c=a[1];return[u,s,c]})}else return new $}}function Ic(e,t,r){return $a(fd(e,r,1),n=>{let i=n[0],s=n[1],o=n[2],a=ud(o,r,s,""),u=a[0],c=a[1];return new h([new Si(t,i,u),c])})}function pd(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return new h([i,Zr(s),l([])]);if(n.atLeastLength(2)&&n.head===`
`&&n.tail.head===" "){let o=n.tail.tail;e=An(o),t=i,r=s}else if(n.atLeastLength(1)&&n.head===`
`){let o=n.tail;return new h([i,Zr(s),o])}else{let o=n.head;e=n.tail,t=i,r=s+o}}}function _d(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(2)&&r.head==="]"&&r.tail.head===":"){let i=r.tail.tail;return pd(i,n,"")}else{if(r.hasLength(0))return new $;if(r.atLeastLength(1)&&r.head==="]")return new $;if(r.atLeastLength(1)&&r.head===`
`)return new $;{let i=r.head;e=r.tail,t=n+i}}}}function dd(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return new $;if(n.atLeastLength(1)&&n.head===" "){let o=n.tail;return new h([i,s,o])}else{if(n.atLeastLength(1)&&n.head==="}")return new h([i,s,n]);{let o=n.head;e=n.tail,t=i,r=s+o}}}}function hd(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return new $;if(n.atLeastLength(1)&&n.head==='"'){let o=n.tail;return new h([i,s,o])}else{let o=n.head;e=n.tail,t=i,r=s+o}}}function $d(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return new $;if(r.atLeastLength(1)&&r.head===" ")return new $;if(r.atLeastLength(2)&&r.head==="="&&r.tail.head==='"'){let i=r.tail.tail;return hd(i,n,"")}else if(r.atLeastLength(1)&&r.head==="="){let i=r.tail;return dd(i,n,"")}else{let i=r.head;e=r.tail,t=n+i}}}function Dc(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return new h([n,r]);if(r.atLeastLength(1)&&r.head==="}")return new h([n,r]);if(r.atLeastLength(1)&&r.head===" ")return new h([n,r]);if(r.atLeastLength(1)&&r.head==="#")return new $;if(r.atLeastLength(1)&&r.head===".")return new $;if(r.atLeastLength(1)&&r.head==="=")return new $;if(r.atLeastLength(1)&&r.head===`
`)return new $;{let i=r.head;e=r.tail,t=n+i}}}function md(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return new h([n,l([])]);if(r.atLeastLength(1)&&r.head===`
`){let i=r.tail;return new h([n,i])}else if(r.atLeastLength(1)&&r.head===" ")e=r.tail,t=n;else return new $}}function wd(e,t){for(;;){let r=e,n=t,i=An(r);if(i.hasLength(0))return new $;if(i.atLeastLength(1)&&i.head==="}"){let s=i.tail;return md(s,n)}else if(i.atLeastLength(1)&&i.head==="#"){let s=i.tail,o=Dc(s,"");if(o instanceof h){let a=o[0][0];e=o[0][1],t=Js(n,"id",a)}else return new $}else if(i.atLeastLength(1)&&i.head==="."){let s=i.tail,o=Dc(s,"");if(o instanceof h){let a=o[0][0];e=o[0][1],t=Js(n,"class",a)}else return new $}else{let s=$d(i,"");if(s instanceof h){let o=s[0][0],a=s[0][1];e=s[0][2],t=Js(n,o,a)}else return new $}}}function gd(e){return e==="#"||e==="?"||e==="!"?!1:e!==","}function xd(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;if(r.atLeastLength(1)&&r.head===" "&&C(r.tail,l([]))){let i=r.tail;return n}else if(r.atLeastLength(1)&&r.head===`
`&&C(r.tail,l([]))){let i=r.tail;return n}else if(r.atLeastLength(1)&&r.head===" "&&n==="")e=r.tail,t=n;else if(r.atLeastLength(1)&&r.head===`
`&&n==="")e=r.tail,t=n;else if(r.atLeastLength(1)&&r.head===" ")e=r.tail,t=n+"-";else if(r.atLeastLength(1)&&r.head===`
`)e=r.tail,t=n+"-";else{let i=r.head;e=r.tail,t=n+i}}}function bd(e){let r=Yr(e),n=ct(r,gd);return xd(n,"")}function yd(e,t,r){for(;;){let n=e,i=t,s=r;if(i<0)return new $;if(n.hasLength(0)&&i>0)return new $;if(n.hasLength(0)&&i===0)return new h([s,l([])]);if(n.atLeastLength(1)&&n.head===" "&&i===0){let o=n.tail;return new h([s,o])}else if(n.atLeastLength(1)&&n.head==="#")e=n.tail,t=i-1,r=s;else return new $}}function kd(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return[q(s),l([])];if(n.hasLength(1)&&n.head===`
`)return[q(s),l([])];if(n.atLeastLength(2)&&n.head===`
`&&n.tail.head===`
`){let o=n.tail.tail;return[q(s),o]}else if(n.atLeastLength(2)&&n.head===`
`&&n.tail.head==="#"){let o=n.tail.tail,a=yd(o,i-1,w(`
`,s));if(a instanceof h){let u=a[0][0];e=a[0][1],t=i,r=u}else return[q(s),n]}else{let o=n.head;e=n.tail,t=i,r=w(o,s)}}}function vd(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(i.hasLength(0))return[!0,a,i];if(i.atLeastLength(1)&&i.head==="`")e=i.tail,t=s,r=o+1,n=a;else return i.atLeastLength(1)&&s===o?[!0,a,i]:[!1,a+Pn("`",o),i]}}function Ld(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return[s,n];if(n.atLeastLength(1)&&n.head==="`"){let o=n.tail,a=vd(o,i,1,s),u=a[0],c=a[1],d=a[2];if(u)return[c,d];e=d,t=i,r=c}else{let o=n.head;e=n.tail,t=i,r=s+o}}}function Ad(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1)&&r.head==="`")e=r.tail,t=n+1;else{let i=Ld(r,n,""),s=i[0],o=i[1],a;xr(s," `")?a=Ji(s):a=s;let c=a,d;Hi(c,"` ")?d=Ki(c):d=c;let m=d;return[new Ln(m),o]}}}function jd(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return new $;if(n.atLeastLength(1)&&n.head==="`")return new $;if(n.atLeastLength(2)&&n.head==="	"&&n.tail.head===i){let o=n.tail.head;e=n.tail.tail,t=i,r=w(" ",w(o,s))}else if(n.atLeastLength(2)&&n.head===`
`&&n.tail.head===i){let o=n.tail.head;e=n.tail.tail,t=i,r=w(" ",w(o,s))}else if(n.atLeastLength(2)&&n.head===" "&&n.tail.head===i){let o=n.tail.head;e=n.tail.tail,t=i,r=w(" ",w(o,s))}else if(n.atLeastLength(1)&&n.head===i){let o=n.head,a=n.tail,u=q(s);if(u.hasLength(0))return new $;{let c=u;return new h([c,a])}}else{let o=n.head;e=n.tail,t=i,r=w(o,s)}}}function Uc(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(i.hasLength(0))return new $;if(i.atLeastLength(1)&&i.head===")"&&s){let u=i.tail;return new h([o,new qi(a),u])}else if(i.atLeastLength(1)&&i.head==="]"&&!s){let u=i.tail;return new h([o,new Ti(a),u])}else if(i.atLeastLength(1)&&i.head===`
`&&s)e=i.tail,t=s,r=o,n=a;else if(i.atLeastLength(1)&&i.head===`
`&&!s)e=i.tail,t=s,r=o,n=a+" ";else{let u=i.head;e=i.tail,t=s,r=o,n=a+u}}}function Od(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return new $;if(r.atLeastLength(2)&&r.head==="]"&&r.tail.head==="["){let i=r.tail.tail,s=q(n);return Uc(i,!1,s,"")}else if(r.atLeastLength(2)&&r.head==="]"&&r.tail.head==="("){let i=r.tail.tail,s=q(n);return Uc(i,!0,s,"")}else{let i=r.head;e=r.tail,t=w(i,n)}}}function zd(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1)&&r.head==="#")e=r.tail,t=n+1;else{if(r.hasLength(0)&&n>0)return new h([n,l([])]);if(r.atLeastLength(1)&&r.head===" "&&n!==0){let i=r.tail;return new h([n,i])}else if(r.atLeastLength(1)&&r.head===`
`&&n!==0){let i=r.tail;return new h([n,i])}else return new $}}}function Vs(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head,s=r.tail;if(i instanceof Fe){let o=i[0];e=s,t=n+o}else if(i instanceof Ln){let o=i.content;e=s,t=n+o}else if(i instanceof Rr){let o=i.content;e=X(o,s),t=n}else if(i instanceof Fr){let o=i.content;e=X(o,s),t=n}else if(i instanceof Dr){let o=i.content,a=Vs(o,n);e=s,t=a}else if(i instanceof Ur){let o=i.content,a=Vs(o,n);e=s,t=a}else e=s,t=n}}}function Sd(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return[q(n),l([])];if(r.hasLength(1)&&r.head===`
`)return[q(n),l([])];if(r.atLeastLength(2)&&r.head===`
`&&r.tail.head===`
`){let i=r.tail.tail;return[q(n),i]}else{let i=r.head;e=r.tail,t=w(i,n)}}}function Fc(e,t){let r=jd(e,t,l([]));if(r instanceof $)return new $;{let n=r[0][0],i=r[0][1],s=Ys(n,"",l([]));return new h([s,i])}}function Ys(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0)&&i==="")return q(s);if(n.hasLength(0))return q(w(new Fe(i),s));if(n.atLeastLength(2)&&n.head==="\\"){let o=n.tail.head,a=n.tail.tail;o===`
`?(e=a,t="",r=w(new Ei,w(new Fe(i),s))):o===" "?(e=a,t=i+"&nbsp;",r=s):o==="!"||o==='"'||o==="#"||o==="$"||o==="%"||o==="&"||o==="'"||o==="("||o===")"||o==="*"||o==="+"||o===","||o==="-"||o==="."||o==="/"||o===":"||o===";"||o==="<"||o==="="||o===">"||o==="?"||o==="@"||o==="["||o==="\\"||o==="]"||o==="^"||o==="_"||o==="`"||o==="{"||o==="|"||o==="}"||o==="~"?(e=a,t=i+o,r=s):(e=X(l([o]),a),t=i+"\\",r=s)}else if(n.atLeastLength(2)&&n.head==="_"&&n.tail.head!==" "&&n.tail.head!=="	"&&n.tail.head!==`
`){let o=n.tail.head,a=n.tail.tail,u=w(o,a),c=Fc(u,"_");if(c instanceof $)e=u,t=i+"_",r=s;else{let d=c[0][0];e=c[0][1],t="",r=w(new Fr(d),w(new Fe(i),s))}}else if(n.atLeastLength(2)&&n.head==="*"&&n.tail.head!==" "&&n.tail.head!=="	"&&n.tail.head!==`
`){let o=n.tail.head,a=n.tail.tail,u=w(o,a),c=Fc(u,"*");if(c instanceof $)e=u,t=i+"*",r=s;else{let d=c[0][0];e=c[0][1],t="",r=w(new Rr(d),w(new Fe(i),s))}}else if(n.atLeastLength(1)&&n.head==="["){let o=n.tail,a=Rc(o,(u,c)=>new Dr(u,c));if(a instanceof $)e=o,t=i+"[",r=s;else{let u=a[0][0];e=a[0][1],t="",r=w(u,w(new Fe(i),s))}}else if(n.atLeastLength(2)&&n.head==="!"&&n.tail.head==="["){let o=n.tail.tail,a=Rc(o,(u,c)=>new Ur(u,c));if(a instanceof $)e=o,t=i+"![",r=s;else{let u=a[0][0];e=a[0][1],t="",r=w(u,w(new Fe(i),s))}}else if(n.atLeastLength(1)&&n.head==="`"){let o=n.tail,a=Ad(o,1),u=a[0];e=a[1],t="",r=w(u,w(new Fe(i),s))}else if(n.atLeastLength(1)&&n.head===`
`){let o=n.tail;e=An(o),t=i+`
`,r=s}else{let o=n.head;e=n.tail,t=i+o,r=s}}}function Rc(e,t){let r=Od(e,l([]));if(r instanceof $)return new $;{let n=r[0][0],i=r[0][1],s=r[0][2],o=Ys(n,"",l([])),a;i instanceof Ti&&i[0]===""?a=new Ti(Vs(o,"")):a=i;let u=a;return new h([t(o,u),s])}}function ir(e,t){let r=Sd(e,l([])),n=r[0],i=r[1],s=Ys(n,"",l([]));return[new Oi(t,s),i]}function Ed(e,t,r){let n=zd(e,1);if(n instanceof h){let i=n[0][0],s=n[0][1],o=An(s),a=kd(o,i,l([])),u=a[0],c=a[1],d=Ys(u,"",l([])),f=Vs(d,""),m,x=bd(f);if(x==="")m=[t,r];else{let F=x;if(at(t,F).isOk())m=[t,r];else{let T=Re(t,F,"#"+F),z=Js(r,"id",F);m=[T,z]}}let v=m,B=v[0],j=v[1];return[new zi(j,i,d),B,c]}else{let i=ir(w("#",e),r),s=i[0],o=i[1];return[s,t,o]}}function Td(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n,u=od(i),c=An(u);if(c.hasLength(0))return new ta(q(o),s);if(c.atLeastLength(1)&&c.head==="{"){let d=c.tail,f=wd(d,a);if(f instanceof $){let m=ir(c,a),x=m[0];e=m[1],t=s,r=w(x,o),n=J()}else{let m=f[0][0];e=f[0][1],t=s,r=o,n=m}}else if(c.atLeastLength(1)&&c.head==="#"){let d=c.tail,f=Ed(d,s,a),m=f[0],x=f[1];e=f[2],t=x,r=w(m,o),n=J()}else if(c.atLeastLength(1)&&c.head==="~"){let d=c.head,f=c.tail,m=Ic(f,a,d);if(m instanceof $){let x=ir(c,a),v=x[0];e=x[1],t=s,r=w(v,o),n=J()}else{let x=m[0][0];e=m[0][1],t=s,r=w(x,o),n=J()}}else if(c.atLeastLength(1)&&c.head==="`"){let d=c.head,f=c.tail,m=Ic(f,a,d);if(m instanceof $){let x=ir(c,a),v=x[0];e=x[1],t=s,r=w(v,o),n=J()}else{let x=m[0][0];e=m[0][1],t=s,r=w(x,o),n=J()}}else if(c.atLeastLength(1)&&c.head==="["){let d=c.tail,f=_d(d,"");if(f instanceof $){let m=ir(c,a),x=m[0];e=m[1],t=s,r=w(x,o),n=J()}else{let m=f[0][0],x=f[0][1],v=f[0][2],B=Re(s,m,x);e=v,t=B,r=o,n=J()}}else if(c.atLeastLength(1)&&c.head==="-"){let d=c.tail,f=Mc(1,d);if(f instanceof $){let m=ir(c,a),x=m[0];e=m[1],t=s,r=w(x,o),n=J()}else{let m=f[0][0];e=f[0][1],t=s,r=w(m,o),n=J()}}else if(c.atLeastLength(1)&&c.head==="*"){let d=c.tail,f=Mc(1,d);if(f instanceof $){let m=ir(c,a),x=m[0];e=m[1],t=s,r=w(x,o),n=J()}else{let m=f[0][0];e=f[0][1],t=s,r=w(m,o),n=J()}}else{let d=ir(c,a),f=d[0];e=d[1],t=s,r=w(f,o),n=J()}}}function Wc(e){let r=Ri(e,`\r
`,`
`),n=Yr(r);return Td(n,J(),l([]),J())}function Gc(e,t){if(e instanceof qi)return e[0];{let r=e[0],n=at(t,r);return n.isOk()?n[0]:""}}function ra(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head,s=r.tail;if(i instanceof Fe){let o=i[0];e=s,t=n+o}else if(i instanceof Ln){let o=i.content;e=s,t=n+o}else if(i instanceof Rr){let o=i.content;e=X(o,s),t=n}else if(i instanceof Fr){let o=i.content;e=X(o,s),t=n}else if(i instanceof Dr){let o=i.content,a=ra(o,n);e=s,t=a}else if(i instanceof Ur){let o=i.content,a=ra(o,n);e=s,t=a}else e=s,t=n}}}function sr(e,t){let n=hr(e),i=Vr(n,(s,o)=>Bn(s[0],o[0]));return ze(i,t,(s,o)=>w(O(o[0],o[1]),s))}function qd(e,t,r){if(t instanceof Ei)return l([Ju(l([]))]);if(t instanceof Fe){let n=t[0];return l([g(n)])}else if(t instanceof Rr){let n=t.content;return l([fi(l([p("font-bold")]),zt(e,n,r))])}else if(t instanceof Fr){let n=t.content;return l([Ku(l([p("italic")]),zt(e,n,r))])}else if(t instanceof Dr){let n=t.content,i=t.destination;return l([Yt(l([Vt(Gc(i,r)),p("text-pink-700 hover:underline cursor-pointer")]),zt(e,n,r))])}else if(t instanceof Ur){let n=t.content,i=t.destination;return l([Vu(l([Tu(Gc(i,r)),qu(ra(n,"")),p("max-w-full h-auto rounded-lg shadow-lg mt-8")]))])}else{let n=t.content;return l([we(l([p("bg-zinc-800 px-1 py-0.5 rounded text-sm font-mono")]),l([g(n)]))])}}function zt(e,t,r){for(;;){let n=e,i=t,s=r;if(i.hasLength(0))return n;{let o=i.head,a=i.tail;e=qd(n,o,s),t=a,r=s}}}function Cd(e,t,r){let n;if(t instanceof Oi){let s=t.attributes,o=t.content;n=yt(sr(s,l([p("pt-8")])),zt(l([]),o,r))}else if(t instanceof zi){let s=t.attributes,o=t.level,a=t.content;o===1?n=bs(sr(s,l([p("text-3xl text-pink-700 font-light")])),zt(l([]),a,r)):o===2?n=ci(sr(s,l([p("text-2xl text-pink-600 font-light pt-16")])),zt(l([]),a,r)):o===3?n=ye(sr(s,l([p("text-xl text-pink-600 font-light pt-12")])),zt(l([]),a,r)):o===4?n=ke(sr(s,l([p("text-lg text-pink-600 font-light pt-8")])),zt(l([]),a,r)):o===5?n=Fu(sr(s,l([p("text-base text-pink-600 font-light pt-6")])),zt(l([]),a,r)):n=Ru(sr(s,l([p("text-sm text-pink-600 font-light pt-4")])),zt(l([]),a,r))}else if(t instanceof Si){let s=t.attributes,o=t.language,a=t.content;n=ve(sr(s,l([p("pt-8")])),l([we((()=>{if(o instanceof h){let u=o[0];return l([p("language-"+u+" bg-zinc-800 p-4 rounded-md block overflow-x-auto")])}else return l([p("bg-zinc-800 p-4 rounded-md block overflow-x-auto")])})(),l([g(a)]))]))}else n=Gu(l([p("border-zinc-700 my-8")]));return w(n,e)}function Bd(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return s;{let o=n.head,a=n.tail,u=Cd(s,o,i);e=a,t=i,r=u}}}function Pd(e){return q(Bd(e.content,e.references,l([xt()])))}function Zs(e){let r=Wc(e);return Pd(r)}var or=class extends _{},Wr=class extends _{constructor(t){super(),this.articles=t}};function Qs(e){let t;if(e instanceof or)t=tt(l([["version",gt(0)]]));else{let n=e.articles;t=tt(l([["version",gt(1)],["articles",Yn(n,Fs)]]))}return et(t)}function Hc(){return D("version",me,e=>e===0?Ee(new or):e===1?D("articles",Et(mn()),t=>Ee(new Wr(t))):bu(new or,"Unsupported model version"))}function Jc(e,t,r){return Ar(n=>{let i=ic(e);if(i.isOk()){let s=i[0],o=Kn(sc(s),t);if(o.isOk()){let a=o[0];return n(r(new h(a)))}else return n(r(new $))}else return n(r(new $))})}var jn="jst_lustre_state";var na=class extends _{constructor(t,r,n,i,s,o,a,u){super(),this.id=t,this.short_code=r,this.target_url=n,this.created_by=i,this.created_at=s,this.updated_at=o,this.access_count=a,this.is_active=u}},Xs=class extends _{constructor(t,r){super(),this.short_code=t,this.target_url=r}},ia=class extends _{constructor(t,r,n,i){super(),this.short_urls=t,this.total=r,this.limit=n,this.offset=i}},eo=class extends _{constructor(t,r){super(),this.id=t,this.is_active=r}};function sa(){return D("id",fe,e=>D("shortCode",fe,t=>D("targetUrl",fe,r=>D("createdBy",fe,n=>D("createdAt",me,i=>D("updatedAt",me,s=>D("accessCount",me,o=>D("isActive",yu,a=>Ee(new na(e,t,r,n,i,s,o,a))))))))))}function Id(){return D("shortUrls",Et(sa()),e=>D("total",me,t=>D("limit",me,r=>D("offset",me,n=>Ee(new ia(e,t,r,n))))))}function Dd(e){return tt(l([["shortCode",ce(e.short_code)],["targetUrl",ce(e.target_url)]]))}function Ud(e){let t=l([["id",ce(e.id)]]),r,n=e.is_active;if(n instanceof h){let s=n[0];r=w(["isActive",vl(s)],t)}else r=t;return tt(r)}function to(e,t){let r,n=t.scheme;n instanceof h&&n[0]==="http"?r=Ve(e,new Tt):n instanceof h&&n[0]==="https"?r=Ve(e,new Te):r=Ve(e,new Te);let i=r,s,o=t.host;if(o instanceof h){let f=o[0];s=fn(i,f)}else s=i;let a=s,u,c=t.port;if(c instanceof h){let f=c[0];u=pn(a,f)}else u=a;return u}function Kc(e,t,r){let n,i=Dd(r);n=et(i);let s=n,o=Le(),a=ge(o,new kt),u=Ae(a,"/api/url"),c=qt(u,s),d=to(c,t);return je(d,Ye(sa(),e))}function Vc(e,t,r,n){let i="/api/url?limit="+I(r)+"&offset="+I(n),s=Le(),o=ge(s,new Ie),a=Ae(o,i),u=to(a,t);return je(u,Ye(Id(),e))}function Yc(e,t,r){let n=Le(),i=ge(n,new qr),s=Ae(i,"/api/url/"+r),o=to(s,t);return je(o,dn(e))}function Zc(e,t,r){let n,i=Ud(r);n=et(i);let s=n,o=Le(),a=ge(o,new Tr),u=Ae(a,"/api/url/"+r.id),c=qt(u,s),d=to(c,t);return je(d,Ye(sa(),e))}var L=class extends _{constructor(t,r,n,i,s,o,a,u,c,d,f,m){super(),this.base_uri=t,this.route=r,this.session=n,this.articles=i,this.short_urls=s,this.short_url_form_short_code=o,this.short_url_form_target_url=a,this.djot_demo_content=u,this.edit_view_mode=c,this.profile_menu_open=d,this.notice=f,this.debug_use_local_storage=m}},ar=class extends _{},Ci=class extends _{},no=class extends _{constructor(t){super(),this.uri=t}},St=class extends _{constructor(t){super(),this.uri=t}},io=class extends _{},so=class extends _{},aa=class extends _{constructor(t){super(),this.opt=t}},oo=class extends _{constructor(t){super(),this.article=t}},it=class extends _{constructor(t,r){super(),this.id=t,this.result=r}},ur=class extends _{constructor(t){super(),this.result=t}},lo=class extends _{constructor(t,r){super(),this.article=t,this.text=r}},ao=class extends _{constructor(t,r){super(),this.article=t,this.text=r}},uo=class extends _{constructor(t,r){super(),this.article=t,this.text=r}},co=class extends _{constructor(t,r){super(),this.article=t,this.text=r}},fo=class extends _{constructor(t,r){super(),this.article=t,this.content=r}},On=class extends _{constructor(t,r){super(),this.id=t,this.result=r}},po=class extends _{constructor(t){super(),this.article=t}},_o=class extends _{constructor(t){super(),this.article=t}},Bi=class extends _{},ho=class extends _{constructor(t){super(),this.result=t}},$o=class extends _{constructor(t){super(),this.article=t}},mo=class extends _{constructor(t,r){super(),this.id=t,this.result=r}},wo=class extends _{constructor(t){super(),this.article=t}},go=class extends _{constructor(t){super(),this.article=t}},xo=class extends _{constructor(t,r){super(),this.username=t,this.password=r}},bo=class extends _{constructor(t){super(),this.result=t}},Pi=class extends _{},yo=class extends _{constructor(t){super(),this.result=t}},ko=class extends _{},Ni=class extends _{constructor(t){super(),this.result=t}},vo=class extends _{constructor(t){super(),this.content=t}},Lo=class extends _{constructor(t,r){super(),this.short_code=t,this.target_url=r}},Ao=class extends _{constructor(t){super(),this.result=t}},jo=class extends _{constructor(t){super(),this.result=t}},Mi=class extends _{constructor(t){super(),this.id=t}},Oo=class extends _{constructor(t,r){super(),this.id=t,this.result=r}},zo=class extends _{constructor(t){super(),this.text=t}},So=class extends _{constructor(t){super(),this.text=t}},Ii=class extends _{constructor(t){super(),this.short_code=t}},Di=class extends _{constructor(t,r){super(),this.id=t,this.is_active=r}},Eo=class extends _{constructor(t,r){super(),this.id=t,this.result=r}},To=class extends _{},qo=class extends _{},Co=class extends _{constructor(t){super(),this.res=t}},ua=class extends _{},Bo=class extends _{},Po=class extends _{};function Rd(e){ee("fetch_articles_model called","src\\jst_lustre.gleam",961);let t=e[0],r=e[1],n,i=t;n=new L(i.base_uri,i.route,i.session,new W,i.short_urls,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage);let s=n,o=jr(l([r,yi(a=>new ur(a),s.base_uri)]));return[s,o]}function ro(e,t){let r=Xl(t);if(r instanceof At)return[(()=>{let n=e;return new L(n.base_uri,r,n.session,n.articles,n.short_urls,n.short_url_form_short_code,n.short_url_form_target_url,n.djot_demo_content,n.edit_view_mode,n.profile_menu_open,n.notice,n.debug_use_local_storage)})(),A()];if(r instanceof Lt){let n=r.slug,i=e.articles;if(i instanceof M)return[(()=>{let s=e;return new L(s.base_uri,r,s.session,new W,s.short_urls,s.short_url_form_short_code,s.short_url_form_target_url,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage)})(),yi(s=>new ur(s),e.base_uri)];if(i instanceof S){let s=i[0],o=Fo(s,A(),(c,d)=>{let f=d.slug===n,m=d.content;return f&&m instanceof M?[jr(l([c,tr(x=>new it(d.id,x),d.id,e.base_uri)])),(()=>{let x=d;return new V(x.id,x.slug,x.revision,x.author,x.tags,x.published_at,x.title,x.subtitle,x.leading,new W,x.draft)})()]:[c,d]}),a=o[0],u=o[1];return[(()=>{let c=e;return new L(c.base_uri,r,c.session,new S(u),c.short_urls,c.short_url_form_short_code,c.short_url_form_target_url,c.djot_demo_content,c.edit_view_mode,c.profile_menu_open,c.notice,c.debug_use_local_storage)})(),a]}else return[(()=>{let s=e;return new L(s.base_uri,r,s.session,s.articles,s.short_urls,s.short_url_form_short_code,s.short_url_form_target_url,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage)})(),A()]}else if(r instanceof nt){let n=r.id,i=e.articles;if(i instanceof M)return[(()=>{let s=e;return new L(s.base_uri,r,s.session,new W,s.short_urls,s.short_url_form_short_code,s.short_url_form_target_url,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage)})(),yi(s=>new ur(s),e.base_uri)];if(i instanceof S){let s=i[0],o=Fo(s,A(),(c,d)=>{let f;if(d.draft instanceof h)f=d;else{let j=d;f=new V(j.id,j.slug,j.revision,j.author,j.tags,j.published_at,j.title,j.subtitle,j.leading,j.content,$n(d))}let x=f,v=x.id===n,B=x.content;return v&&B instanceof M?[jr(l([c,tr(j=>new it(x.id,j),x.id,e.base_uri)])),(()=>{let j=x;return new V(j.id,j.slug,j.revision,j.author,j.tags,j.published_at,j.title,j.subtitle,j.leading,new W,$n(x))})()]:[c,x]}),a=o[0],u=o[1];return ee(gn(r),"src\\jst_lustre.gleam",1047),[(()=>{let c=e;return new L(c.base_uri,r,c.session,new S(u),c.short_urls,c.short_url_form_short_code,c.short_url_form_target_url,c.djot_demo_content,c.edit_view_mode,c.profile_menu_open,c.notice,c.debug_use_local_storage)})(),a]}else return[(()=>{let s=e;return new L(s.base_uri,r,s.session,s.articles,s.short_urls,s.short_url_form_short_code,s.short_url_form_target_url,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage)})(),A()]}else{if(r instanceof rt)return e.articles instanceof M?[(()=>{let i=e;return new L(i.base_uri,r,i.session,new W,i.short_urls,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage)})(),yi(i=>new ur(i),e.base_uri)]:[(()=>{let i=e;return new L(i.base_uri,r,i.session,i.articles,i.short_urls,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage)})(),A()];if(r instanceof Pt)return[(()=>{let n=e;return new L(n.base_uri,r,n.session,n.articles,n.short_urls,n.short_url_form_short_code,n.short_url_form_target_url,n.djot_demo_content,n.edit_view_mode,n.profile_menu_open,n.notice,n.debug_use_local_storage)})(),A()];if(r instanceof Qe)return e.short_urls instanceof M?[(()=>{let i=e;return new L(i.base_uri,r,i.session,i.articles,new W,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage)})(),Vc(i=>new jo(i),e.base_uri,10,0)]:[(()=>{let i=e;return new L(i.base_uri,r,i.session,i.articles,i.short_urls,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage)})(),A()];if(r instanceof Nt){let n=r[0];return[(()=>{let i=e;return new L(i.base_uri,r,i.session,i.articles,i.short_urls,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage)})(),A()]}else return r instanceof jt?[(()=>{let n=e;return new L(n.base_uri,r,n.session,n.articles,n.short_urls,n.short_url_form_short_code,n.short_url_form_target_url,n.djot_demo_content,n.edit_view_mode,n.profile_menu_open,n.notice,n.debug_use_local_storage)})(),A()]:[(()=>{let n=e;return new L(n.base_uri,r,n.session,n.articles,n.short_urls,n.short_url_form_short_code,n.short_url_form_target_url,n.djot_demo_content,n.edit_view_mode,n.profile_menu_open,n.notice,n.debug_use_local_storage)})(),A()]}}function Qc(e,t){if(t instanceof Co){let r=t.res;ee("GotLocalModelResult called","src\\jst_lustre.gleam",220),ee(r,"src\\jst_lustre.gleam",221);let n=qe(e.route);if(r instanceof h){let i=r[0];if(i instanceof or)return ro(e,n);{let s=i.articles;return ro((()=>{let o=e;return new L(o.base_uri,o.route,o.session,new S(s),o.short_urls,o.short_url_form_short_code,o.short_url_form_target_url,o.djot_demo_content,o.edit_view_mode,o.profile_menu_open,o.notice,!0)})(),n)}}else{let i,s=e;i=new L(s.base_uri,s.route,s.session,s.articles,s.short_urls,s.short_url_form_short_code,s.short_url_form_target_url,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,!1);let a=ro(i,n);return Rd(a)}}else if(t instanceof no){let r=t.uri;return ro(e,r)}else if(t instanceof St){let r=t.uri;return ee("user mouse down navigation","src\\jst_lustre.gleam",251),ee(r,"src\\jst_lustre.gleam",252),[e,Qt(he(r),new $,new $)]}else{if(t instanceof io)return[(()=>{let r=e;return new L(r.base_uri,r.route,r.session,r.articles,r.short_urls,r.short_url_form_short_code,r.short_url_form_target_url,r.djot_demo_content,r.edit_view_mode,!e.profile_menu_open,r.notice,r.debug_use_local_storage)})(),A()];if(t instanceof so)return[(()=>{let r=e;return new L(r.base_uri,r.route,r.session,r.articles,r.short_urls,r.short_url_form_short_code,r.short_url_form_target_url,r.djot_demo_content,r.edit_view_mode,r.profile_menu_open,"",r.debug_use_local_storage)})(),A()];if(t instanceof aa){let r=t.opt;if(r instanceof h&&r[0]instanceof Wr){let n=r[0].articles;return[(()=>{let i=e;return new L(i.base_uri,i.route,i.session,new S(n),i.short_urls,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage)})(),A()]}else return r instanceof h&&r[0]instanceof or?[e,A()]:[e,A()]}else if(t instanceof ur){let r=t.result,n=e.route;if(r.isOk()&&n instanceof Lt){let i=r[0],s=n.slug,o=ft(i,a=>a.slug===s);if(o.isOk()&&o[0]instanceof V&&o[0].content instanceof M){let a=o[0].id,u=N(i,c=>{if(c.slug===s){let f=c;return new V(f.id,f.slug,f.revision,f.author,f.tags,f.published_at,f.title,f.subtitle,f.leading,new W,f.draft)}else return c});return[(()=>{let c=e;return new L(c.base_uri,c.route,c.session,new S(u),c.short_urls,c.short_url_form_short_code,c.short_url_form_target_url,c.djot_demo_content,c.edit_view_mode,c.profile_menu_open,c.notice,c.debug_use_local_storage)})(),tr(c=>new it(a,c),a,e.base_uri)]}else if(o.isOk()&&o[0]instanceof V&&o[0].content instanceof M){let a=o[0].id,u=N(i,c=>{if(c.slug===s){let f=c;return new V(f.id,f.slug,f.revision,f.author,f.tags,f.published_at,f.title,f.subtitle,f.leading,new W,f.draft)}else return c});return[(()=>{let c=e;return new L(c.base_uri,c.route,c.session,new S(u),c.short_urls,c.short_url_form_short_code,c.short_url_form_target_url,c.djot_demo_content,c.edit_view_mode,c.profile_menu_open,c.notice,c.debug_use_local_storage)})(),tr(c=>new it(a,c),a,e.base_uri)]}else return o.isOk()?(ee("article exists. content is pending or loading.","src\\jst_lustre.gleam",324),[e,A()]):[e,Qt((()=>{let a=e.route,u=qe(a),c=new ki(u);return gn(c)})(),new $,new $)]}else if(r.isOk()&&n instanceof nt){let i=r[0],s=n.id;return[(()=>{let o=e;return new L(o.base_uri,o.route,o.session,new S(i),o.short_urls,o.short_url_form_short_code,o.short_url_form_target_url,o.djot_demo_content,o.edit_view_mode,o.profile_menu_open,o.notice,o.debug_use_local_storage)})(),tr(o=>new it(s,o),s,e.base_uri)]}else if(r.isOk()){let i=r[0];return[(()=>{let s=e;return new L(s.base_uri,s.route,s.session,new S(i),s.short_urls,s.short_url_form_short_code,s.short_url_form_target_url,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage)})(),A()]}else{let i=r[0];return[(()=>{let s=e;return new L(s.base_uri,s.route,s.session,new Oe(i),s.short_urls,s.short_url_form_short_code,s.short_url_form_target_url,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage)})(),A()]}}else if(t instanceof it){let r=t.id,n=t.result;if(n.isOk()){let i=n[0],s=r===i.id;if(!s)throw G("let_assert","jst_lustre",358,"update","Pattern match failed, no pattern matched the value.",{value:s});let o,a=e.articles;o=De(a,c=>N(c,d=>r===d.id?i:d));let u=o;return[(()=>{let c=e;return new L(c.base_uri,c.route,c.session,u,c.short_urls,c.short_url_form_short_code,c.short_url_form_target_url,c.djot_demo_content,c.edit_view_mode,c.profile_menu_open,c.notice,c.debug_use_local_storage)})(),A()]}else{let i=n[0],s,o=e.articles;s=De(o,u=>N(u,c=>{if(r===c.id){let f=c;return new V(f.id,f.slug,f.revision,f.author,f.tags,f.published_at,f.title,f.subtitle,f.leading,new Oe(i),f.draft)}else return c}));let a=s;return[(()=>{let u=e;return new L(u.base_uri,u.route,u.session,a,u.short_urls,u.short_url_form_short_code,u.short_url_form_target_url,u.djot_demo_content,u.edit_view_mode,u.profile_menu_open,u.notice,u.debug_use_local_storage)})(),A()]}}else if(t instanceof oo){let r=t.article,n=r.content;if(n instanceof M){let i,s=e.articles;i=De(s,a=>N(a,u=>{if(r.id===u.id){let d=u;return new V(d.id,d.slug,d.revision,d.author,d.tags,d.published_at,d.title,d.subtitle,d.leading,new W,d.draft)}else return u}));let o=i;return[(()=>{let a=e;return new L(a.base_uri,a.route,a.session,o,a.short_urls,a.short_url_form_short_code,a.short_url_form_target_url,a.djot_demo_content,a.edit_view_mode,a.profile_menu_open,a.notice,a.debug_use_local_storage)})(),tr(a=>new it(r.id,a),r.id,e.base_uri)]}else return n instanceof Oe?[e,tr(i=>new it(r.id,i),r.id,e.base_uri)]:n instanceof W?[e,A()]:n instanceof S?[e,A()]:[e,A()]}else if(t instanceof lo){let r=t.article,n=t.text;if(r instanceof V&&r.draft instanceof h){let i=wn(r,s=>pc(s,n));return[(()=>{let s=e;return new L(s.base_uri,s.route,s.session,De(e.articles,o=>N(o,a=>r.id===a.id?i:a)),s.short_urls,s.short_url_form_short_code,s.short_url_form_target_url,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage)})(),A()]}else return[e,A()]}else if(t instanceof ao){let r=t.article,n=t.text,i=wn(r,o=>_c(o,n)),s=De(e.articles,o=>N(o,a=>r.id===a.id?i:a));return[(()=>{let o=e;return new L(o.base_uri,o.route,o.session,s,o.short_urls,o.short_url_form_short_code,o.short_url_form_target_url,o.djot_demo_content,o.edit_view_mode,o.profile_menu_open,o.notice,o.debug_use_local_storage)})(),A()]}else if(t instanceof uo){let r=t.article,n=t.text,i=wn(r,o=>hc(o,n)),s=De(e.articles,o=>N(o,a=>r.id===a.id?i:a));return[(()=>{let o=e;return new L(o.base_uri,o.route,o.session,s,o.short_urls,o.short_url_form_short_code,o.short_url_form_target_url,o.djot_demo_content,o.edit_view_mode,o.profile_menu_open,o.notice,o.debug_use_local_storage)})(),A()]}else if(t instanceof co){let r=t.article,n=t.text,i=wn(r,o=>dc(o,n)),s=De(e.articles,o=>N(o,a=>r.id===a.id?i:a));return[(()=>{let o=e;return new L(o.base_uri,o.route,o.session,s,o.short_urls,o.short_url_form_short_code,o.short_url_form_target_url,o.djot_demo_content,o.edit_view_mode,o.profile_menu_open,o.notice,o.debug_use_local_storage)})(),A()]}else if(t instanceof fo){let r=t.article,n=t.content,i=wn(r,s=>$c(s,n));return[(()=>{let s=e;return new L(s.base_uri,s.route,s.session,De(e.articles,o=>N(o,a=>r.id===a.id?i:a)),s.short_urls,s.short_url_form_short_code,s.short_url_form_target_url,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage)})(),A()]}else if(t instanceof _o){let r=t.article;ee("article draft discard clicked","src\\jst_lustre.gleam",532);let n=De(e.articles,i=>N(i,s=>{if(r.id===s.id){let a=r;return new V(a.id,a.slug,a.revision,a.author,a.tags,a.published_at,a.title,a.subtitle,a.leading,a.content,new $)}else return s}));return[(()=>{let i=e;return new L(i.base_uri,i.route,i.session,n,i.short_urls,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage)})(),Qt((()=>{let i=Gs(new Mt(r,e.session));return he(i)})(),new $,new $)]}else if(t instanceof po){let r=t.article,n=r.draft;if(n instanceof h){let i=n[0],s,o=r;s=new V(o.id,zs(i),o.revision,o.author,o.tags,o.published_at,Ss(i),Es(i),_i(i),new S(di(i)),new h(i));let a=s,u=De(e.articles,c=>N(c,d=>r.id===d.id?a:d));return[(()=>{let c=e;return new L(c.base_uri,c.route,c.session,u,c.short_urls,c.short_url_form_short_code,c.short_url_form_target_url,c.djot_demo_content,c.edit_view_mode,c.profile_menu_open,c.notice,c.debug_use_local_storage)})(),jr(l([Rs(c=>new On(a.id,c),a,e.base_uri),Qt((()=>{let c=Gs(new Mt(a,e.session));return he(c)})(),new $,new $)]))]}else return[e,A()]}else if(t instanceof On){let r=t.id,n=t.result;if(n.isOk()){let i=n[0],s=De(e.articles,o=>N(o,a=>r===a.id?i:a));return[(()=>{let o=e;return new L(o.base_uri,o.route,o.session,s,o.short_urls,o.short_url_form_short_code,o.short_url_form_target_url,o.djot_demo_content,o.edit_view_mode,o.profile_menu_open,o.notice,o.debug_use_local_storage)})(),A()]}else{let i=n[0];return ee("article update response error","src\\jst_lustre.gleam",613),ee(i,"src\\jst_lustre.gleam",614),[e,A()]}}else if(t instanceof xo){let r=t.username,n=t.password;return[(()=>{let i=e;return new L(i.base_uri,i.route,new hn,i.articles,i.short_urls,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,"login, CLICK",i.debug_use_local_storage)})(),Oc(i=>new bo(i),r,n,e.base_uri)]}else if(t instanceof bo){let r=t.result;if(r.isOk()){let n=r[0];return[(()=>{let i=e;return new L(i.base_uri,i.route,n,i.articles,i.short_urls,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,"login, OK",i.debug_use_local_storage)})(),A()]}else{let n=r[0];return ee(n,"src\\jst_lustre.gleam",633),[(()=>{let i=e;return new L(i.base_uri,i.route,new Ue,i.articles,i.short_urls,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,"login, ERROR",i.debug_use_local_storage)})(),A()]}}else{if(t instanceof Pi)return[(()=>{let r=e;return new L(r.base_uri,r.route,new Ue,r.articles,r.short_urls,r.short_url_form_short_code,r.short_url_form_target_url,r.djot_demo_content,r.edit_view_mode,r.profile_menu_open,r.notice,r.debug_use_local_storage)})(),Ac(r=>new yo(r),e.base_uri)];if(t instanceof yo)return[(()=>{let r=e;return new L(r.base_uri,r.route,new Ue,r.articles,r.short_urls,r.short_url_form_short_code,r.short_url_form_target_url,r.djot_demo_content,r.edit_view_mode,r.profile_menu_open,r.notice,r.debug_use_local_storage)})(),A()];if(t instanceof ko)return[(()=>{let r=e;return new L(r.base_uri,r.route,r.session,r.articles,r.short_urls,r.short_url_form_short_code,r.short_url_form_target_url,r.djot_demo_content,r.edit_view_mode,r.profile_menu_open,"auth check, CLICK",r.debug_use_local_storage)})(),Zl(r=>new Ni(r),e.base_uri)];if(t instanceof Ni){let r=t.result;if(r.isOk()){let n=r[0];return[(()=>{let i=e;return new L(i.base_uri,i.route,n,i.articles,i.short_urls,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,"auth check, OK",i.debug_use_local_storage)})(),A()]}else{let n=r[0];return ee("session check response error","src\\jst_lustre.gleam",666),ee(n,"src\\jst_lustre.gleam",667),[(()=>{let i=e;return new L(i.base_uri,i.route,new Ue,i.articles,i.short_urls,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,"auth check, ERROR",i.debug_use_local_storage)})(),A()]}}else if(t instanceof vo){let r=t.content;return[(()=>{let n=e;return new L(n.base_uri,n.route,n.session,n.articles,n.short_urls,n.short_url_form_short_code,n.short_url_form_target_url,r,n.edit_view_mode,n.profile_menu_open,n.notice,n.debug_use_local_storage)})(),A()]}else if(t instanceof To){let r;e.edit_view_mode instanceof ar?r=new Ci:r=new ar;let i=r;return[(()=>{let s=e;return new L(s.base_uri,s.route,s.session,s.articles,s.short_urls,s.short_url_form_short_code,s.short_url_form_target_url,s.djot_demo_content,i,s.profile_menu_open,s.notice,s.debug_use_local_storage)})(),A()]}else if(t instanceof Bi){ee("article create clicked","src\\jst_lustre.gleam",698);let r=new V("","new-article",1,"current-user",l([]),new $,"New Article","A new article subtitle","This is a new article. Start editing to customize it.",new S(`# New Article

Start writing your article content here...`),new $);return[e,qc(n=>new ho(n),r,e.base_uri)]}else if(t instanceof ho){let r=t.result;if(r.isOk()){let n=r[0];ee("article created successfully with id: "+n.id,"src\\jst_lustre.gleam",730);let i,s=e.articles;if(s instanceof S){let a=s[0];i=new S(w(n,a))}else i=s;let o=i;return[(()=>{let a=e;return new L(a.base_uri,a.route,a.session,o,a.short_urls,a.short_url_form_short_code,a.short_url_form_target_url,a.djot_demo_content,a.edit_view_mode,a.profile_menu_open,a.notice,a.debug_use_local_storage)})(),Qt((()=>{let a=new nt(n.id),u=qe(a);return he(u)})(),new $,new $)]}else{let n=r[0];return ee("article creation error","src\\jst_lustre.gleam",750),ee(n,"src\\jst_lustre.gleam",751),[e,A()]}}else if(t instanceof $o){let r=t.article;return ee("article delete clicked","src\\jst_lustre.gleam",758),[e,jr(l([Tc(n=>new mo(r.id,n),r.id,e.base_uri),Qt((()=>{let n=new rt,i=qe(n);return he(i)})(),new $,new $)]))]}else if(t instanceof mo){let r=t.id,n=t.result;if(n.isOk()){let i=De(e.articles,s=>ct(s,o=>o.id!==r));return[(()=>{let s=e;return new L(s.base_uri,s.route,s.session,i,s.short_urls,s.short_url_form_short_code,s.short_url_form_target_url,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage)})(),A()]}else{let i=n[0];return ee("article delete response error","src\\jst_lustre.gleam",786),ee(i,"src\\jst_lustre.gleam",787),[e,A()]}}else if(t instanceof wo){let r=t.article;ee("article publish clicked","src\\jst_lustre.gleam",793);let n,i=r;return n=new V(i.id,i.slug,i.revision,i.author,i.tags,new h(pu()),i.title,i.subtitle,i.leading,i.content,i.draft),[e,Rs(o=>new On(r.id,o),n,e.base_uri)]}else if(t instanceof go){let r=t.article;return ee("article unpublish clicked","src\\jst_lustre.gleam",805),[e,Rs(n=>new On(r.id,n),(()=>{let n=r;return new V(n.id,n.slug,n.revision,n.author,n.tags,new $,n.title,n.subtitle,n.leading,n.content,n.draft)})(),e.base_uri)]}else if(t instanceof Lo){let r=t.short_code,n=t.target_url;if(ee(e.base_uri,"src\\jst_lustre.gleam",817),e.session instanceof er){let s=new Xs(r,n);return[e,Kc(o=>new Ao(o),e.base_uri,s)]}else return[e,A()]}else if(t instanceof Ao){let r=t.result;if(r.isOk()){let n=r[0],i,s=e.short_urls;if(s instanceof M)i=new S(l([n]));else if(s instanceof W)i=new S(l([n]));else if(s instanceof S){let a=s[0];i=new S(w(n,a))}else s instanceof Ze?i=new S(l([n])):i=new S(l([n]));let o=i;return[(()=>{let a=e;return new L(a.base_uri,a.route,a.session,a.articles,o,a.short_url_form_short_code,a.short_url_form_target_url,a.djot_demo_content,a.edit_view_mode,a.profile_menu_open,a.notice,a.debug_use_local_storage)})(),A()]}else{let n=r[0];return[(()=>{let i=e;return new L(i.base_uri,i.route,i.session,i.articles,new Oe(n),i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage)})(),A()]}}else if(t instanceof jo){let r=t.result;if(r.isOk()){let n=r[0];return[(()=>{let i=e;return new L(i.base_uri,i.route,i.session,i.articles,new S(n.short_urls),i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage)})(),A()]}else{let n=r[0];return[(()=>{let i=e;return new L(i.base_uri,i.route,i.session,i.articles,new Oe(n),i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage)})(),A()]}}else if(t instanceof Mi){let r=t.id;return[e,Yc(n=>new Oo(r,n),e.base_uri,r)]}else if(t instanceof Oo){let r=t.id;if(t.result.isOk()){let i,s=e.short_urls;if(s instanceof M)i=new M;else if(s instanceof W)i=new W;else if(s instanceof S){let a=s[0];i=new S(ct(a,u=>u.id!==r))}else s instanceof Ze?i=new M:i=new M;let o=i;return[(()=>{let a=e;return new L(a.base_uri,a.route,a.session,a.articles,o,a.short_url_form_short_code,a.short_url_form_target_url,a.djot_demo_content,a.edit_view_mode,a.profile_menu_open,a.notice,a.debug_use_local_storage)})(),Qt(he(qe(new Qe)),new $,new $)]}else return[e,A()]}else if(t instanceof zo){let r=t.text;return[(()=>{let n=e;return new L(n.base_uri,n.route,n.session,n.articles,n.short_urls,r,n.short_url_form_target_url,n.djot_demo_content,n.edit_view_mode,n.profile_menu_open,n.notice,n.debug_use_local_storage)})(),A()]}else if(t instanceof So){let r=t.text;return[(()=>{let n=e;return new L(n.base_uri,n.route,n.session,n.articles,n.short_urls,n.short_url_form_short_code,r,n.djot_demo_content,n.edit_view_mode,n.profile_menu_open,n.notice,n.debug_use_local_storage)})(),A()]}else if(t instanceof Ii){let r=t.short_code,n="u.jst.dev/"+r;return oc(n,r),[e,A()]}else if(t instanceof Di){let r=t.id,n=t.is_active,i=new eo(r,new h(!n));return[e,Zc(s=>new Eo(r,s),e.base_uri,i)]}else if(t instanceof Eo){let r=t.id,n=t.result;if(n.isOk()){let i=n[0],s,o=e.short_urls;if(o instanceof M)s=new M;else if(o instanceof W)s=new W;else if(o instanceof S){let u=o[0];s=new S(N(u,c=>c.id===r?i:c))}else o instanceof Ze?s=new M:s=new M;let a=s;return[(()=>{let u=e;return new L(u.base_uri,u.route,u.session,u.articles,a,u.short_url_form_short_code,u.short_url_form_target_url,u.djot_demo_content,u.edit_view_mode,u.profile_menu_open,u.notice,u.debug_use_local_storage)})(),A()]}else{let i=n[0];return[(()=>{let s=e;return new L(s.base_uri,s.route,s.session,s.articles,new Oe(i),s.short_url_form_short_code,s.short_url_form_target_url,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage)})(),A()]}}else{if(e.debug_use_local_storage)un(jn,"");else{let n=new Wr((()=>{let i=e.articles;return i instanceof M?l([]):i instanceof W?l([]):i instanceof S?i[0]:i instanceof Ze?l([]):l([])})());un(jn,Qs(n))}return[(()=>{let n=e;return new L(n.base_uri,n.route,n.session,n.articles,n.short_urls,n.short_url_form_short_code,n.short_url_form_target_url,n.djot_demo_content,n.edit_view_mode,n.profile_menu_open,n.notice,!e.debug_use_local_storage)})(),A()]}}}}function Wd(e,t){if(e.debug_use_local_storage){let n=Qc(e,t),i=n[0],s=n[1],o=a=>new Wr((()=>{let u=a.articles;return u instanceof M?l([]):u instanceof W?l([]):u instanceof S?u[0]:u instanceof Ze?l([]):l([])})());return t instanceof ur?un(jn,Qs(o(i))):t instanceof it&&un(jn,Qs(o(i))),[i,s]}else return Qc(e,t)}function Gd(e){let t=e.route;if(t instanceof Pt)return new Cr;if(t instanceof rt){let r=e.articles;if(r instanceof W)return new rr;if(r instanceof M)return new $e(new kn("articles not initialized"));if(r instanceof Oe){let n=r[0];return new $e(new nr(n,"Failed to load article list"))}else if(r instanceof S){let n=r[0];return new Br(n,e.session)}else{let n=r[0];return new Br(n,e.session)}}else if(t instanceof Lt){let r=t.slug,n=e.articles;if(n instanceof W)return new rr;if(n instanceof M)return new $e(new kn("articles not initialized"));if(n instanceof Oe){let i=n[0];return new $e(new nr(i,"Failed to load articles"))}else if(n instanceof S){let i=n[0],s=ft(i,o=>o.slug===r);if(s.isOk()){let o=s[0];return new Mt(o,e.session)}else return new $e(new Nr(r,ea(i)))}else{let i=n[0],s=ft(i,o=>o.slug===r);if(s.isOk()){let o=s[0];return new Mt(o,e.session)}else return new $e(new Nr(r,ea(i)))}}else if(t instanceof nt){let r=t.id,n=e.articles;if(n instanceof W)return new rr;if(n instanceof M)return new $e(new kn("articles not initialized"));if(n instanceof Oe){let i=n[0];return new $e(new nr(i,"Failed to load articles for editing"))}else if(n instanceof S){let i=n[0],s=ft(i,o=>o.id===r);if(s.isOk()){let o=s[0],a=xi(o,e.session),u=o.draft;return a&&u instanceof h?new Ot(o):a&&u instanceof $?new Ot((()=>{let c=o;return new V(c.id,c.slug,c.revision,c.author,c.tags,c.published_at,c.title,c.subtitle,c.leading,c.content,$n(o))})()):new $e(new Ir("edit article"))}else return new $e(new Mr(r))}else{let i=n[0],s=ft(i,o=>o.id===r);if(s.isOk()){let o=s[0],a=xi(o,e.session),u=o.draft;return a&&u instanceof h?new Ot(o):a&&u instanceof $?new Ot((()=>{let c=o;return new V(c.id,c.slug,c.revision,c.author,c.tags,c.published_at,c.title,c.subtitle,c.leading,c.content,$n(o))})()):new $e(new Ir("edit article"))}else return new $e(new Mr(r))}}else{if(t instanceof Qe)return new xn;if(t instanceof Nt){let r=t[0];return new bn(r)}else{if(t instanceof jt)return new Pr(e.djot_demo_content);if(t instanceof At)return new yn;{let r=t.uri;return new Ws(r)}}}}function oa(e){if(e==="")return xt();{let t=e;return b(l([Qu(new so),p("h-5 w-full cursor-pointer bg-zinc-700 text-mono text-zinc-200 text-xs px-8")]),l([g(t)]))}}function Hd(){return b(l([p("mt-8 p-4 bg-zinc-800 rounded-lg border border-zinc-700")]),l([ye(l([p("text-lg text-pink-700 font-light")]),l([g("Djot Quick Reference")])),yt(l([p("text-zinc-300 mb-6")]),l([fi(l([]),l([g("Note: ")])),g("This editor uses Djot format. See the "),Yt(l([Vt("https://htmlpreview.github.io/?https://github.com/jgm/djot/blob/master/doc/syntax.html"),p("text-zinc-300 underline")]),l([g("djot syntax documentation")])),g(" for complete details.")])),b(l([p("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm")]),l([b(l([]),l([ke(l([p("text-pink-700 font-medium mb-2")]),l([g("Headings")])),we(l([p("text-zinc-300")]),l([ve(l([p("text-zinc-300")]),l([g(`# H1
## H2
### H3`)]))]))])),b(l([]),l([ke(l([p("text-pink-700 font-medium mb-2")]),l([g("Text")])),we(l([p("text-zinc-300")]),l([ve(l([p("text-zinc-300")]),l([g("_italic_\n*bold*\n`code`")]))]))])),b(l([]),l([ke(l([p("text-pink-700 font-medium mb-2")]),l([g("Lists")])),we(l([p("text-zinc-300")]),l([ve(l([p("text-zinc-300")]),l([g(`- item 1
- item 2

  - nested`)]))]))])),b(l([]),l([ke(l([p("text-pink-700 font-medium mb-2")]),l([g("Links")])),we(l([p("text-zinc-300")]),l([ve(l([p("text-zinc-300")]),l([g(`[text](url)
[text](url){title="tooltip"}`)]))]))])),b(l([]),l([ke(l([p("text-pink-700 font-medium mb-2")]),l([g("Code Blocks")])),we(l([p("text-zinc-300")]),l([ve(l([p("text-zinc-300")]),l([g("```\ncode here\n```")]))]))])),b(l([]),l([ke(l([p("text-pink-700 font-medium mb-2")]),l([g("Blockquotes")])),we(l([p("text-zinc-300")]),l([ve(l([p("text-zinc-300")]),l([g("> quoted text")]))]))]))]))]))}function Xc(e,t,r,n,i){let s=p("block text-sm font-medium text-zinc-400 mb-1"),o;t instanceof ua?o=p("w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 font-light text-zinc-100 focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"):t instanceof Bo?o=p("w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 text-3xl text-pink-700 font-light focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"):t instanceof Po?o=p("w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 text-md text-zinc-500 font-light focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"):o=p("w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 font-bold text-zinc-100 focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200");let a=o;return b(l([p("mb-4")]),l([Er(l([s]),l([g(e)])),pi(l([a,Kt(r),Jt("edit-"+i+"-"+e),Zt(n)]))]))}function Jd(e){return b(l([p("mt-8 p-6 bg-zinc-800 rounded-lg border border-zinc-700")]),l([ye(l([p("text-lg text-pink-700 font-light mb-4")]),l([g("Create Short URL")])),b(l([p("space-y-4")]),l([b(l([]),l([Er(l([p("block text-sm font-medium text-zinc-300 mb-2")]),l([g("Short Code")])),pi(l([p("w-full px-3 py-2 bg-zinc-700 border border-zinc-600 rounded-md text-zinc-100 focus:outline-none focus:border-pink-500"),on("Enter short code"),jl("text"),Kt(e.short_url_form_short_code),Zt(t=>new zo(t))]))])),b(l([]),l([Er(l([p("block text-sm font-medium text-zinc-300 mb-2")]),l([g("Target URL")])),pi(l([p("w-full px-3 py-2 bg-zinc-700 border border-zinc-600 rounded-md text-zinc-100 focus:outline-none focus:border-pink-500"),on("https://example.com"),jl("url"),Kt(e.short_url_form_target_url),Zt(t=>new So(t))]))])),Z(l([p("w-full px-4 py-2 bg-pink-600 text-white rounded-md hover:bg-pink-700 transition-colors"),U(new Lo(e.short_url_form_short_code,e.short_url_form_target_url))]),l([g("Create Short URL")]))]))]))}function Kd(e){let t=e.short_urls;if(t instanceof M)return b(l([p("mt-8 p-6 bg-zinc-800 rounded-lg border border-zinc-700")]),l([ye(l([p("text-lg text-pink-700 font-light mb-4")]),l([g("URLs")])),b(l([p("text-zinc-400")]),l([g("Loading...")]))]));if(t instanceof W)return b(l([p("mt-8 p-6 bg-zinc-800 rounded-lg border border-zinc-700")]),l([ye(l([p("text-lg text-pink-700 font-light mb-4")]),l([g("URLs")])),b(l([p("text-zinc-400")]),l([g("Loading...")]))]));if(t instanceof S){let r=t[0];if(r.hasLength(0))return b(l([p("mt-8 p-6 bg-zinc-800 rounded-lg border border-zinc-700")]),l([ye(l([p("text-lg text-pink-700 font-light mb-4")]),l([g("URLs")])),b(l([p("text-zinc-400")]),l([g("No short URLs created yet.")]))]));{let n=N(r,i=>b(l([p("relative p-4 bg-zinc-700 rounded border border-zinc-600 flex items-stretch group hover:bg-zinc-600 transition-colors cursor-pointer")]),l([Z(l([p("absolute top-2 right-2 text-red-400 hover:text-red-600 text-sm font-bold p-1 m-0 bg-transparent border border-red-400 rounded cursor-pointer z-10"),U(new Mi(i.id)),as("Delete")]),l([g("DEL")])),Z(l([p(i.is_active?"absolute top-2 right-24 text-green-400 hover:text-green-600 text-sm font-bold p-1 m-0 bg-transparent border border-green-400 rounded cursor-pointer z-10":"absolute top-2 right-24 text-red-400 hover:text-red-600 text-sm font-bold p-1 m-0 bg-transparent border border-red-400 rounded cursor-pointer z-10"),U(new Di(i.id,i.is_active)),as(i.is_active?"Deactivate URL":"Activate URL")]),l([g(i.is_active?"ON":"OFF")])),b(l([p("text-pink-700 font-mono text-lg mb-1 cursor-pointer select-all hover:underline z-10"),U(new Ii(i.short_code)),as("Copy short URL to clipboard"),Al(l([["min-width","5ch"],["display","inline-block"]]))]),l([g(i.short_code)])),b(l([p("flex-1 ml-4 cursor-pointer"),U(new St(qe(new Nt(i.short_code))))]),l([b(l([p("text-zinc-400 text-sm break-all")]),l([g(i.target_url)])),b(l([p("text-zinc-500 text-xs")]),l([g("Accesses: "+I(i.access_count))])),b(l([p("text-zinc-500 text-xs")]),l([g("Created: "+(()=>{let s=tn(i.created_at*1e3);return Gn(s)})())]))]))])));return b(l([p("mt-8 p-6 bg-zinc-800 rounded-lg border border-zinc-700")]),l([ye(l([p("text-lg text-pink-700 font-light mb-4")]),l([g("URLs")])),b(l([p("space-y-4")]),n)]))}}else if(t instanceof Oe){let r=t[0];return b(l([p("mt-8 p-6 bg-zinc-800 rounded-lg border border-zinc-700")]),l([ye(l([p("text-lg text-pink-700 font-light mb-4")]),l([g("URLs")])),b(l([p("text-red-400")]),l([g("Error loading short URLs: "+Li(r))]))]))}else return b(l([p("mt-8 p-6 bg-zinc-800 rounded-lg border border-zinc-700")]),l([ye(l([p("text-lg text-pink-700 font-light mb-4")]),l([g("URLs")])),b(l([p("text-zinc-400")]),l([g("Loading...")]))]))}function ef(e){let t=e.published_at;if(t instanceof h){let r=t[0],n=Gn(r);return re(l([p("text-xs text-zinc-500 px-2 pt-2 w-max border-t border-r border-zinc-700 group-hover:border-pink-700 transition-colors duration-25")]),l([g(n)]))}else return re(l([p("text-xs text-zinc-500 px-2 pt-2 w-max italic border-t border-r border-zinc-700 group-hover:border-pink-700 transition-colors duration-25")]),l([g("not published")]))}function tf(e){return b(l([p("text-xs text-zinc-400 pt-0 border-r border-zinc-700 pr-2 group-hover:border-pink-700 transition-colors duration-25")]),l([re(l([p("text-zinc-500 font-light")]),l([g("by ")])),re(l([p("text-zinc-300")]),l([g(e)]))]))}function rf(e){return e.hasLength(0)?xt():b(l([p("flex justify-end align-end gap-0 ml-auto flex-wrap border-b border-r border-zinc-700 pb-1 pr-2 hover:border-pink-700 group-hover:border-pink-700 transition-colors duration-25 mt-2")]),N(e,r=>re(l([p("text-xs cursor-pointer text-zinc-500 px-2 hover:border-pink-700 hover:text-pink-700 transition-colors duration-25")]),l([g(r)]))))}function nf(e,t){let r=xi(e,t),n=Ec(e,t),i=Sc(e,t);return b(l([p("flex justify-start h-10")]),l([r?Z(l([p("text-gray-500 pe-4 text-underline pb-2 hover:text-teal-300 hover:border-teal-300 border-b border-zinc-700"),U(new St(qe(new nt(e.id))))]),l([g("Edit")])):xt(),n&&C(e.published_at,new $)?Z(l([p("text-gray-500 pe-4 text-underline pb-2 hover:text-green-300 hover:border-green-300 border-b border-zinc-700"),U(new wo(e))]),l([g("Publish")])):xt(),n&&!C(e.published_at,new $)?Z(l([p("text-gray-500 pe-4 text-underline pb-2 hover:text-yellow-300 hover:border-yellow-300 border-b border-zinc-700"),U(new go(e))]),l([g("Unpublish")])):xt(),i?Z(l([p("text-gray-500 pe-4 text-underline pb-2 hover:text-red-400 hover:border-red-400 border-b border-zinc-700"),U(new $o(e))]),l([g("Delete")])):xt()]))}function Vd(e,t){return l([b(l([p("mb-4")]),l([b(l([p("flex items-center justify-between mb-1")]),l([Er(l([p("block text-sm font-medium text-zinc-400")]),l([g("Slug")])),re(l([p("text-xs text-zinc-500")]),l([g("rev "+I(t.revision))]))])),pi(l([p("w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 font-light text-zinc-100 focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"),Kt(zs(e)),Jt("edit-"+t.slug+"-Slug"),Zt(r=>new lo(t,r))]))])),Xc("Title",new Bo,Ss(e),r=>new ao(t,r),t.slug),Xc("Subtitle",new Po,Es(e),r=>new co(t,r),t.slug),b(l([p("mb-4")]),l([Er(l([p("block text-sm font-medium text-zinc-400 mb-1")]),l([g("Leading")])),vs(l([p("w-full h-24 bg-zinc-800 border border-zinc-600 rounded-md p-2 font-bold text-zinc-100 resize-none focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"),Kt(_i(e)),Jt("edit-"+t.slug+"-Leading"),Zt(r=>new uo(t,r)),on("Write a compelling leading paragraph...")]),_i(e))])),b(l([p("mb-4")]),l([Er(l([p("block text-sm font-medium text-zinc-400 mb-1")]),l([g("Content")])),vs(l([p("w-full h-96 bg-zinc-800 border border-zinc-600 rounded-md p-4 font-mono text-sm text-zinc-100 resize-none focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"),Kt(di(e)),Zt(r=>new fo(t,r)),on("Write your article content in Djot format...")]),di(e))])),b(l([p("flex justify-between gap-4")]),l([nf(t,new Ue),b(l([p("flex gap-4")]),l([Z(l([p("px-4 py-2 bg-zinc-700 text-zinc-300 rounded-md hover:bg-zinc-600 transition-colors duration-200"),U(new _o(t)),Ol(Os(e))]),l([g("Discard Changes")])),Z(l([p("px-4 py-2 bg-teal-700 text-white rounded-md hover:bg-teal-600 transition-colors duration-200"),U(new po(t)),Ol(Os(e))]),l([Os(e)?g("Saving..."):g("Save Article")]))]))]))])}function pe(e,t){return bs(l([Jt("article-title-"+t),p("text-3xl text-pink-700 font-light"),p("article-title")]),l([g(e)]))}function No(e,t){return b(l([Jt("article-subtitle-"+t),p("text-md text-zinc-500 font-light italic"),p("article-subtitle")]),l([g(e)]))}function sf(e,t){return yt(l([Jt("article-lead-"+t),p("font-bold pt-8"),p("article-leading")]),l([g(e)]))}function le(e){return yt(l([p("pt-8")]),l([g(e)]))}function Yd(){return l([pe("Loading","loading"),le("Loading...")])}function Zd(e,t){let r;t instanceof Ue?r=ct(e,m=>m.published_at instanceof h):r=e;let n=r,i,o=Vr(n,(f,m)=>{let x=f.published_at,v=m.published_at;if(x instanceof $&&v instanceof $)return Bn(f.slug,m.slug);if(x instanceof $&&v instanceof h)return new Q;if(x instanceof h&&v instanceof $)return new ie;{let B=x[0],j=v[0];return fu(j,B)}});i=N(o,f=>{{let m=f.slug,x=f.tags,v=f.title,B=f.subtitle,j=f.leading,H,F=new Lt(m);H=qe(F);let E=H;return Cl(l([p("mt-14")]),l([Yt(l([p("group block border-l border-zinc-700 pl-4 hover:border-pink-700 transition-colors duration-25"),Vt(he(E)),Xu(new oo(f)),U(new St(E))]),l([b(l([p("flex justify-between gap-4")]),l([b(l([p("flex flex-col")]),l([ye(l([Jt("article-title-"+m),p("article-title"),p("text-xl text-pink-700 font-light")]),l([g(v)])),No(B,m)])),b(l([p("flex flex-col items-end")]),l([ef(f),tf(f.author)]))])),le(j),b(l([p("flex justify-end mt-2")]),l([rf(x)]))]))]))}});let a=i,u=l([b(l([p("flex justify-between items-center mb-4")]),l([pe("Articles","articles"),t instanceof er?Z(l([p("text-gray-500 pe-4 text-underline pt-2 hover:text-teal-300 hover:border-teal-300 border-t border-zinc-700 border-e"),U(new Bi)]),l([g("New")])):xt()]))]),c;return a.hasLength(0)?c=l([b(l([p("mt-14 text-center")]),l([b(l([p("border-l border-zinc-700 pl-4 py-8")]),l([ye(l([p("text-xl text-zinc-500 font-light mb-4")]),l([g("No articles yet")])),t instanceof er?b(l([p("space-y-4")]),l([le("Ready to share your thoughts? Create your first article to get started."),Z(l([p("inline-block px-6 py-2 bg-pink-700 text-white rounded-md hover:bg-pink-600 transition-colors duration-200 font-medium"),U(new Bi)]),l([g("Create Your First Article")]))])):b(l([p("space-y-4")]),l([le("No published articles are available yet."),le("Check back later for new content!")]))]))]))]):c=a,X(u,c)}function Qd(e,t){return l([pe("Article not found",t),le("The article you are looking for does not exist.")])}function Xd(e,t){if(e instanceof S)return l([pe("Article not found",t),le("The article you are looking for does not exist.")]);if(e instanceof Ze)return l([pe("Article not found",t),le("The article you are looking for might not exist yet. Please check back later.")]);if(e instanceof Oe){let r=e[0];return l([pe("There was an error loading the article",t),le(Li(r))])}else return e instanceof W?l([pe("Loading article",t),le("Loading article...")]):l([pe("Loading article",t),le("Loading article...")])}function eh(){return l([pe("About","about"),le(`I'm a software developer and a writer. I'm also a father and a husband. 
      I'm also a software developer and a writer. I'm also a father and a 
      husband. I'm also a software developer and a writer. I'm also a father 
      and a husband. I'm also a software developer and a writer. I'm also a 
      father and a husband.`),le(`If you enjoy these glimpses into my mind, feel free to come back
       semi-regularly. But not too regularly, you creep.`)])}function th(e){return l([pe("URL Shortener","url-shortener"),le("Create and manage short URLs for easy sharing."),Jd(e),Kd(e)])}function rh(e,t){let r=e.short_urls;if(r instanceof S){let n=r[0],i=ft(n,s=>s.short_code===t);if(i.isOk()){let s=i[0];return l([pe("URL Info","url-info"),b(l([p("mt-8 p-6 bg-zinc-800 rounded-lg border border-zinc-700")]),l([ye(l([p("text-lg text-pink-700 font-light mb-4")]),l([g("URL Details")])),b(l([p("space-y-4 text-zinc-300")]),l([b(l([p("flex justify-between items-center")]),l([re(l([p("text-zinc-500")]),l([g("Short Code:")])),re(l([p("font-mono text-pink-700")]),l([g(s.short_code)]))])),b(l([p("flex justify-between items-center")]),l([re(l([p("text-zinc-500")]),l([g("Target URL:")])),re(l([p("break-all")]),l([g(s.target_url)]))])),b(l([p("flex justify-between items-center")]),l([re(l([p("text-zinc-500")]),l([g("Created By:")])),re(l([]),l([g(s.created_by)]))])),b(l([p("flex justify-between items-center")]),l([re(l([p("text-zinc-500")]),l([g("Created:")])),re(l([]),l([g((()=>{let o=tn(s.created_at*1e3);return Gn(o)})())]))])),b(l([p("flex justify-between items-center")]),l([re(l([p("text-zinc-500")]),l([g("Updated:")])),re(l([]),l([g((()=>{let o=tn(s.updated_at*1e3);return Gn(o)})())]))])),b(l([p("flex justify-between items-center")]),l([re(l([p("text-zinc-500")]),l([g("Access Count:")])),re(l([]),l([g(I(s.access_count))]))])),b(l([p("flex justify-between items-center")]),l([re(l([p("text-zinc-500")]),l([g("Status:")])),s.is_active?re(l([p("text-green-400")]),l([g("Active")])):re(l([p("text-red-400")]),l([g("Inactive")]))]))])),b(l([p("mt-6 flex gap-4")]),l([Z(l([p("px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors"),U(new St(qe(new Qe)))]),l([g("Back to URLs")])),Z(l([p("px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors"),U(new Ii(s.short_code))]),l([g("Copy URL")])),Z(l([p(s.is_active?"px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 transition-colors":"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors"),U(new Di(s.id,s.is_active))]),l([g(s.is_active?"Deactivate":"Activate")])),Z(l([p("px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors"),U(new Mi(s.id))]),l([g("Delete URL")]))]))]))])}else return l([pe("URL Not Found","url-not-found"),le("The requested URL was not found.")])}else return l([pe("URL Info","url-info"),le("Loading URL information...")])}function nh(e){return l([pe("404 - Page Not Found","not-found"),No("The page you're looking for doesn't exist.","not-found"),le("The page at "+he(e)+" could not be found.")])}function Gr(e){return yt(l([p("pt-8 text-orange-500")]),l([g(e)]))}function of(e,t){let r,n=e.content;if(n instanceof M)r=l([Gr("content not initialized")]);else if(n instanceof W)r=l([Gr("loading")]);else if(n instanceof S){let s=n[0];r=Zs(s)}else if(n instanceof Ze){let s=n[0];r=Zs(s)}else{let s=n[0];r=l([Gr(Li(s))])}let i=r;return l([Cl(l([p("with-transition")]),w(b(l([p("flex flex-col justify-between")]),l([nf(e,t),b(l([p("flex gap-2 justify-between")]),l([b(l([p("flex flex-col justify-between")]),l([pe(e.title,e.slug),No(e.subtitle,e.slug)])),b(l([p("flex flex-col items-end")]),l([ef(e),tf(e.author)]))])),b(l([p("flex justify-between mt-2")]),l([rf(e.tags)]))])),w(sf(e.leading,e.slug),i)))])}function ih(e,t){let r=t.draft;if(r instanceof $)return l([Gr("no draft..")]);{let n=r[0],i,s=di(n);s===""?i="Start typing in the editor to see the preview here...":i=s;let o=i,a=new V(t.id,zs(n),t.revision,t.author,t.tags,t.published_at,Ss(n),Es(n),_i(n),new S(o),new $),u=of(a,new Ue);return l([b(l([p("lg:hidden mb-4 flex justify-center")]),l([Z(l([p("px-4 py-2 bg-pink-700 text-white rounded-md hover:bg-pink-700 transition-colors duration-200"),U(new To)]),l([e.edit_view_mode instanceof ar?g("Show Preview"):g("Show Editor")]))])),b(l([ei(l([["grid gap-8 h-screen",!0],["grid-cols-2 lg:grid-cols-2",!0]]))]),l([b(l([ei(l([["space-y-4",!0],["lg:block",!0],["lg:col-span-1",!0],["col-span-2",C(e.edit_view_mode,new ar)],["hidden",C(e.edit_view_mode,new Ci)]]))]),Vd(n,t)),b(l([ei(l([["max-w-screen-md mx-auto px-10 py-10 overflow-y-auto",!0],["lg:block",!0],["lg:col-span-1",!0],["col-span-2",C(e.edit_view_mode,new Ci)],["hidden",C(e.edit_view_mode,new ar)]]))]),u)])),Hd()])}}function sh(e,t){return Yt(l([Vt(he(e)),p("text-pink-700 hover:underline cursor-pointer"),U(new St(e))]),l([g(t)]))}function oh(){let e=se("/article/nats-all-the-way-down");if(!e.isOk())throw G("let_assert","jst_lustre",1471,"view_index","Pattern match failed, no pattern matched the value.",{value:e});let t=e[0];return l([pe("Welcome to jst.dev!","welcome"),No(`...or, A lession on overengineering for fun and.. 
      well just for fun.`,"welcome"),sf(`This site and it's underlying IT-infrastructure is the primary 
      place for me to experiment with technologies and topologies. I 
      also share some of my thoughts and learnings here.`,"welcome"),yt(l([p("mt-14")]),l([g(`This site and it's underlying IT-infrastructure is the primary 
        place for me to experiment with technologies and topologies. I 
        also share some of my thoughts and learnings here. Feel free to 
        check out my overview, `),sh(t,"NATS all the way down ->")])),le("It to is a work in progress and I mostly keep it here for my own reference."),le(`I'm also a software developer and a writer. I'm also a father and a 
        husband. I'm also a software developer and a writer. I'm also a father 
        and a husband. I'm also a software developer and a writer. I'm also a 
        father and a husband. I'm also a software developer and a writer.`)])}function lh(){return l([pe("Articles","articles"),le("Loading articles...")])}function lf(e,t){return Yt(l([p(""),Vt(he(e)),U(new St(e))]),t)}function lr(e,t,r,n){return Hu(X(n,l([ei(l([["border-transparent border-b-2 hover:border-pink-700 cursor-pointer",!0],["text-pink-700",Cc(e,t)]])),U(new St(qe(e)))])),l([lf(qe(e),l([g(r)]))]))}function la(e){let t=l([p("block w-full text-left px-4 py-2 text-sm text-zinc-200 hover:bg-teal-800 transition-colors cursor-pointe")]);return Wu(l([p("py-2 border-b bg-zinc-800 border-pink-700 font-mono relative")]),l([b(l([p("flex justify-between px-10 items-center max-w-screen-md mx-auto")]),l([b(l([]),l([lf(Gs(new Cr),l([g("jst.dev")]))])),b(l([p("flex items-center space-x-8")]),l([Pl(l([p("hidden sm:flex space-x-8 pr-2")]),l([lr(new rt,e.route,"Articles",l([])),lr(new At,e.route,"About",l([])),lr(new Qe,e.route,"Short Urls",l([])),lr(new jt,e.route,"Djot Demo",l([]))])),b(l([p("relative")]),l([Z(l([p("p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 transition-colors"),U(new io)]),l([e.profile_menu_open?ji(l([p("w-6 h-6")]),new vn):ji(l([p("w-6 h-6")]),new Ai)])),e.profile_menu_open?b(l([p("absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-zinc-700 ring-1 ring-black ring-opacity-5 z-50")]),l([b(l([p("py-1")]),l([Pl(l([p("sm:hidden flex flex-col border-b border-zinc-400")]),l([lr(new rt,e.route,"Articles",t),lr(new At,e.route,"About",t),lr(new Qe,e.route,"Short urls",t),lr(new jt,e.route,"Djot Demo",t)])),(()=>{let n=e.session;return n instanceof Ue?Z(l([p("block w-full text-left px-4 py-2 text-sm text-zinc-200 hover:bg-green-800 transition-colors cursor-pointe"),U(new xo("johan-st","password"))]),l([g("Login")])):n instanceof hn?Z(l([p("block w-full text-left px-4 py-2 text-sm bg-zinc-700 text-zinc-400 hover:bg-orange-800 transition-colors cursor-not-allowed opacity-60"),U(new Pi)]),l([g("logging in..")])):Z(l([p("block w-full text-left px-4 py-2 text-sm text-zinc-200 hover:bg-orange-800 transition-colors cursor-pointe"),U(new Pi)]),l([g("Logout")]))})(),Z(l([p("block w-full text-left px-4 py-2 text-sm text-zinc-200 hover:bg-teal-800 transition-colors cursor-pointe"),U(new ko)]),l([g("Check")])),e.debug_use_local_storage?Z(l([p("block w-full text-left px-4 py-2 text-sm text-zinc-200 hover:bg-orange-800 transition-colors cursor-pointe"),U(new qo)]),l([b(l([p("flex justify-between")]),l([g("LocalStorage"),ji(l([p("w-6 text-green-400")]),new Hs)]))])):Z(l([p("block w-full text-left px-4 py-2 text-sm text-zinc-200 hover:bg-green-800 transition-colors cursor-pointe"),U(new qo)]),l([b(l([p("flex justify-between ")]),l([g("LocalStorage"),ji(l([p("w-6 text-orange-400")]),new vn)]))]))]))])):b(l([]),l([]))]))]))]))]))}function ah(e){let t;e===""?t=l([b(l([p("text-zinc-500 italic text-center mt-8")]),l([g("Start typing in the editor to see the preview here...")]))]):t=Zs(e);let r=t;return l([pe("Djot Demo","djot-demo"),b(l([p("grid grid-cols-1 lg:grid-cols-2 gap-6")]),l([Bl(l([p("space-y-4")]),l([b(l([p("flex items-center justify-between")]),l([ci(l([p("text-xl text-pink-700 font-light")]),l([g("Editor")])),b(l([p("text-xs text-zinc-500")]),l([g("Live preview updates as you type")]))])),b(l([p("relative")]),l([vs(l([p("w-full h-[400px] lg:h-[600px] bg-zinc-800 border border-zinc-600 rounded-lg p-4 font-mono text-sm text-zinc-100 resize-none focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"),on(`# Start typing your article content here...

## Headings

- Lists
- Work too

**Bold** and *italic* text

[Link text](url)`),Kt(e),Zt(n=>new vo(n)),O("spellcheck","false")]),e),b(l([p("absolute bottom-2 right-2 text-xs text-zinc-500 bg-zinc-800 px-2 py-1 rounded")]),l([g((()=>{let n=gr(e);return Vo(n)})()),g(" chars")]))]))])),Bl(l([p("space-y-4")]),l([b(l([p("flex items-center justify-between")]),l([ci(l([p("text-xl text-pink-700 font-light")]),l([g("Preview")])),b(l([p("text-xs text-zinc-500")]),l([g("Rendered output")]))])),b(l([p("w-full h-[400px] lg:h-[600px] bg-zinc-900 border border-zinc-600 rounded-lg p-6 overflow-y-auto prose prose-invert prose-pink max-w-none")]),r)]))])),b(l([p("mt-8 p-4 bg-zinc-800 rounded-lg border border-zinc-700")]),l([ye(l([p("text-lg text-pink-700 font-light")]),l([g("Quick Reference")])),yt(l([p("text-zinc-300")]),l([fi(l([]),l([g("Note: ")])),g("The djot implementation is a work in progress. Not all features are supported yet.")])),yt(l([p("mb-6")]),l([g("See the "),Yt(l([Vt("https://htmlpreview.github.io/?https://github.com/jgm/djot/blob/master/doc/syntax.html"),p("text-zinc-300 underline")]),l([g("djot syntax documentation")])),g(" for more details.")])),b(l([p("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm")]),l([b(l([]),l([ke(l([p("text-pink-700 font-medium mb-2")]),l([g("Headings")])),we(l([p("text-zinc-300")]),l([ve(l([p("text-zinc-300")]),l([g(`# H1
## H2
### H3`)]))]))])),b(l([]),l([ke(l([p("text-pink-700 font-medium mb-2")]),l([g("Text")])),we(l([p("text-zinc-300")]),l([ve(l([p("text-zinc-300")]),l([g("_italic_\n*bold*\n`code`")]))]))])),b(l([]),l([ke(l([p("text-pink-700 font-medium mb-2")]),l([g("Lists")])),we(l([p("text-zinc-300")]),l([ve(l([p("text-zinc-300")]),l([g(`- item 1
- item 2

  - nested`)]))]))])),b(l([]),l([ke(l([p("text-pink-700 font-medium mb-2")]),l([g("Links")])),we(l([p("text-zinc-300")]),l([ve(l([p("text-zinc-300")]),l([g(`[text](url)
[text](url){title="tooltip"}`)]))]))])),b(l([]),l([ke(l([p("text-pink-700 font-medium mb-2")]),l([g("Code Blocks")])),we(l([p("text-zinc-300")]),l([ve(l([p("text-zinc-300")]),l([g("```\ncode here\n```")]))]))])),b(l([]),l([ke(l([p("text-pink-700 font-medium mb-2")]),l([g("Blockquotes")])),we(l([p("text-zinc-300")]),l([ve(l([p("text-zinc-300")]),l([g("> quoted text")]))]))]))]))]))])}function uh(e){let t=Gd(e),r;if(t instanceof vi)r=Yd();else if(t instanceof Cr)r=oh();else if(t instanceof Br){let o=t.articles,a=t.session;r=Zd(o,a)}else if(t instanceof rr)r=lh();else if(t instanceof Mt){let o=t.article,a=t.session;r=of(o,a)}else if(t instanceof Ot){let o=t.article;r=ih(e,o)}else if(t instanceof $e){let o=t.error;if(o instanceof Nr){let a=o.slug;r=Xd(e.articles,a)}else if(o instanceof Mr){let a=o.id;r=Qd(e.articles,a)}else if(o instanceof nr){let a=o.error;r=l([Gr(Li(a))])}else if(o instanceof Ir){let a=o.attempted_action;r=l([Gr("Authentication required: "+a)])}else{let a=o.msg;r=l([Gr(a)])}}else if(t instanceof yn)r=eh();else if(t instanceof xn)r=th(e);else if(t instanceof bn){let o=t.short;r=rh(e,o)}else if(t instanceof Pr){let o=t.content;r=ah(o)}else{let o=t.requested_uri;r=nh(o)}let n=r,i;return t instanceof Pr?i=o=>b(l([p("min-h-screen bg-zinc-900 text-zinc-100 selection:bg-pink-700 selection:text-zinc-100 ")]),l([oa(e.notice),la(e),ys(l([p("mx-auto px-10 py-10")]),o)])):t instanceof Ot?i=o=>b(l([p("min-h-screen bg-zinc-900 text-zinc-100 selection:bg-pink-700 selection:text-zinc-100 ")]),l([oa(e.notice),la(e),ys(l([p("mx-auto px-10 py-10")]),o)])):i=o=>b(l([p("min-h-screen bg-zinc-900 text-zinc-100 selection:bg-pink-700 selection:text-zinc-100 ")]),l([oa(e.notice),la(e),ys(l([p("max-w-screen-md mx-auto px-10 py-10")]),o)])),i(n)}var ch=`# Quick Start for Markdown users

Djot is a lot like Markdown.  Here are some of the main
differences you need to be aware of in making the transition.

#### Blank lines

In djot you need blank lines around block-level
elements.  Hence, instead of

\`\`\`
This is some text.
## My next heading
\`\`\`

you must write

\`\`\`
This is some text.

## My next heading
\`\`\`

Instead of

\`\`\`\`
This is some text.
\`\`\` lua
local foo = bar.baz or false
\`\`\`
\`\`\`\`

you must write

\`\`\`\`
This is some text.

\`\`\` lua
local foo = bar.baz or false
\`\`\`
\`\`\`\`

Instead of

\`\`\`
Text.
> a blockquote.
\`\`\`

you must write

\`\`\`
Text.

> a blockquote.
\`\`\`

And instead of

\`\`\`
Before a thematic break.
****
After a thematic break.
\`\`\`

you must write

\`\`\`
Before a thematic break.

****

After a thematic break.
\`\`\`

#### Lists

A special case of this is that you always need a blank line before a
list, even if it's a sublist. So, while in Markdown you can write

\`\`\`
- one
  - two
  - three
\`\`\`

in djot you must write

\`\`\`
- one

  - two
  - three
\`\`\`

#### Headings

There are no Setext-style (underlined) headings, only ATX- (\`#\`) style.

Heading content can extend over several lines, which may or
may not be preceded by \`#\` characters:

\`\`\`
## This is a single
## level-2 heading

### This is a single
level-3 heading
\`\`\`

As a result, headings must always have a blank line following.

Trailing \`#\` characters in a heading are read as part of the
content and not ignored.

#### Code blocks

There are no indented code blocks, only fenced with \` \`\`\` \`.

#### Block quotes

You need a space after the \`>\` character, unless it is followed
by a newline.

#### Emphasis

Use single \`_\` delimiters for regular emphasis and
single \`*\` delimiters for strong emphasis.

#### Links

There is no special syntax for adding a title to a link, as
in Markdown:

\`\`\`
[link](http://example.com "Go to my website")
\`\`\`

If you want a title attribute on a link, use the general attribute syntax:

\`\`\`
[link](http://example.com){title="Go to my website"}
\`\`\`

#### Hard line breaks

In Markdown you can create a hard line break by ending a line
with two spaces. In djot you use a backslash before the newline.

\`\`\`
A new\\
line.
\`\`\`

#### Raw HTML

In Markdown you can just insert raw HTML "as is."  In djot,
you must mark it as raw HTML:

\`\`\`\`
This is raw HTML: \`<a id="foo">\`{=html}.

Here is a raw HTML block:

\`\`\` =html
<table>
<tr><td>foo</td></tr>
</table>
\`\`\`
\`\`\`\`

#### Tables

Pipe tables always require a pipe character at the start and end
of each line, unlike in many Markdown implementations.  So, this
is not a table:

\`\`\`
a|b
-|-
1|2
\`\`\`

but this is:

\`\`\`
| a | b |
| - | - |
| 1 | 2 |
\`\`\`


#### That's enough to get started!

Here we have just focused on things that might trip up
Markdown users.  If you keep these in mind, you should be
able to start using djot without looking at any more
documentation.

However, we haven't discussed any of the things
you can do in djot but not Markdown. See the [syntax
description](https://htmlpreview.github.io/?https://github.com/jgm/djot/blob/master/doc/syntax.html)
to find about the new constructions that are available.
`;function fh(e){let t=Il();if(!t.isOk())throw G("let_assert","jst_lustre",72,"init","Pattern match failed, no pattern matched the value.",{value:t});let r=t[0],n=Jc(jn,Hc(),o=>new Co(o)),i=new L(r,Xl(r),new Ue,new M,new M,"","",ch,new ar,!1,"",!0),s=nc(o=>{let a=o;return new no(a)});return[i,jr(l([s,n,Zl(o=>new Ni(o),i.base_uri)]))]}function af(){let e=Iu(fh,Wd,uh),t=Du(e,"#app",void 0);if(!t.isOk())throw G("let_assert","jst_lustre",41,"main","Pattern match failed, no pattern matched the value.",{value:t})}function ee(e,t,r){let n="\x1B[90m",i="\x1B[39m",s=`${t}:${r}`,o=It(e);if(globalThis.process?.stderr?.write){let a=`${n}${s}${i}
${o}
`;process.stderr.write(a)}else if(globalThis.Deno){let a=`${n}${s}${i}
${o}
`;globalThis.Deno.stderr.writeSync(new TextEncoder().encode(a))}else{let a=`${s}
${o}`;globalThis.console.log(a)}return e}function ph(e){let t='"';for(let r=0;r<e.length;r++){let n=e[r];n==`
`?t+="\\n":n=="\r"?t+="\\r":n=="	"?t+="\\t":n=="\f"?t+="\\f":n=="\\"?t+="\\\\":n=='"'?t+='\\"':n<" "||n>"~"&&n<"\xA0"?t+="\\u{"+n.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=n}return t+='"',t}function _h(e){let t="dict.from_list([",r=!0,n=[];return e.forEach((i,s)=>{n.push([s,i])}),n.sort(),n.forEach(([i,s])=>{r||(t=t+", "),t=t+"#("+It(i)+", "+It(s)+")",r=!1}),t+"])"}function dh(e){let t=globalThis.Object.keys(e).map(r=>{let n=It(e[r]);return isNaN(parseInt(r))?`${r}: ${n}`:n}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function hh(e){let t=Object.getPrototypeOf(e)?.constructor?.name||"Object",r=[];for(let s of Object.keys(e))r.push(`${It(s)}: ${It(e[s])}`);let n=r.length?" "+r.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${n}})`}function It(e){let t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return ph(e);if(t==="bigint"||t==="number")return e.toString();if(globalThis.Array.isArray(e))return`#(${e.map(It).join(", ")})`;if(e instanceof Y)return`[${e.toArray().map(It).join(", ")}]`;if(e instanceof Dt)return`//utfcodepoint(${String.fromCodePoint(e.value)})`;if(e instanceof Ce)return $h(e);if(e instanceof _)return dh(e);if(mh(e))return _h(e);if(e instanceof Set)return`//js(Set(${[...e].map(It).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){let r=[];for(let n of Array(e.length).keys())r.push(String.fromCharCode(n+97));return`//fn(${r.join(", ")}) { ... }`}return hh(e)}function $h(e){let t=e.bitOffset+8*Math.trunc(e.bitSize/8),r=pr(e,e.bitOffset,t),n=e.bitSize%8;if(n>0){let i=Ui(e,t,e.bitSize,!1,!1),s=Array.from(r.rawBuffer),o=`${i}:size(${n})`;return s.length===0?`<<${o}>>`:`<<${Array.from(r.rawBuffer).join(", ")}, ${o}>>`}else return`<<${Array.from(r.rawBuffer).join(", ")}>>`}function mh(e){try{return e instanceof Se}catch{return!1}}af();
