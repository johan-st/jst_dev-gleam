var d=class{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}},U=class{static fromArray(t,n){let r=n||new _r;for(let i=t.length-1;i>=0;--i)r=new Yt(t[i],r);return r}[Symbol.iterator](){return new Ys(this)}toArray(){return[...this]}atLeastLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return n!==void 0}hasLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return t===-1&&n instanceof _r}countLength(){let t=this,n=0;for(;t;)t=t.tail,n++;return n-1}};function w(e,t){return new Yt(e,t)}function a(e,t){return U.fromArray(e,t)}var Ys=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof _r)return{done:!0};{let{head:t,tail:n}=this.#e;return this.#e=n,{value:t,done:!1}}}},_r=class extends U{},Yt=class extends U{constructor(t,n){super(),this.head=t,this.tail=n}},be=class{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,n,r){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=n??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=r??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return dr(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;let n=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<n;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;let r=this.bitSize%8;if(r){let i=8-r;if(this.rawBuffer[n]>>i!==t.rawBuffer[n]>>i)return!1}}else{for(let i=0;i<n;i++){let s=dr(this.rawBuffer,this.bitOffset,i),l=dr(t.rawBuffer,t.bitOffset,i);if(s!==l)return!1}let r=this.bitSize%8;if(r){let i=dr(this.rawBuffer,this.bitOffset,n),s=dr(t.rawBuffer,t.bitOffset,n),l=8-r;if(i>>l!==s>>l)return!1}}return!0}get buffer(){if(ko("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(ko("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}};function dr(e,t,n){if(t===0)return e[n]??0;{let r=e[n]<<t&255,i=e[n+1]>>8-t;return r|i}}var At=class{constructor(t){this.value=t}},yo={};function ko(e,t){yo[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),yo[e]=!0)}function Zt(e,t,n){if(n??=e.bitSize,vo(e,t,n),t===n)return new be(new Uint8Array);if(t===0&&n===e.bitSize)return e;t+=e.bitOffset,n+=e.bitOffset;let r=Math.trunc(t/8),s=Math.trunc((n+7)/8)-r,l;return r===0&&s===e.rawBuffer.byteLength?l=e.rawBuffer:l=new Uint8Array(e.rawBuffer.buffer,e.rawBuffer.byteOffset+r,s),new be(l,n-t,t%8)}function ui(e,t,n,r,i){if(vo(e,t,n),t===n)return 0;t+=e.bitOffset,n+=e.bitOffset;let s=t%8===0,l=n%8===0;if(s&&l)return cc(e,t/8,n/8,r,i);let o=n-t,u=Math.trunc(t/8),c=Math.trunc((n-1)/8);if(u==c){let p=255>>t%8,f=(8-n%8)%8,$=(e.rawBuffer[u]&p)>>f;if(i){let g=2**(o-1);$>=g&&($-=g*2)}return $}return o<=53?dc(e.rawBuffer,t,n,r,i):_c(e.rawBuffer,t,n,r,i)}function cc(e,t,n,r,i){return n-t<=6?fc(e.rawBuffer,t,n,r,i):pc(e.rawBuffer,t,n,r,i)}function fc(e,t,n,r,i){let s=n-t,l=0;if(r)for(let o=t;o<n;o++)l*=256,l+=e[o];else for(let o=n-1;o>=t;o--)l*=256,l+=e[o];if(i){let o=2**(s*8-1);l>=o&&(l-=o*2)}return l}function pc(e,t,n,r,i){let s=n-t,l=0n;if(r)for(let o=t;o<n;o++)l*=256n,l+=BigInt(e[o]);else for(let o=n-1;o>=t;o--)l*=256n,l+=BigInt(e[o]);if(i){let o=1n<<BigInt(s*8-1);l>=o&&(l-=o*2n)}return Number(l)}function dc(e,t,n,r,i){let s=t%8===0,l=n-t,o=Math.trunc(t/8),u=0;if(r){if(!s){let c=8-t%8;u=e[o++]&(1<<c)-1,l-=c}for(;l>=8;)u*=256,u+=e[o++],l-=8;l>0&&(u*=2**l,u+=e[o]>>8-l)}else if(s){let c=n-t,p=1;for(;c>=8;)u+=e[o++]*p,p*=256,c-=8;u+=(e[o]>>8-c)*p}else{let c=t%8,p=8-c,f=n-t,$=1;for(;f>=8;){let g=e[o]<<c|e[o+1]>>p;u+=(g&255)*$,$*=256,f-=8,o++}if(f>0){let g=f-Math.max(0,f-p),b=(e[o]&(1<<p)-1)>>p-g;f-=g,f>0&&(b*=2**f,b+=e[o+1]>>8-f),u+=b*$}}if(i){let c=2**(n-t-1);u>=c&&(u-=c*2)}return u}function _c(e,t,n,r,i){let s=t%8===0,l=n-t,o=Math.trunc(t/8),u=0n;if(r){if(!s){let c=8-t%8;u=BigInt(e[o++]&(1<<c)-1),l-=c}for(;l>=8;)u*=256n,u+=BigInt(e[o++]),l-=8;l>0&&(u<<=BigInt(l),u+=BigInt(e[o]>>8-l))}else if(s){let c=n-t,p=0n;for(;c>=8;)u+=BigInt(e[o++])<<p,p+=8n,c-=8;u+=BigInt(e[o]>>8-c)<<p}else{let c=t%8,p=8-c,f=n-t,$=0n;for(;f>=8;){let g=e[o]<<c|e[o+1]>>p;u+=BigInt(g&255)<<$,$+=8n,f-=8,o++}if(f>0){let g=f-Math.max(0,f-p),b=(e[o]&(1<<p)-1)>>p-g;f-=g,f>0&&(b<<=f,b+=e[o+1]>>8-f),u+=BigInt(b)<<$}}if(i){let c=2n**BigInt(n-t-1);u>=c&&(u-=c*2n)}return Number(u)}function vo(e,t,n){if(t<0||t>e.bitSize||n<t||n>e.bitSize){let r=`Invalid bit array slice: start = ${t}, end = ${n}, bit size = ${e.bitSize}`;throw new globalThis.Error(r)}}var Tn=class e extends d{static isResult(t){return t instanceof e}},x=class extends Tn{constructor(t){super(),this[0]=t}isOk(){return!0}},k=class extends Tn{constructor(t){super(),this[0]=t}isOk(){return!1}};function E(e,t){let n=[e,t];for(;n.length;){let r=n.pop(),i=n.pop();if(r===i)continue;if(!Lo(r)||!Lo(i)||!yc(r,i)||$c(r,i)||mc(r,i)||wc(r,i)||gc(r,i)||xc(r,i)||bc(r,i))return!1;let l=Object.getPrototypeOf(r);if(l!==null&&typeof l.equals=="function")try{if(r.equals(i))continue;return!1}catch{}let[o,u]=hc(r);for(let c of o(r))n.push(u(r,c),u(i,c))}return!0}function hc(e){if(e instanceof Map)return[t=>t.keys(),(t,n)=>t.get(n)];{let t=e instanceof globalThis.Error?["message"]:[];return[n=>[...t,...Object.keys(n)],(n,r)=>n[r]]}}function $c(e,t){return e instanceof Date&&(e>t||e<t)}function mc(e,t){return!(e instanceof be)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((n,r)=>n===t[r]))}function wc(e,t){return Array.isArray(e)&&e.length!==t.length}function gc(e,t){return e instanceof Map&&e.size!==t.size}function xc(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(n=>!t.has(n)))}function bc(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function Lo(e){return typeof e=="object"&&e!==null}function yc(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(r=>e instanceof r)?!1:e.constructor===t.constructor}function Qt(e,t){return t===0?0:e%t}function Xt(e,t){return Math.trunc(Zs(e,t))}function Zs(e,t){return t===0?0:e/t}function W(e,t,n,r,i,s){let l=new globalThis.Error(i);l.gleam_error=e,l.module=t,l.line=n,l.function=r,l.fn=r;for(let o in s)l[o]=s[o];return l}var _=class extends d{constructor(t){super(),this[0]=t}},m=class extends d{};function ci(e,t){if(e instanceof _){let n=e[0];return new x(n)}else return new k(t)}function hr(e,t){if(e instanceof _){let n=e[0];return new _(t(n))}else return new m}function Ao(e){return e instanceof _?e[0]:new m}function jo(e,t){if(e instanceof _){let n=e[0];return t(n)}else return new m}function He(e,t,n){return e?t:n()}var J=class extends d{},Q=class extends d{},K=class extends d{};function Ee(e,t,n){return zo(t,n,e)}function Lc(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head;e=n.tail,t=w(i,r)}}}function vc(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return Lc(r,a([]));{let i=n.head[0];e=n.tail,t=w(i,r)}}}function Qs(e){return vc(en(e),a([]))}function Xs(e,t,n){let r=Re(e,t);if(r.isOk()){let i=r[0];return Ee(e,t,n(new _(i)))}else return Ee(e,t,n(new m))}function Eo(e,t){let n=e[0],r=e[1];return[n,t(r)]}var V=class extends d{},Je=class extends d{};function Bn(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head;e=n.tail,t=w(i,r)}}}function z(e){return Bn(e,a([]))}function Sc(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return z(s);{let l=r.head,o=r.tail,u;i(l)?u=w(l,s):u=s;let p=u;e=o,t=i,n=p}}}function ht(e,t){return Sc(e,t,a([]))}function zc(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return z(s);{let l=r.head,o=r.tail,u,c=i(l);if(c.isOk()){let f=c[0];u=w(f,s)}else u=s;let p=u;e=o,t=i,n=p}}}function tn(e,t){return zc(e,t,a([]))}function Ec(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return z(s);{let l=r.head;e=r.tail,t=i,n=w(i(l),s)}}}function N(e,t){return Ec(e,t,a([]))}function Tc(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head;e=n.tail,t=w(i,r)}}}function re(e,t){return Tc(z(e),t)}function ye(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return i;{let l=r.head;e=r.tail,t=s(i,l),n=s}}}function el(e,t,n){let r=ye(e,[t,a([])],(i,s)=>{let l=i[0],o=i[1],u=n(l,s),c=u[0],p=u[1];return[c,w(p,o)]});return Eo(r,z)}function qc(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r;if(i.hasLength(0))return s;{let u=i.head;e=i.tail,t=l(s,u,o),n=l,r=o+1}}}function tl(e,t,n){return qc(e,t,n,0)}function $t(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return new k(void 0);{let i=n.head,s=n.tail;if(r(i))return new x(i);e=s,t=r}}}function $r(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return!1;{let i=n.head,s=n.tail;if(r(i))return!0;e=s,t=r}}}function Bc(e,t,n,r,i,s){for(;;){let l=e,o=t,u=n,c=r,p=i,f=s,$=w(p,u);if(l.hasLength(0))return c instanceof V?w(z($),f):w($,f);{let g=l.head,b=l.tail,j=o(p,g);if(j instanceof K&&c instanceof Je)e=b,t=o,n=$,r=c,i=g,s=f;else if(j instanceof J&&c instanceof V)e=b,t=o,n=$,r=c,i=g,s=f;else if(j instanceof Q&&c instanceof V)e=b,t=o,n=$,r=c,i=g,s=f;else if(j instanceof K&&c instanceof V){let L;c instanceof V?L=w(z($),f):L=w($,f);let q=L;if(b.hasLength(0))return w(a([g]),q);{let C=b.head,O=b.tail,A,S=o(g,C);S instanceof J?A=new V:S instanceof Q?A=new V:A=new Je;let R=A;e=O,t=o,n=a([g]),r=R,i=C,s=q}}else if(j instanceof J&&c instanceof Je){let L;c instanceof V?L=w(z($),f):L=w($,f);let q=L;if(b.hasLength(0))return w(a([g]),q);{let C=b.head,O=b.tail,A,S=o(g,C);S instanceof J?A=new V:S instanceof Q?A=new V:A=new Je;let R=A;e=O,t=o,n=a([g]),r=R,i=C,s=q}}else{let L;c instanceof V?L=w(z($),f):L=w($,f);let q=L;if(b.hasLength(0))return w(a([g]),q);{let C=b.head,O=b.tail,A,S=o(g,C);S instanceof J?A=new V:S instanceof Q?A=new V:A=new Je;let R=A;e=O,t=o,n=a([g]),r=R,i=C,s=q}}}}}function Cc(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r;if(i.hasLength(0))return Bn(s,o);if(s.hasLength(0))return Bn(i,o);{let u=i.head,c=i.tail,p=s.head,f=s.tail,$=l(u,p);$ instanceof J?(e=c,t=s,n=l,r=w(u,o)):$ instanceof K?(e=i,t=f,n=l,r=w(p,o)):(e=i,t=f,n=l,r=w(p,o))}}}function Pc(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return z(s);if(r.hasLength(1)){let l=r.head;return z(w(z(l),s))}else{let l=r.head,o=r.tail.head,u=r.tail.tail,c=Cc(l,o,i,a([]));e=u,t=i,n=w(c,s)}}}function Nc(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r;if(i.hasLength(0))return Bn(s,o);if(s.hasLength(0))return Bn(i,o);{let u=i.head,c=i.tail,p=s.head,f=s.tail,$=l(u,p);$ instanceof J?(e=i,t=f,n=l,r=w(p,o)):$ instanceof K?(e=c,t=s,n=l,r=w(u,o)):(e=c,t=s,n=l,r=w(u,o))}}}function Mc(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return z(s);if(r.hasLength(1)){let l=r.head;return z(w(z(l),s))}else{let l=r.head,o=r.tail.head,u=r.tail.tail,c=Nc(l,o,i,a([]));e=u,t=i,n=w(c,s)}}}function Ic(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return a([]);if(r.hasLength(1)&&i instanceof V)return r.head;if(r.hasLength(1)&&i instanceof Je){let l=r.head;return z(l)}else i instanceof V?(e=Pc(r,s,a([])),t=new Je,n=s):(e=Mc(r,s,a([])),t=new V,n=s)}}function Cn(e,t){if(e.hasLength(0))return a([]);if(e.hasLength(1)){let n=e.head;return a([n])}else{let n=e.head,r=e.tail.head,i=e.tail.tail,s,l=t(n,r);l instanceof J?s=new V:l instanceof Q?s=new V:s=new Je;let o=s,u=Bc(i,t,a([n]),o,r,a([]));return Ic(u,new V,t)}}function Dc(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r;if(i.atLeastLength(1)&&E(i.head[0],s)){let u=i.head[0],c=i.tail;return Bn(o,w([u,l],c))}else if(i.atLeastLength(1)){let u=i.head;e=i.tail,t=s,n=l,r=w(u,o)}else return z(w([s,l],o))}}function nl(e,t,n){return Dc(e,t,n,a([]))}function fi(e,t,n){let i=e,s=il(i,t,n);return s}function wr(e,t){return e===t?new Q:No(e,t)?new J:new K}function Po(e,t,n){if(n<0)return"";if(t<0){let s=sn(e)+t;return s<0?"":ll(e,s,n)}else return ll(e,t,n)}function Rc(e,t){for(;;){let n=e,r=t;if(n.atLeastLength(1)){let i=n.head;e=n.tail,t=r+i}else return r}}function jt(e){return Rc(e,"")}function Jc(e,t,n){for(;;){let r=e,i=t,s=n;if(i<=0)return s;e=r,t=i-1,n=s+r}}function gr(e,t){return Jc(e,t,"")}function Kc(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return s;{let l=r.head;e=r.tail,t=i,n=s+i+l}}}function Te(e,t){if(e.hasLength(0))return"";{let n=e.head,r=e.tail;return Kc(r,t,n)}}function Vc(e,t){let n=sn(t),r=Xt(e,n),i=Qt(e,n);return gr(t,r)+Po(t,0,i)}function Ot(e,t,n){let r=sn(e),i=t-r;return i<=0?e:Vc(i,n)+e}function Nn(e){let n=hi(e);return $i(n)}function pi(e,t){for(;;){let n=e,r=t;if(r>0){let s=di(n);if(s.isOk())e=s[0][1],t=r-1;else return n}else return n}}function rn(e,t){if(t==="")return Pn(e);{let r=e,i=sl(r,t);return N(i,X)}}function ol(e){let t=Ke(e);return t}function St(e,t){if(e.isOk()){let n=e[0];return new x(t(n))}else{let n=e[0];return new k(n)}}function mi(e,t){if(e.isOk()){let n=e[0];return new x(n)}else{let n=e[0];return new k(t(n))}}function xr(e,t){if(e.isOk()){let n=e[0];return t(n)}else{let n=e[0];return new k(n)}}function qe(e,t){return xr(e,t)}var on=class extends d{constructor(t,n,r){super(),this.expected=t,this.found=n,this.path=r}};function tf(e,t){return mi(e,n=>N(n,t))}function Uo(e){return pl(e)}function Wo(e){return t=>{if(e.hasLength(0))return new k(a([new on("another type",Ce(t),a([]))]));{let n=e.head,r=e.tail,i=n(t);if(i.isOk()){let s=i[0];return new x(s)}else return Wo(r)(t)}}}function nf(e,t){let n=t,r=Wo(a([pl,u=>St(Ho(u),G)])),i,s=r(n);if(s.isOk())i=s[0];else{let u=a(["<",Ce(n),">"]),c=nn(u);i=c}let l=i,o=e;return new on(o.expected,o.found,w(l,e.path))}function fl(e,t){return n=>{let r=new on("field","nothing",a([]));return xr(Go(n,e),i=>{let l=ci(i,a([r])),o=xr(l,t);return tf(o,u=>nf(u,e))})}}var Ro=new WeakMap,dl=new DataView(new ArrayBuffer(8)),_l=0;function hl(e){let t=Ro.get(e);if(t!==void 0)return t;let n=_l++;return _l===2147483647&&(_l=0),Ro.set(e,n),n}function $l(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function wl(e){let t=0,n=e.length;for(let r=0;r<n;r++)t=Math.imul(31,t)+e.charCodeAt(r)|0;return t}function Ko(e){dl.setFloat64(0,e);let t=dl.getInt32(0),n=dl.getInt32(4);return Math.imul(73244475,t>>16^t)^n}function rf(e){return wl(e.toString())}function sf(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let r=e.hashCode(e);if(typeof r=="number")return r}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return hl(e);if(e instanceof Date)return Ko(e.getTime());let n=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let r=0;r<e.length;r++)n=Math.imul(31,n)+Pe(e[r])|0;else if(e instanceof Set)e.forEach(r=>{n=n+Pe(r)|0});else if(e instanceof Map)e.forEach((r,i)=>{n=n+$l(Pe(r),Pe(i))|0});else{let r=Object.keys(e);for(let i=0;i<r.length;i++){let s=r[i],l=e[s];n=n+$l(Pe(l),wl(s))|0}}return n}function Pe(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return Ko(e);case"string":return wl(e);case"bigint":return rf(e);case"object":return sf(e);case"symbol":return hl(e);case"function":return hl(e);default:return 0}}var Ye=5,gl=Math.pow(2,Ye),lf=gl-1,of=gl/2,af=gl/4,de=0,Ve=1,Le=2,un=3,xl={type:Le,bitmap:0,array:[]};function br(e,t){return e>>>t&lf}function gi(e,t){return 1<<br(e,t)}function uf(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function bl(e,t){return uf(e&t-1)}function Ne(e,t,n){let r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=e[s];return i[t]=n,i}function cf(e,t,n){let r=e.length,i=new Array(r+1),s=0,l=0;for(;s<t;)i[l++]=e[s++];for(i[l++]=n;s<r;)i[l++]=e[s++];return i}function ml(e,t){let n=e.length,r=new Array(n-1),i=0,s=0;for(;i<t;)r[s++]=e[i++];for(++i;i<n;)r[s++]=e[i++];return r}function Vo(e,t,n,r,i,s){let l=Pe(t);if(l===r)return{type:un,hash:l,array:[{type:de,k:t,v:n},{type:de,k:i,v:s}]};let o={val:!1};return yr(yl(xl,e,l,t,n,o),e,r,i,s,o)}function yr(e,t,n,r,i,s){switch(e.type){case Ve:return ff(e,t,n,r,i,s);case Le:return yl(e,t,n,r,i,s);case un:return pf(e,t,n,r,i,s)}}function ff(e,t,n,r,i,s){let l=br(n,t),o=e.array[l];if(o===void 0)return s.val=!0,{type:Ve,size:e.size+1,array:Ne(e.array,l,{type:de,k:r,v:i})};if(o.type===de)return E(r,o.k)?i===o.v?e:{type:Ve,size:e.size,array:Ne(e.array,l,{type:de,k:r,v:i})}:(s.val=!0,{type:Ve,size:e.size,array:Ne(e.array,l,Vo(t+Ye,o.k,o.v,n,r,i))});let u=yr(o,t+Ye,n,r,i,s);return u===o?e:{type:Ve,size:e.size,array:Ne(e.array,l,u)}}function yl(e,t,n,r,i,s){let l=gi(n,t),o=bl(e.bitmap,l);if((e.bitmap&l)!==0){let u=e.array[o];if(u.type!==de){let p=yr(u,t+Ye,n,r,i,s);return p===u?e:{type:Le,bitmap:e.bitmap,array:Ne(e.array,o,p)}}let c=u.k;return E(r,c)?i===u.v?e:{type:Le,bitmap:e.bitmap,array:Ne(e.array,o,{type:de,k:r,v:i})}:(s.val=!0,{type:Le,bitmap:e.bitmap,array:Ne(e.array,o,Vo(t+Ye,c,u.v,n,r,i))})}else{let u=e.array.length;if(u>=of){let c=new Array(32),p=br(n,t);c[p]=yl(xl,t+Ye,n,r,i,s);let f=0,$=e.bitmap;for(let g=0;g<32;g++){if(($&1)!==0){let b=e.array[f++];c[g]=b}$=$>>>1}return{type:Ve,size:u+1,array:c}}else{let c=cf(e.array,o,{type:de,k:r,v:i});return s.val=!0,{type:Le,bitmap:e.bitmap|l,array:c}}}}function pf(e,t,n,r,i,s){if(n===e.hash){let l=kl(e,r);if(l!==-1)return e.array[l].v===i?e:{type:un,hash:n,array:Ne(e.array,l,{type:de,k:r,v:i})};let o=e.array.length;return s.val=!0,{type:un,hash:n,array:Ne(e.array,o,{type:de,k:r,v:i})}}return yr({type:Le,bitmap:gi(e.hash,t),array:[e]},t,n,r,i,s)}function kl(e,t){let n=e.array.length;for(let r=0;r<n;r++)if(E(t,e.array[r].k))return r;return-1}function wi(e,t,n,r){switch(e.type){case Ve:return df(e,t,n,r);case Le:return _f(e,t,n,r);case un:return hf(e,r)}}function df(e,t,n,r){let i=br(n,t),s=e.array[i];if(s!==void 0){if(s.type!==de)return wi(s,t+Ye,n,r);if(E(r,s.k))return s}}function _f(e,t,n,r){let i=gi(n,t);if((e.bitmap&i)===0)return;let s=bl(e.bitmap,i),l=e.array[s];if(l.type!==de)return wi(l,t+Ye,n,r);if(E(r,l.k))return l}function hf(e,t){let n=kl(e,t);if(!(n<0))return e.array[n]}function Ll(e,t,n,r){switch(e.type){case Ve:return $f(e,t,n,r);case Le:return mf(e,t,n,r);case un:return wf(e,r)}}function $f(e,t,n,r){let i=br(n,t),s=e.array[i];if(s===void 0)return e;let l;if(s.type===de){if(!E(s.k,r))return e}else if(l=Ll(s,t+Ye,n,r),l===s)return e;if(l===void 0){if(e.size<=af){let o=e.array,u=new Array(e.size-1),c=0,p=0,f=0;for(;c<i;){let $=o[c];$!==void 0&&(u[p]=$,f|=1<<c,++p),++c}for(++c;c<o.length;){let $=o[c];$!==void 0&&(u[p]=$,f|=1<<c,++p),++c}return{type:Le,bitmap:f,array:u}}return{type:Ve,size:e.size-1,array:Ne(e.array,i,l)}}return{type:Ve,size:e.size,array:Ne(e.array,i,l)}}function mf(e,t,n,r){let i=gi(n,t);if((e.bitmap&i)===0)return e;let s=bl(e.bitmap,i),l=e.array[s];if(l.type!==de){let o=Ll(l,t+Ye,n,r);return o===l?e:o!==void 0?{type:Le,bitmap:e.bitmap,array:Ne(e.array,s,o)}:e.bitmap===i?void 0:{type:Le,bitmap:e.bitmap^i,array:ml(e.array,s)}}return E(r,l.k)?e.bitmap===i?void 0:{type:Le,bitmap:e.bitmap^i,array:ml(e.array,s)}:e}function wf(e,t){let n=kl(e,t);if(n<0)return e;if(e.array.length!==1)return{type:un,hash:e.hash,array:ml(e.array,n)}}function Yo(e,t){if(e===void 0)return;let n=e.array,r=n.length;for(let i=0;i<r;i++){let s=n[i];if(s!==void 0){if(s.type===de){t(s.v,s.k);continue}Yo(s,t)}}}var ge=class e{static fromObject(t){let n=Object.keys(t),r=e.new();for(let i=0;i<n.length;i++){let s=n[i];r=r.set(s,t[s])}return r}static fromMap(t){let n=e.new();return t.forEach((r,i)=>{n=n.set(i,r)}),n}static new(){return new e(void 0,0)}constructor(t,n){this.root=t,this.size=n}get(t,n){if(this.root===void 0)return n;let r=wi(this.root,0,Pe(t),t);return r===void 0?n:r.v}set(t,n){let r={val:!1},i=this.root===void 0?xl:this.root,s=yr(i,0,Pe(t),t,n,r);return s===this.root?this:new e(s,r.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let n=Ll(this.root,0,Pe(t),t);return n===this.root?this:n===void 0?e.new():new e(n,this.size-1)}has(t){return this.root===void 0?!1:wi(this.root,0,Pe(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((n,r)=>t.push([r,n])),t}forEach(t){Yo(this.root,t)}hashCode(){let t=0;return this.forEach((n,r)=>{t=t+$l(Pe(n),Pe(r))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((n,r)=>{if(!E(t.get(r,!n),n))throw Jo}),!0}catch(n){if(n===Jo)return!1;throw n}}},Jo=Symbol();var na=void 0,Qo={};function X(e){return e}function G(e){return e.toString()}function vl(e){let t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{let n=t.indexOf("e");return n>=0?t.slice(0,n)+".0"+t.slice(n):t+".0"}}function il(e,t,n){return typeof e.replaceAll<"u"?e.replaceAll(t,n):e.replace(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),n)}function sn(e){if(e==="")return 0;let t=xi(e);if(t){let n=0;for(let r of t)n++;return n}else return e.match(/./gsu).length}function Pn(e){let t=xi(e);return t?U.fromArray(Array.from(t).map(n=>n.segment)):U.fromArray(e.match(/./gsu))}var Xo;function xi(e){if(globalThis.Intl&&Intl.Segmenter)return Xo||=new Intl.Segmenter,Xo.segment(e)[Symbol.iterator]()}function di(e){let t,n=xi(e);return n?t=n.next().value?.segment:t=e.match(/./su)?.[0],t?new x([t,e.slice(t.length)]):new k(na)}function cn(e){return[e.charCodeAt(0)|0,e.slice(1)]}function ke(e){return e.toLowerCase()}function No(e,t){return e<t}function sl(e,t){return U.fromArray(e.split(t))}function nn(e){let t="";for(let n of e)t=t+n;return t}function ll(e,t,n){if(n<=0||t>=e.length)return"";let r=xi(e);if(r){for(;t-- >0;)r.next();let i="";for(;n-- >0;){let s=r.next().value;if(s===void 0)break;i+=s.segment}return i}else return e.match(/./gsu).slice(t,t+n).join("")}function oe(e,t,n){return e.slice(t,t+n)}function ln(e,t){return e.startsWith(t)}function _i(e,t){return e.endsWith(t)}var ra=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),gf=new RegExp(`^[${ra}]*`),xf=new RegExp(`[${ra}]*$`);function hi(e){return e.replace(gf,"")}function $i(e){return e.replace(xf,"")}function D(){return ge.new()}function en(e){return U.fromArray(e.entries())}function Re(e,t){let n=e.get(t,Qo);return n===Qo?new k(na):new x(n)}function zo(e,t,n){return n.set(e,t)}function Ce(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof Tn)return"Result";if(e instanceof U)return"List";if(e instanceof be)return"BitArray";if(e instanceof ge)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function Al(e,t){return bf(e,Ce(t))}function bf(e,t){return new k(U.fromArray([new on(e,t,U.fromArray([]))]))}function pl(e){return typeof e=="string"?new x(e):Al("String",e)}function Ho(e){return Number.isInteger(e)?new x(e):Al("Int",e)}function Go(e,t){let n=()=>Al("Dict",e);if(e instanceof ge||e instanceof WeakMap||e instanceof Map){let r=Re(e,t);return new x(r.isOk()?new _(r[0]):new m)}else return e===null?n():Object.getPrototypeOf(e)==Object.prototype?ea(e,t,()=>new x(new m)):ea(e,t,n)}function ea(e,t,n){try{return t in e?new x(new _(e[t])):n()}catch{return n()}}function Ke(e){let t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return yf(e);if(t==="bigint"||Number.isInteger(e))return e.toString();if(t==="number")return vl(e);if(Array.isArray(e))return`#(${e.map(Ke).join(", ")})`;if(e instanceof U)return Af(e);if(e instanceof At)return jf(e);if(e instanceof be)return`<<${Do(e,"")}>>`;if(e instanceof d)return vf(e);if(e instanceof ge)return kf(e);if(e instanceof Set)return`//js(Set(${[...e].map(Ke).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){let n=[];for(let r of Array(e.length).keys())n.push(String.fromCharCode(r+97));return`//fn(${n.join(", ")}) { ... }`}return Lf(e)}function yf(e){let t='"';for(let n=0;n<e.length;n++){let r=e[n];switch(r){case`
`:t+="\\n";break;case"\r":t+="\\r";break;case"	":t+="\\t";break;case"\f":t+="\\f";break;case"\\":t+="\\\\";break;case'"':t+='\\"';break;default:r<" "||r>"~"&&r<"\xA0"?t+="\\u{"+r.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=r}}return t+='"',t}function kf(e){let t="dict.from_list([",n=!0;return e.forEach((r,i)=>{n||(t=t+", "),t=t+"#("+Ke(i)+", "+Ke(r)+")",n=!1}),t+"])"}function Lf(e){let t=Object.getPrototypeOf(e)?.constructor?.name||"Object",n=[];for(let s of Object.keys(e))n.push(`${Ke(s)}: ${Ke(e[s])}`);let r=n.length?" "+n.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${r}})`}function vf(e){let t=Object.keys(e).map(n=>{let r=Ke(e[n]);return isNaN(parseInt(n))?`${n}: ${r}`:r}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function Af(e){return`[${e.toArray().map(Ke).join(", ")}]`}function jf(e){return`//utfcodepoint(${String.fromCodePoint(e.value)})`}function Do(e,t){if(e.bitSize===0)return t;for(let n=0;n<e.byteSize-1;n++)t+=e.byteAt(n).toString(),t+=", ";if(e.byteSize*8===e.bitSize)t+=e.byteAt(e.byteSize-1).toString();else{let n=e.bitSize%8;t+=e.byteAt(e.byteSize-1)>>8-n,t+=`:size(${n})`}return t}function an(e){return e>=0?e:e*-1}var bi=class extends d{constructor(t){super(),this[0]=t}},In=class extends d{},kr=class extends d{},Lr=class extends d{},Dn=class extends d{},fn=class extends d{},vr=class extends d{},Ar=class extends d{},jr=class extends d{},yi=class extends d{};function zt(e,t){return[Xt(e,t),Qt(e,t)]}var ia=1e3;var sa=1e6;var la=6e7;var oa=36e8;var aa=864e8;var ua=6048e8;var ca=2592e9;var fa=31536e9;function pa(e){let n=ye(e,0,(r,i)=>{if(i[1]instanceof In){let s=i[0];return r+s}else if(i[1]instanceof kr){let s=i[0];return r+s*ia}else if(i[1]instanceof Lr){let s=i[0];return r+s*sa}else if(i[1]instanceof Dn){let s=i[0];return r+s*la}else if(i[1]instanceof fn){let s=i[0];return r+s*oa}else if(i[1]instanceof vr){let s=i[0];return r+s*aa}else if(i[1]instanceof Ar){let s=i[0];return r+s*ua}else if(i[1]instanceof jr){let s=i[0];return r+s*ca}else{let s=i[0];return r+s*fa}});return new bi(n)}function da(e){let t=e[0],n=an(t),r=zt(n,fa),i=r[0],s=r[1],l=zt(s,ca),o=l[0],u=l[1],c=zt(u,ua),p=c[0],f=c[1],$=zt(f,aa),g=$[0],b=$[1],j=zt(b,oa),L=j[0],q=j[1],C=zt(q,la),O=C[0],A=C[1],S=zt(A,sa),R=S[0],_t=S[1],bo=zt(_t,ia),lc=bo[0],oc=bo[1],ac=a([[i,new yi],[o,new jr],[p,new Ar],[g,new vr],[L,new fn],[O,new Dn],[R,new Lr],[lc,new kr],[oc,new In]]),uc=ht(ac,pr=>pr[0]>0);return N(uc,pr=>t<0?[-1*pr[0],pr[1]]:pr)}var _a=a([["Africa/Abidjan",0],["Africa/Algiers",3600],["Africa/Bissau",0],["Africa/Cairo",7200],["Africa/Casablanca",3600],["Africa/Ceuta",3600],["Africa/El_Aaiun",3600],["Africa/Johannesburg",7200],["Africa/Juba",7200],["Africa/Khartoum",7200],["Africa/Lagos",3600],["Africa/Maputo",7200],["Africa/Monrovia",0],["Africa/Nairobi",10800],["Africa/Ndjamena",3600],["Africa/Sao_Tome",0],["Africa/Tripoli",7200],["Africa/Tunis",3600],["Africa/Windhoek",7200],["America/Adak",-36e3],["America/Anchorage",-32400],["America/Araguaina",-10800],["America/Argentina/Buenos_Aires",-10800],["America/Argentina/Catamarca",-10800],["America/Argentina/Cordoba",-10800],["America/Argentina/Jujuy",-10800],["America/Argentina/La_Rioja",-10800],["America/Argentina/Mendoza",-10800],["America/Argentina/Rio_Gallegos",-10800],["America/Argentina/Salta",-10800],["America/Argentina/San_Juan",-10800],["America/Argentina/San_Luis",-10800],["America/Argentina/Tucuman",-10800],["America/Argentina/Ushuaia",-10800],["America/Asuncion",-14400],["America/Bahia",-10800],["America/Bahia_Banderas",-21600],["America/Barbados",-14400],["America/Belem",-10800],["America/Belize",-21600],["America/Boa_Vista",-14400],["America/Bogota",-18e3],["America/Boise",-25200],["America/Cambridge_Bay",-25200],["America/Campo_Grande",-14400],["America/Cancun",-18e3],["America/Caracas",-14400],["America/Cayenne",-10800],["America/Chicago",-21600],["America/Chihuahua",-21600],["America/Ciudad_Juarez",-25200],["America/Costa_Rica",-21600],["America/Cuiaba",-14400],["America/Danmarkshavn",0],["America/Dawson",-25200],["America/Dawson_Creek",-25200],["America/Denver",-25200],["America/Detroit",-18e3],["America/Edmonton",-25200],["America/Eirunepe",-18e3],["America/El_Salvador",-21600],["America/Fort_Nelson",-25200],["America/Fortaleza",-10800],["America/Glace_Bay",-14400],["America/Goose_Bay",-14400],["America/Grand_Turk",-18e3],["America/Guatemala",-21600],["America/Guayaquil",-18e3],["America/Guyana",-14400],["America/Halifax",-14400],["America/Havana",-18e3],["America/Hermosillo",-25200],["America/Indiana/Indianapolis",-18e3],["America/Indiana/Knox",-21600],["America/Indiana/Marengo",-18e3],["America/Indiana/Petersburg",-18e3],["America/Indiana/Tell_City",-21600],["America/Indiana/Vevay",-18e3],["America/Indiana/Vincennes",-18e3],["America/Indiana/Winamac",-18e3],["America/Inuvik",-25200],["America/Iqaluit",-18e3],["America/Jamaica",-18e3],["America/Juneau",-32400],["America/Kentucky/Louisville",-18e3],["America/Kentucky/Monticello",-18e3],["America/La_Paz",-14400],["America/Lima",-18e3],["America/Los_Angeles",-28800],["America/Maceio",-10800],["America/Managua",-21600],["America/Manaus",-14400],["America/Martinique",-14400],["America/Matamoros",-21600],["America/Mazatlan",-25200],["America/Menominee",-21600],["America/Merida",-21600],["America/Metlakatla",-32400],["America/Mexico_City",-21600],["America/Miquelon",-10800],["America/Moncton",-14400],["America/Monterrey",-21600],["America/Montevideo",-10800],["America/New_York",-18e3],["America/Nome",-32400],["America/Noronha",-7200],["America/North_Dakota/Beulah",-21600],["America/North_Dakota/Center",-21600],["America/North_Dakota/New_Salem",-21600],["America/Nuuk",-7200],["America/Ojinaga",-21600],["America/Panama",-18e3],["America/Paramaribo",-10800],["America/Phoenix",-25200],["America/Port-au-Prince",-18e3],["America/Porto_Velho",-14400],["America/Puerto_Rico",-14400],["America/Punta_Arenas",-10800],["America/Rankin_Inlet",-21600],["America/Recife",-10800],["America/Regina",-21600],["America/Resolute",-21600],["America/Rio_Branco",-18e3],["America/Santarem",-10800],["America/Santiago",-14400],["America/Santo_Domingo",-14400],["America/Sao_Paulo",-10800],["America/Scoresbysund",-7200],["America/Sitka",-32400],["America/St_Johns",-12600],["America/Swift_Current",-21600],["America/Tegucigalpa",-21600],["America/Thule",-14400],["America/Tijuana",-28800],["America/Toronto",-18e3],["America/Vancouver",-28800],["America/Whitehorse",-25200],["America/Winnipeg",-21600],["America/Yakutat",-32400],["Antarctica/Casey",28800],["Antarctica/Davis",25200],["Antarctica/Macquarie",36e3],["Antarctica/Mawson",18e3],["Antarctica/Palmer",-10800],["Antarctica/Rothera",-10800],["Antarctica/Troll",0],["Antarctica/Vostok",18e3],["Asia/Almaty",18e3],["Asia/Amman",10800],["Asia/Anadyr",43200],["Asia/Aqtau",18e3],["Asia/Aqtobe",18e3],["Asia/Ashgabat",18e3],["Asia/Atyrau",18e3],["Asia/Baghdad",10800],["Asia/Baku",14400],["Asia/Bangkok",25200],["Asia/Barnaul",25200],["Asia/Beirut",7200],["Asia/Bishkek",21600],["Asia/Chita",32400],["Asia/Colombo",19800],["Asia/Damascus",10800],["Asia/Dhaka",21600],["Asia/Dili",32400],["Asia/Dubai",14400],["Asia/Dushanbe",18e3],["Asia/Famagusta",7200],["Asia/Gaza",7200],["Asia/Hebron",7200],["Asia/Ho_Chi_Minh",25200],["Asia/Hong_Kong",28800],["Asia/Hovd",25200],["Asia/Irkutsk",28800],["Asia/Jakarta",25200],["Asia/Jayapura",32400],["Asia/Jerusalem",7200],["Asia/Kabul",16200],["Asia/Kamchatka",43200],["Asia/Karachi",18e3],["Asia/Kathmandu",20700],["Asia/Khandyga",32400],["Asia/Kolkata",19800],["Asia/Krasnoyarsk",25200],["Asia/Kuching",28800],["Asia/Macau",28800],["Asia/Magadan",39600],["Asia/Makassar",28800],["Asia/Manila",28800],["Asia/Nicosia",7200],["Asia/Novokuznetsk",25200],["Asia/Novosibirsk",25200],["Asia/Omsk",21600],["Asia/Oral",18e3],["Asia/Pontianak",25200],["Asia/Pyongyang",32400],["Asia/Qatar",10800],["Asia/Qostanay",18e3],["Asia/Qyzylorda",18e3],["Asia/Riyadh",10800],["Asia/Sakhalin",39600],["Asia/Samarkand",18e3],["Asia/Seoul",32400],["Asia/Shanghai",28800],["Asia/Singapore",28800],["Asia/Srednekolymsk",39600],["Asia/Taipei",28800],["Asia/Tashkent",18e3],["Asia/Tbilisi",14400],["Asia/Tehran",12600],["Asia/Thimphu",21600],["Asia/Tokyo",32400],["Asia/Tomsk",25200],["Asia/Ulaanbaatar",28800],["Asia/Urumqi",21600],["Asia/Ust-Nera",36e3],["Asia/Vladivostok",36e3],["Asia/Yakutsk",32400],["Asia/Yangon",23400],["Asia/Yekaterinburg",18e3],["Asia/Yerevan",14400],["Atlantic/Azores",-3600],["Atlantic/Bermuda",-14400],["Atlantic/Canary",0],["Atlantic/Cape_Verde",-3600],["Atlantic/Faroe",0],["Atlantic/Madeira",0],["Atlantic/South_Georgia",-7200],["Atlantic/Stanley",-10800],["Australia/Adelaide",34200],["Australia/Brisbane",36e3],["Australia/Broken_Hill",34200],["Australia/Darwin",34200],["Australia/Eucla",31500],["Australia/Hobart",36e3],["Australia/Lindeman",36e3],["Australia/Lord_Howe",37800],["Australia/Melbourne",36e3],["Australia/Perth",28800],["Australia/Sydney",36e3],["Etc/GMT",0],["Etc/GMT+1",-3600],["Etc/GMT+10",-36e3],["Etc/GMT+11",-39600],["Etc/GMT+12",-43200],["Etc/GMT+2",-7200],["Etc/GMT+3",-10800],["Etc/GMT+4",-14400],["Etc/GMT+5",-18e3],["Etc/GMT+6",-21600],["Etc/GMT+7",-25200],["Etc/GMT+8",-28800],["Etc/GMT+9",-32400],["Etc/GMT-1",3600],["Etc/GMT-10",36e3],["Etc/GMT-11",39600],["Etc/GMT-12",43200],["Etc/GMT-13",46800],["Etc/GMT-14",50400],["Etc/GMT-2",7200],["Etc/GMT-3",10800],["Etc/GMT-4",14400],["Etc/GMT-5",18e3],["Etc/GMT-6",21600],["Etc/GMT-7",25200],["Etc/GMT-8",28800],["Etc/GMT-9",32400],["Etc/UTC",0],["Europe/Andorra",3600],["Europe/Astrakhan",14400],["Europe/Athens",7200],["Europe/Belgrade",3600],["Europe/Berlin",3600],["Europe/Brussels",3600],["Europe/Bucharest",7200],["Europe/Budapest",3600],["Europe/Chisinau",7200],["Europe/Dublin",3600],["Europe/Gibraltar",3600],["Europe/Helsinki",7200],["Europe/Istanbul",10800],["Europe/Kaliningrad",7200],["Europe/Kirov",10800],["Europe/Kyiv",7200],["Europe/Lisbon",0],["Europe/London",0],["Europe/Madrid",3600],["Europe/Malta",3600],["Europe/Minsk",10800],["Europe/Moscow",10800],["Europe/Paris",3600],["Europe/Prague",3600],["Europe/Riga",7200],["Europe/Rome",3600],["Europe/Samara",14400],["Europe/Saratov",14400],["Europe/Simferopol",10800],["Europe/Sofia",7200],["Europe/Tallinn",7200],["Europe/Tirane",3600],["Europe/Ulyanovsk",14400],["Europe/Vienna",3600],["Europe/Vilnius",7200],["Europe/Volgograd",10800],["Europe/Warsaw",3600],["Europe/Zurich",3600],["Indian/Chagos",21600],["Indian/Maldives",18e3],["Indian/Mauritius",14400],["Pacific/Apia",46800],["Pacific/Auckland",43200],["Pacific/Bougainville",39600],["Pacific/Chatham",45900],["Pacific/Easter",-21600],["Pacific/Efate",39600],["Pacific/Fakaofo",46800],["Pacific/Fiji",43200],["Pacific/Galapagos",-21600],["Pacific/Gambier",-32400],["Pacific/Guadalcanal",39600],["Pacific/Guam",36e3],["Pacific/Honolulu",-36e3],["Pacific/Kanton",46800],["Pacific/Kiritimati",50400],["Pacific/Kosrae",39600],["Pacific/Kwajalein",43200],["Pacific/Marquesas",-34200],["Pacific/Nauru",43200],["Pacific/Niue",-39600],["Pacific/Norfolk",39600],["Pacific/Noumea",39600],["Pacific/Pago_Pago",-39600],["Pacific/Palau",32400],["Pacific/Pitcairn",-28800],["Pacific/Port_Moresby",36e3],["Pacific/Rarotonga",-36e3],["Pacific/Tahiti",-36e3],["Pacific/Tarawa",43200],["Pacific/Tongatapu",46800]]);function ha(){return Date.now()*1e3}function $a(){return-new Date().getTimezoneOffset()}function ma(){return new _(Intl.DateTimeFormat().resolvedOptions().timeZone)}function wa(){return Math.floor(globalThis.performance.now()*1e3)}function ga(e,t){let n=new Date((e+t)/1e3);return[[n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate()],[n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()]]}var ki=class extends d{constructor(t,n,r,i){super(),this.wall_time=t,this.offset=n,this.timezone=r,this.monotonic_time=i}};function ba(e){{let t=e.wall_time;return Xt(t,1e3)}}function ya(e){return new ki(e*1e3,0,new m,new m)}function Ol(e,t){let n=e.wall_time,r=e.monotonic_time,i=t.wall_time,s=t.monotonic_time,l;if(r instanceof _&&s instanceof _){let $=r[0],g=s[0];l=[$,g]}else l=[n,i];let o=l,u=o[0],c=o[1],p=u===c,f=u<c;return p?new Q:f?new J:new K}function Pf(e){return He(e===0,new x("Z"),()=>{let t=(()=>{let n=a([[e,new In]]),r=pa(n);return da(r)})();if(t.hasLength(2)&&t.head[1]instanceof fn&&t.tail.head[1]instanceof Dn){let n=t.head[0],r=t.tail.head[0],i=a([n>0?jt(a(["+",(()=>{let u=G(n);return Ot(u,2,"0")})()])):jt(a(["-",(()=>{let u=an(n),c=G(u);return Ot(c,2,"0")})()])),(()=>{let o=an(r),u=G(o);return Ot(u,2,"0")})()]),s=Te(i,":");return new x(s)}else if(t.hasLength(1)&&t.head[1]instanceof fn){let n=t.head[0],r=a([n>0?jt(a(["+",(()=>{let o=G(n);return Ot(o,2,"0")})()])):jt(a(["-",(()=>{let o=an(n),u=G(o);return Ot(u,2,"0")})()])),"00"]),i=Te(r,":");return new x(i)}else return new k(void 0)})}function Nf(e){{let t=e.wall_time,n=e.offset,r=ga(t,n),i=r[0],s=r[1],l=Pf(n);if(!l.isOk())throw W("let_assert","birl",1324,"to_parts","Pattern match failed, no pattern matched the value.",{value:l});let o=l[0];return[i,s,o]}}function ka(e){let t=Nf(e),n=t[0][0],r=t[0][1],i=t[0][2];return G(n)+"-"+(()=>{let l=G(r);return Ot(l,2,"0")})()+"-"+(()=>{let l=G(i);return Ot(l,2,"0")})()}function Sl(){let e=ha(),t=$a(),n=wa(),r=ma();return new ki(e,t*6e7,(()=>{let i=hr(r,s=>$r(_a,o=>o[0]===s)?new _(s):new m);return Ao(i)})(),new _(n))}var P=class extends d{constructor(t,n,r,i,s,l,o){super(),this.scheme=t,this.userinfo=n,this.host=r,this.port=i,this.path=s,this.query=l,this.fragment=o}};function Df(e){return 48>=e&&e<=57||65>=e&&e<=90||97>=e&&e<=122||e===58||e===46}function Qe(e,t){return new x((()=>{let n=t;return new P(n.scheme,n.userinfo,n.host,n.port,n.path,n.query,new _(e))})())}function Ff(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r;if(s.startsWith("#")&&o===0){let u=s.slice(1);return Qe(u,l)}else if(s.startsWith("#")){let u=s.slice(1),c=oe(i,0,o),p,f=l;return p=new P(f.scheme,f.userinfo,f.host,f.port,f.path,new _(c),f.fragment),Qe(u,p)}else{if(s==="")return new x((()=>{let u=l;return new P(u.scheme,u.userinfo,u.host,u.port,u.path,new _(i),u.fragment)})());{let c=cn(s)[1];e=i,t=c,n=l,r=o+1}}}}function Et(e,t){return Ff(e,e,t,0)}function Uf(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r;if(s.startsWith("?")){let u=s.slice(1),c=oe(i,0,o),p,f=l;return p=new P(f.scheme,f.userinfo,f.host,f.port,c,f.query,f.fragment),Et(u,p)}else if(s.startsWith("#")){let u=s.slice(1),c=oe(i,0,o),p,f=l;return p=new P(f.scheme,f.userinfo,f.host,f.port,c,f.query,f.fragment),Qe(u,p)}else{if(s==="")return new x((()=>{let u=l;return new P(u.scheme,u.userinfo,u.host,u.port,i,u.query,u.fragment)})());{let c=cn(s)[1];e=i,t=c,n=l,r=o+1}}}}function Un(e,t){return Uf(e,e,t,0)}function Ze(e,t,n){for(;;){let r=e,i=t,s=n;if(r.startsWith("0"))e=r.slice(1),t=i,n=s*10;else if(r.startsWith("1"))e=r.slice(1),t=i,n=s*10+1;else if(r.startsWith("2"))e=r.slice(1),t=i,n=s*10+2;else if(r.startsWith("3"))e=r.slice(1),t=i,n=s*10+3;else if(r.startsWith("4"))e=r.slice(1),t=i,n=s*10+4;else if(r.startsWith("5"))e=r.slice(1),t=i,n=s*10+5;else if(r.startsWith("6"))e=r.slice(1),t=i,n=s*10+6;else if(r.startsWith("7"))e=r.slice(1),t=i,n=s*10+7;else if(r.startsWith("8"))e=r.slice(1),t=i,n=s*10+8;else if(r.startsWith("9"))e=r.slice(1),t=i,n=s*10+9;else if(r.startsWith("?")){let l=r.slice(1),o,u=i;return o=new P(u.scheme,u.userinfo,u.host,new _(s),u.path,u.query,u.fragment),Et(l,o)}else if(r.startsWith("#")){let l=r.slice(1),o,u=i;return o=new P(u.scheme,u.userinfo,u.host,new _(s),u.path,u.query,u.fragment),Qe(l,o)}else if(r.startsWith("/")){let l,o=i;return l=new P(o.scheme,o.userinfo,o.host,new _(s),o.path,o.query,o.fragment),Un(r,l)}else return r===""?new x((()=>{let l=i;return new P(l.scheme,l.userinfo,l.host,new _(s),l.path,l.query,l.fragment)})()):new k(void 0)}}function Li(e,t){if(e.startsWith(":0")){let n=e.slice(2);return Ze(n,t,0)}else if(e.startsWith(":1")){let n=e.slice(2);return Ze(n,t,1)}else if(e.startsWith(":2")){let n=e.slice(2);return Ze(n,t,2)}else if(e.startsWith(":3")){let n=e.slice(2);return Ze(n,t,3)}else if(e.startsWith(":4")){let n=e.slice(2);return Ze(n,t,4)}else if(e.startsWith(":5")){let n=e.slice(2);return Ze(n,t,5)}else if(e.startsWith(":6")){let n=e.slice(2);return Ze(n,t,6)}else if(e.startsWith(":7")){let n=e.slice(2);return Ze(n,t,7)}else if(e.startsWith(":8")){let n=e.slice(2);return Ze(n,t,8)}else if(e.startsWith(":9")){let n=e.slice(2);return Ze(n,t,9)}else{if(e.startsWith(":"))return new k(void 0);if(e.startsWith("?")){let n=e.slice(1);return Et(n,t)}else if(e.startsWith("#")){let n=e.slice(1);return Qe(n,t)}else return e.startsWith("/")?Un(e,t):e===""?new x(t):new k(void 0)}}function va(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r;if(s==="")return new x((()=>{let u=l;return new P(u.scheme,u.userinfo,new _(i),u.port,u.path,u.query,u.fragment)})());if(s.startsWith(":")){let u=oe(i,0,o),c,p=l;return c=new P(p.scheme,p.userinfo,new _(u),p.port,p.path,p.query,p.fragment),Li(s,c)}else if(s.startsWith("/")){let u=oe(i,0,o),c,p=l;return c=new P(p.scheme,p.userinfo,new _(u),p.port,p.path,p.query,p.fragment),Un(s,c)}else if(s.startsWith("?")){let u=s.slice(1),c=oe(i,0,o),p,f=l;return p=new P(f.scheme,f.userinfo,new _(c),f.port,f.path,f.query,f.fragment),Et(u,p)}else if(s.startsWith("#")){let u=s.slice(1),c=oe(i,0,o),p,f=l;return p=new P(f.scheme,f.userinfo,new _(c),f.port,f.path,f.query,f.fragment),Qe(u,p)}else{let c=cn(s)[1];e=i,t=c,n=l,r=o+1}}}function Wf(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r;if(s==="")return new x((()=>{let u=l;return new P(u.scheme,u.userinfo,new _(s),u.port,u.path,u.query,u.fragment)})());if(s.startsWith("]")&&o===0){let u=s.slice(1);return Li(u,l)}else if(s.startsWith("]")){let u=s.slice(1),c=oe(i,0,o+1),p,f=l;return p=new P(f.scheme,f.userinfo,new _(c),f.port,f.path,f.query,f.fragment),Li(u,p)}else{if(s.startsWith("/")&&o===0)return Un(s,l);if(s.startsWith("/")){let u=oe(i,0,o),c,p=l;return c=new P(p.scheme,p.userinfo,new _(u),p.port,p.path,p.query,p.fragment),Un(s,c)}else if(s.startsWith("?")&&o===0){let u=s.slice(1);return Et(u,l)}else if(s.startsWith("?")){let u=s.slice(1),c=oe(i,0,o),p,f=l;return p=new P(f.scheme,f.userinfo,new _(c),f.port,f.path,f.query,f.fragment),Et(u,p)}else if(s.startsWith("#")&&o===0){let u=s.slice(1);return Qe(u,l)}else if(s.startsWith("#")){let u=s.slice(1),c=oe(i,0,o),p,f=l;return p=new P(f.scheme,f.userinfo,new _(c),f.port,f.path,f.query,f.fragment),Qe(u,p)}else{let u=cn(s),c=u[0],p=u[1];if(Df(c))e=i,t=p,n=l,r=o+1;else return va(i,i,l,0)}}}}function Hf(e,t){return Wf(e,e,t,0)}function Gf(e,t){return va(e,e,t,0)}function Fn(e,t){if(e.startsWith("["))return Hf(e,t);if(e.startsWith(":")){let n,r=t;return n=new P(r.scheme,r.userinfo,new _(""),r.port,r.path,r.query,r.fragment),Li(e,n)}else return e===""?new x((()=>{let n=t;return new P(n.scheme,n.userinfo,new _(""),n.port,n.path,n.query,n.fragment)})()):Gf(e,t)}function Rf(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r;if(s.startsWith("@")&&o===0){let u=s.slice(1);return Fn(u,l)}else if(s.startsWith("@")){let u=s.slice(1),c=oe(i,0,o),p,f=l;return p=new P(f.scheme,new _(c),f.host,f.port,f.path,f.query,f.fragment),Fn(u,p)}else{if(s==="")return Fn(i,l);if(s.startsWith("/"))return Fn(i,l);if(s.startsWith("?"))return Fn(i,l);if(s.startsWith("#"))return Fn(i,l);{let c=cn(s)[1];e=i,t=c,n=l,r=o+1}}}}function Jf(e,t){return Rf(e,e,t,0)}function zl(e,t){if(e==="//")return new x((()=>{let n=t;return new P(n.scheme,n.userinfo,new _(""),n.port,n.path,n.query,n.fragment)})());if(e.startsWith("//")){let n=e.slice(2);return Jf(n,t)}else return Un(e,t)}function Kf(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r;if(s.startsWith("/")&&o===0)return zl(s,l);if(s.startsWith("/")){let u=oe(i,0,o),c,p=l;return c=new P(new _(ke(u)),p.userinfo,p.host,p.port,p.path,p.query,p.fragment),zl(s,c)}else if(s.startsWith("?")&&o===0){let u=s.slice(1);return Et(u,l)}else if(s.startsWith("?")){let u=s.slice(1),c=oe(i,0,o),p,f=l;return p=new P(new _(ke(c)),f.userinfo,f.host,f.port,f.path,f.query,f.fragment),Et(u,p)}else if(s.startsWith("#")&&o===0){let u=s.slice(1);return Qe(u,l)}else if(s.startsWith("#")){let u=s.slice(1),c=oe(i,0,o),p,f=l;return p=new P(new _(ke(c)),f.userinfo,f.host,f.port,f.path,f.query,f.fragment),Qe(u,p)}else{if(s.startsWith(":")&&o===0)return new k(void 0);if(s.startsWith(":")){let u=s.slice(1),c=oe(i,0,o),p,f=l;return p=new P(new _(ke(c)),f.userinfo,f.host,f.port,f.path,f.query,f.fragment),zl(u,p)}else{if(s==="")return new x((()=>{let u=l;return new P(u.scheme,u.userinfo,u.host,u.port,i,u.query,u.fragment)})());{let c=cn(s)[1];e=i,t=c,n=l,r=o+1}}}}}function Vf(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return z(r);{let i=n.head,s=n.tail,l;i===""||i==="."?l=r:i===".."&&r.hasLength(0)?l=a([]):i===".."&&r.atLeastLength(1)?l=r.tail:l=w(i,r);let o=l;e=s,t=o}}}function Yf(e){return Vf(e,a([]))}function Wn(e){return Yf(rn(e,"/"))}function ce(e){let t,n=e.fragment;if(n instanceof _){let S=n[0];t=a(["#",S])}else t=a([]);let r=t,i,s=e.query;if(s instanceof _){let S=s[0];i=w("?",w(S,r))}else i=r;let l=i,o=w(e.path,l),u,c=e.host,p=ln(e.path,"/");if(c instanceof _&&!p&&c[0]!==""){let S=c[0];u=w("/",o)}else u=o;let f=u,$,g=e.host,b=e.port;if(g instanceof _&&b instanceof _){let S=b[0];$=w(":",w(G(S),f))}else $=f;let j=$,L,q=e.scheme,C=e.userinfo,O=e.host;if(q instanceof _&&C instanceof _&&O instanceof _){let S=q[0],R=C[0],_t=O[0];L=w(S,w("://",w(R,w("@",w(_t,j)))))}else if(q instanceof _&&C instanceof m&&O instanceof _){let S=q[0],R=O[0];L=w(S,w("://",w(R,j)))}else if(q instanceof _&&C instanceof _&&O instanceof m){let S=q[0];L=w(S,w(":",j))}else if(q instanceof _&&C instanceof m&&O instanceof m){let S=q[0];L=w(S,w(":",j))}else if(q instanceof m&&C instanceof m&&O instanceof _){let S=O[0];L=w("//",w(S,j))}else L=j;return jt(L)}var Zf=new P(new m,new m,new m,new m,"",new m,new m);function ie(e){return Kf(e,e,Zf,0)}function El(e,t){if(e instanceof ge||e instanceof WeakMap||e instanceof Map){let r={},i=e.get(t,r);return i===r?new x(new m):new x(new _(i))}let n=Number.isInteger(t);if(n&&t>=0&&t<8&&e instanceof U){let r=0;for(let i of e){if(r===t)return new x(new _(i));r++}return new k("Indexable")}return n&&Array.isArray(e)||e&&typeof e=="object"||e&&Object.getPrototypeOf(e)===Object.prototype?t in e?new x(new _(e[t])):new x(new m):new k(n?"Indexable":"Dict")}function Aa(e,t,n,r,i){if(!(e instanceof U||Array.isArray(e))){let l=new mt("List",Ce(e),i);return[i,U.fromArray([l])]}let s=[];for(let l of e){let o=t(l),[u,c]=o;if(c instanceof Yt){let[p,f]=n(o,r.toString());return[i,f]}s.push(u),r++}return[U.fromArray(s),i]}function ja(e){return Number.isInteger(e)?new x(e):new k(0)}function Oa(e){return typeof e=="string"?new x(e):new k("")}var mt=class extends d{constructor(t,n,r){super(),this.expected=t,this.found=n,this.path=r}},De=class extends d{constructor(t){super(),this.function=t}};function Ai(e,t){let n=t.function(e),r=n[0],i=n[1];return i.hasLength(0)?new x(r):new k(i)}function Tt(e){return new De(t=>[e,a([])])}function ql(e,t){return new De(n=>{let r=e.function(n),i=r[0],s=r[1];return[t(i),s]})}function Sa(e,t){return new De(n=>{let r=e.function(n),i=r[0],s=r[1],o=t(i).function(n),u=o,c=o[0];return s.hasLength(0)?u:[c,s]})}function Qf(e,t,n){for(;;){let r=e,i=t,s=n;if(s.hasLength(0))return i;{let l=s.head,o=s.tail,u=l.function(r),c=u;if(u[1].hasLength(0))return c;e=r,t=i,n=o}}}function ji(e,t){return new De(n=>{let r=e.function(n),i=r;return r[1].hasLength(0)?i:Qf(n,i,t)})}function za(e,t,n){let r=n(e);return r.isOk()?[r[0],a([])]:[r[0],a([new mt(t,Ce(e),a([]))])]}function Xf(e){return za(e,"Int",ja)}var qt=new De(Xf);function ep(e){return za(e,"String",Oa)}var ve=new De(ep);function Hn(e){return new De(t=>Aa(t,e.function,(n,r)=>Or(n,a([r])),0,a([])))}function Or(e,t){let n=ji(ve,a([ql(qt,G)])),r=N(t,s=>{let l=s,o=Ai(l,n);return o.isOk()?o[0]:"<"+Ce(l)+">"}),i=N(e[1],s=>{let l=s;return new mt(l.expected,l.found,re(r,s.path))});return[e[0],i]}function tp(e,t,n,r,i){for(;;){let s=e,l=t,o=n,u=r,c=i;if(s.hasLength(0)){let p=o(u);return Or(p,z(l))}else{let p=s.head,f=s.tail,$=El(u,p);if($.isOk()&&$[0]instanceof _){let g=$[0][0];e=f,t=w(p,l),n=o,r=g,i=c}else{if($.isOk()&&$[0]instanceof m)return c(u,w(p,l));{let g=$[0],L=[o(u)[0],a([new mt(g,Ce(u),a([]))])];return Or(L,z(l))}}}}}function np(e,t,n){return new De(r=>{let i=tp(e,a([]),t.function,r,(p,f)=>{let b=[t.function(p)[0],a([new mt("Field","Nothing",a([]))])];return Or(b,z(f))}),s=i[0],l=i[1],o=n(s).function(r),u=o[0],c=o[1];return[u,re(l,c)]})}function fe(e,t,n){return np(a([e]),t,n)}function Bl(e,t,n,r){return new De(i=>{let s,l=El(i,e);if(l.isOk()&&l[0]instanceof _){let j=l[0][0];s=n.function(j)}else if(l.isOk()&&l[0]instanceof m)s=[t,a([])];else{let j=l[0];s=[t,a([new mt(j,Ce(i),a([]))])]}let o;o=Or(s,a([e]));let c=o,p=c[0],f=c[1],$=r(p).function(i),g=$[0],b=$[1];return[g,re(f,b)]})}function Cl(e){return JSON.stringify(e)}function Ea(e){return Object.fromEntries(e)}function Ta(e){return e.toArray()}function qa(e){try{let t=JSON.parse(e);return new x(t)}catch(t){return new k(ip(t,e))}}function ip(e,t){return sp(e)?new Gn:lp(e,t)}function sp(e){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(e.message)}function lp(e,t){let n=[op,ap,cp,up];for(let r of n){let i=r(e,t);if(i)return i}return new Xe("",0)}function op(e){let n=/unexpected token '(.)', ".+" is not valid JSON/i.exec(e.message);if(!n)return null;let r=Si(n[1]);return new Xe(r,-1)}function ap(e){let n=/unexpected token (.) in JSON at position (\d+)/i.exec(e.message);if(!n)return null;let r=Si(n[1]),i=Number(n[2]);return new Xe(r,i)}function up(e,t){let r=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(e.message);if(!r)return null;let i=Number(r[2]),s=Number(r[3]),l=fp(i,s,t),o=Si(t[l]);return new Xe(o,l)}function cp(e){let n=/unexpected (identifier|token) "(.)"/i.exec(e.message);if(!n)return null;let r=Si(n[2]);return new Xe(r,0)}function Si(e){return"0x"+e.charCodeAt(0).toString(16).toUpperCase()}function fp(e,t,n){if(e===1)return t-1;let r=1,i=0;return n.split("").find((s,l)=>(s===`
`&&(r+=1),r===e?(i=l+t,!0):!1)),i}var Gn=class extends d{},Xe=class extends d{constructor(t){super(),this[0]=t}},zi=class extends d{constructor(t){super(),this[0]=t}},Ei=class extends d{constructor(t){super(),this[0]=t}},Pl=class extends d{constructor(t){super(),this[0]=t}};function pp(e,t){return qe(qa(e),n=>{let r=Ai(n,t);return mi(r,i=>new Pl(i))})}function Ba(e,t){return pp(e,t)}function pn(e){return Cl(e)}function _e(e){return e}function Bt(e){return e}function Rn(e){return Ea(e)}function Ml(e){return Ta(e)}function Ti(e,t){let r=N(e,t);return Ml(r)}var Sr=class extends d{constructor(t){super(),this.all=t}};function Ca(e){return new Sr(a([t=>e(t.dispatch,t.emit,t.select,t.root)]))}function Jn(e){return Ca((t,n,r,i)=>e(t))}function B(){return new Sr(a([]))}function Kn(e){return new Sr(ye(e,a([]),(t,n)=>{let r=n.all;return re(t,r)}))}var hn=class extends d{constructor(t){super(),this.content=t}},Z=class extends d{constructor(t,n,r,i,s,l,o){super(),this.key=t,this.namespace=n,this.tag=r,this.attrs=i,this.children=s,this.self_closing=l,this.void=o}},zr=class extends d{constructor(t){super(),this.subtree=t}},$n=class extends d{constructor(t,n,r){super(),this[0]=t,this[1]=n,this.as_property=r}},Er=class extends d{constructor(t,n){super(),this[0]=t,this[1]=n}};function hp(e){if(e instanceof $n)return new k(void 0);{let t=e[0],n=e[1],r=pi(t,2);return new x([r,n])}}function $p(e,t,n){return tl(e,t,(r,i,s)=>{let l=n+"-"+G(s);return Pa(i,r,l)})}function Pa(e,t,n){for(;;){let r=e,i=t,s=n;if(r instanceof hn)return i;if(r instanceof zr){let l=r.subtree;e=l(),t=i,n=s}else{let l=r.attrs,o=r.children,u=ye(l,i,(c,p)=>{let f=hp(p);if(f.isOk()){let $=f[0][0],g=f[0][1];return Ee(c,s+"-"+$,g)}else return c});return $p(o,u,s)}}}function Na(e){return Pa(e,D(),"0")}function ee(e,t){return new $n(e,t,!1)}function mp(e,t){return new $n(e,t,!0)}function Ia(e,t){return new Er("on"+e,t)}function h(e){return ee("class",e)}function mn(e){return ee("class",(()=>{let n=tn(e,r=>r[1]?new x(r[0]):new k(void 0));return Te(n," ")})())}function Ct(e){return ee("id",e)}function Vn(e){return ee("value",e)}function qi(e){return ee("placeholder",e)}function Il(e){return mp("disabled",e)}function Pt(e){return ee("href",e)}function Da(e){return ee("src",e)}function Fa(e){return ee("alt",e)}function I(e,t,n){return e==="area"?new Z("","",e,t,a([]),!1,!0):e==="base"?new Z("","",e,t,a([]),!1,!0):e==="br"?new Z("","",e,t,a([]),!1,!0):e==="col"?new Z("","",e,t,a([]),!1,!0):e==="embed"?new Z("","",e,t,a([]),!1,!0):e==="hr"?new Z("","",e,t,a([]),!1,!0):e==="img"?new Z("","",e,t,a([]),!1,!0):e==="input"?new Z("","",e,t,a([]),!1,!0):e==="link"?new Z("","",e,t,a([]),!1,!0):e==="meta"?new Z("","",e,t,a([]),!1,!0):e==="param"?new Z("","",e,t,a([]),!1,!0):e==="source"?new Z("","",e,t,a([]),!1,!0):e==="track"?new Z("","",e,t,a([]),!1,!0):e==="wbr"?new Z("","",e,t,a([]),!1,!0):new Z("","",e,t,n,!1,!1)}function Ci(e,t,n,r){return new Z("",e,t,n,r,!1,!1)}function Tr(e){return new hn(e)}function wt(){return new hn("")}var Dl=class extends d{constructor(t){super(),this.dict=t}};function Ua(){return new Dl(D())}var Ni=class extends d{constructor(t){super(),this[0]=t}},Mi=class extends d{constructor(t,n){super(),this[0]=t,this[1]=n}},Ii=class extends d{constructor(t,n){super(),this[0]=t,this[1]=n}};function Wa(e){return E(e.created,D())&&E(e.removed,Ua())&&E(e.updated,D())}var Di=class extends d{constructor(t){super(),this[0]=t}},Fi=class extends d{constructor(t,n){super(),this[0]=t,this[1]=n}},qr=class extends d{constructor(t){super(),this[0]=t}},et=class extends d{constructor(t){super(),this[0]=t}},Br=class extends d{constructor(t,n){super(),this[0]=t,this[1]=n}},Ui=class extends d{constructor(t,n){super(),this[0]=t,this[1]=n}};var Cr=class extends d{},Wi=class extends d{constructor(t,n){super(),this[0]=t,this[1]=n}},Hi=class extends d{constructor(t){super(),this[0]=t}},Gi=class extends d{constructor(t){super(),this[0]=t}};globalThis.customElements&&!globalThis.customElements.get("lustre-fragment")&&globalThis.customElements.define("lustre-fragment",class extends HTMLElement{constructor(){super()}});function Fl(e,t,n){let r,i=[{prev:e,next:t,parent:e.parentNode}];for(;i.length;){let{prev:s,next:l,parent:o}=i.pop();for(;l.subtree!==void 0;)l=l.subtree();if(l.content!==void 0)if(s)if(s.nodeType===Node.TEXT_NODE)s.textContent!==l.content&&(s.textContent=l.content),r??=s;else{let u=document.createTextNode(l.content);o.replaceChild(u,s),r??=u}else{let u=document.createTextNode(l.content);o.appendChild(u),r??=u}else if(l.tag!==void 0){let u=yp({prev:s,next:l,dispatch:n,stack:i});s?s!==u&&o.replaceChild(u,s):o.appendChild(u),r??=u}}return r}function yp({prev:e,next:t,dispatch:n,stack:r}){let i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),l=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag),o;if(Pr.has(l))o=Pr.get(l);else{let O=new Map;Pr.set(l,O),o=O}let u=s?new Set(o.keys()):null,c=s?new Set(Array.from(e.attributes,O=>O.name)):null,p=null,f=null,$=null;if(s&&t.tag==="textarea"){let O=t.children[Symbol.iterator]().next().value?.content;O!==void 0&&(l.value=O)}let g=[];for(let O of t.attrs){let A=O[0],S=O[1];if(O.as_property)l[A]!==S&&(l[A]=S),s&&c.delete(A);else if(A.startsWith("on")){let R=A.slice(2),_t=n(S,R==="input");o.has(R)||l.addEventListener(R,Nr),o.set(R,_t),s&&u.delete(R)}else if(A.startsWith("data-lustre-on-")){let R=A.slice(15),_t=n(kp);o.has(R)||l.addEventListener(R,Nr),o.set(R,_t),l.setAttribute(A,S),s&&(u.delete(R),c.delete(A))}else A.startsWith("delegate:data-")||A.startsWith("delegate:aria-")?(l.setAttribute(A,S),g.push([A.slice(10),S])):A==="class"?p=p===null?S:p+" "+S:A==="style"?f=f===null?S:f+S:A==="dangerous-unescaped-html"?$=S:(l.getAttribute(A)!==S&&l.setAttribute(A,S),(A==="value"||A==="selected")&&(l[A]=S),s&&c.delete(A))}if(p!==null&&(l.setAttribute("class",p),s&&c.delete("class")),f!==null&&(l.setAttribute("style",f),s&&c.delete("style")),s){for(let O of c)l.removeAttribute(O);for(let O of u)o.delete(O),l.removeEventListener(O,Nr)}if(t.tag==="slot"&&window.queueMicrotask(()=>{for(let O of l.assignedElements())for(let[A,S]of g)O.hasAttribute(A)||O.setAttribute(A,S)}),t.key!==void 0&&t.key!=="")l.setAttribute("data-lustre-key",t.key);else if($!==null)return l.innerHTML=$,l;let b=l.firstChild,j=null,L=null,q=null,C=Ri(t).next().value;if(s&&C!==void 0&&C.key!==void 0&&C.key!==""){j=new Set,L=Ha(e),q=Ha(t);for(let O of Ri(t))b=Lp(b,O,l,r,q,L,j)}else for(let O of Ri(t))r.unshift({prev:b,next:O,parent:l}),b=b?.nextSibling;for(;b;){let O=b.nextSibling;l.removeChild(b),b=O}return l}var Pr=new WeakMap;function Nr(e){let t=e.currentTarget;if(!Pr.has(t)){t.removeEventListener(e.type,Nr);return}let n=Pr.get(t);if(!n.has(e.type)){t.removeEventListener(e.type,Nr);return}n.get(e.type)(e)}function kp(e){let t=e.currentTarget,n=t.getAttribute(`data-lustre-on-${e.type}`),r=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:n,data:i.reduce((s,l)=>{let o=l.split(".");for(let u=0,c=s,p=e;u<o.length;u++)u===o.length-1?c[o[u]]=p[o[u]]:(c[o[u]]??={},p=p[o[u]],c=c[o[u]]);return s},{data:r})}}function Ha(e){let t=new Map;if(e)for(let n of Ri(e)){let r=n?.key||n?.getAttribute?.("data-lustre-key");r&&t.set(r,n)}return t}function Lp(e,t,n,r,i,s,l){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){let u=e.nextSibling;n.removeChild(e),e=u}if(s.size===0)return r.unshift({prev:e,next:t,parent:n}),e=e?.nextSibling,e;if(l.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),r.unshift({prev:null,next:t,parent:n}),e;l.add(t.key);let o=s.get(t.key);if(!o&&!e)return r.unshift({prev:null,next:t,parent:n}),e;if(!o&&e!==null){let u=document.createTextNode("");return n.insertBefore(u,e),r.unshift({prev:u,next:t,parent:n}),e}return!o||o===e?(r.unshift({prev:e,next:t,parent:n}),e=e?.nextSibling,e):(n.insertBefore(o,e),r.unshift({prev:o,next:t,parent:n}),e)}function*Ri(e){for(let t of e.children)yield*Ga(t)}function*Ga(e){e.subtree!==void 0?yield*Ga(e.subtree()):yield e}var Ul=class e{static start({init:t,update:n,view:r},i,s){if(!Yn())return new k(new Mr);let l=i instanceof HTMLElement?i:document.querySelector(i);if(!l)return new k(new Ji(i));let o=new e(l,t(s),n,r);return new x(u=>o.send(u))}constructor(t,[n,r],i,s){this.root=t,this.#e=n,this.#s=i,this.#n=s,this.#t=window.setTimeout(()=>this.#r(r.all.toArray(),!0),0)}root;send(t){if(t instanceof qr){if(t[0]instanceof Gi){this.#t=window.clearTimeout(this.#t),this.#i=[],this.#e=t[0][0];let n=this.#n(this.#e),r=(s,l=!1)=>o=>{let u=s(o);u instanceof x&&this.send(new et(u[0],l))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));Fl(i,n,r)}}else if(t instanceof et){let n=t[0],r=t[1]??!1;this.#i.push(n),r?(this.#t=window.clearTimeout(this.#t),this.#r()):this.#t||(this.#t=window.setTimeout(()=>this.#r()))}else if(t instanceof Br){let n=t[0],r=t[1];this.root.dispatchEvent(new CustomEvent(n,{detail:r,bubbles:!0,composed:!0}))}else if(t instanceof Cr)for(this.#t=window.clearTimeout(this.#t),this.#e=null,this.#s=null,this.#n=null,this.#i=null;this.root.firstChild;)this.root.firstChild.remove()}#e;#s;#n;#i=[];#t;#r(t=[]){this.#t=void 0,this.#l(t);let n=this.#n(this.#e),r=(s,l=!1)=>o=>{let u=s(o);u instanceof x&&this.send(new et(u[0],l))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));Fl(i,n,r)}#l(t=[]){for(;this.#i.length>0;){let n=this.#i.shift(),[r,i]=this.#s(this.#e,n);t=t.concat(i.all.toArray()),this.#e=r}for(;t.length>0;){let n=t.shift(),r=o=>this.send(new et(o)),i=(o,u)=>this.root.dispatchEvent(new CustomEvent(o,{detail:u,bubbles:!0,composed:!0})),s=()=>{},l=this.root;n({dispatch:r,emit:i,select:s,root:l})}this.#i.length>0&&this.#l(t)}},Ra=Ul.start;var Wl=class e{static start({init:t,update:n,view:r,on_attribute_change:i},s){let l=new e(t(s),n,r,i);return new x(o=>l.send(o))}constructor([t,n],r,i,s){this.#e=t,this.#s=r,this.#i=i,this.#t=i(t),this.#a=s,this.#r=new Map,this.#l=Na(this.#t),this.#o(n.all.toArray())}send(t){if(t instanceof Di){for(let n of t[0]){let r=this.#a.get(n[0]);if(!r)continue;let i=r(n[1]);i instanceof k||this.#n.push(i)}this.#o()}else if(t instanceof Fi)this.#n=this.#n.concat(t[0].toArray()),this.#o(t[1].all.toArray());else if(!(t instanceof qr))if(t instanceof et)this.#n.push(t[0]),this.#o();else if(t instanceof Br){let n=new Mi(t[0],t[1]);for(let[r,i]of this.#r)i(n)}else if(t instanceof Ui){let n=this.#l.get(t[0]);if(!n)return;let r=n(t[1]);if(r instanceof k)return;this.#n.push(r[0]),this.#o()}else if(t instanceof Wi){let n=Qs(this.#a),r=new Ii(n,this.#t);this.#r=this.#r.set(t[0],t[1]),t[1](r)}else t instanceof Hi&&(this.#r=this.#r.delete(t[0]))}#e;#s;#n;#i;#t;#r;#l;#a;#o(t=[]){this.#u(t);let n=this.#i(this.#e),r=elements(this.#t,n);if(!Wa(r)){let i=new Ni(r);for(let[s,l]of this.#r)l(i)}this.#t=n,this.#l=r.handlers}#u(t=[]){for(;this.#n.length>0;){let n=this.#n.shift(),[r,i]=this.#s(this.#e,n);t=t.concat(i.all.toArray()),this.#e=r}for(;t.length>0;)t.shift()({dispatch:o=>this.send(new et(o)),emit:(o,u)=>this.root.dispatchEvent(new CustomEvent(o,{detail:u,bubbles:!0,composed:!0})),select:()=>{},root:null});this.#n.length>0&&this.#u(t)}},vp=Wl.start,Yn=()=>globalThis.window&&window.document;var Hl=class extends d{constructor(t,n,r,i){super(),this.init=t,this.update=n,this.view=r,this.on_attribute_change=i}};var Ji=class extends d{constructor(t){super(),this.selector=t}},Mr=class extends d{};function Ja(e,t,n){return new Hl(e,t,n,new m)}function Ka(e,t,n){return He(!Yn(),new k(new Mr),()=>Ra(e,t,n))}function y(e){return Tr(e)}function Gl(e,t){return I("article",e,t)}function Ki(e,t){return I("h1",e,t)}function Ir(e,t){return I("h2",e,t)}function Zn(e,t){return I("h3",e,t)}function he(e,t){return I("h4",e,t)}function Ya(e,t){return I("h5",e,t)}function Za(e,t){return I("h6",e,t)}function Vi(e,t){return I("main",e,t)}function Qa(e,t){return I("nav",e,t)}function Rl(e,t){return I("section",e,t)}function v(e,t){return I("div",e,t)}function Xa(e){return I("hr",e,a([]))}function eu(e,t){return I("li",e,t)}function tt(e,t){return I("p",e,t)}function $e(e,t){return I("pre",e,t)}function Jl(e,t){return I("ul",e,t)}function Nt(e,t){return I("a",e,t)}function tu(e){return I("br",e,a([]))}function pe(e,t){return I("code",e,t)}function nu(e,t){return I("em",e,t)}function wn(e,t){return I("span",e,t)}function Dr(e,t){return I("strong",e,t)}function ru(e){return I("img",e,a([]))}function iu(e,t){return Ci("http://www.w3.org/2000/svg","svg",e,t)}function Ae(e,t){return I("button",e,t)}function Kl(e){return I("input",e,a([]))}function Fr(e,t){return I("label",e,t)}function Yi(e,t){return I("textarea",e,a([Tr(t)]))}var Ap="http://www.w3.org/2000/svg";function lu(e){return Ci(Ap,"path",e,a([]))}function Vl(e,t){return Ia(e,t)}function ae(e){return Vl("mousedown",t=>new x(e))}function ou(e){return Vl("mouseenter",t=>new x(e))}function Op(e){let t=e;return fl("target",fl("value",Uo))(t)}function Qn(e){return Vl("input",t=>{let n=Op(t);return St(n,e)})}var zp={handle_external_links:!1,handle_internal_links:!0},au=window?.location?.href,Zl=()=>au?new x(Yl(new URL(au))):new k(void 0),Ql=(e,t=zp)=>{document.addEventListener("click",n=>{let r=cu(n.target);if(r)try{let i=new URL(r.href),s=Yl(i),l=i.host!==window.location.host;return!t.handle_external_links&&l||!t.handle_internal_links&&!l?void 0:(n.preventDefault(),l||(window.history.pushState({},"",r.href),window.requestAnimationFrame(()=>{i.hash&&document.getElementById(i.hash.slice(1))?.scrollIntoView()})),e(s))}catch{return}}),window.addEventListener("popstate",n=>{n.preventDefault();let r=new URL(window.location.href),i=Yl(r);window.requestAnimationFrame(()=>{r.hash&&document.getElementById(r.hash.slice(1))?.scrollIntoView()}),e(i)}),window.addEventListener("modem-push",({detail:n})=>{e(n)}),window.addEventListener("modem-replace",({detail:n})=>{e(n)})},uu=e=>{window.history.pushState({},"",ce(e)),window.requestAnimationFrame(()=>{e.fragment[0]&&document.getElementById(e.fragment[0])?.scrollIntoView()}),window.dispatchEvent(new CustomEvent("modem-push",{detail:e}))};var cu=e=>!e||e.tagName==="BODY"?null:e.tagName==="A"?e:cu(e.parentElement),Yl=e=>new P(e.protocol?new _(e.protocol.slice(0,-1)):new m,new m,e.hostname?new _(e.hostname):new m,e.port?new _(Number(e.port)):new m,e.pathname,e.search?new _(e.search.slice(1)):new m,e.hash?new _(e.hash.slice(1)):new m);function fu(e){return Jn(t=>He(!Yn(),void 0,()=>Ql(n=>{let i=e(n);return t(i)})))}var Ep=new P(new m,new m,new m,new m,"",new m,new m);function gn(e,t,n){return Jn(r=>He(!Yn(),void 0,()=>uu((()=>{let i=Ep;return new P(i.scheme,i.userinfo,i.host,i.port,e,t,n)})())))}var Fe=class extends d{},Mt=class extends d{},Xl=class extends d{},Ur=class extends d{},Wr=class extends d{},eo=class extends d{},to=class extends d{},no=class extends d{},ro=class extends d{};var Y=class extends d{},me=class extends d{};function pu(e){return e instanceof to?"CONNECT":e instanceof Wr?"DELETE":e instanceof Fe?"GET":e instanceof Xl?"HEAD":e instanceof no?"OPTIONS":e instanceof ro?"PATCH":e instanceof Mt?"POST":e instanceof Ur?"PUT":e instanceof eo?"TRACE":e[0]}function du(e){return e instanceof Y?"http":"https"}var nt=class extends d{constructor(t,n,r,i,s,l,o,u){super(),this.method=t,this.headers=n,this.body=r,this.scheme=i,this.host=s,this.port=l,this.path=o,this.query=u}};function hu(e){return new P(new _(du(e.scheme)),new m,new _(e.host),e.port,e.path,e.query,new m)}function Zi(e,t,n){let r=nl(e.headers,ke(t),n),i=e;return new nt(i.method,r,i.body,i.scheme,i.host,i.port,i.path,i.query)}function Xn(e,t){let n=e.method,r=e.headers,i=e.scheme,s=e.host,l=e.port,o=e.path,u=e.query;return new nt(n,r,t,i,s,l,o,u)}function Ue(e,t){let n=e;return new nt(t,n.headers,n.body,n.scheme,n.host,n.port,n.path,n.query)}function rt(){return new nt(new Fe,a([]),"",new me,"localhost",new m,"",new m)}function it(e,t){let n=e;return new nt(n.method,n.headers,n.body,t,n.host,n.port,n.path,n.query)}function st(e,t){let n=e;return new nt(n.method,n.headers,n.body,n.scheme,t,n.port,n.path,n.query)}function lt(e,t){let n=e;return new nt(n.method,n.headers,n.body,n.scheme,n.host,new _(t),n.path,n.query)}function ot(e,t){let n=e;return new nt(n.method,n.headers,n.body,n.scheme,n.host,n.port,t,n.query)}var It=class extends d{constructor(t,n,r,i,s,l){super(),this.saving=t,this.slug=n,this.title=r,this.subtitle=i,this.leading=s,this.content=l}};function $u(e,t,n,r,i){return new It(!1,e,t,n,r,i)}function Qi(e){return e.saving}function Xi(e){return e.slug}function es(e){return e.title}function ts(e){return e.subtitle}function Gr(e){return e.leading}function Rr(e){return e.content}function mu(e,t){{let n=e.saving,r=e.title,i=e.subtitle,s=e.leading,l=e.content;return new It(n,t,r,i,s,l)}}function wu(e,t){{let n=e.saving,r=e.slug,i=e.subtitle,s=e.leading,l=e.content;return new It(n,r,t,i,s,l)}}function gu(e,t){{let n=e.saving,r=e.slug,i=e.title,s=e.leading,l=e.content;return new It(n,r,i,t,s,l)}}function xu(e,t){{let n=e.saving,r=e.slug,i=e.title,s=e.subtitle,l=e.content;return new It(n,r,i,s,t,l)}}function bu(e,t){{let n=e.saving,r=e.slug,i=e.title,s=e.subtitle,l=e.leading;return new It(n,r,i,s,l,t)}}var gt=class extends d{constructor(t,n,r){super(),this.status=t,this.headers=n,this.body=r}};var er=class e{constructor(t){this.promise=t}static wrap(t){return t instanceof Promise?new e(t):t}static unwrap(t){return t instanceof e?t.promise:t}};function ns(e){return Promise.resolve(er.wrap(e))}function ku(e,t){return e.then(n=>t(er.unwrap(n)))}function rs(e,t){return e.then(n=>er.wrap(t(er.unwrap(n))))}function so(e,t){return e.catch(n=>t(n))}function Lu(e,t){return rs(e,r=>(t(r),r))}function is(e,t){return ku(e,r=>{if(r.isOk()){let i=r[0];return t(i)}else{let i=r[0];return ns(new k(i))}})}async function Au(e){try{return new x(await fetch(e))}catch(t){return new k(new ss(t.toString()))}}function ju(e){return new gt(e.status,U.fromArray([...e.headers]),e)}function Np(e){let t=ce(hu(e)),n=pu(e.method).toUpperCase(),r={headers:Mp(e.headers),method:n};return[t,r]}function Ou(e){let[t,n]=Np(e);return n.method!=="GET"&&n.method!=="HEAD"&&(n.body=e.body),new globalThis.Request(t,n)}function Mp(e){let t=new globalThis.Headers;for(let[n,r]of e)t.append(n.toLowerCase(),r);return t}async function lo(e){let t;try{t=await e.body.text()}catch{return new k(new ls)}return new x(e.withFields({body:t}))}var ss=class extends d{constructor(t){super(),this[0]=t}},ls=class extends d{};function Su(e){let n=Ou(e),r=Au(n);return is(r,i=>ns(new x(ju(i))))}var os=class extends d{constructor(t){super(),this[0]=t}},Jr=class extends d{constructor(t){super(),this[0]=t}},Kr=class extends d{constructor(t){super(),this[0]=t}},as=class extends d{},Vr=class extends d{},Yr=class extends d{constructor(t,n){super(),this[0]=t,this[1]=n}},Zr=class extends d{},us=class extends d{constructor(t){super(),this.run=t}};function Dp(e,t,n){let r=Su(e),i=is(r,lo),s=rs(i,o=>{if(o.isOk()){let u=o[0];return t.run(new x(u))}else return t.run(new k(new as))}),l=so(s,o=>t.run(new k(new as)));Lu(l,n)}function at(e,t){return Jn(n=>Dp(e,t,n))}function zu(e){if(e instanceof gt&&200<=e.status&&e.status<=299){let t=e.status,n=e.body;return new x(n)}else{if(e instanceof gt&&e.status===401)return new k(new Zr);if(e instanceof gt&&e.status===404)return new k(new Vr);if(e instanceof gt&&e.status===500){let t=e.body;return new k(new Jr(t))}else{let t=e.status,n=e.body;return new k(new Yr(t,n))}}}function cs(e){return new us(t=>{let r=qe(t,zu);return e(r)})}function Dt(e,t){return new us(n=>{let i=qe(n,zu),s=qe(i,l=>{let o=Ba(l,e);if(o.isOk()){let u=o[0];return new x(u)}else{let u=o[0];return new k(new Kr(u))}});return t(s)})}var te=class extends d{},se=class extends d{},M=class extends d{constructor(t){super(),this[0]=t}},xn=class extends d{constructor(t){super(),this[0]=t}},We=class extends d{constructor(t){super(),this[0]=t}};function je(e,t){if(e instanceof M){let n=e[0];return new M(t(n))}else if(e instanceof xn){let n=e[0];return new xn(t(n))}else return e}var xe=class extends d{},tr=class extends d{constructor(t){super(),this.session=t}},fs=class extends d{constructor(t,n,r){super(),this.subject=t,this.expiry=n,this.permissions=r}};function Fp(e){return e instanceof tr&&e.session instanceof fs?e.session.permissions:a([])}function ps(e,t){return $r(Fp(e),n=>$r(t,r=>r===n))}function Eu(e,t){let n,r=t.scheme;r instanceof _&&r[0]==="http"?n=new Y:r instanceof _&&r[0]==="https"?n=new me:n=new Y;let i=n,s,l=t.host;l instanceof _?s=l[0]:s="localhost";let o=s,u,c=t.port;c instanceof _?u=c[0]:u=8080;let p=u,f=rt(),$=Ue(f,new Fe),g=it($,i),b=st(g,o),j=ot(b,"/api/auth/logout"),L=lt(j,p),q=Zi(L,"credentials","include");return at(q,cs(e))}function Up(){return fe("subject",ve,e=>fe("expiresAt",qt,t=>fe("permissions",Hn(ve),n=>Tt(new fs(e,t,n)))))}function Tu(){let e=Up();return Sa(e,t=>Tt(new tr(t)))}function qu(e,t,n,r){let i,s=r.scheme;s instanceof _&&s[0]==="http"?i=new Y:s instanceof _&&s[0]==="https"?i=new me:i=new Y;let l=i,o,u=r.host;u instanceof _?o=u[0]:o="localhost";let c=o,p,f=r.port;f instanceof _?p=f[0]:p=8080;let $=p,g,b=Rn(a([["username",_e(t)],["password",_e(n)]]));g=pn(b);let j=g,L=rt(),q=Ue(L,new Mt),C=it(q,l),O=st(C,c),A=ot(O,"/api/auth"),S=lt(A,$),R=Xn(S,j);return at(R,Dt(Tu(),e))}function uo(e,t){let n,r=t.scheme;r instanceof _&&r[0]==="http"?n=new Y:r instanceof _&&r[0]==="https"?n=new me:n=new Y;let i=n,s,l=t.host;l instanceof _?s=l[0]:s="localhost";let o=s,u,c=t.port;c instanceof _?u=c[0]:u=8080;let p=u,f=rt(),$=Ue(f,new Fe),g=it($,i),b=st(g,o),j=ot(b,"/api/auth"),L=lt(j,p),q=Zi(L,"credentials","include");return at(q,Dt(Tu(),e))}var F=class extends d{constructor(t,n,r,i,s,l,o,u,c,p,f){super(),this.id=t,this.slug=n,this.revision=r,this.author=i,this.tags=s,this.published_at=l,this.title=o,this.subtitle=u,this.leading=c,this.content=p,this.draft=f}};function nr(e){if(e instanceof F&&e.content instanceof M){let t=e.slug,n=e.title,r=e.subtitle,i=e.leading,s=e.content[0],l=$u(t,n,r,i,s);return new _(l)}else return new m}function Qr(e,t){return ps(t,a(["post_edit_any"]))}function Cu(e,t){return ps(t,a(["post_edit_any"]))}function Pu(e,t){return ps(t,a(["post_edit_any"]))}function Nu(e,t,n){let r,i=n.scheme;i instanceof _&&i[0]==="http"?r=new Y:i instanceof _&&i[0]==="https"?r=new me:r=new Y;let s=r,l,o=n.host;o instanceof _?l=o[0]:l="localhost";let u=l,c,p=n.port;p instanceof _?c=p[0]:c=8080;let f=c,$,g=rt(),b=Ue(g,new Wr),j=it(b,s),L=st(j,u),q=ot(L,"/api/articles/"+t);return $=lt(q,f),at($,cs(e))}function Xr(){return Bl("version",0,qt,e=>fe("id",ve,t=>fe("author",ve,n=>fe("tags",ji(Hn(ve),a([Tt(a([]))])),r=>fe("published_at",ql(qt,s=>s===0?new m:new _(ya(s))),i=>fe("slug",ve,s=>fe("revision",qt,l=>fe("title",ve,o=>fe("leading",ve,u=>fe("subtitle",ve,c=>Bl("content","",ve,p=>{let f;p===""?f=new te:f=new M(p);let $=f;return Tt(new F(t,s,l,n,r,i,o,c,u,$,new m))})))))))))))}function Ft(e,t,n){let r,i=n.scheme;i instanceof _&&i[0]==="http"?r=new Y:i instanceof _&&i[0]==="https"?r=new me:r=new Y;let s=r,l,o=n.host;o instanceof _?l=o[0]:l="localhost";let u=l,c,p=n.port;p instanceof _?c=p[0]:c=8080;let f=c,$,g=rt(),b=Ue(g,new Fe),j=it(b,s),L=st(j,u),q=ot(L,"/api/articles/"+t);return $=lt(q,f),at($,Dt(Xr(),e))}function Wp(){return fe("articles",ji(Hn(Xr()),a([])),e=>Tt(e))}function ds(e,t){let n,r=t.scheme;r instanceof _&&r[0]==="http"?n=new Y:r instanceof _&&r[0]==="https"?n=new me:n=new Y;let i=n,s,l=t.host;l instanceof _?s=l[0]:s="localhost";let o=s,u,c=t.port;c instanceof _?u=c[0]:u=8080;let p=u,f,$=rt(),g=Ue($,new Fe),b=it(g,i),j=st(b,o),L=ot(j,"/api/articles");return f=lt(L,p),at(f,Dt(Wp(),e))}function co(e){{let t=e.id,n=e.slug,r=e.revision,i=e.author,s=e.tags,l=e.published_at,o=e.title,u=e.subtitle,c=e.leading,p=e.content,f;if(p instanceof M){let j=p[0];f=_e(j)}else f=_e("");let $=f,g;if(l instanceof _){let j=l[0];g=Bt(ba(j))}else g=Bt(0);let b=g;return Rn(a([["struct_version",Bt(1)],["id",_e(t)],["revision",Bt(r)],["slug",_e(n)],["title",_e(o)],["leading",_e(c)],["subtitle",_e(u)],["author",_e(i)],["published_at",b],["tags",Ti(s,_e)],["content",$]]))}}function _s(e,t,n){let r,i=n.scheme;i instanceof _&&i[0]==="http"?r=new Y:i instanceof _&&i[0]==="https"?r=new me:r=new Y;let s=r,l,o=n.host;o instanceof _?l=o[0]:l="localhost";let u=l,c,p=n.port;p instanceof _?c=p[0]:c=8080;let f=c,$,g=rt(),b=Ue(g,new Ur),j=it(b,s),L=st(j,u),q=ot(L,"/api/articles/"+t.id),C=lt(q,f);return $=Xn(C,(()=>{let A=co(t);return pn(A)})()),at($,Dt(Xr(),e))}function Mu(e,t,n){let r,i=n.scheme;i instanceof _&&i[0]==="http"?r=new Y:i instanceof _&&i[0]==="https"?r=new me:r=new Y;let s=r,l,o=n.host;o instanceof _?l=o[0]:l="localhost";let u=l,c,p=n.port;p instanceof _?c=p[0]:c=8080;let f=c,$,g=rt(),b=Ue(g,new Mt),j=it(b,s),L=st(j,u),q=ot(L,"/api/articles"),C=lt(q,f);return $=Xn(C,(()=>{let A=co(t);return pn(A)})()),at($,Dt(Xr(),e))}function rr(e,t){if(e instanceof F&&e.draft instanceof _){let n=e.draft[0],r=e;return new F(r.id,r.slug,r.revision,r.author,r.tags,r.published_at,r.title,r.subtitle,r.leading,r.content,new _(t(n)))}else return Hp("draft_update: not an article with draft","src\\article\\article.gleam",383),e}function Hp(e,t,n){let r="\x1B[90m",i="\x1B[39m",s=`${t}:${n}`,l=xt(e);if(globalThis.process?.stderr?.write){let o=`${r}${s}${i}
${l}
`;process.stderr.write(o)}else if(globalThis.Deno){let o=`${r}${s}${i}
${l}
`;globalThis.Deno.stderr.writeSync(new TextEncoder().encode(o))}else{let o=`${s}
${l}`;globalThis.console.log(o)}return e}function Gp(e){let t='"';for(let n=0;n<e.length;n++){let r=e[n];r==`
`?t+="\\n":r=="\r"?t+="\\r":r=="	"?t+="\\t":r=="\f"?t+="\\f":r=="\\"?t+="\\\\":r=='"'?t+='\\"':r<" "||r>"~"&&r<"\xA0"?t+="\\u{"+r.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=r}return t+='"',t}function Rp(e){let t="dict.from_list([",n=!0,r=[];return e.forEach((i,s)=>{r.push([s,i])}),r.sort(),r.forEach(([i,s])=>{n||(t=t+", "),t=t+"#("+xt(i)+", "+xt(s)+")",n=!1}),t+"])"}function Jp(e){let t=globalThis.Object.keys(e).map(n=>{let r=xt(e[n]);return isNaN(parseInt(n))?`${n}: ${r}`:r}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function Kp(e){let t=Object.getPrototypeOf(e)?.constructor?.name||"Object",n=[];for(let s of Object.keys(e))n.push(`${xt(s)}: ${xt(e[s])}`);let r=n.length?" "+n.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${r}})`}function xt(e){let t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return Gp(e);if(t==="bigint"||t==="number")return e.toString();if(globalThis.Array.isArray(e))return`#(${e.map(xt).join(", ")})`;if(e instanceof U)return`[${e.toArray().map(xt).join(", ")}]`;if(e instanceof At)return`//utfcodepoint(${String.fromCodePoint(e.value)})`;if(e instanceof be)return Vp(e);if(e instanceof d)return Jp(e);if(Yp(e))return Rp(e);if(e instanceof Set)return`//js(Set(${[...e].map(xt).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){let n=[];for(let r of Array(e.length).keys())n.push(String.fromCharCode(r+97));return`//fn(${n.join(", ")}) { ... }`}return Kp(e)}function Vp(e){let t=e.bitOffset+8*Math.trunc(e.bitSize/8),n=Zt(e,e.bitOffset,t),r=e.bitSize%8;if(r>0){let i=ui(e,t,e.bitSize,!1,!1),s=Array.from(n.rawBuffer),l=`${i}:size(${r})`;return s.length===0?`<<${l}>>`:`<<${Array.from(n.rawBuffer).join(", ")}, ${l}>>`}else return`<<${Array.from(n.rawBuffer).join(", ")}>>`}function Yp(e){try{return e instanceof ge}catch{return!1}}var bn=class extends d{},bt=class extends d{constructor(t,n){super(),this.article=t,this.session=n}},ut=class extends d{constructor(t){super(),this.article=t}},yn=class extends d{constructor(t,n){super(),this.articles=t,this.session=n}},Ut=class extends d{},ue=class extends d{constructor(t){super(),this.error=t}},ir=class extends d{},hs=class extends d{constructor(t){super(),this.requested_uri=t}},kn=class extends d{constructor(t){super(),this.content=t}},Ln=class extends d{constructor(t,n){super(),this.slug=t,this.available_slugs=n}},vn=class extends d{constructor(t){super(),this.id=t}},Wt=class extends d{constructor(t,n){super(),this.error=t,this.context=n}},An=class extends d{constructor(t){super(),this.attempted_action=t}},sr=class extends d{constructor(t){super(),this.msg=t}};function $s(e){if(e instanceof bn){let t=ie("/");if(!t.isOk())throw W("let_assert","pages/pages",41,"to_uri","Pattern match failed, no pattern matched the value.",{value:t});return t[0]}else if(e instanceof yn){let t=ie("/articles");if(!t.isOk())throw W("let_assert","pages/pages",45,"to_uri","Pattern match failed, no pattern matched the value.",{value:t});return t[0]}else if(e instanceof Ut){let t=ie("/articles");if(!t.isOk())throw W("let_assert","pages/pages",49,"to_uri","Pattern match failed, no pattern matched the value.",{value:t});return t[0]}else if(e instanceof bt){let t=e.article,n=ie("/article/"+t.slug);if(!n.isOk())throw W("let_assert","pages/pages",53,"to_uri","Pattern match failed, no pattern matched the value.",{value:n});return n[0]}else if(e instanceof ut){let t=e.article,n=ie("/article/"+t.id+"/edit");if(!n.isOk())throw W("let_assert","pages/pages",57,"to_uri","Pattern match failed, no pattern matched the value.",{value:n});return n[0]}else if(e instanceof ue){let t=e.error;if(t instanceof Ln){let n=t.slug,r=ie("/article/"+n);if(!r.isOk())throw W("let_assert","pages/pages",63,"to_uri","Pattern match failed, no pattern matched the value.",{value:r});return r[0]}else if(t instanceof vn){let n=t.id,r=ie("/article/"+n+"/edit");if(!r.isOk())throw W("let_assert","pages/pages",67,"to_uri","Pattern match failed, no pattern matched the value.",{value:r});return r[0]}else if(t instanceof Wt){let n=ie("/");if(!n.isOk())throw W("let_assert","pages/pages",71,"to_uri","Pattern match failed, no pattern matched the value.",{value:n});return n[0]}else if(t instanceof An){let n=ie("/");if(!n.isOk())throw W("let_assert","pages/pages",75,"to_uri","Pattern match failed, no pattern matched the value.",{value:n});return n[0]}else{let n=ie("/");if(!n.isOk())throw W("let_assert","pages/pages",79,"to_uri","Pattern match failed, no pattern matched the value.",{value:n});return n[0]}}else if(e instanceof ir){let t=ie("/about");if(!t.isOk())throw W("let_assert","pages/pages",85,"to_uri","Pattern match failed, no pattern matched the value.",{value:t});return t[0]}else if(e instanceof kn){let t=e.content,n=ie("/djot-demo/"+t);if(!n.isOk())throw W("let_assert","pages/pages",89,"to_uri","Pattern match failed, no pattern matched the value.",{value:n});return n[0]}else return e.requested_uri}function po(e){return N(e,t=>t.slug)}var Ht=class extends d{},ct=class extends d{},yt=class extends d{constructor(t){super(),this.slug=t}},ft=class extends d{constructor(t){super(),this.id=t}},kt=class extends d{},Lt=class extends d{},ei=class extends d{constructor(t){super(),this.uri=t}};function _o(e){let t=Wn(e.path);if(t.hasLength(0))return new Ht;if(t.hasLength(1)&&t.head==="")return new Ht;if(t.hasLength(1)&&t.head==="articles")return new ct;if(t.hasLength(2)&&t.head==="article"){let n=t.tail.head;return new yt(n)}else if(t.hasLength(3)&&t.head==="article"&&t.tail.tail.head==="edit"){let n=t.tail.head;return new ft(n)}else return t.hasLength(1)&&t.head==="about"?new kt:t.hasLength(1)&&t.head==="djot-demo"?new Lt:new ei(e)}function lr(e){if(e instanceof Ht)return"/";if(e instanceof kt)return"/about";if(e instanceof ct)return"/articles";if(e instanceof yt)return"/article/"+e.slug;if(e instanceof ft)return"/article/"+e.id+"/edit";if(e instanceof Lt)return"/djot-demo/";{let t=e.uri;return"/404?uri="+ce(t)}}function Gt(e){let t,r=lr(e);t=ie(r);let i=t;if(!i.isOk())throw W("let_assert","routes/routes",45,"to_uri","Pattern match failed, no pattern matched the value.",{value:i});return i[0]}function Qp(e,t){for(;;){let n=e,r=t;if(n.hasLength(0)&&r.hasLength(0))return!0;if(n.hasLength(0))return!1;if(r.hasLength(0))return!1;{let i=n.head,s=n.tail,l=r.head,o=r.tail;if(E(i,l))e=s,t=o;else return!1}}}function Iu(e,t){let n,i=lr(e);n=Wn(i);let s=n,l,u=lr(t);return l=Wn(u),Qp(s,l)}function ed(e){{let t=e.expected,n=e.found,r=e.path;return"expected: "+t+", found: "+n+", path: "+Te(r,"/")}}function Du(e){if(e.hasLength(0))return"no errors";{let t=e.head,n=e.tail;return ed(t)+`
`+Du(n)}}function td(e){{let t=e.expected,n=e.found,r=e.path;return"expected: "+t+", found: "+n+", path: "+Te(r,"/")}}function Fu(e){if(e.hasLength(0))return"";{let t=e.head,n=e.tail;return td(t)+`
`+Fu(n)}}function nd(e){if(e instanceof Gn)return"unexpected end of input";if(e instanceof Xe)return"unexpected byte: "+e[0];if(e instanceof zi)return"unexpected sequence: "+e[0];if(e instanceof Ei){let t=e[0];return`unexpected format
`+Du(t)}else{let t=e[0];return`unable to decode
`+Fu(t)}}function ms(e){if(e instanceof os)return"bad url: "+e[0];if(e instanceof Jr)return"internal server error: "+e[0];if(e instanceof Kr){let t=e[0];return`json error
`+nd(t)}else{if(e instanceof Vr)return"not found";if(e instanceof Zr)return"unauthorized";if(e instanceof Yr){let t=e[0],n=e[1];return"other error: "+G(t)+" "+n}else return"network error"}}var ho=class extends d{constructor(t,n){super(),this.content=t,this.references=n}},gs=class extends d{},ti=class extends d{constructor(t,n){super(),this.attributes=t,this.content=n}},ni=class extends d{constructor(t,n,r){super(),this.attributes=t,this.level=n,this.content=r}},ri=class extends d{constructor(t,n,r){super(),this.attributes=t,this.language=n,this.content=r}},ii=class extends d{},Oe=class extends d{constructor(t){super(),this[0]=t}},jn=class extends d{constructor(t,n){super(),this.content=t,this.destination=n}},On=class extends d{constructor(t,n){super(),this.content=t,this.destination=n}},Sn=class extends d{constructor(t){super(),this.content=t}},zn=class extends d{constructor(t){super(),this.content=t}},or=class extends d{constructor(t){super(),this.content=t}},si=class extends d{constructor(t){super(),this[0]=t}},li=class extends d{constructor(t){super(),this[0]=t}};function ws(e,t,n){return t==="class"?Xs(e,t,r=>r instanceof m?n:r[0]+" "+n):Ee(e,t,n)}function id(e){for(;;){let t=e;if(t.hasLength(0))return a([]);if(t.atLeastLength(1)&&t.head===`
`)e=t.tail;else{let n=t.head,r=t.tail;return w(n,r)}}}function ar(e){for(;;){let t=e;if(t.hasLength(0))return a([]);if(t.atLeastLength(1)&&t.head===" ")e=t.tail;else{let n=t.head,r=t.tail;return w(n,r)}}}function Uu(e,t){for(;;){let n=e,r=t;if(r.hasLength(0))return n>=3?new _([new gs,r]):new m;if(r.atLeastLength(1)&&r.head===`
`)return n>=3?new _([new gs,r]):new m;if(r.atLeastLength(1)&&r.head===" "){let i=r.tail;e=n,t=i}else if(r.atLeastLength(1)&&r.head==="	"){let i=r.tail;e=n,t=i}else if(r.atLeastLength(1)&&r.head==="-"){let i=r.tail;e=n+1,t=i}else if(r.atLeastLength(1)&&r.head==="*"){let i=r.tail;e=n+1,t=i}else return new m}}function sd(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return[r,a([])];if(n.atLeastLength(1)&&n.head===`
`){let i=n.tail;return[r+`
`,i]}else{let i=n.head;e=n.tail,t=r+i}}}function ld(e,t,n){for(;;){let r=e,i=t,s=n;if(r.atLeastLength(1)&&r.head===`
`&&s===0){let l=r.tail;return new _([l])}else{if(s===0)return new _([r]);if(r.atLeastLength(1)&&r.head===i){let l=r.head;e=r.tail,t=i,n=s-1}else return r.hasLength(0)?new _([r]):new m}}}function od(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r,u=ld(i,s,l);if(u instanceof m){let c=sd(i,o),p=c[0];e=c[1],t=s,n=l,r=p}else{let c=u[0][0];return[o,c]}}}function ad(e,t){for(;;){let n=e,r=t;if(n.atLeastLength(1)&&n.head==="`")return new m;if(n.hasLength(0))return new _([new m,n]);if(n.atLeastLength(1)&&n.head===`
`&&r===""){let i=n.tail;return new _([new m,i])}else if(n.atLeastLength(1)&&n.head===`
`){let i=n.tail;return new _([new _(r),i])}else{let i=n.head;e=n.tail,t=r+i}}}function ud(e,t,n){for(;;){let r=e,i=t,s=n;if(r.atLeastLength(1)&&r.head===i){let l=r.head;e=r.tail,t=i,n=s+1}else if(r.atLeastLength(1)&&r.head===`
`&&s>=3){let l=r.tail;return new _([new m,s,l])}else if(r.atLeastLength(1)&&s>=3){let l=ar(r);return hr(ad(l,""),o=>{let u=o[0],c=o[1];return[u,s,c]})}else return new m}}function Wu(e,t,n){return jo(ud(e,n,1),r=>{let i=r[0],s=r[1],l=r[2],o=od(l,n,s,""),u=o[0],c=o[1];return new _([new ri(t,i,u),c])})}function cd(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return new _([i,Nn(s),a([])]);if(r.atLeastLength(2)&&r.head===`
`&&r.tail.head===" "){let l=r.tail.tail;e=ar(l),t=i,n=s}else if(r.atLeastLength(1)&&r.head===`
`){let l=r.tail;return new _([i,Nn(s),l])}else{let l=r.head;e=r.tail,t=i,n=s+l}}}function fd(e,t){for(;;){let n=e,r=t;if(n.atLeastLength(2)&&n.head==="]"&&n.tail.head===":"){let i=n.tail.tail;return cd(i,r,"")}else{if(n.hasLength(0))return new m;if(n.atLeastLength(1)&&n.head==="]")return new m;if(n.atLeastLength(1)&&n.head===`
`)return new m;{let i=n.head;e=n.tail,t=r+i}}}}function pd(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return new m;if(r.atLeastLength(1)&&r.head===" "){let l=r.tail;return new _([i,s,l])}else{if(r.atLeastLength(1)&&r.head==="}")return new _([i,s,r]);{let l=r.head;e=r.tail,t=i,n=s+l}}}}function dd(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return new m;if(r.atLeastLength(1)&&r.head==='"'){let l=r.tail;return new _([i,s,l])}else{let l=r.head;e=r.tail,t=i,n=s+l}}}function _d(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return new m;if(n.atLeastLength(1)&&n.head===" ")return new m;if(n.atLeastLength(2)&&n.head==="="&&n.tail.head==='"'){let i=n.tail.tail;return dd(i,r,"")}else if(n.atLeastLength(1)&&n.head==="="){let i=n.tail;return pd(i,r,"")}else{let i=n.head;e=n.tail,t=r+i}}}function Hu(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return new _([r,n]);if(n.atLeastLength(1)&&n.head==="}")return new _([r,n]);if(n.atLeastLength(1)&&n.head===" ")return new _([r,n]);if(n.atLeastLength(1)&&n.head==="#")return new m;if(n.atLeastLength(1)&&n.head===".")return new m;if(n.atLeastLength(1)&&n.head==="=")return new m;if(n.atLeastLength(1)&&n.head===`
`)return new m;{let i=n.head;e=n.tail,t=r+i}}}function hd(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return new _([r,a([])]);if(n.atLeastLength(1)&&n.head===`
`){let i=n.tail;return new _([r,i])}else if(n.atLeastLength(1)&&n.head===" ")e=n.tail,t=r;else return new m}}function $d(e,t){for(;;){let n=e,r=t,i=ar(n);if(i.hasLength(0))return new m;if(i.atLeastLength(1)&&i.head==="}"){let s=i.tail;return hd(s,r)}else if(i.atLeastLength(1)&&i.head==="#"){let s=i.tail,l=Hu(s,"");if(l instanceof _){let o=l[0][0];e=l[0][1],t=ws(r,"id",o)}else return new m}else if(i.atLeastLength(1)&&i.head==="."){let s=i.tail,l=Hu(s,"");if(l instanceof _){let o=l[0][0];e=l[0][1],t=ws(r,"class",o)}else return new m}else{let s=_d(i,"");if(s instanceof _){let l=s[0][0],o=s[0][1];e=s[0][2],t=ws(r,l,o)}else return new m}}}function md(e){return e==="#"||e==="?"||e==="!"?!1:e!==","}function wd(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;if(n.atLeastLength(1)&&n.head===" "&&E(n.tail,a([]))){let i=n.tail;return r}else if(n.atLeastLength(1)&&n.head===`
`&&E(n.tail,a([]))){let i=n.tail;return r}else if(n.atLeastLength(1)&&n.head===" "&&r==="")e=n.tail,t=r;else if(n.atLeastLength(1)&&n.head===`
`&&r==="")e=n.tail,t=r;else if(n.atLeastLength(1)&&n.head===" ")e=n.tail,t=r+"-";else if(n.atLeastLength(1)&&n.head===`
`)e=n.tail,t=r+"-";else{let i=n.head;e=n.tail,t=r+i}}}function gd(e){let n=Pn(e),r=ht(n,md);return wd(r,"")}function xd(e,t,n){for(;;){let r=e,i=t,s=n;if(i<0)return new m;if(r.hasLength(0)&&i>0)return new m;if(r.hasLength(0)&&i===0)return new _([s,a([])]);if(r.atLeastLength(1)&&r.head===" "&&i===0){let l=r.tail;return new _([s,l])}else if(r.atLeastLength(1)&&r.head==="#")e=r.tail,t=i-1,n=s;else return new m}}function bd(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return[z(s),a([])];if(r.hasLength(1)&&r.head===`
`)return[z(s),a([])];if(r.atLeastLength(2)&&r.head===`
`&&r.tail.head===`
`){let l=r.tail.tail;return[z(s),l]}else if(r.atLeastLength(2)&&r.head===`
`&&r.tail.head==="#"){let l=r.tail.tail,o=xd(l,i-1,w(`
`,s));if(o instanceof _){let u=o[0][0];e=o[0][1],t=i,n=u}else return[z(s),r]}else{let l=r.head;e=r.tail,t=i,n=w(l,s)}}}function yd(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r;if(i.hasLength(0))return[!0,o,i];if(i.atLeastLength(1)&&i.head==="`")e=i.tail,t=s,n=l+1,r=o;else return i.atLeastLength(1)&&s===l?[!0,o,i]:[!1,o+gr("`",l),i]}}function kd(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return[s,r];if(r.atLeastLength(1)&&r.head==="`"){let l=r.tail,o=yd(l,i,1,s),u=o[0],c=o[1],p=o[2];if(u)return[c,p];e=p,t=i,n=c}else{let l=r.head;e=r.tail,t=i,n=s+l}}}function Ld(e,t){for(;;){let n=e,r=t;if(n.atLeastLength(1)&&n.head==="`")e=n.tail,t=r+1;else{let i=kd(n,r,""),s=i[0],l=i[1],o;ln(s," `")?o=hi(s):o=s;let c=o,p;_i(c,"` ")?p=$i(c):p=c;let $=p;return[new or($),l]}}}function vd(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return new m;if(r.atLeastLength(1)&&r.head==="`")return new m;if(r.atLeastLength(2)&&r.head==="	"&&r.tail.head===i){let l=r.tail.head;e=r.tail.tail,t=i,n=w(" ",w(l,s))}else if(r.atLeastLength(2)&&r.head===`
`&&r.tail.head===i){let l=r.tail.head;e=r.tail.tail,t=i,n=w(" ",w(l,s))}else if(r.atLeastLength(2)&&r.head===" "&&r.tail.head===i){let l=r.tail.head;e=r.tail.tail,t=i,n=w(" ",w(l,s))}else if(r.atLeastLength(1)&&r.head===i){let l=r.head,o=r.tail,u=z(s);if(u.hasLength(0))return new m;{let c=u;return new _([c,o])}}else{let l=r.head;e=r.tail,t=i,n=w(l,s)}}}function Gu(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r;if(i.hasLength(0))return new m;if(i.atLeastLength(1)&&i.head===")"&&s){let u=i.tail;return new _([l,new li(o),u])}else if(i.atLeastLength(1)&&i.head==="]"&&!s){let u=i.tail;return new _([l,new si(o),u])}else if(i.atLeastLength(1)&&i.head===`
`&&s)e=i.tail,t=s,n=l,r=o;else if(i.atLeastLength(1)&&i.head===`
`&&!s)e=i.tail,t=s,n=l,r=o+" ";else{let u=i.head;e=i.tail,t=s,n=l,r=o+u}}}function Ad(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return new m;if(n.atLeastLength(2)&&n.head==="]"&&n.tail.head==="["){let i=n.tail.tail,s=z(r);return Gu(i,!1,s,"")}else if(n.atLeastLength(2)&&n.head==="]"&&n.tail.head==="("){let i=n.tail.tail,s=z(r);return Gu(i,!0,s,"")}else{let i=n.head;e=n.tail,t=w(i,r)}}}function jd(e,t){for(;;){let n=e,r=t;if(n.atLeastLength(1)&&n.head==="#")e=n.tail,t=r+1;else{if(n.hasLength(0)&&r>0)return new _([r,a([])]);if(n.atLeastLength(1)&&n.head===" "&&r!==0){let i=n.tail;return new _([r,i])}else if(n.atLeastLength(1)&&n.head===`
`&&r!==0){let i=n.tail;return new _([r,i])}else return new m}}}function xs(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head,s=n.tail;if(i instanceof Oe){let l=i[0];e=s,t=r+l}else if(i instanceof or){let l=i.content;e=s,t=r+l}else if(i instanceof zn){let l=i.content;e=re(l,s),t=r}else if(i instanceof Sn){let l=i.content;e=re(l,s),t=r}else if(i instanceof jn){let l=i.content,o=xs(l,r);e=s,t=o}else if(i instanceof On){let l=i.content,o=xs(l,r);e=s,t=o}else e=s,t=r}}}function Od(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return[z(r),a([])];if(n.hasLength(1)&&n.head===`
`)return[z(r),a([])];if(n.atLeastLength(2)&&n.head===`
`&&n.tail.head===`
`){let i=n.tail.tail;return[z(r),i]}else{let i=n.head;e=n.tail,t=w(i,r)}}}function Ru(e,t){let n=vd(e,t,a([]));if(n instanceof m)return new m;{let r=n[0][0],i=n[0][1],s=bs(r,"",a([]));return new _([s,i])}}function bs(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0)&&i==="")return z(s);if(r.hasLength(0))return z(w(new Oe(i),s));if(r.atLeastLength(2)&&r.head==="\\"){let l=r.tail.head,o=r.tail.tail;l===`
`?(e=o,t="",n=w(new ii,w(new Oe(i),s))):l===" "?(e=o,t=i+"&nbsp;",n=s):l==="!"||l==='"'||l==="#"||l==="$"||l==="%"||l==="&"||l==="'"||l==="("||l===")"||l==="*"||l==="+"||l===","||l==="-"||l==="."||l==="/"||l===":"||l===";"||l==="<"||l==="="||l===">"||l==="?"||l==="@"||l==="["||l==="\\"||l==="]"||l==="^"||l==="_"||l==="`"||l==="{"||l==="|"||l==="}"||l==="~"?(e=o,t=i+l,n=s):(e=re(a([l]),o),t=i+"\\",n=s)}else if(r.atLeastLength(2)&&r.head==="_"&&r.tail.head!==" "&&r.tail.head!=="	"&&r.tail.head!==`
`){let l=r.tail.head,o=r.tail.tail,u=w(l,o),c=Ru(u,"_");if(c instanceof m)e=u,t=i+"_",n=s;else{let p=c[0][0];e=c[0][1],t="",n=w(new Sn(p),w(new Oe(i),s))}}else if(r.atLeastLength(2)&&r.head==="*"&&r.tail.head!==" "&&r.tail.head!=="	"&&r.tail.head!==`
`){let l=r.tail.head,o=r.tail.tail,u=w(l,o),c=Ru(u,"*");if(c instanceof m)e=u,t=i+"*",n=s;else{let p=c[0][0];e=c[0][1],t="",n=w(new zn(p),w(new Oe(i),s))}}else if(r.atLeastLength(1)&&r.head==="["){let l=r.tail,o=Ju(l,(u,c)=>new jn(u,c));if(o instanceof m)e=l,t=i+"[",n=s;else{let u=o[0][0];e=o[0][1],t="",n=w(u,w(new Oe(i),s))}}else if(r.atLeastLength(2)&&r.head==="!"&&r.tail.head==="["){let l=r.tail.tail,o=Ju(l,(u,c)=>new On(u,c));if(o instanceof m)e=l,t=i+"![",n=s;else{let u=o[0][0];e=o[0][1],t="",n=w(u,w(new Oe(i),s))}}else if(r.atLeastLength(1)&&r.head==="`"){let l=r.tail,o=Ld(l,1),u=o[0];e=o[1],t="",n=w(u,w(new Oe(i),s))}else if(r.atLeastLength(1)&&r.head===`
`){let l=r.tail;e=ar(l),t=i+`
`,n=s}else{let l=r.head;e=r.tail,t=i+l,n=s}}}function Ju(e,t){let n=Ad(e,a([]));if(n instanceof m)return new m;{let r=n[0][0],i=n[0][1],s=n[0][2],l=bs(r,"",a([])),o;i instanceof si&&i[0]===""?o=new si(xs(l,"")):o=i;let u=o;return new _([t(l,u),s])}}function Rt(e,t){let n=Od(e,a([])),r=n[0],i=n[1],s=bs(r,"",a([]));return[new ti(t,s),i]}function Sd(e,t,n){let r=jd(e,1);if(r instanceof _){let i=r[0][0],s=r[0][1],l=ar(s),o=bd(l,i,a([])),u=o[0],c=o[1],p=bs(u,"",a([])),f=xs(p,""),$,g=gd(f);if(g==="")$=[t,n];else{let C=g;if(Re(t,C).isOk())$=[t,n];else{let A=Ee(t,C,"#"+C),S=ws(n,"id",C);$=[A,S]}}let b=$,j=b[0],L=b[1];return[new ni(L,i,p),j,c]}else{let i=Rt(w("#",e),n),s=i[0],l=i[1];return[s,t,l]}}function zd(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r,u=id(i),c=ar(u);if(c.hasLength(0))return new ho(z(l),s);if(c.atLeastLength(1)&&c.head==="{"){let p=c.tail,f=$d(p,o);if(f instanceof m){let $=Rt(c,o),g=$[0];e=$[1],t=s,n=w(g,l),r=D()}else{let $=f[0][0];e=f[0][1],t=s,n=l,r=$}}else if(c.atLeastLength(1)&&c.head==="#"){let p=c.tail,f=Sd(p,s,o),$=f[0],g=f[1];e=f[2],t=g,n=w($,l),r=D()}else if(c.atLeastLength(1)&&c.head==="~"){let p=c.head,f=c.tail,$=Wu(f,o,p);if($ instanceof m){let g=Rt(c,o),b=g[0];e=g[1],t=s,n=w(b,l),r=D()}else{let g=$[0][0];e=$[0][1],t=s,n=w(g,l),r=D()}}else if(c.atLeastLength(1)&&c.head==="`"){let p=c.head,f=c.tail,$=Wu(f,o,p);if($ instanceof m){let g=Rt(c,o),b=g[0];e=g[1],t=s,n=w(b,l),r=D()}else{let g=$[0][0];e=$[0][1],t=s,n=w(g,l),r=D()}}else if(c.atLeastLength(1)&&c.head==="["){let p=c.tail,f=fd(p,"");if(f instanceof m){let $=Rt(c,o),g=$[0];e=$[1],t=s,n=w(g,l),r=D()}else{let $=f[0][0],g=f[0][1],b=f[0][2],j=Ee(s,$,g);e=b,t=j,n=l,r=D()}}else if(c.atLeastLength(1)&&c.head==="-"){let p=c.tail,f=Uu(1,p);if(f instanceof m){let $=Rt(c,o),g=$[0];e=$[1],t=s,n=w(g,l),r=D()}else{let $=f[0][0];e=f[0][1],t=s,n=w($,l),r=D()}}else if(c.atLeastLength(1)&&c.head==="*"){let p=c.tail,f=Uu(1,p);if(f instanceof m){let $=Rt(c,o),g=$[0];e=$[1],t=s,n=w(g,l),r=D()}else{let $=f[0][0];e=f[0][1],t=s,n=w($,l),r=D()}}else{let p=Rt(c,o),f=p[0];e=p[1],t=s,n=w(f,l),r=D()}}}function Ku(e){let n=fi(e,`\r
`,`
`),r=Pn(n);return zd(r,D(),a([]),D())}function Vu(e,t){if(e instanceof li)return e[0];{let n=e[0],r=Re(t,n);return r.isOk()?r[0]:""}}function $o(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head,s=n.tail;if(i instanceof Oe){let l=i[0];e=s,t=r+l}else if(i instanceof or){let l=i.content;e=s,t=r+l}else if(i instanceof zn){let l=i.content;e=re(l,s),t=r}else if(i instanceof Sn){let l=i.content;e=re(l,s),t=r}else if(i instanceof jn){let l=i.content,o=$o(l,r);e=s,t=o}else if(i instanceof On){let l=i.content,o=$o(l,r);e=s,t=o}else e=s,t=r}}}function Jt(e,t){let r=en(e),i=Cn(r,(s,l)=>wr(s[0],l[0]));return ye(i,t,(s,l)=>w(ee(l[0],l[1]),s))}function Ed(e,t,n){if(t instanceof ii)return a([tu(a([]))]);if(t instanceof Oe){let r=t[0];return a([y(r)])}else if(t instanceof zn){let r=t.content;return a([Dr(a([h("font-bold")]),pt(e,r,n))])}else if(t instanceof Sn){let r=t.content;return a([nu(a([h("italic")]),pt(e,r,n))])}else if(t instanceof jn){let r=t.content,i=t.destination;return a([Nt(a([Pt(Vu(i,n)),h("text-pink-700 hover:underline cursor-pointer")]),pt(e,r,n))])}else if(t instanceof On){let r=t.content,i=t.destination;return a([ru(a([Da(Vu(i,n)),Fa($o(r,"")),h("max-w-full h-auto rounded-lg shadow-lg mt-8")]))])}else{let r=t.content;return a([pe(a([h("bg-zinc-800 px-1 py-0.5 rounded text-sm font-mono")]),a([y(r)]))])}}function pt(e,t,n){for(;;){let r=e,i=t,s=n;if(i.hasLength(0))return r;{let l=i.head,o=i.tail;e=Ed(r,l,s),t=o,n=s}}}function Td(e,t,n){let r;if(t instanceof ti){let s=t.attributes,l=t.content;r=tt(Jt(s,a([h("pt-8")])),pt(a([]),l,n))}else if(t instanceof ni){let s=t.attributes,l=t.level,o=t.content;l===1?r=Ki(Jt(s,a([h("text-3xl text-pink-700 font-light")])),pt(a([]),o,n)):l===2?r=Ir(Jt(s,a([h("text-2xl text-pink-600 font-light pt-16")])),pt(a([]),o,n)):l===3?r=Zn(Jt(s,a([h("text-xl text-pink-600 font-light pt-12")])),pt(a([]),o,n)):l===4?r=he(Jt(s,a([h("text-lg text-pink-600 font-light pt-8")])),pt(a([]),o,n)):l===5?r=Ya(Jt(s,a([h("text-base text-pink-600 font-light pt-6")])),pt(a([]),o,n)):r=Za(Jt(s,a([h("text-sm text-pink-600 font-light pt-4")])),pt(a([]),o,n))}else if(t instanceof ri){let s=t.attributes,l=t.language,o=t.content;r=$e(Jt(s,a([h("pt-8")])),a([pe((()=>{if(l instanceof _){let u=l[0];return a([h("language-"+u+" bg-zinc-800 p-4 rounded-md block overflow-x-auto")])}else return a([h("bg-zinc-800 p-4 rounded-md block overflow-x-auto")])})(),a([y(o)]))]))}else r=Xa(a([h("border-zinc-700 my-8")]));return w(r,e)}function qd(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return s;{let l=r.head,o=r.tail,u=Td(s,l,i);e=o,t=i,n=u}}}function Bd(e){return z(qd(e.content,e.references,a([wt()])))}function ys(e){let n=Ku(e);return Bd(n)}var ks=class extends d{constructor(t){super(),this.version=t}},Ls=class extends d{constructor(t,n){super(),this.version=t,this.articles=n}};var T=class extends d{constructor(t,n,r,i,s,l,o){super(),this.base_uri=t,this.route=n,this.session=r,this.articles=i,this.djot_demo_content=s,this.edit_view_mode=l,this.profile_menu_open=o}},Kt=class extends d{},oi=class extends d{},vs=class extends d{constructor(t){super(),this.uri=t}},Vt=class extends d{constructor(t){super(),this.uri=t}},As=class extends d{},wo=class extends d{constructor(t){super(),this.opt=t}},js=class extends d{constructor(t){super(),this.article=t}},dt=class extends d{constructor(t,n){super(),this.id=t,this.result=n}},fr=class extends d{constructor(t){super(),this.result=t}},Os=class extends d{constructor(t,n){super(),this.article=t,this.text=n}},Ss=class extends d{constructor(t,n){super(),this.article=t,this.text=n}},zs=class extends d{constructor(t,n){super(),this.article=t,this.text=n}},Es=class extends d{constructor(t,n){super(),this.article=t,this.text=n}},Ts=class extends d{constructor(t,n){super(),this.article=t,this.content=n}},cr=class extends d{constructor(t,n){super(),this.id=t,this.result=n}},qs=class extends d{constructor(t){super(),this.article=t}},Bs=class extends d{constructor(t){super(),this.article=t}},Cs=class extends d{},Ps=class extends d{constructor(t){super(),this.result=t}},Ns=class extends d{constructor(t){super(),this.article=t}},Ms=class extends d{constructor(t,n){super(),this.id=t,this.result=n}},Is=class extends d{constructor(t){super(),this.article=t}},go=class extends d{constructor(t){super(),this.article=t}},Ds=class extends d{constructor(t,n){super(),this.username=t,this.password=n}},Fs=class extends d{constructor(t){super(),this.result=t}},Us=class extends d{},Ws=class extends d{constructor(t){super(),this.result=t}},Hs=class extends d{},ai=class extends d{constructor(t){super(),this.result=t}},Gs=class extends d{constructor(t){super(),this.content=t}},Rs=class extends d{},xo=class extends d{},Js=class extends d{},Ks=class extends d{};function Zu(e,t){let n=_o(t);if(n instanceof kt)return[(()=>{let r=e;return new T(r.base_uri,n,r.session,r.articles,r.djot_demo_content,r.edit_view_mode,r.profile_menu_open)})(),B()];if(n instanceof yt){let r=n.slug,i=e.articles;if(i instanceof te)return[(()=>{let s=e;return new T(s.base_uri,n,s.session,new se,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open)})(),ds(s=>new fr(s),e.base_uri)];if(i instanceof M){let s=i[0],l=el(s,B(),(c,p)=>{let f=p.slug===r,$=p.content;return f&&$ instanceof te?[Kn(a([c,Ft(g=>new dt(p.id,g),p.id,e.base_uri)])),(()=>{let g=p;return new F(g.id,g.slug,g.revision,g.author,g.tags,g.published_at,g.title,g.subtitle,g.leading,new se,g.draft)})()]:[c,p]}),o=l[0],u=l[1];return[(()=>{let c=e;return new T(c.base_uri,n,c.session,new M(u),c.djot_demo_content,c.edit_view_mode,c.profile_menu_open)})(),o]}else return[(()=>{let s=e;return new T(s.base_uri,n,s.session,s.articles,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open)})(),B()]}else if(n instanceof ft){let r=n.id,i=e.articles;if(i instanceof te)return[(()=>{let s=e;return new T(s.base_uri,n,s.session,new se,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open)})(),ds(s=>new fr(s),e.base_uri)];if(i instanceof M){let s=i[0],l=el(s,B(),(c,p)=>{let f;if(p.draft instanceof _)f=p;else{let L=p;f=new F(L.id,L.slug,L.revision,L.author,L.tags,L.published_at,L.title,L.subtitle,L.leading,L.content,nr(p))}let g=f,b=g.id===r,j=g.content;return b&&j instanceof te?[Kn(a([c,Ft(L=>new dt(g.id,L),g.id,e.base_uri)])),(()=>{let L=g;return new F(L.id,L.slug,L.revision,L.author,L.tags,L.published_at,L.title,L.subtitle,L.leading,new se,nr(g))})()]:[c,g]}),o=l[0],u=l[1];return ne(lr(n),"src\\jst_lustre.gleam",800),[(()=>{let c=e;return new T(c.base_uri,n,c.session,new M(u),c.djot_demo_content,c.edit_view_mode,c.profile_menu_open)})(),o]}else return[(()=>{let s=e;return new T(s.base_uri,n,s.session,s.articles,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open)})(),B()]}else return n instanceof ct?e.articles instanceof te?[(()=>{let i=e;return new T(i.base_uri,n,i.session,new se,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open)})(),ds(i=>new fr(i),e.base_uri)]:[(()=>{let i=e;return new T(i.base_uri,n,i.session,i.articles,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open)})(),B()]:n instanceof Ht?[(()=>{let r=e;return new T(r.base_uri,n,r.session,r.articles,r.djot_demo_content,r.edit_view_mode,r.profile_menu_open)})(),B()]:n instanceof Lt?[(()=>{let r=e;return new T(r.base_uri,n,r.session,r.articles,r.djot_demo_content,r.edit_view_mode,r.profile_menu_open)})(),B()]:[(()=>{let r=e;return new T(r.base_uri,n,r.session,r.articles,r.djot_demo_content,r.edit_view_mode,r.profile_menu_open)})(),B()]}function Pd(e,t){if(t instanceof vs){let n=t.uri;return Zu(e,n)}else if(t instanceof Vt){let n=t.uri;return ne("user mouse down navigation","src\\jst_lustre.gleam",184),ne(n,"src\\jst_lustre.gleam",185),[e,gn(ce(n),new m,new m)]}else{if(t instanceof As)return[(()=>{let n=e;return new T(n.base_uri,n.route,n.session,n.articles,n.djot_demo_content,n.edit_view_mode,!e.profile_menu_open)})(),B()];if(t instanceof wo){let n=t.opt;if(n instanceof _&&n[0]instanceof Ls){let r=n[0].articles;return[(()=>{let i=e;return new T(i.base_uri,i.route,i.session,new M(r),i.djot_demo_content,i.edit_view_mode,i.profile_menu_open)})(),B()]}else return n instanceof _&&n[0]instanceof ks?[e,B()]:[e,B()]}else if(t instanceof fr){let n=t.result,r=e.route;if(n.isOk()&&r instanceof yt){let i=n[0],s=r.slug,l=$t(i,o=>o.slug===s);if(l.isOk()&&l[0]instanceof F&&l[0].content instanceof te){let o=l[0].id,u=N(i,c=>{if(c.slug===s){let f=c;return new F(f.id,f.slug,f.revision,f.author,f.tags,f.published_at,f.title,f.subtitle,f.leading,new se,f.draft)}else return c});return[(()=>{let c=e;return new T(c.base_uri,c.route,c.session,new M(u),c.djot_demo_content,c.edit_view_mode,c.profile_menu_open)})(),Ft(c=>new dt(o,c),o,e.base_uri)]}else if(l.isOk()&&l[0]instanceof F&&l[0].content instanceof te){let o=l[0].id,u=N(i,c=>{if(c.slug===s){let f=c;return new F(f.id,f.slug,f.revision,f.author,f.tags,f.published_at,f.title,f.subtitle,f.leading,new se,f.draft)}else return c});return[(()=>{let c=e;return new T(c.base_uri,c.route,c.session,new M(u),c.djot_demo_content,c.edit_view_mode,c.profile_menu_open)})(),Ft(c=>new dt(o,c),o,e.base_uri)]}else return l.isOk()?(ne("article exists. content is pending or loading.","src\\jst_lustre.gleam",253),[e,B()]):[e,gn((()=>{let o=e.route,u=Gt(o),c=new ei(u);return lr(c)})(),new m,new m)]}else if(n.isOk()&&r instanceof ft){let i=n[0],s=r.id;return[(()=>{let l=e;return new T(l.base_uri,l.route,l.session,new M(i),l.djot_demo_content,l.edit_view_mode,l.profile_menu_open)})(),Ft(l=>new dt(s,l),s,e.base_uri)]}else if(n.isOk()){let i=n[0];return[(()=>{let s=e;return new T(s.base_uri,s.route,s.session,new M(i),s.djot_demo_content,s.edit_view_mode,s.profile_menu_open)})(),B()]}else{let i=n[0];return[(()=>{let s=e;return new T(s.base_uri,s.route,s.session,new We(i),s.djot_demo_content,s.edit_view_mode,s.profile_menu_open)})(),B()]}}else if(t instanceof dt){let n=t.id,r=t.result;if(r.isOk()){let i=r[0],s=n===i.id;if(!s)throw W("let_assert","jst_lustre",287,"update","Pattern match failed, no pattern matched the value.",{value:s});let l,o=e.articles;l=je(o,c=>N(c,p=>n===p.id?i:p));let u=l;return[(()=>{let c=e;return new T(c.base_uri,c.route,c.session,u,c.djot_demo_content,c.edit_view_mode,c.profile_menu_open)})(),B()]}else{let i=r[0],s,l=e.articles;s=je(l,u=>N(u,c=>{if(n===c.id){let f=c;return new F(f.id,f.slug,f.revision,f.author,f.tags,f.published_at,f.title,f.subtitle,f.leading,new We(i),f.draft)}else return c}));let o=s;return[(()=>{let u=e;return new T(u.base_uri,u.route,u.session,o,u.djot_demo_content,u.edit_view_mode,u.profile_menu_open)})(),B()]}}else if(t instanceof js){let n=t.article,r=n.content;if(r instanceof te){let i,s=e.articles;i=je(s,o=>N(o,u=>{if(n.id===u.id){let p=u;return new F(p.id,p.slug,p.revision,p.author,p.tags,p.published_at,p.title,p.subtitle,p.leading,new se,p.draft)}else return u}));let l=i;return[(()=>{let o=e;return new T(o.base_uri,o.route,o.session,l,o.djot_demo_content,o.edit_view_mode,o.profile_menu_open)})(),Ft(o=>new dt(n.id,o),n.id,e.base_uri)]}else return r instanceof We?[e,Ft(i=>new dt(n.id,i),n.id,e.base_uri)]:r instanceof se?[e,B()]:r instanceof M?[e,B()]:[e,B()]}else if(t instanceof Os){let n=t.article,r=t.text;if(n instanceof F&&n.draft instanceof _){let i=rr(n,s=>mu(s,r));return[(()=>{let s=e;return new T(s.base_uri,s.route,s.session,je(e.articles,l=>N(l,o=>n.id===o.id?i:o)),s.djot_demo_content,s.edit_view_mode,s.profile_menu_open)})(),B()]}else return[e,B()]}else if(t instanceof Ss){let n=t.article,r=t.text,i=rr(n,l=>wu(l,r)),s=je(e.articles,l=>N(l,o=>n.id===o.id?i:o));return[(()=>{let l=e;return new T(l.base_uri,l.route,l.session,s,l.djot_demo_content,l.edit_view_mode,l.profile_menu_open)})(),B()]}else if(t instanceof zs){let n=t.article,r=t.text,i=rr(n,l=>xu(l,r)),s=je(e.articles,l=>N(l,o=>n.id===o.id?i:o));return[(()=>{let l=e;return new T(l.base_uri,l.route,l.session,s,l.djot_demo_content,l.edit_view_mode,l.profile_menu_open)})(),B()]}else if(t instanceof Es){let n=t.article,r=t.text,i=rr(n,l=>gu(l,r)),s=je(e.articles,l=>N(l,o=>n.id===o.id?i:o));return[(()=>{let l=e;return new T(l.base_uri,l.route,l.session,s,l.djot_demo_content,l.edit_view_mode,l.profile_menu_open)})(),B()]}else if(t instanceof Ts){let n=t.article,r=t.content,i=rr(n,s=>bu(s,r));return[(()=>{let s=e;return new T(s.base_uri,s.route,s.session,je(e.articles,l=>N(l,o=>n.id===o.id?i:o)),s.djot_demo_content,s.edit_view_mode,s.profile_menu_open)})(),B()]}else if(t instanceof Bs){let n=t.article;ne("article draft discard clicked","src\\jst_lustre.gleam",461);let r=je(e.articles,i=>N(i,s=>{if(n.id===s.id){let o=n;return new F(o.id,o.slug,o.revision,o.author,o.tags,o.published_at,o.title,o.subtitle,o.leading,o.content,new m)}else return s}));return[(()=>{let i=e;return new T(i.base_uri,i.route,i.session,r,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open)})(),gn((()=>{let i=$s(new bt(n,e.session));return ce(i)})(),new m,new m)]}else if(t instanceof qs){let n=t.article,r=n.draft;if(r instanceof _){let i=r[0],s,l=n;s=new F(l.id,Xi(i),l.revision,l.author,l.tags,l.published_at,es(i),ts(i),Gr(i),new M(Rr(i)),new m);let o=s,u=je(e.articles,c=>N(c,p=>n.id===p.id?o:p));return[(()=>{let c=e;return new T(c.base_uri,c.route,c.session,u,c.djot_demo_content,c.edit_view_mode,c.profile_menu_open)})(),Kn(a([_s(c=>new cr(o.id,c),o,e.base_uri),gn((()=>{let c=$s(new bt(o,e.session));return ce(c)})(),new m,new m)]))]}else return[e,B()]}else if(t instanceof cr){let n=t.id,r=t.result;if(r.isOk()){let i=r[0],s=je(e.articles,l=>N(l,o=>n===o.id?i:o));return[(()=>{let l=e;return new T(l.base_uri,l.route,l.session,s,l.djot_demo_content,l.edit_view_mode,l.profile_menu_open)})(),B()]}else{let i=r[0];return ne("article update response error","src\\jst_lustre.gleam",542),ne(i,"src\\jst_lustre.gleam",543),[e,B()]}}else if(t instanceof Ds){let n=t.username,r=t.password;return[e,qu(i=>new Fs(i),n,r,e.base_uri)]}else if(t instanceof Fs){let n=t.result;if(n.isOk()){let r=n[0];return[(()=>{let i=e;return new T(i.base_uri,i.route,r,i.articles,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open)})(),B()]}else{let r=n[0];return ne(r,"src\\jst_lustre.gleam",559),[(()=>{let i=e;return new T(i.base_uri,i.route,new xe,i.articles,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open)})(),B()]}}else{if(t instanceof Us)return[(()=>{let n=e;return new T(n.base_uri,n.route,new xe,n.articles,n.djot_demo_content,n.edit_view_mode,n.profile_menu_open)})(),Eu(n=>new Ws(n),e.base_uri)];if(t instanceof Ws)return[(()=>{let n=e;return new T(n.base_uri,n.route,new xe,n.articles,n.djot_demo_content,n.edit_view_mode,n.profile_menu_open)})(),B()];if(t instanceof Hs)return[e,uo(n=>new ai(n),e.base_uri)];if(t instanceof ai){let n=t.result;if(n.isOk()){let r=n[0];return[(()=>{let i=e;return new T(i.base_uri,i.route,r,i.articles,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open)})(),B()]}else{let r=n[0];return ne("session check response error","src\\jst_lustre.gleam",582),ne(r,"src\\jst_lustre.gleam",583),[(()=>{let i=e;return new T(i.base_uri,i.route,new xe,i.articles,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open)})(),B()]}}else if(t instanceof Gs){let n=t.content;return[(()=>{let r=e;return new T(r.base_uri,r.route,r.session,r.articles,n,r.edit_view_mode,r.profile_menu_open)})(),B()]}else if(t instanceof Rs){let n;e.edit_view_mode instanceof Kt?n=new oi:n=new Kt;let i=n;return[(()=>{let s=e;return new T(s.base_uri,s.route,s.session,s.articles,s.djot_demo_content,i,s.profile_menu_open)})(),B()]}else if(t instanceof Cs){ne("article create clicked","src\\jst_lustre.gleam",607);let n=new F("","new-article",1,"current-user",a([]),new m,"New Article","A new article subtitle","This is a new article. Start editing to customize it.",new M(`# New Article

Start writing your article content here...`),new m);return[e,Mu(r=>new Ps(r),n,e.base_uri)]}else if(t instanceof Ps){let n=t.result;if(n.isOk()){let r=n[0];ne("article created successfully with id: "+r.id,"src\\jst_lustre.gleam",639);let i,s=e.articles;if(s instanceof M){let o=s[0];i=new M(w(r,o))}else i=s;let l=i;return[(()=>{let o=e;return new T(o.base_uri,o.route,o.session,l,o.djot_demo_content,o.edit_view_mode,o.profile_menu_open)})(),gn((()=>{let o=new ft(r.id),u=Gt(o);return ce(u)})(),new m,new m)]}else{let r=n[0];return ne("article creation error","src\\jst_lustre.gleam",659),ne(r,"src\\jst_lustre.gleam",660),[e,B()]}}else if(t instanceof Ns){let n=t.article;return ne("article delete clicked","src\\jst_lustre.gleam",667),[e,Kn(a([Nu(r=>new Ms(n.id,r),n.id,e.base_uri),gn((()=>{let r=new ct,i=Gt(r);return ce(i)})(),new m,new m)]))]}else if(t instanceof Ms){let n=t.id,r=t.result;if(r.isOk()){let i=je(e.articles,s=>ht(s,l=>l.id!==n));return[(()=>{let s=e;return new T(s.base_uri,s.route,s.session,i,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open)})(),B()]}else{let i=r[0];return ne("article delete response error","src\\jst_lustre.gleam",695),ne(i,"src\\jst_lustre.gleam",696),[e,B()]}}else if(t instanceof Is){let n=t.article;ne("article publish clicked","src\\jst_lustre.gleam",702);let r,i=n;return r=new F(i.id,i.slug,i.revision,i.author,i.tags,new _(Sl()),i.title,i.subtitle,i.leading,i.content,i.draft),[e,_s(l=>new cr(n.id,l),r,e.base_uri)]}else{let n=t.article;return ne("article unpublish clicked","src\\jst_lustre.gleam",714),[e,_s(r=>new cr(n.id,r),(()=>{let r=n;return new F(r.id,r.slug,r.revision,r.author,r.tags,new m,r.title,r.subtitle,r.leading,r.content,r.draft)})(),e.base_uri)]}}}}function Nd(e){let t=e.route;if(t instanceof Ht)return new bn;if(t instanceof ct){let n=e.articles;if(n instanceof se)return new Ut;if(n instanceof te)return new ue(new sr("articles not initialized"));if(n instanceof We){let r=n[0];return new ue(new Wt(r,"Failed to load article list"))}else if(n instanceof M){let r=n[0];return new yn(r,e.session)}else{let r=n[0];return new yn(r,e.session)}}else if(t instanceof yt){let n=t.slug,r=e.articles;if(r instanceof se)return new Ut;if(r instanceof te)return new ue(new sr("articles not initialized"));if(r instanceof We){let i=r[0];return new ue(new Wt(i,"Failed to load articles"))}else if(r instanceof M){let i=r[0],s=$t(i,l=>l.slug===n);if(s.isOk()){let l=s[0];return new bt(l,e.session)}else return new ue(new Ln(n,po(i)))}else{let i=r[0],s=$t(i,l=>l.slug===n);if(s.isOk()){let l=s[0];return new bt(l,e.session)}else return new ue(new Ln(n,po(i)))}}else if(t instanceof ft){let n=t.id,r=e.articles;if(r instanceof se)return new Ut;if(r instanceof te)return new ue(new sr("articles not initialized"));if(r instanceof We){let i=r[0];return new ue(new Wt(i,"Failed to load articles for editing"))}else if(r instanceof M){let i=r[0],s=$t(i,l=>l.id===n);if(s.isOk()){let l=s[0],o=Qr(l,e.session),u=l.draft;return o&&u instanceof _?new ut(l):o&&u instanceof m?new ut((()=>{let c=l;return new F(c.id,c.slug,c.revision,c.author,c.tags,c.published_at,c.title,c.subtitle,c.leading,c.content,nr(l))})()):new ue(new An("edit article"))}else return new ue(new vn(n))}else{let i=r[0],s=$t(i,l=>l.id===n);if(s.isOk()){let l=s[0],o=Qr(l,e.session),u=l.draft;return o&&u instanceof _?new ut(l):o&&u instanceof m?new ut((()=>{let c=l;return new F(c.id,c.slug,c.revision,c.author,c.tags,c.published_at,c.title,c.subtitle,c.leading,c.content,nr(l))})()):new ue(new An("edit article"))}else return new ue(new vn(n))}}else{if(t instanceof Lt)return new kn(e.djot_demo_content);if(t instanceof kt)return new ir;{let n=t.uri;return new hs(n)}}}function Md(){return v(a([h("mt-8 p-4 bg-zinc-800 rounded-lg border border-zinc-700")]),a([Zn(a([h("text-lg text-pink-700 font-light")]),a([y("Djot Quick Reference")])),tt(a([h("text-zinc-300 mb-6")]),a([Dr(a([]),a([y("Note: ")])),y("This editor uses Djot format. See the "),Nt(a([Pt("https://htmlpreview.github.io/?https://github.com/jgm/djot/blob/master/doc/syntax.html"),h("text-zinc-300 underline")]),a([y("djot syntax documentation")])),y(" for complete details.")])),v(a([h("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm")]),a([v(a([]),a([he(a([h("text-pink-700 font-medium mb-2")]),a([y("Headings")])),pe(a([h("text-zinc-300")]),a([$e(a([h("text-zinc-300")]),a([y(`# H1
## H2
### H3`)]))]))])),v(a([]),a([he(a([h("text-pink-700 font-medium mb-2")]),a([y("Text")])),pe(a([h("text-zinc-300")]),a([$e(a([h("text-zinc-300")]),a([y("_italic_\n*bold*\n`code`")]))]))])),v(a([]),a([he(a([h("text-pink-700 font-medium mb-2")]),a([y("Lists")])),pe(a([h("text-zinc-300")]),a([$e(a([h("text-zinc-300")]),a([y(`- item 1
- item 2

  - nested`)]))]))])),v(a([]),a([he(a([h("text-pink-700 font-medium mb-2")]),a([y("Links")])),pe(a([h("text-zinc-300")]),a([$e(a([h("text-zinc-300")]),a([y(`[text](url)
[text](url){title="tooltip"}`)]))]))])),v(a([]),a([he(a([h("text-pink-700 font-medium mb-2")]),a([y("Code Blocks")])),pe(a([h("text-zinc-300")]),a([$e(a([h("text-zinc-300")]),a([y("```\ncode here\n```")]))]))])),v(a([]),a([he(a([h("text-pink-700 font-medium mb-2")]),a([y("Blockquotes")])),pe(a([h("text-zinc-300")]),a([$e(a([h("text-zinc-300")]),a([y("> quoted text")]))]))]))]))]))}function Yu(e,t,n,r,i){let s=h("block text-sm font-medium text-zinc-400 mb-1"),l;t instanceof xo?l=h("w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 font-light text-zinc-100 focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"):t instanceof Js?l=h("w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 text-3xl text-pink-700 font-light focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"):t instanceof Ks?l=h("w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 text-md text-zinc-500 font-light focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"):l=h("w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 font-bold text-zinc-100 focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200");let o=l;return v(a([h("mb-4")]),a([Fr(a([s]),a([y(e)])),Kl(a([o,Vn(n),Ct("edit-"+i+"-"+e),Qn(r)]))]))}function Qu(e){let t=e.published_at;if(t instanceof _){let n=t[0],r=ka(n);return wn(a([h("text-xs text-zinc-500 px-2 pt-2 w-max border-t border-r border-zinc-700 group-hover:border-pink-700 transition-colors duration-25")]),a([y(r)]))}else return wn(a([h("text-xs text-zinc-500 px-2 pt-2 w-max italic border-t border-r border-zinc-700 group-hover:border-pink-700 transition-colors duration-25")]),a([y("not published")]))}function Xu(e){return v(a([h("text-xs text-zinc-400 pt-0 border-r border-zinc-700 pr-2 group-hover:border-pink-700 transition-colors duration-25")]),a([wn(a([h("text-zinc-500 font-light")]),a([y("by ")])),wn(a([h("text-zinc-300")]),a([y(e)]))]))}function ec(e){return e.hasLength(0)?wt():v(a([h("flex justify-end align-end gap-0 ml-auto flex-wrap border-b border-r border-zinc-700 pb-1 pr-2 hover:border-pink-700 group-hover:border-pink-700 transition-colors duration-25 mt-2")]),N(e,n=>wn(a([h("text-xs cursor-pointer text-zinc-500 px-2 hover:border-pink-700 hover:text-pink-700 transition-colors duration-25")]),a([y(n)]))))}function tc(e,t){let n=Qr(e,t),r=Pu(e,t),i=Cu(e,t);return v(a([h("flex justify-start h-10")]),a([n?Ae(a([h("text-gray-500 pe-4 text-underline pb-2 hover:text-teal-300 hover:border-teal-300 border-b border-zinc-700"),ae(new Vt(Gt(new ft(e.id))))]),a([y("Edit")])):wt(),r&&E(e.published_at,new m)?Ae(a([h("text-gray-500 pe-4 text-underline pb-2 hover:text-green-300 hover:border-green-300 border-b border-zinc-700"),ae(new Is(e))]),a([y("Publish")])):wt(),r&&!E(e.published_at,new m)?Ae(a([h("text-gray-500 pe-4 text-underline pb-2 hover:text-yellow-300 hover:border-yellow-300 border-b border-zinc-700"),ae(new go(e))]),a([y("Unpublish")])):wt(),i?Ae(a([h("text-gray-500 pe-4 text-underline pb-2 hover:text-red-400 hover:border-red-400 border-b border-zinc-700"),ae(new Ns(e))]),a([y("Delete")])):wt()]))}function Id(e,t){return a([v(a([h("mb-4")]),a([v(a([h("flex items-center justify-between mb-1")]),a([Fr(a([h("block text-sm font-medium text-zinc-400")]),a([y("Slug")])),wn(a([h("text-xs text-zinc-500")]),a([y("rev "+G(t.revision))]))])),Kl(a([h("w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 font-light text-zinc-100 focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"),Vn(Xi(e)),Ct("edit-"+t.slug+"-Slug"),Qn(n=>new Os(t,n))]))])),Yu("Title",new Js,es(e),n=>new Ss(t,n),t.slug),Yu("Subtitle",new Ks,ts(e),n=>new Es(t,n),t.slug),v(a([h("mb-4")]),a([Fr(a([h("block text-sm font-medium text-zinc-400 mb-1")]),a([y("Leading")])),Yi(a([h("w-full h-24 bg-zinc-800 border border-zinc-600 rounded-md p-2 font-bold text-zinc-100 resize-none focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"),Vn(Gr(e)),Ct("edit-"+t.slug+"-Leading"),Qn(n=>new zs(t,n)),qi("Write a compelling leading paragraph...")]),Gr(e))])),v(a([h("mb-4")]),a([Fr(a([h("block text-sm font-medium text-zinc-400 mb-1")]),a([y("Content")])),Yi(a([h("w-full h-96 bg-zinc-800 border border-zinc-600 rounded-md p-4 font-mono text-sm text-zinc-100 resize-none focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"),Vn(Rr(e)),Qn(n=>new Ts(t,n)),qi("Write your article content in Djot format...")]),Rr(e))])),v(a([h("flex justify-between gap-4")]),a([tc(t,new xe),v(a([h("flex gap-4")]),a([Ae(a([h("px-4 py-2 bg-zinc-700 text-zinc-300 rounded-md hover:bg-zinc-600 transition-colors duration-200"),ae(new Bs(t)),Il(Qi(e))]),a([y("Discard Changes")])),Ae(a([h("px-4 py-2 bg-teal-700 text-white rounded-md hover:bg-teal-600 transition-colors duration-200"),ae(new qs(t)),Il(Qi(e))]),a([Qi(e)?y("Saving..."):y("Save Article")]))]))]))])}function Se(e,t){return Ki(a([Ct("article-title-"+t),h("text-3xl text-pink-700 font-light"),h("article-title")]),a([y(e)]))}function Vs(e,t){return v(a([Ct("article-subtitle-"+t),h("text-md text-zinc-500 font-light italic"),h("article-subtitle")]),a([y(e)]))}function nc(e,t){return tt(a([Ct("article-lead-"+t),h("font-bold pt-8"),h("article-leading")]),a([y(e)]))}function ze(e){return tt(a([h("pt-8")]),a([y(e)]))}function Dd(e,t){let n;t instanceof xe?n=ht(e,p=>p.published_at instanceof _):n=e;let r=n,i,l=Cn(r,(c,p)=>{let f=c.published_at,$=p.published_at;if(f instanceof m&&$ instanceof m)return wr(c.slug,p.slug);if(f instanceof m&&$ instanceof _)return new J;if(f instanceof _&&$ instanceof m)return new K;{let g=f[0],b=$[0];return Ol(b,g)}});i=N(l,c=>{{let p=c.slug,f=c.tags,$=c.title,g=c.subtitle,b=c.leading,j,L=new yt(p);j=Gt(L);let q=j;return Gl(a([h("mt-14")]),a([Nt(a([h("group block border-l border-zinc-700 pl-4 hover:border-pink-700 transition-colors duration-25"),Pt(ce(q)),ou(new js(c)),ae(new Vt(q))]),a([v(a([h("flex justify-between gap-4")]),a([Zn(a([Ct("article-title-"+p),h("article-title"),h("text-xl text-pink-700 font-light")]),a([y($)])),v(a([h("flex flex-col items-end")]),a([Qu(c),Xu(c.author)]))])),Vs(g,p),ze(b),v(a([h("flex justify-end mt-2")]),a([ec(f)]))]))]))}});let o=i,u=a([v(a([h("flex justify-between items-center mb-4")]),a([Se("Articles","articles"),t instanceof tr?Ae(a([h("text-gray-500 pe-4 text-underline pt-2 hover:text-teal-300 hover:border-teal-300 border-t border-zinc-700 border-e"),ae(new Cs)]),a([y("New")])):wt()]))]);return re(u,o)}function Fd(e,t){return a([Se("Article not found",t),ze("The article you are looking for does not exist.")])}function Ud(e,t){if(e instanceof M)return a([Se("Article not found",t),ze("The article you are looking for does not exist.")]);if(e instanceof xn)return a([Se("Article not found",t),ze("The article you are looking for might not exist yet. Please check back later.")]);if(e instanceof We){let n=e[0];return a([Se("There was an error loading the article",t),ze(ms(n))])}else return e instanceof se?a([Se("Loading article",t),ze("Loading article...")]):a([Se("Loading article",t),ze("Loading article...")])}function Wd(){return a([Se("About","about"),ze(`I'm a software developer and a writer. I'm also a father and a husband. 
      I'm also a software developer and a writer. I'm also a father and a 
      husband. I'm also a software developer and a writer. I'm also a father 
      and a husband. I'm also a software developer and a writer. I'm also a 
      father and a husband.`),ze(`If you enjoy these glimpses into my mind, feel free to come back
       semi-regularly. But not too regularly, you creep.`)])}function Hd(e){return a([Se("404 - Page Not Found","not-found"),Vs("The page you're looking for doesn't exist.","not-found"),ze("The page at "+ce(e)+" could not be found.")])}function En(e){return tt(a([h("pt-8 text-orange-500")]),a([y(e)]))}function rc(e,t){let n,r=e.content;if(r instanceof te)n=a([En("content not initialized")]);else if(r instanceof se)n=a([En("loading")]);else if(r instanceof M){let s=r[0];n=ys(s)}else if(r instanceof xn){let s=r[0];n=ys(s)}else{let s=r[0];n=a([En(ms(s))])}let i=n;return a([Gl(a([h("with-transition")]),w(v(a([h("flex flex-col justify-between")]),a([tc(e,t),v(a([h("flex gap-2 justify-between")]),a([v(a([h("flex flex-col justify-between")]),a([Se(e.title,e.slug),Vs(e.subtitle,e.slug)])),v(a([h("flex flex-col items-end")]),a([Qu(e),Xu(e.author)]))])),v(a([h("flex justify-between mt-2")]),a([ec(e.tags)]))])),w(nc(e.leading,e.slug),i)))])}function Gd(e,t){let n=t.draft;if(n instanceof m)return a([En("no draft..")]);{let r=n[0],i,s=Rr(r);s===""?i="Start typing in the editor to see the preview here...":i=s;let l=i,o=new F(t.id,Xi(r),t.revision,t.author,t.tags,t.published_at,es(r),ts(r),Gr(r),new M(l),new m),u=rc(o,new xe);return a([v(a([h("lg:hidden mb-4 flex justify-center")]),a([Ae(a([h("px-4 py-2 bg-pink-700 text-white rounded-md hover:bg-pink-700 transition-colors duration-200"),ae(new Rs)]),a([e.edit_view_mode instanceof Kt?y("Show Preview"):y("Show Editor")]))])),v(a([mn(a([["grid gap-8 h-screen",!0],["grid-cols-2 lg:grid-cols-2",!0]]))]),a([v(a([mn(a([["space-y-4",!0],["lg:block",!0],["lg:col-span-1",!0],["col-span-2",E(e.edit_view_mode,new Kt)],["hidden",E(e.edit_view_mode,new oi)]]))]),Id(r,t)),v(a([mn(a([["max-w-screen-md mx-auto px-10 py-10 overflow-y-auto",!0],["lg:block",!0],["lg:col-span-1",!0],["col-span-2",E(e.edit_view_mode,new oi)],["hidden",E(e.edit_view_mode,new Kt)]]))]),u)])),Md()])}}function Rd(e,t){return Nt(a([Pt(ce(e)),h("text-pink-700 hover:underline cursor-pointer"),ae(new Vt(e))]),a([y(t)]))}function Jd(){let e=ie("/article/nats-all-the-way-down");if(!e.isOk())throw W("let_assert","jst_lustre",1135,"view_index","Pattern match failed, no pattern matched the value.",{value:e});let t=e[0];return a([Se("Welcome to jst.dev!","welcome"),Vs(`...or, A lession on overengineering for fun and.. 
      well just for fun.`,"welcome"),nc(`This site and it's underlying IT-infrastructure is the primary 
      place for me to experiment with technologies and topologies. I 
      also share some of my thoughts and learnings here.`,"welcome"),tt(a([h("mt-14")]),a([y(`This site and it's underlying IT-infrastructure is the primary 
        place for me to experiment with technologies and topologies. I 
        also share some of my thoughts and learnings here. Feel free to 
        check out my overview, `),Rd(t,"NATS all the way down ->")])),ze("It to is a work in progress and I mostly keep it here for my own reference."),ze(`I'm also a software developer and a writer. I'm also a father and a 
        husband. I'm also a software developer and a writer. I'm also a father 
        and a husband. I'm also a software developer and a writer. I'm also a 
        father and a husband. I'm also a software developer and a writer.`)])}function Kd(){return a([Se("Articles","articles"),ze("Loading articles...")])}function ic(e,t){return Nt(a([h(""),Pt(ce(e)),ae(new Vt(e))]),t)}function ur(e,t,n){return eu(a([mn(a([["border-transparent border-b-2 hover:border-pink-700 cursor-pointer",!0],["text-pink-700",Iu(e,t)]])),ae(new Vt(Gt(e)))]),a([ic(Gt(e),a([y(n)]))]))}function mo(e){return Qa(a([h("py-2 border-b bg-zinc-800 border-pink-700 font-mono relative")]),a([v(a([h("flex justify-between px-10 items-center max-w-screen-md mx-auto")]),a([v(a([]),a([ic($s(new bn),a([y("jst.dev")]))])),v(a([h("flex items-center space-x-8")]),a([Jl(a([h("hidden sm:flex space-x-8 pr-2")]),a([ur(new ct,e.route,"Articles"),ur(new kt,e.route,"About"),ur(new Lt,e.route,"Djot Demo")])),v(a([h("relative")]),a([Ae(a([h("p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 transition-colors"),ae(new As)]),a([iu(a([ee("fill","none"),ee("viewBox","0 0 24 24"),ee("stroke-width","1.5"),ee("stroke","currentColor"),h("w-6 h-6")]),a([lu(a([ee("stroke-linecap","round"),ee("stroke-linejoin","round"),ee("d","M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5")]))]))])),e.profile_menu_open?v(a([h("absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-zinc-700 ring-1 ring-black ring-opacity-5 z-50")]),a([v(a([h("py-1")]),a([Jl(a([h("sm:hidden flex flex-col gap-2 px-4")]),a([ur(new ct,e.route,"Articles"),ur(new kt,e.route,"About"),ur(new Lt,e.route,"Djot Demo")])),Ae(a([h("block w-full text-left px-4 py-2 text-sm text-zinc-200 hover:bg-green-800 transition-colors cursor-pointe"),mn(a([["hidden",!E(e.session,new xe)]])),ae(new Ds("johan-st","password"))]),a([y("Login")])),Ae(a([h("block w-full text-left px-4 py-2 text-sm text-zinc-200 hover:bg-orange-800 transition-colors cursor-pointe"),mn(a([["hidden",E(e.session,new xe)]])),ae(new Us)]),a([y("Logout")])),Ae(a([h("block w-full text-left px-4 py-2 text-sm text-zinc-200 hover:bg-teal-800 transition-colors cursor-pointe"),ae(new Hs)]),a([y("Check")]))]))])):v(a([]),a([]))]))]))]))]))}function Vd(e){let t;e===""?t=a([v(a([h("text-zinc-500 italic text-center mt-8")]),a([y("Start typing in the editor to see the preview here...")]))]):t=ys(e);let n=t;return a([Se("Djot Demo","djot-demo"),v(a([h("grid grid-cols-1 lg:grid-cols-2 gap-6")]),a([Rl(a([h("space-y-4")]),a([v(a([h("flex items-center justify-between")]),a([Ir(a([h("text-xl text-pink-700 font-light")]),a([y("Editor")])),v(a([h("text-xs text-zinc-500")]),a([y("Live preview updates as you type")]))])),v(a([h("relative")]),a([Yi(a([h("w-full h-[400px] lg:h-[600px] bg-zinc-800 border border-zinc-600 rounded-lg p-4 font-mono text-sm text-zinc-100 resize-none focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"),qi(`# Start typing your article content here...

## Headings

- Lists
- Work too

**Bold** and *italic* text

[Link text](url)`),Vn(e),Qn(r=>new Gs(r)),ee("spellcheck","false")]),e),v(a([h("absolute bottom-2 right-2 text-xs text-zinc-500 bg-zinc-800 px-2 py-1 rounded")]),a([y((()=>{let r=sn(e);return ol(r)})()),y(" chars")]))]))])),Rl(a([h("space-y-4")]),a([v(a([h("flex items-center justify-between")]),a([Ir(a([h("text-xl text-pink-700 font-light")]),a([y("Preview")])),v(a([h("text-xs text-zinc-500")]),a([y("Rendered output")]))])),v(a([h("w-full h-[400px] lg:h-[600px] bg-zinc-900 border border-zinc-600 rounded-lg p-6 overflow-y-auto prose prose-invert prose-pink max-w-none")]),n)]))])),v(a([h("mt-8 p-4 bg-zinc-800 rounded-lg border border-zinc-700")]),a([Zn(a([h("text-lg text-pink-700 font-light")]),a([y("Quick Reference")])),tt(a([h("text-zinc-300")]),a([Dr(a([]),a([y("Note: ")])),y("The djot implementation is a work in progress. Not all features are supported yet.")])),tt(a([h("mb-6")]),a([y("See the "),Nt(a([Pt("https://htmlpreview.github.io/?https://github.com/jgm/djot/blob/master/doc/syntax.html"),h("text-zinc-300 underline")]),a([y("djot syntax documentation")])),y(" for more details.")])),v(a([h("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm")]),a([v(a([]),a([he(a([h("text-pink-700 font-medium mb-2")]),a([y("Headings")])),pe(a([h("text-zinc-300")]),a([$e(a([h("text-zinc-300")]),a([y(`# H1
## H2
### H3`)]))]))])),v(a([]),a([he(a([h("text-pink-700 font-medium mb-2")]),a([y("Text")])),pe(a([h("text-zinc-300")]),a([$e(a([h("text-zinc-300")]),a([y("_italic_\n*bold*\n`code`")]))]))])),v(a([]),a([he(a([h("text-pink-700 font-medium mb-2")]),a([y("Lists")])),pe(a([h("text-zinc-300")]),a([$e(a([h("text-zinc-300")]),a([y(`- item 1
- item 2

  - nested`)]))]))])),v(a([]),a([he(a([h("text-pink-700 font-medium mb-2")]),a([y("Links")])),pe(a([h("text-zinc-300")]),a([$e(a([h("text-zinc-300")]),a([y(`[text](url)
[text](url){title="tooltip"}`)]))]))])),v(a([]),a([he(a([h("text-pink-700 font-medium mb-2")]),a([y("Code Blocks")])),pe(a([h("text-zinc-300")]),a([$e(a([h("text-zinc-300")]),a([y("```\ncode here\n```")]))]))])),v(a([]),a([he(a([h("text-pink-700 font-medium mb-2")]),a([y("Blockquotes")])),pe(a([h("text-zinc-300")]),a([$e(a([h("text-zinc-300")]),a([y("> quoted text")]))]))]))]))]))])}function Yd(e){let t=Nd(e),n;if(t instanceof bn)n=Jd();else if(t instanceof yn){let l=t.articles,o=t.session;n=Dd(l,o)}else if(t instanceof Ut)n=Kd();else if(t instanceof bt){let l=t.article,o=t.session;n=rc(l,o)}else if(t instanceof ut){let l=t.article;n=Gd(e,l)}else if(t instanceof ue){let l=t.error;if(l instanceof Ln){let o=l.slug;n=Ud(e.articles,o)}else if(l instanceof vn){let o=l.id;n=Fd(e.articles,o)}else if(l instanceof Wt){let o=l.error;n=a([En(ms(o))])}else if(l instanceof An){let o=l.attempted_action;n=a([En("Authentication required: "+o)])}else{let o=l.msg;n=a([En(o)])}}else if(t instanceof ir)n=Wd();else if(t instanceof kn){let l=t.content;n=Vd(l)}else{let l=t.requested_uri;n=Hd(l)}let r=n,i;return t instanceof kn?i=l=>v(a([h("min-h-screen bg-zinc-900 text-zinc-100 selection:bg-pink-700 selection:text-zinc-100 ")]),a([mo(e),Vi(a([h("mx-auto px-10 py-10")]),l)])):t instanceof ut?i=l=>v(a([h("min-h-screen bg-zinc-900 text-zinc-100 selection:bg-pink-700 selection:text-zinc-100 ")]),a([mo(e),Vi(a([h("mx-auto px-10 py-10")]),l)])):i=l=>v(a([h("min-h-screen bg-zinc-900 text-zinc-100 selection:bg-pink-700 selection:text-zinc-100 ")]),a([mo(e),Vi(a([h("max-w-screen-md mx-auto px-10 py-10")]),l)])),i(r)}var Zd=`# Quick Start for Markdown users

Djot is a lot like Markdown.  Here are some of the main
differences you need to be aware of in making the transition.

#### Blank lines

In djot you need blank lines around block-level
elements.  Hence, instead of

\`\`\`
This is some text.
## My next heading
\`\`\`

you must write

\`\`\`
This is some text.

## My next heading
\`\`\`

Instead of

\`\`\`\`
This is some text.
\`\`\` lua
local foo = bar.baz or false
\`\`\`
\`\`\`\`

you must write

\`\`\`\`
This is some text.

\`\`\` lua
local foo = bar.baz or false
\`\`\`
\`\`\`\`

Instead of

\`\`\`
Text.
> a blockquote.
\`\`\`

you must write

\`\`\`
Text.

> a blockquote.
\`\`\`

And instead of

\`\`\`
Before a thematic break.
****
After a thematic break.
\`\`\`

you must write

\`\`\`
Before a thematic break.

****

After a thematic break.
\`\`\`

#### Lists

A special case of this is that you always need a blank line before a
list, even if it's a sublist. So, while in Markdown you can write

\`\`\`
- one
  - two
  - three
\`\`\`

in djot you must write

\`\`\`
- one

  - two
  - three
\`\`\`

#### Headings

There are no Setext-style (underlined) headings, only ATX- (\`#\`) style.

Heading content can extend over several lines, which may or
may not be preceded by \`#\` characters:

\`\`\`
## This is a single
## level-2 heading

### This is a single
level-3 heading
\`\`\`

As a result, headings must always have a blank line following.

Trailing \`#\` characters in a heading are read as part of the
content and not ignored.

#### Code blocks

There are no indented code blocks, only fenced with \` \`\`\` \`.

#### Block quotes

You need a space after the \`>\` character, unless it is followed
by a newline.

#### Emphasis

Use single \`_\` delimiters for regular emphasis and
single \`*\` delimiters for strong emphasis.

#### Links

There is no special syntax for adding a title to a link, as
in Markdown:

\`\`\`
[link](http://example.com "Go to my website")
\`\`\`

If you want a title attribute on a link, use the general attribute syntax:

\`\`\`
[link](http://example.com){title="Go to my website"}
\`\`\`

#### Hard line breaks

In Markdown you can create a hard line break by ending a line
with two spaces. In djot you use a backslash before the newline.

\`\`\`
A new\\
line.
\`\`\`

#### Raw HTML

In Markdown you can just insert raw HTML "as is."  In djot,
you must mark it as raw HTML:

\`\`\`\`
This is raw HTML: \`<a id="foo">\`{=html}.

Here is a raw HTML block:

\`\`\` =html
<table>
<tr><td>foo</td></tr>
</table>
\`\`\`
\`\`\`\`

#### Tables

Pipe tables always require a pipe character at the start and end
of each line, unlike in many Markdown implementations.  So, this
is not a table:

\`\`\`
a|b
-|-
1|2
\`\`\`

but this is:

\`\`\`
| a | b |
| - | - |
| 1 | 2 |
\`\`\`


#### That's enough to get started!

Here we have just focused on things that might trip up
Markdown users.  If you keep these in mind, you should be
able to start using djot without looking at any more
documentation.

However, we haven't discussed any of the things
you can do in djot but not Markdown. See the [syntax
description](https://htmlpreview.github.io/?https://github.com/jgm/djot/blob/master/doc/syntax.html)
to find about the new constructions that are available.
`;function Qd(e){let t=Zl();if(!t.isOk())throw W("let_assert","jst_lustre",62,"init","Pattern match failed, no pattern matched the value.",{value:t});let n=t[0],r=new T(n,_o(n),new xe,new te,Zd,new Kt,!1),i=fu(u=>{let c=u;return new vs(c)}),s=Zu(r,n),l=s[0],o=s[1];return[l,Kn(a([i,o,uo(u=>new ai(u),r.base_uri)]))]}function sc(){let e=Ja(Qd,Pd,Yd),t=Ka(e,"#app",void 0);if(!t.isOk())throw W("let_assert","jst_lustre",36,"main","Pattern match failed, no pattern matched the value.",{value:t})}function ne(e,t,n){let r="\x1B[90m",i="\x1B[39m",s=`${t}:${n}`,l=vt(e);if(globalThis.process?.stderr?.write){let o=`${r}${s}${i}
${l}
`;process.stderr.write(o)}else if(globalThis.Deno){let o=`${r}${s}${i}
${l}
`;globalThis.Deno.stderr.writeSync(new TextEncoder().encode(o))}else{let o=`${s}
${l}`;globalThis.console.log(o)}return e}function Xd(e){let t='"';for(let n=0;n<e.length;n++){let r=e[n];r==`
`?t+="\\n":r=="\r"?t+="\\r":r=="	"?t+="\\t":r=="\f"?t+="\\f":r=="\\"?t+="\\\\":r=='"'?t+='\\"':r<" "||r>"~"&&r<"\xA0"?t+="\\u{"+r.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=r}return t+='"',t}function e_(e){let t="dict.from_list([",n=!0,r=[];return e.forEach((i,s)=>{r.push([s,i])}),r.sort(),r.forEach(([i,s])=>{n||(t=t+", "),t=t+"#("+vt(i)+", "+vt(s)+")",n=!1}),t+"])"}function t_(e){let t=globalThis.Object.keys(e).map(n=>{let r=vt(e[n]);return isNaN(parseInt(n))?`${n}: ${r}`:r}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function n_(e){let t=Object.getPrototypeOf(e)?.constructor?.name||"Object",n=[];for(let s of Object.keys(e))n.push(`${vt(s)}: ${vt(e[s])}`);let r=n.length?" "+n.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${r}})`}function vt(e){let t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return Xd(e);if(t==="bigint"||t==="number")return e.toString();if(globalThis.Array.isArray(e))return`#(${e.map(vt).join(", ")})`;if(e instanceof U)return`[${e.toArray().map(vt).join(", ")}]`;if(e instanceof At)return`//utfcodepoint(${String.fromCodePoint(e.value)})`;if(e instanceof be)return r_(e);if(e instanceof d)return t_(e);if(i_(e))return e_(e);if(e instanceof Set)return`//js(Set(${[...e].map(vt).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){let n=[];for(let r of Array(e.length).keys())n.push(String.fromCharCode(r+97));return`//fn(${n.join(", ")}) { ... }`}return n_(e)}function r_(e){let t=e.bitOffset+8*Math.trunc(e.bitSize/8),n=Zt(e,e.bitOffset,t),r=e.bitSize%8;if(r>0){let i=ui(e,t,e.bitSize,!1,!1),s=Array.from(n.rawBuffer),l=`${i}:size(${r})`;return s.length===0?`<<${l}>>`:`<<${Array.from(n.rawBuffer).join(", ")}, ${l}>>`}else return`<<${Array.from(n.rawBuffer).join(", ")}>>`}function i_(e){try{return e instanceof ge}catch{return!1}}sc();
