var d=class{withFields(t){let r=Object.keys(this).map(n=>n in t?t[n]:this[n]);return new this.constructor(...r)}},Q=class{static fromArray(t,r){let n=r||new Pn;for(let i=t.length-1;i>=0;--i)n=new hr(t[i],n);return n}[Symbol.iterator](){return new Vo(this)}toArray(){return[...this]}atLeastLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return r!==void 0}hasLength(t){let r=this;for(;t-- >0&&r;)r=r.tail;return t===-1&&r instanceof Pn}countLength(){let t=this,r=0;for(;t;)t=t.tail,r++;return r-1}};function x(e,t){return new hr(e,t)}function l(e,t){return Q.fromArray(e,t)}var Vo=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof Pn)return{done:!0};{let{head:t,tail:r}=this.#e;return this.#e=r,{value:t,done:!1}}}},Pn=class extends Q{},hr=class extends Q{constructor(t,r){super(),this.head=t,this.tail=r}},Be=class{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,r,n){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=r??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=n??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return Bn(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;let r=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<r;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;let n=this.bitSize%8;if(n){let i=8-n;if(this.rawBuffer[r]>>i!==t.rawBuffer[r]>>i)return!1}}else{for(let i=0;i<r;i++){let s=Bn(this.rawBuffer,this.bitOffset,i),o=Bn(t.rawBuffer,t.bitOffset,i);if(s!==o)return!1}let n=this.bitSize%8;if(n){let i=Bn(this.rawBuffer,this.bitOffset,r),s=Bn(t.rawBuffer,t.bitOffset,r),o=8-n;if(i>>o!==s>>o)return!1}}return!0}get buffer(){if(ka("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(ka("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}};function Bn(e,t,r){if(t===0)return e[r]??0;{let n=e[r]<<t&255,i=e[r+1]>>8-t;return n|i}}var Rt=class{constructor(t){this.value=t}},ya={};function ka(e,t){ya[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),ya[e]=!0)}function mr(e,t,r){if(r??=e.bitSize,La(e,t,r),t===r)return new Be(new Uint8Array);if(t===0&&r===e.bitSize)return e;t+=e.bitOffset,r+=e.bitOffset;let n=Math.trunc(t/8),s=Math.trunc((r+7)/8)-n,o;return n===0&&s===e.rawBuffer.byteLength?o=e.rawBuffer:o=new Uint8Array(e.rawBuffer.buffer,e.rawBuffer.byteOffset+n,s),new Be(o,r-t,t%8)}function Gi(e,t,r,n,i){if(La(e,t,r),t===r)return 0;t+=e.bitOffset,r+=e.bitOffset;let s=t%8===0,o=r%8===0;if(s&&o)return Ef(e,t/8,r/8,n,i);let a=r-t,u=Math.trunc(t/8),c=Math.trunc((r-1)/8);if(u==c){let _=255>>t%8,p=(8-r%8)%8,w=(e.rawBuffer[u]&_)>>p;if(i){let b=2**(a-1);w>=b&&(w-=b*2)}return w}return a<=53?Cf(e.rawBuffer,t,r,n,i):Bf(e.rawBuffer,t,r,n,i)}function Ef(e,t,r,n,i){return r-t<=6?Tf(e.rawBuffer,t,r,n,i):qf(e.rawBuffer,t,r,n,i)}function Tf(e,t,r,n,i){let s=r-t,o=0;if(n)for(let a=t;a<r;a++)o*=256,o+=e[a];else for(let a=r-1;a>=t;a--)o*=256,o+=e[a];if(i){let a=2**(s*8-1);o>=a&&(o-=a*2)}return o}function qf(e,t,r,n,i){let s=r-t,o=0n;if(n)for(let a=t;a<r;a++)o*=256n,o+=BigInt(e[a]);else for(let a=r-1;a>=t;a--)o*=256n,o+=BigInt(e[a]);if(i){let a=1n<<BigInt(s*8-1);o>=a&&(o-=a*2n)}return Number(o)}function Cf(e,t,r,n,i){let s=t%8===0,o=r-t,a=Math.trunc(t/8),u=0;if(n){if(!s){let c=8-t%8;u=e[a++]&(1<<c)-1,o-=c}for(;o>=8;)u*=256,u+=e[a++],o-=8;o>0&&(u*=2**o,u+=e[a]>>8-o)}else if(s){let c=r-t,_=1;for(;c>=8;)u+=e[a++]*_,_*=256,c-=8;u+=(e[a]>>8-c)*_}else{let c=t%8,_=8-c,p=r-t,w=1;for(;p>=8;){let b=e[a]<<c|e[a+1]>>_;u+=(b&255)*w,w*=256,p-=8,a++}if(p>0){let b=p-Math.max(0,p-_),v=(e[a]&(1<<_)-1)>>_-b;p-=b,p>0&&(v*=2**p,v+=e[a+1]>>8-p),u+=v*w}}if(i){let c=2**(r-t-1);u>=c&&(u-=c*2)}return u}function Bf(e,t,r,n,i){let s=t%8===0,o=r-t,a=Math.trunc(t/8),u=0n;if(n){if(!s){let c=8-t%8;u=BigInt(e[a++]&(1<<c)-1),o-=c}for(;o>=8;)u*=256n,u+=BigInt(e[a++]),o-=8;o>0&&(u<<=BigInt(o),u+=BigInt(e[a]>>8-o))}else if(s){let c=r-t,_=0n;for(;c>=8;)u+=BigInt(e[a++])<<_,_+=8n,c-=8;u+=BigInt(e[a]>>8-c)<<_}else{let c=t%8,_=8-c,p=r-t,w=0n;for(;p>=8;){let b=e[a]<<c|e[a+1]>>_;u+=BigInt(b&255)<<w,w+=8n,p-=8,a++}if(p>0){let b=p-Math.max(0,p-_),v=(e[a]&(1<<_)-1)>>_-b;p-=b,p>0&&(v<<=p,v+=e[a+1]>>8-p),u+=BigInt(v)<<w}}if(i){let c=2n**BigInt(r-t-1);u>=c&&(u-=c*2n)}return Number(u)}function La(e,t,r){if(t<0||t>e.bitSize||r<t||r>e.bitSize){let n=`Invalid bit array slice: start = ${t}, end = ${r}, bit size = ${e.bitSize}`;throw new globalThis.Error(n)}}var Zr=class e extends d{static isResult(t){return t instanceof e}},y=class extends Zr{constructor(t){super(),this[0]=t}isOk(){return!0}},k=class extends Zr{constructor(t){super(),this[0]=t}isOk(){return!1}};function T(e,t){let r=[e,t];for(;r.length;){let n=r.pop(),i=r.pop();if(n===i)continue;if(!va(n)||!va(i)||!Ff(n,i)||Nf(n,i)||If(n,i)||Mf(n,i)||Df(n,i)||Uf(n,i)||Rf(n,i))return!1;let o=Object.getPrototypeOf(n);if(o!==null&&typeof o.equals=="function")try{if(n.equals(i))continue;return!1}catch{}let[a,u]=Pf(n);for(let c of a(n))r.push(u(n,c),u(i,c))}return!0}function Pf(e){if(e instanceof Map)return[t=>t.keys(),(t,r)=>t.get(r)];{let t=e instanceof globalThis.Error?["message"]:[];return[r=>[...t,...Object.keys(r)],(r,n)=>r[n]]}}function Nf(e,t){return e instanceof Date&&(e>t||e<t)}function If(e,t){return!(e instanceof Be)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((r,n)=>r===t[n]))}function Mf(e,t){return Array.isArray(e)&&e.length!==t.length}function Df(e,t){return e instanceof Map&&e.size!==t.size}function Uf(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(r=>!t.has(r)))}function Rf(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function va(e){return typeof e=="object"&&e!==null}function Ff(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(n=>e instanceof n)?!1:e.constructor===t.constructor}function wr(e,t){return t===0?0:e%t}function gr(e,t){return Math.trunc(Yo(e,t))}function Yo(e,t){return t===0?0:e/t}function J(e,t,r,n,i,s){let o=new globalThis.Error(i);o.gleam_error=e,o.module=t,o.line=r,o.function=n,o.fn=n;for(let a in s)o[a]=s[a];return o}var $=class extends d{constructor(t){super(),this[0]=t}},m=class extends d{};function Hi(e,t){if(e instanceof $){let r=e[0];return new y(r)}else return new k(t)}function Nn(e,t){if(e instanceof $){let r=e[0];return new $(t(r))}else return new m}function Aa(e){return e instanceof $?e[0]:new m}function ja(e,t){if(e instanceof $){let r=e[0];return t(r)}else return new m}function ut(e,t,r){return e?t:r()}var X=class extends d{},ae=class extends d{},se=class extends d{};function Pe(e,t,r){return Ea(t,r,e)}function Gf(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=x(i,n)}}}function Hf(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return Gf(n,l([]));{let i=r.head[0];e=r.tail,t=x(i,n)}}}function Zo(e){return Hf(xr(e),l([]))}function Qo(e,t){return Sa(t,e)}function Xo(e,t,r){let n=rt(e,t);if(n.isOk()){let i=n[0];return Pe(e,t,r(new $(i)))}else return Pe(e,t,r(new m))}function Ta(e,t){let r=e[0],n=e[1];return[r,t(n)]}var ne=class extends d{},pt=class extends d{};function Yf(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1))e=r.tail,t=n+1;else return n}}function el(e){return Yf(e,0)}function Xr(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=x(i,n)}}}function C(e){return Xr(e,l([]))}function Zf(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return C(s);{let o=n.head,a=n.tail,u;i(o)?u=x(o,s):u=s;let _=u;e=a,t=i,r=_}}}function dt(e,t){return Zf(e,t,l([]))}function Qf(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return C(s);{let o=n.head,a=n.tail,u,c=i(o);if(c.isOk()){let p=c[0];u=x(p,s)}else u=s;let _=u;e=a,t=i,r=_}}}function br(e,t){return Qf(e,t,l([]))}function Xf(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return C(s);{let o=n.head;e=n.tail,t=i,r=x(i(o),s)}}}function M(e,t){return Xf(e,t,l([]))}function ep(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head;e=r.tail,t=x(i,n)}}}function ee(e,t){return ep(C(e),t)}function Oe(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return i;{let o=n.head;e=n.tail,t=s(i,o),r=s}}}function tl(e,t,r){let n=Oe(e,[t,l([])],(i,s)=>{let o=i[0],a=i[1],u=r(o,s),c=u[0],_=u[1];return[c,x(_,a)]});return Ta(n,C)}function tp(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(i.hasLength(0))return s;{let u=i.head;e=i.tail,t=o(s,u,a),r=o,n=a+1}}}function rl(e,t,r){return tp(e,t,r,0)}function nt(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return new k(void 0);{let i=r.head,s=r.tail;if(n(i))return new y(i);e=s,t=n}}}function qa(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return!0;{let i=r.head,s=r.tail;if(n(i))e=s,t=n;else return!1}}}function In(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return!1;{let i=r.head,s=r.tail;if(n(i))return!0;e=s,t=n}}}function rp(e,t,r,n,i,s){for(;;){let o=e,a=t,u=r,c=n,_=i,p=s,w=x(_,u);if(o.hasLength(0))return c instanceof ne?x(C(w),p):x(w,p);{let b=o.head,v=o.tail,B=a(_,b);if(B instanceof se&&c instanceof pt)e=v,t=a,r=w,n=c,i=b,s=p;else if(B instanceof X&&c instanceof ne)e=v,t=a,r=w,n=c,i=b,s=p;else if(B instanceof ae&&c instanceof ne)e=v,t=a,r=w,n=c,i=b,s=p;else if(B instanceof se&&c instanceof ne){let j;c instanceof ne?j=x(C(w),p):j=x(w,p);let K=j;if(v.hasLength(0))return x(l([b]),K);{let W=v.head,E=v.tail,q,O=a(b,W);O instanceof X?q=new ne:O instanceof ae?q=new ne:q=new pt;let te=q;e=E,t=a,r=l([b]),n=te,i=W,s=K}}else if(B instanceof X&&c instanceof pt){let j;c instanceof ne?j=x(C(w),p):j=x(w,p);let K=j;if(v.hasLength(0))return x(l([b]),K);{let W=v.head,E=v.tail,q,O=a(b,W);O instanceof X?q=new ne:O instanceof ae?q=new ne:q=new pt;let te=q;e=E,t=a,r=l([b]),n=te,i=W,s=K}}else{let j;c instanceof ne?j=x(C(w),p):j=x(w,p);let K=j;if(v.hasLength(0))return x(l([b]),K);{let W=v.head,E=v.tail,q,O=a(b,W);O instanceof X?q=new ne:O instanceof ae?q=new ne:q=new pt;let te=q;e=E,t=a,r=l([b]),n=te,i=W,s=K}}}}}function np(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(i.hasLength(0))return Xr(s,a);if(s.hasLength(0))return Xr(i,a);{let u=i.head,c=i.tail,_=s.head,p=s.tail,w=o(u,_);w instanceof X?(e=c,t=s,r=o,n=x(u,a)):w instanceof se?(e=i,t=p,r=o,n=x(_,a)):(e=i,t=p,r=o,n=x(_,a))}}}function ip(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return C(s);if(n.hasLength(1)){let o=n.head;return C(x(C(o),s))}else{let o=n.head,a=n.tail.head,u=n.tail.tail,c=np(o,a,i,l([]));e=u,t=i,r=x(c,s)}}}function sp(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(i.hasLength(0))return Xr(s,a);if(s.hasLength(0))return Xr(i,a);{let u=i.head,c=i.tail,_=s.head,p=s.tail,w=o(u,_);w instanceof X?(e=i,t=p,r=o,n=x(_,a)):w instanceof se?(e=c,t=s,r=o,n=x(u,a)):(e=c,t=s,r=o,n=x(u,a))}}}function op(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return C(s);if(n.hasLength(1)){let o=n.head;return C(x(C(o),s))}else{let o=n.head,a=n.tail.head,u=n.tail.tail,c=sp(o,a,i,l([]));e=u,t=i,r=x(c,s)}}}function lp(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return l([]);if(n.hasLength(1)&&i instanceof ne)return n.head;if(n.hasLength(1)&&i instanceof pt){let o=n.head;return C(o)}else i instanceof ne?(e=ip(n,s,l([])),t=new pt,r=s):(e=op(n,s,l([])),t=new ne,r=s)}}function en(e,t){if(e.hasLength(0))return l([]);if(e.hasLength(1)){let r=e.head;return l([r])}else{let r=e.head,n=e.tail.head,i=e.tail.tail,s,o=t(r,n);o instanceof X?s=new ne:o instanceof ae?s=new ne:s=new pt;let a=s,u=rp(i,t,l([r]),a,n,l([]));return lp(u,new ne,t)}}function ap(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(i.atLeastLength(1)&&T(i.head[0],s)){let u=i.head[0],c=i.tail;return Xr(a,x([u,o],c))}else if(i.atLeastLength(1)){let u=i.head;e=i.tail,t=s,r=o,n=x(u,a)}else return C(x([s,o],a))}}function nl(e,t,r){return ap(e,t,r,l([]))}function up(e,t){if(e.hasLength(0))return new k(void 0);{let r=e.head,n=e.tail;return new y(Oe(n,r,t))}}function Ca(e){return up(e,(t,r)=>r)}function Ji(e,t,r){let i=e,s=sl(i,t,r);return s}function Dn(e,t){return e===t?new ae:Da(e,t)?new X:new se}function Ma(e,t,r){if(r<0)return"";if(t<0){let s=Et(e)+t;return s<0?"":ll(e,s,r)}else return ll(e,t,r)}function $p(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1)){let i=r.head;e=r.tail,t=n+i}else return n}}function Ft(e){return $p(e,"")}function hp(e,t,r){for(;;){let n=e,i=t,s=r;if(i<=0)return s;e=n,t=i-1,r=s+n}}function Un(e,t){return hp(e,t,"")}function mp(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return s;{let o=n.head;e=n.tail,t=i,r=s+i+o}}}function He(e,t){if(e.hasLength(0))return"";{let r=e.head,n=e.tail;return mp(n,t,r)}}function wp(e,t){let r=Et(t),n=gr(e,r),i=wr(e,r);return Un(t,n)+Ma(t,0,i)}function Wt(e,t,r){let n=Et(e),i=t-n;return i<=0?e:wp(i,r)+e}function rn(e){let r=Qi(e);return Xi(r)}function Ki(e,t){for(;;){let r=e,n=t;if(n>0){let s=Vi(r);if(s.isOk())e=s[0][1],t=n-1;else return r}else return r}}function St(e,t){if(t==="")return tn(e);{let n=e,i=ol(n,t);return M(i,ue)}}function al(e){let t=_t(e);return t}function Wa(e){return!!e.isOk()}function Gt(e,t){if(e.isOk()){let r=e[0];return new y(t(r))}else{let r=e[0];return new k(r)}}function es(e,t){if(e.isOk()){let r=e[0];return new y(r)}else{let r=e[0];return new k(t(r))}}function Rn(e,t){if(e.isOk()){let r=e[0];return t(r)}else{let r=e[0];return new k(r)}}function Je(e,t){return Rn(e,t)}var vr=class extends d{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}};function kp(e,t){return es(e,r=>M(r,t))}function Ha(e){return dl(e)}function Ja(e){return t=>{if(e.hasLength(0))return new k(l([new vr("another type",Ie(t),l([]))]));{let r=e.head,n=e.tail,i=r(t);if(i.isOk()){let s=i[0];return new y(s)}else return Ja(n)(t)}}}function vp(e,t){let r=t,n=Ja(l([dl,u=>Gt(Ka(u),D)])),i,s=n(r);if(s.isOk())i=s[0];else{let u=l(["<",Ie(r),">"]),c=yr(u);i=c}let o=i,a=e;return new vr(a.expected,a.found,x(o,e.path))}function pl(e,t){return r=>{let n=new vr("field","nothing",l([]));return Rn(Va(r,e),i=>{let o=Hi(i,l([n])),a=Rn(o,t);return kp(a,u=>vp(u,e))})}}var Ya=new WeakMap,_l=new DataView(new ArrayBuffer(8)),$l=0;function hl(e){let t=Ya.get(e);if(t!==void 0)return t;let r=$l++;return $l===2147483647&&($l=0),Ya.set(e,r),r}function ml(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function gl(e){let t=0,r=e.length;for(let n=0;n<r;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}function Qa(e){_l.setFloat64(0,e);let t=_l.getInt32(0),r=_l.getInt32(4);return Math.imul(73244475,t>>16^t)^r}function Lp(e){return gl(e.toString())}function Ap(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let n=e.hashCode(e);if(typeof n=="number")return n}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return hl(e);if(e instanceof Date)return Qa(e.getTime());let r=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let n=0;n<e.length;n++)r=Math.imul(31,r)+Ve(e[n])|0;else if(e instanceof Set)e.forEach(n=>{r=r+Ve(n)|0});else if(e instanceof Map)e.forEach((n,i)=>{r=r+ml(Ve(n),Ve(i))|0});else{let n=Object.keys(e);for(let i=0;i<n.length;i++){let s=n[i],o=e[s];r=r+ml(Ve(o),gl(s))|0}}return r}function Ve(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return Qa(e);case"string":return gl(e);case"bigint":return Lp(e);case"object":return Ap(e);case"symbol":return hl(e);case"function":return hl(e);default:return 0}}var ht=5,xl=Math.pow(2,ht),jp=xl-1,zp=xl/2,Op=xl/4,ye=0,$t=1,Me=2,Ar=3,bl={type:Me,bitmap:0,array:[]};function Fn(e,t){return e>>>t&jp}function rs(e,t){return 1<<Fn(e,t)}function Sp(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function yl(e,t){return Sp(e&t-1)}function Ye(e,t,r){let n=e.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=e[s];return i[t]=r,i}function Ep(e,t,r){let n=e.length,i=new Array(n+1),s=0,o=0;for(;s<t;)i[o++]=e[s++];for(i[o++]=r;s<n;)i[o++]=e[s++];return i}function wl(e,t){let r=e.length,n=new Array(r-1),i=0,s=0;for(;i<t;)n[s++]=e[i++];for(++i;i<r;)n[s++]=e[i++];return n}function Xa(e,t,r,n,i,s){let o=Ve(t);if(o===n)return{type:Ar,hash:o,array:[{type:ye,k:t,v:r},{type:ye,k:i,v:s}]};let a={val:!1};return Wn(kl(bl,e,o,t,r,a),e,n,i,s,a)}function Wn(e,t,r,n,i,s){switch(e.type){case $t:return Tp(e,t,r,n,i,s);case Me:return kl(e,t,r,n,i,s);case Ar:return qp(e,t,r,n,i,s)}}function Tp(e,t,r,n,i,s){let o=Fn(r,t),a=e.array[o];if(a===void 0)return s.val=!0,{type:$t,size:e.size+1,array:Ye(e.array,o,{type:ye,k:n,v:i})};if(a.type===ye)return T(n,a.k)?i===a.v?e:{type:$t,size:e.size,array:Ye(e.array,o,{type:ye,k:n,v:i})}:(s.val=!0,{type:$t,size:e.size,array:Ye(e.array,o,Xa(t+ht,a.k,a.v,r,n,i))});let u=Wn(a,t+ht,r,n,i,s);return u===a?e:{type:$t,size:e.size,array:Ye(e.array,o,u)}}function kl(e,t,r,n,i,s){let o=rs(r,t),a=yl(e.bitmap,o);if((e.bitmap&o)!==0){let u=e.array[a];if(u.type!==ye){let _=Wn(u,t+ht,r,n,i,s);return _===u?e:{type:Me,bitmap:e.bitmap,array:Ye(e.array,a,_)}}let c=u.k;return T(n,c)?i===u.v?e:{type:Me,bitmap:e.bitmap,array:Ye(e.array,a,{type:ye,k:n,v:i})}:(s.val=!0,{type:Me,bitmap:e.bitmap,array:Ye(e.array,a,Xa(t+ht,c,u.v,r,n,i))})}else{let u=e.array.length;if(u>=zp){let c=new Array(32),_=Fn(r,t);c[_]=kl(bl,t+ht,r,n,i,s);let p=0,w=e.bitmap;for(let b=0;b<32;b++){if((w&1)!==0){let v=e.array[p++];c[b]=v}w=w>>>1}return{type:$t,size:u+1,array:c}}else{let c=Ep(e.array,a,{type:ye,k:n,v:i});return s.val=!0,{type:Me,bitmap:e.bitmap|o,array:c}}}}function qp(e,t,r,n,i,s){if(r===e.hash){let o=vl(e,n);if(o!==-1)return e.array[o].v===i?e:{type:Ar,hash:r,array:Ye(e.array,o,{type:ye,k:n,v:i})};let a=e.array.length;return s.val=!0,{type:Ar,hash:r,array:Ye(e.array,a,{type:ye,k:n,v:i})}}return Wn({type:Me,bitmap:rs(e.hash,t),array:[e]},t,r,n,i,s)}function vl(e,t){let r=e.array.length;for(let n=0;n<r;n++)if(T(t,e.array[n].k))return n;return-1}function ts(e,t,r,n){switch(e.type){case $t:return Cp(e,t,r,n);case Me:return Bp(e,t,r,n);case Ar:return Pp(e,n)}}function Cp(e,t,r,n){let i=Fn(r,t),s=e.array[i];if(s!==void 0){if(s.type!==ye)return ts(s,t+ht,r,n);if(T(n,s.k))return s}}function Bp(e,t,r,n){let i=rs(r,t);if((e.bitmap&i)===0)return;let s=yl(e.bitmap,i),o=e.array[s];if(o.type!==ye)return ts(o,t+ht,r,n);if(T(n,o.k))return o}function Pp(e,t){let r=vl(e,t);if(!(r<0))return e.array[r]}function Ll(e,t,r,n){switch(e.type){case $t:return Np(e,t,r,n);case Me:return Ip(e,t,r,n);case Ar:return Mp(e,n)}}function Np(e,t,r,n){let i=Fn(r,t),s=e.array[i];if(s===void 0)return e;let o;if(s.type===ye){if(!T(s.k,n))return e}else if(o=Ll(s,t+ht,r,n),o===s)return e;if(o===void 0){if(e.size<=Op){let a=e.array,u=new Array(e.size-1),c=0,_=0,p=0;for(;c<i;){let w=a[c];w!==void 0&&(u[_]=w,p|=1<<c,++_),++c}for(++c;c<a.length;){let w=a[c];w!==void 0&&(u[_]=w,p|=1<<c,++_),++c}return{type:Me,bitmap:p,array:u}}return{type:$t,size:e.size-1,array:Ye(e.array,i,o)}}return{type:$t,size:e.size,array:Ye(e.array,i,o)}}function Ip(e,t,r,n){let i=rs(r,t);if((e.bitmap&i)===0)return e;let s=yl(e.bitmap,i),o=e.array[s];if(o.type!==ye){let a=Ll(o,t+ht,r,n);return a===o?e:a!==void 0?{type:Me,bitmap:e.bitmap,array:Ye(e.array,s,a)}:e.bitmap===i?void 0:{type:Me,bitmap:e.bitmap^i,array:wl(e.array,s)}}return T(n,o.k)?e.bitmap===i?void 0:{type:Me,bitmap:e.bitmap^i,array:wl(e.array,s)}:e}function Mp(e,t){let r=vl(e,t);if(r<0)return e;if(e.array.length!==1)return{type:Ar,hash:e.hash,array:wl(e.array,r)}}function eu(e,t){if(e===void 0)return;let r=e.array,n=r.length;for(let i=0;i<n;i++){let s=r[i];if(s!==void 0){if(s.type===ye){t(s.v,s.k);continue}eu(s,t)}}}var Se=class e{static fromObject(t){let r=Object.keys(t),n=e.new();for(let i=0;i<r.length;i++){let s=r[i];n=n.set(s,t[s])}return n}static fromMap(t){let r=e.new();return t.forEach((n,i)=>{r=r.set(i,n)}),r}static new(){return new e(void 0,0)}constructor(t,r){this.root=t,this.size=r}get(t,r){if(this.root===void 0)return r;let n=ts(this.root,0,Ve(t),t);return n===void 0?r:n.v}set(t,r){let n={val:!1},i=this.root===void 0?bl:this.root,s=Wn(i,0,Ve(t),t,r,n);return s===this.root?this:new e(s,n.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let r=Ll(this.root,0,Ve(t),t);return r===this.root?this:r===void 0?e.new():new e(r,this.size-1)}has(t){return this.root===void 0?!1:ts(this.root,0,Ve(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((r,n)=>t.push([n,r])),t}forEach(t){eu(this.root,t)}hashCode(){let t=0;return this.forEach((r,n)=>{t=t+ml(Ve(r),Ve(n))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((r,n)=>{if(!T(t.get(n,!r),r))throw Za}),!0}catch(r){if(r===Za)return!1;throw r}}},Za=Symbol();var ou=void 0,ru={};function ue(e){return e}function D(e){return e.toString()}function Al(e){let t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{let r=t.indexOf("e");return r>=0?t.slice(0,r)+".0"+t.slice(r):t+".0"}}function sl(e,t,r){return typeof e.replaceAll<"u"?e.replaceAll(t,r):e.replace(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),r)}function Et(e){if(e==="")return 0;let t=ns(e);if(t){let r=0;for(let n of t)r++;return r}else return e.match(/./gsu).length}function tn(e){let t=ns(e);return t?Q.fromArray(Array.from(t).map(r=>r.segment)):Q.fromArray(e.match(/./gsu))}var nu;function ns(e){if(globalThis.Intl&&Intl.Segmenter)return nu||=new Intl.Segmenter,nu.segment(e)[Symbol.iterator]()}function Vi(e){let t,r=ns(e);return r?t=r.next().value?.segment:t=e.match(/./su)?.[0],t?new y([t,e.slice(t.length)]):new k(ou)}function jr(e){return[e.charCodeAt(0)|0,e.slice(1)]}function Ne(e){return e.toLowerCase()}function Da(e,t){return e<t}function ol(e,t){return Q.fromArray(e.split(t))}function yr(e){let t="";for(let r of e)t=t+r;return t}function ll(e,t,r){if(r<=0||t>=e.length)return"";let n=ns(e);if(n){for(;t-- >0;)n.next();let i="";for(;r-- >0;){let s=n.next().value;if(s===void 0)break;i+=s.segment}return i}else return e.match(/./gsu).slice(t,t+r).join("")}function _e(e,t,r){return e.slice(t,t+r)}function Yi(e,t){return e.indexOf(t)>=0}function kr(e,t){return e.startsWith(t)}function Zi(e,t){return e.endsWith(t)}var lu=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),Dp=new RegExp(`^[${lu}]*`),Up=new RegExp(`[${lu}]*$`);function Qi(e){return e.replace(Dp,"")}function Xi(e){return e.replace(Up,"")}function V(){return Se.new()}function xr(e){return Q.fromArray(e.entries())}function Sa(e,t){return t.delete(e)}function rt(e,t){let r=e.get(t,ru);return r===ru?new k(ou):new y(r)}function Ea(e,t,r){return r.set(e,t)}function Ie(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof Zr)return"Result";if(e instanceof Q)return"List";if(e instanceof Be)return"BitArray";if(e instanceof Se)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function jl(e,t){return Rp(e,Ie(t))}function Rp(e,t){return new k(Q.fromArray([new vr(e,t,Q.fromArray([]))]))}function dl(e){return typeof e=="string"?new y(e):jl("String",e)}function Ka(e){return Number.isInteger(e)?new y(e):jl("Int",e)}function Va(e,t){let r=()=>jl("Dict",e);if(e instanceof Se||e instanceof WeakMap||e instanceof Map){let n=rt(e,t);return new y(n.isOk()?new $(n[0]):new m)}else return e===null?r():Object.getPrototypeOf(e)==Object.prototype?iu(e,t,()=>new y(new m)):iu(e,t,r)}function iu(e,t,r){try{return t in e?new y(new $(e[t])):r()}catch{return r()}}function _t(e){let t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return Fp(e);if(t==="bigint"||Number.isInteger(e))return e.toString();if(t==="number")return Al(e);if(Array.isArray(e))return`#(${e.map(_t).join(", ")})`;if(e instanceof Q)return Jp(e);if(e instanceof Rt)return Kp(e);if(e instanceof Be)return`<<${Fa(e,"")}>>`;if(e instanceof d)return Hp(e);if(e instanceof Se)return Wp(e);if(e instanceof Set)return`//js(Set(${[...e].map(_t).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){let r=[];for(let n of Array(e.length).keys())r.push(String.fromCharCode(n+97));return`//fn(${r.join(", ")}) { ... }`}return Gp(e)}function Fp(e){let t='"';for(let r=0;r<e.length;r++){let n=e[r];switch(n){case`
`:t+="\\n";break;case"\r":t+="\\r";break;case"	":t+="\\t";break;case"\f":t+="\\f";break;case"\\":t+="\\\\";break;case'"':t+='\\"';break;default:n<" "||n>"~"&&n<"\xA0"?t+="\\u{"+n.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=n}}return t+='"',t}function Wp(e){let t="dict.from_list([",r=!0;return e.forEach((n,i)=>{r||(t=t+", "),t=t+"#("+_t(i)+", "+_t(n)+")",r=!1}),t+"])"}function Gp(e){let t=Object.getPrototypeOf(e)?.constructor?.name||"Object",r=[];for(let s of Object.keys(e))r.push(`${_t(s)}: ${_t(e[s])}`);let n=r.length?" "+r.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${n}})`}function Hp(e){let t=Object.keys(e).map(r=>{let n=_t(e[r]);return isNaN(parseInt(r))?`${r}: ${n}`:n}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function Jp(e){return`[${e.toArray().map(_t).join(", ")}]`}function Kp(e){return`//utfcodepoint(${String.fromCodePoint(e.value)})`}function Fa(e,t){if(e.bitSize===0)return t;for(let r=0;r<e.byteSize-1;r++)t+=e.byteAt(r).toString(),t+=", ";if(e.byteSize*8===e.bitSize)t+=e.byteAt(e.byteSize-1).toString();else{let r=e.bitSize%8;t+=e.byteAt(e.byteSize-1)>>8-r,t+=`:size(${r})`}return t}function Lr(e){return e>=0?e:e*-1}var is=class extends d{constructor(t){super(),this[0]=t}},sn=class extends d{},Gn=class extends d{},Hn=class extends d{},on=class extends d{},zr=class extends d{},Jn=class extends d{},Kn=class extends d{},Vn=class extends d{},ss=class extends d{};function Ht(e,t){return[gr(e,t),wr(e,t)]}var au=1e3;var uu=1e6;var cu=6e7;var fu=36e8;var pu=864e8;var du=6048e8;var _u=2592e9;var $u=31536e9;function hu(e){let r=Oe(e,0,(n,i)=>{if(i[1]instanceof sn){let s=i[0];return n+s}else if(i[1]instanceof Gn){let s=i[0];return n+s*au}else if(i[1]instanceof Hn){let s=i[0];return n+s*uu}else if(i[1]instanceof on){let s=i[0];return n+s*cu}else if(i[1]instanceof zr){let s=i[0];return n+s*fu}else if(i[1]instanceof Jn){let s=i[0];return n+s*pu}else if(i[1]instanceof Kn){let s=i[0];return n+s*du}else if(i[1]instanceof Vn){let s=i[0];return n+s*_u}else{let s=i[0];return n+s*$u}});return new is(r)}function mu(e){let t=e[0],r=Lr(t),n=Ht(r,$u),i=n[0],s=n[1],o=Ht(s,_u),a=o[0],u=o[1],c=Ht(u,du),_=c[0],p=c[1],w=Ht(p,pu),b=w[0],v=w[1],B=Ht(v,fu),j=B[0],K=B[1],W=Ht(K,cu),E=W[0],q=W[1],O=Ht(q,uu),te=O[0],$r=O[1],ba=Ht($r,au),jf=ba[0],zf=ba[1],Of=l([[i,new ss],[a,new Vn],[_,new Kn],[b,new Jn],[j,new zr],[E,new on],[te,new Hn],[jf,new Gn],[zf,new sn]]),Sf=dt(Of,Cn=>Cn[0]>0);return M(Sf,Cn=>t<0?[-1*Cn[0],Cn[1]]:Cn)}var wu=l([["Africa/Abidjan",0],["Africa/Algiers",3600],["Africa/Bissau",0],["Africa/Cairo",7200],["Africa/Casablanca",3600],["Africa/Ceuta",3600],["Africa/El_Aaiun",3600],["Africa/Johannesburg",7200],["Africa/Juba",7200],["Africa/Khartoum",7200],["Africa/Lagos",3600],["Africa/Maputo",7200],["Africa/Monrovia",0],["Africa/Nairobi",10800],["Africa/Ndjamena",3600],["Africa/Sao_Tome",0],["Africa/Tripoli",7200],["Africa/Tunis",3600],["Africa/Windhoek",7200],["America/Adak",-36e3],["America/Anchorage",-32400],["America/Araguaina",-10800],["America/Argentina/Buenos_Aires",-10800],["America/Argentina/Catamarca",-10800],["America/Argentina/Cordoba",-10800],["America/Argentina/Jujuy",-10800],["America/Argentina/La_Rioja",-10800],["America/Argentina/Mendoza",-10800],["America/Argentina/Rio_Gallegos",-10800],["America/Argentina/Salta",-10800],["America/Argentina/San_Juan",-10800],["America/Argentina/San_Luis",-10800],["America/Argentina/Tucuman",-10800],["America/Argentina/Ushuaia",-10800],["America/Asuncion",-14400],["America/Bahia",-10800],["America/Bahia_Banderas",-21600],["America/Barbados",-14400],["America/Belem",-10800],["America/Belize",-21600],["America/Boa_Vista",-14400],["America/Bogota",-18e3],["America/Boise",-25200],["America/Cambridge_Bay",-25200],["America/Campo_Grande",-14400],["America/Cancun",-18e3],["America/Caracas",-14400],["America/Cayenne",-10800],["America/Chicago",-21600],["America/Chihuahua",-21600],["America/Ciudad_Juarez",-25200],["America/Costa_Rica",-21600],["America/Cuiaba",-14400],["America/Danmarkshavn",0],["America/Dawson",-25200],["America/Dawson_Creek",-25200],["America/Denver",-25200],["America/Detroit",-18e3],["America/Edmonton",-25200],["America/Eirunepe",-18e3],["America/El_Salvador",-21600],["America/Fort_Nelson",-25200],["America/Fortaleza",-10800],["America/Glace_Bay",-14400],["America/Goose_Bay",-14400],["America/Grand_Turk",-18e3],["America/Guatemala",-21600],["America/Guayaquil",-18e3],["America/Guyana",-14400],["America/Halifax",-14400],["America/Havana",-18e3],["America/Hermosillo",-25200],["America/Indiana/Indianapolis",-18e3],["America/Indiana/Knox",-21600],["America/Indiana/Marengo",-18e3],["America/Indiana/Petersburg",-18e3],["America/Indiana/Tell_City",-21600],["America/Indiana/Vevay",-18e3],["America/Indiana/Vincennes",-18e3],["America/Indiana/Winamac",-18e3],["America/Inuvik",-25200],["America/Iqaluit",-18e3],["America/Jamaica",-18e3],["America/Juneau",-32400],["America/Kentucky/Louisville",-18e3],["America/Kentucky/Monticello",-18e3],["America/La_Paz",-14400],["America/Lima",-18e3],["America/Los_Angeles",-28800],["America/Maceio",-10800],["America/Managua",-21600],["America/Manaus",-14400],["America/Martinique",-14400],["America/Matamoros",-21600],["America/Mazatlan",-25200],["America/Menominee",-21600],["America/Merida",-21600],["America/Metlakatla",-32400],["America/Mexico_City",-21600],["America/Miquelon",-10800],["America/Moncton",-14400],["America/Monterrey",-21600],["America/Montevideo",-10800],["America/New_York",-18e3],["America/Nome",-32400],["America/Noronha",-7200],["America/North_Dakota/Beulah",-21600],["America/North_Dakota/Center",-21600],["America/North_Dakota/New_Salem",-21600],["America/Nuuk",-7200],["America/Ojinaga",-21600],["America/Panama",-18e3],["America/Paramaribo",-10800],["America/Phoenix",-25200],["America/Port-au-Prince",-18e3],["America/Porto_Velho",-14400],["America/Puerto_Rico",-14400],["America/Punta_Arenas",-10800],["America/Rankin_Inlet",-21600],["America/Recife",-10800],["America/Regina",-21600],["America/Resolute",-21600],["America/Rio_Branco",-18e3],["America/Santarem",-10800],["America/Santiago",-14400],["America/Santo_Domingo",-14400],["America/Sao_Paulo",-10800],["America/Scoresbysund",-7200],["America/Sitka",-32400],["America/St_Johns",-12600],["America/Swift_Current",-21600],["America/Tegucigalpa",-21600],["America/Thule",-14400],["America/Tijuana",-28800],["America/Toronto",-18e3],["America/Vancouver",-28800],["America/Whitehorse",-25200],["America/Winnipeg",-21600],["America/Yakutat",-32400],["Antarctica/Casey",28800],["Antarctica/Davis",25200],["Antarctica/Macquarie",36e3],["Antarctica/Mawson",18e3],["Antarctica/Palmer",-10800],["Antarctica/Rothera",-10800],["Antarctica/Troll",0],["Antarctica/Vostok",18e3],["Asia/Almaty",18e3],["Asia/Amman",10800],["Asia/Anadyr",43200],["Asia/Aqtau",18e3],["Asia/Aqtobe",18e3],["Asia/Ashgabat",18e3],["Asia/Atyrau",18e3],["Asia/Baghdad",10800],["Asia/Baku",14400],["Asia/Bangkok",25200],["Asia/Barnaul",25200],["Asia/Beirut",7200],["Asia/Bishkek",21600],["Asia/Chita",32400],["Asia/Colombo",19800],["Asia/Damascus",10800],["Asia/Dhaka",21600],["Asia/Dili",32400],["Asia/Dubai",14400],["Asia/Dushanbe",18e3],["Asia/Famagusta",7200],["Asia/Gaza",7200],["Asia/Hebron",7200],["Asia/Ho_Chi_Minh",25200],["Asia/Hong_Kong",28800],["Asia/Hovd",25200],["Asia/Irkutsk",28800],["Asia/Jakarta",25200],["Asia/Jayapura",32400],["Asia/Jerusalem",7200],["Asia/Kabul",16200],["Asia/Kamchatka",43200],["Asia/Karachi",18e3],["Asia/Kathmandu",20700],["Asia/Khandyga",32400],["Asia/Kolkata",19800],["Asia/Krasnoyarsk",25200],["Asia/Kuching",28800],["Asia/Macau",28800],["Asia/Magadan",39600],["Asia/Makassar",28800],["Asia/Manila",28800],["Asia/Nicosia",7200],["Asia/Novokuznetsk",25200],["Asia/Novosibirsk",25200],["Asia/Omsk",21600],["Asia/Oral",18e3],["Asia/Pontianak",25200],["Asia/Pyongyang",32400],["Asia/Qatar",10800],["Asia/Qostanay",18e3],["Asia/Qyzylorda",18e3],["Asia/Riyadh",10800],["Asia/Sakhalin",39600],["Asia/Samarkand",18e3],["Asia/Seoul",32400],["Asia/Shanghai",28800],["Asia/Singapore",28800],["Asia/Srednekolymsk",39600],["Asia/Taipei",28800],["Asia/Tashkent",18e3],["Asia/Tbilisi",14400],["Asia/Tehran",12600],["Asia/Thimphu",21600],["Asia/Tokyo",32400],["Asia/Tomsk",25200],["Asia/Ulaanbaatar",28800],["Asia/Urumqi",21600],["Asia/Ust-Nera",36e3],["Asia/Vladivostok",36e3],["Asia/Yakutsk",32400],["Asia/Yangon",23400],["Asia/Yekaterinburg",18e3],["Asia/Yerevan",14400],["Atlantic/Azores",-3600],["Atlantic/Bermuda",-14400],["Atlantic/Canary",0],["Atlantic/Cape_Verde",-3600],["Atlantic/Faroe",0],["Atlantic/Madeira",0],["Atlantic/South_Georgia",-7200],["Atlantic/Stanley",-10800],["Australia/Adelaide",34200],["Australia/Brisbane",36e3],["Australia/Broken_Hill",34200],["Australia/Darwin",34200],["Australia/Eucla",31500],["Australia/Hobart",36e3],["Australia/Lindeman",36e3],["Australia/Lord_Howe",37800],["Australia/Melbourne",36e3],["Australia/Perth",28800],["Australia/Sydney",36e3],["Etc/GMT",0],["Etc/GMT+1",-3600],["Etc/GMT+10",-36e3],["Etc/GMT+11",-39600],["Etc/GMT+12",-43200],["Etc/GMT+2",-7200],["Etc/GMT+3",-10800],["Etc/GMT+4",-14400],["Etc/GMT+5",-18e3],["Etc/GMT+6",-21600],["Etc/GMT+7",-25200],["Etc/GMT+8",-28800],["Etc/GMT+9",-32400],["Etc/GMT-1",3600],["Etc/GMT-10",36e3],["Etc/GMT-11",39600],["Etc/GMT-12",43200],["Etc/GMT-13",46800],["Etc/GMT-14",50400],["Etc/GMT-2",7200],["Etc/GMT-3",10800],["Etc/GMT-4",14400],["Etc/GMT-5",18e3],["Etc/GMT-6",21600],["Etc/GMT-7",25200],["Etc/GMT-8",28800],["Etc/GMT-9",32400],["Etc/UTC",0],["Europe/Andorra",3600],["Europe/Astrakhan",14400],["Europe/Athens",7200],["Europe/Belgrade",3600],["Europe/Berlin",3600],["Europe/Brussels",3600],["Europe/Bucharest",7200],["Europe/Budapest",3600],["Europe/Chisinau",7200],["Europe/Dublin",3600],["Europe/Gibraltar",3600],["Europe/Helsinki",7200],["Europe/Istanbul",10800],["Europe/Kaliningrad",7200],["Europe/Kirov",10800],["Europe/Kyiv",7200],["Europe/Lisbon",0],["Europe/London",0],["Europe/Madrid",3600],["Europe/Malta",3600],["Europe/Minsk",10800],["Europe/Moscow",10800],["Europe/Paris",3600],["Europe/Prague",3600],["Europe/Riga",7200],["Europe/Rome",3600],["Europe/Samara",14400],["Europe/Saratov",14400],["Europe/Simferopol",10800],["Europe/Sofia",7200],["Europe/Tallinn",7200],["Europe/Tirane",3600],["Europe/Ulyanovsk",14400],["Europe/Vienna",3600],["Europe/Vilnius",7200],["Europe/Volgograd",10800],["Europe/Warsaw",3600],["Europe/Zurich",3600],["Indian/Chagos",21600],["Indian/Maldives",18e3],["Indian/Mauritius",14400],["Pacific/Apia",46800],["Pacific/Auckland",43200],["Pacific/Bougainville",39600],["Pacific/Chatham",45900],["Pacific/Easter",-21600],["Pacific/Efate",39600],["Pacific/Fakaofo",46800],["Pacific/Fiji",43200],["Pacific/Galapagos",-21600],["Pacific/Gambier",-32400],["Pacific/Guadalcanal",39600],["Pacific/Guam",36e3],["Pacific/Honolulu",-36e3],["Pacific/Kanton",46800],["Pacific/Kiritimati",50400],["Pacific/Kosrae",39600],["Pacific/Kwajalein",43200],["Pacific/Marquesas",-34200],["Pacific/Nauru",43200],["Pacific/Niue",-39600],["Pacific/Norfolk",39600],["Pacific/Noumea",39600],["Pacific/Pago_Pago",-39600],["Pacific/Palau",32400],["Pacific/Pitcairn",-28800],["Pacific/Port_Moresby",36e3],["Pacific/Rarotonga",-36e3],["Pacific/Tahiti",-36e3],["Pacific/Tarawa",43200],["Pacific/Tongatapu",46800]]);function gu(){return Date.now()*1e3}function xu(){return-new Date().getTimezoneOffset()}function bu(){return new $(Intl.DateTimeFormat().resolvedOptions().timeZone)}function yu(){return Math.floor(globalThis.performance.now()*1e3)}function ku(e,t){let r=new Date((e+t)/1e3);return[[r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate()],[r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds()]]}var os=class extends d{constructor(t,r,n,i){super(),this.wall_time=t,this.offset=r,this.timezone=n,this.monotonic_time=i}};function Lu(e){{let t=e.wall_time;return gr(t,1e3)}}function Or(e){return new os(e*1e3,0,new m,new m)}function Au(e,t){let r=e.wall_time,n=e.monotonic_time,i=t.wall_time,s=t.monotonic_time,o;if(n instanceof $&&s instanceof $){let w=n[0],b=s[0];o=[w,b]}else o=[r,i];let a=o,u=a[0],c=a[1],_=u===c,p=u<c;return _?new ae:p?new X:new se}function nd(e){return ut(e===0,new y("Z"),()=>{let t=(()=>{let r=l([[e,new sn]]),n=hu(r);return mu(n)})();if(t.hasLength(2)&&t.head[1]instanceof zr&&t.tail.head[1]instanceof on){let r=t.head[0],n=t.tail.head[0],i=l([r>0?Ft(l(["+",(()=>{let u=D(r);return Wt(u,2,"0")})()])):Ft(l(["-",(()=>{let u=Lr(r),c=D(u);return Wt(c,2,"0")})()])),(()=>{let a=Lr(n),u=D(a);return Wt(u,2,"0")})()]),s=He(i,":");return new y(s)}else if(t.hasLength(1)&&t.head[1]instanceof zr){let r=t.head[0],n=l([r>0?Ft(l(["+",(()=>{let a=D(r);return Wt(a,2,"0")})()])):Ft(l(["-",(()=>{let a=Lr(r),u=D(a);return Wt(u,2,"0")})()])),"00"]),i=He(n,":");return new y(i)}else return new k(void 0)})}function id(e){{let t=e.wall_time,r=e.offset,n=ku(t,r),i=n[0],s=n[1],o=nd(r);if(!o.isOk())throw J("let_assert","birl",1324,"to_parts","Pattern match failed, no pattern matched the value.",{value:o});let a=o[0];return[i,s,a]}}function ln(e){let t=id(e),r=t[0][0],n=t[0][1],i=t[0][2];return D(r)+"-"+(()=>{let o=D(n);return Wt(o,2,"0")})()+"-"+(()=>{let o=D(i);return Wt(o,2,"0")})()}function ju(){let e=gu(),t=xu(),r=yu(),n=bu();return new os(e,t*6e7,(()=>{let i=Nn(n,s=>In(wu,a=>a[0]===s)?new $(s):new m);return Aa(i)})(),new $(r))}var Yn=class extends d{constructor(t){super(),this.dict=t}};function ls(){return new Yn(V())}function Sl(e,t){let r=e.dict,n=rt(r,t);return Wa(n)}function Ou(e,t){return new Yn(Qo(e.dict,t))}var sd=void 0;function El(e,t){return new Yn(Pe(e.dict,t,sd))}var I=class extends d{constructor(t,r,n,i,s,o,a){super(),this.scheme=t,this.userinfo=r,this.host=n,this.port=i,this.path=s,this.query=o,this.fragment=a}};function ad(e){return 48>=e&&e<=57||65>=e&&e<=90||97>=e&&e<=122||e===58||e===46}function wt(e,t){return new y((()=>{let r=t;return new I(r.scheme,r.userinfo,r.host,r.port,r.path,r.query,new $(e))})())}function ud(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(s.startsWith("#")&&a===0){let u=s.slice(1);return wt(u,o)}else if(s.startsWith("#")){let u=s.slice(1),c=_e(i,0,a),_,p=o;return _=new I(p.scheme,p.userinfo,p.host,p.port,p.path,new $(c),p.fragment),wt(u,_)}else{if(s==="")return new y((()=>{let u=o;return new I(u.scheme,u.userinfo,u.host,u.port,u.path,new $(i),u.fragment)})());{let c=jr(s)[1];e=i,t=c,r=o,n=a+1}}}}function Jt(e,t){return ud(e,e,t,0)}function cd(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(s.startsWith("?")){let u=s.slice(1),c=_e(i,0,a),_,p=o;return _=new I(p.scheme,p.userinfo,p.host,p.port,c,p.query,p.fragment),Jt(u,_)}else if(s.startsWith("#")){let u=s.slice(1),c=_e(i,0,a),_,p=o;return _=new I(p.scheme,p.userinfo,p.host,p.port,c,p.query,p.fragment),wt(u,_)}else{if(s==="")return new y((()=>{let u=o;return new I(u.scheme,u.userinfo,u.host,u.port,i,u.query,u.fragment)})());{let c=jr(s)[1];e=i,t=c,r=o,n=a+1}}}}function un(e,t){return cd(e,e,t,0)}function mt(e,t,r){for(;;){let n=e,i=t,s=r;if(n.startsWith("0"))e=n.slice(1),t=i,r=s*10;else if(n.startsWith("1"))e=n.slice(1),t=i,r=s*10+1;else if(n.startsWith("2"))e=n.slice(1),t=i,r=s*10+2;else if(n.startsWith("3"))e=n.slice(1),t=i,r=s*10+3;else if(n.startsWith("4"))e=n.slice(1),t=i,r=s*10+4;else if(n.startsWith("5"))e=n.slice(1),t=i,r=s*10+5;else if(n.startsWith("6"))e=n.slice(1),t=i,r=s*10+6;else if(n.startsWith("7"))e=n.slice(1),t=i,r=s*10+7;else if(n.startsWith("8"))e=n.slice(1),t=i,r=s*10+8;else if(n.startsWith("9"))e=n.slice(1),t=i,r=s*10+9;else if(n.startsWith("?")){let o=n.slice(1),a,u=i;return a=new I(u.scheme,u.userinfo,u.host,new $(s),u.path,u.query,u.fragment),Jt(o,a)}else if(n.startsWith("#")){let o=n.slice(1),a,u=i;return a=new I(u.scheme,u.userinfo,u.host,new $(s),u.path,u.query,u.fragment),wt(o,a)}else if(n.startsWith("/")){let o,a=i;return o=new I(a.scheme,a.userinfo,a.host,new $(s),a.path,a.query,a.fragment),un(n,o)}else return n===""?new y((()=>{let o=i;return new I(o.scheme,o.userinfo,o.host,new $(s),o.path,o.query,o.fragment)})()):new k(void 0)}}function as(e,t){if(e.startsWith(":0")){let r=e.slice(2);return mt(r,t,0)}else if(e.startsWith(":1")){let r=e.slice(2);return mt(r,t,1)}else if(e.startsWith(":2")){let r=e.slice(2);return mt(r,t,2)}else if(e.startsWith(":3")){let r=e.slice(2);return mt(r,t,3)}else if(e.startsWith(":4")){let r=e.slice(2);return mt(r,t,4)}else if(e.startsWith(":5")){let r=e.slice(2);return mt(r,t,5)}else if(e.startsWith(":6")){let r=e.slice(2);return mt(r,t,6)}else if(e.startsWith(":7")){let r=e.slice(2);return mt(r,t,7)}else if(e.startsWith(":8")){let r=e.slice(2);return mt(r,t,8)}else if(e.startsWith(":9")){let r=e.slice(2);return mt(r,t,9)}else{if(e.startsWith(":"))return new k(void 0);if(e.startsWith("?")){let r=e.slice(1);return Jt(r,t)}else if(e.startsWith("#")){let r=e.slice(1);return wt(r,t)}else return e.startsWith("/")?un(e,t):e===""?new y(t):new k(void 0)}}function Eu(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(s==="")return new y((()=>{let u=o;return new I(u.scheme,u.userinfo,new $(i),u.port,u.path,u.query,u.fragment)})());if(s.startsWith(":")){let u=_e(i,0,a),c,_=o;return c=new I(_.scheme,_.userinfo,new $(u),_.port,_.path,_.query,_.fragment),as(s,c)}else if(s.startsWith("/")){let u=_e(i,0,a),c,_=o;return c=new I(_.scheme,_.userinfo,new $(u),_.port,_.path,_.query,_.fragment),un(s,c)}else if(s.startsWith("?")){let u=s.slice(1),c=_e(i,0,a),_,p=o;return _=new I(p.scheme,p.userinfo,new $(c),p.port,p.path,p.query,p.fragment),Jt(u,_)}else if(s.startsWith("#")){let u=s.slice(1),c=_e(i,0,a),_,p=o;return _=new I(p.scheme,p.userinfo,new $(c),p.port,p.path,p.query,p.fragment),wt(u,_)}else{let c=jr(s)[1];e=i,t=c,r=o,n=a+1}}}function fd(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(s==="")return new y((()=>{let u=o;return new I(u.scheme,u.userinfo,new $(s),u.port,u.path,u.query,u.fragment)})());if(s.startsWith("]")&&a===0){let u=s.slice(1);return as(u,o)}else if(s.startsWith("]")){let u=s.slice(1),c=_e(i,0,a+1),_,p=o;return _=new I(p.scheme,p.userinfo,new $(c),p.port,p.path,p.query,p.fragment),as(u,_)}else{if(s.startsWith("/")&&a===0)return un(s,o);if(s.startsWith("/")){let u=_e(i,0,a),c,_=o;return c=new I(_.scheme,_.userinfo,new $(u),_.port,_.path,_.query,_.fragment),un(s,c)}else if(s.startsWith("?")&&a===0){let u=s.slice(1);return Jt(u,o)}else if(s.startsWith("?")){let u=s.slice(1),c=_e(i,0,a),_,p=o;return _=new I(p.scheme,p.userinfo,new $(c),p.port,p.path,p.query,p.fragment),Jt(u,_)}else if(s.startsWith("#")&&a===0){let u=s.slice(1);return wt(u,o)}else if(s.startsWith("#")){let u=s.slice(1),c=_e(i,0,a),_,p=o;return _=new I(p.scheme,p.userinfo,new $(c),p.port,p.path,p.query,p.fragment),wt(u,_)}else{let u=jr(s),c=u[0],_=u[1];if(ad(c))e=i,t=_,r=o,n=a+1;else return Eu(i,i,o,0)}}}}function pd(e,t){return fd(e,e,t,0)}function dd(e,t){return Eu(e,e,t,0)}function an(e,t){if(e.startsWith("["))return pd(e,t);if(e.startsWith(":")){let r,n=t;return r=new I(n.scheme,n.userinfo,new $(""),n.port,n.path,n.query,n.fragment),as(e,r)}else return e===""?new y((()=>{let r=t;return new I(r.scheme,r.userinfo,new $(""),r.port,r.path,r.query,r.fragment)})()):dd(e,t)}function _d(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(s.startsWith("@")&&a===0){let u=s.slice(1);return an(u,o)}else if(s.startsWith("@")){let u=s.slice(1),c=_e(i,0,a),_,p=o;return _=new I(p.scheme,new $(c),p.host,p.port,p.path,p.query,p.fragment),an(u,_)}else{if(s==="")return an(i,o);if(s.startsWith("/"))return an(i,o);if(s.startsWith("?"))return an(i,o);if(s.startsWith("#"))return an(i,o);{let c=jr(s)[1];e=i,t=c,r=o,n=a+1}}}}function $d(e,t){return _d(e,e,t,0)}function Tl(e,t){if(e==="//")return new y((()=>{let r=t;return new I(r.scheme,r.userinfo,new $(""),r.port,r.path,r.query,r.fragment)})());if(e.startsWith("//")){let r=e.slice(2);return $d(r,t)}else return un(e,t)}function hd(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(s.startsWith("/")&&a===0)return Tl(s,o);if(s.startsWith("/")){let u=_e(i,0,a),c,_=o;return c=new I(new $(Ne(u)),_.userinfo,_.host,_.port,_.path,_.query,_.fragment),Tl(s,c)}else if(s.startsWith("?")&&a===0){let u=s.slice(1);return Jt(u,o)}else if(s.startsWith("?")){let u=s.slice(1),c=_e(i,0,a),_,p=o;return _=new I(new $(Ne(c)),p.userinfo,p.host,p.port,p.path,p.query,p.fragment),Jt(u,_)}else if(s.startsWith("#")&&a===0){let u=s.slice(1);return wt(u,o)}else if(s.startsWith("#")){let u=s.slice(1),c=_e(i,0,a),_,p=o;return _=new I(new $(Ne(c)),p.userinfo,p.host,p.port,p.path,p.query,p.fragment),wt(u,_)}else{if(s.startsWith(":")&&a===0)return new k(void 0);if(s.startsWith(":")){let u=s.slice(1),c=_e(i,0,a),_,p=o;return _=new I(new $(Ne(c)),p.userinfo,p.host,p.port,p.path,p.query,p.fragment),Tl(u,_)}else{if(s==="")return new y((()=>{let u=o;return new I(u.scheme,u.userinfo,u.host,u.port,i,u.query,u.fragment)})());{let c=jr(s)[1];e=i,t=c,r=o,n=a+1}}}}}function md(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return C(n);{let i=r.head,s=r.tail,o;i===""||i==="."?o=n:i===".."&&n.hasLength(0)?o=l([]):i===".."&&n.atLeastLength(1)?o=n.tail:o=x(i,n);let a=o;e=s,t=a}}}function wd(e){return md(e,l([]))}function Zn(e){return wd(St(e,"/"))}function $e(e){let t,r=e.fragment;if(r instanceof $){let O=r[0];t=l(["#",O])}else t=l([]);let n=t,i,s=e.query;if(s instanceof $){let O=s[0];i=x("?",x(O,n))}else i=n;let o=i,a=x(e.path,o),u,c=e.host,_=kr(e.path,"/");if(c instanceof $&&!_&&c[0]!==""){let O=c[0];u=x("/",a)}else u=a;let p=u,w,b=e.host,v=e.port;if(b instanceof $&&v instanceof $){let O=v[0];w=x(":",x(D(O),p))}else w=p;let B=w,j,K=e.scheme,W=e.userinfo,E=e.host;if(K instanceof $&&W instanceof $&&E instanceof $){let O=K[0],te=W[0],$r=E[0];j=x(O,x("://",x(te,x("@",x($r,B)))))}else if(K instanceof $&&W instanceof m&&E instanceof $){let O=K[0],te=E[0];j=x(O,x("://",x(te,B)))}else if(K instanceof $&&W instanceof $&&E instanceof m){let O=K[0];j=x(O,x(":",B))}else if(K instanceof $&&W instanceof m&&E instanceof m){let O=K[0];j=x(O,x(":",B))}else if(K instanceof m&&W instanceof m&&E instanceof $){let O=E[0];j=x("//",x(O,B))}else j=B;return Ft(j)}var gd=new I(new m,new m,new m,new m,"",new m,new m);function ie(e){return hd(e,e,gd,0)}function ql(e,t){if(e instanceof Se||e instanceof WeakMap||e instanceof Map){let n={},i=e.get(t,n);return i===n?new y(new m):new y(new $(i))}let r=Number.isInteger(t);if(r&&t>=0&&t<8&&e instanceof Q){let n=0;for(let i of e){if(n===t)return new y(new $(i));n++}return new k("Indexable")}return r&&Array.isArray(e)||e&&typeof e=="object"||e&&Object.getPrototypeOf(e)===Object.prototype?t in e?new y(new $(e[t])):new y(new m):new k(r?"Indexable":"Dict")}function Tu(e,t,r,n,i){if(!(e instanceof Q||Array.isArray(e))){let o=new gt("List",Ie(e),i);return[i,Q.fromArray([o])]}let s=[];for(let o of e){let a=t(o),[u,c]=a;if(c instanceof hr){let[_,p]=r(a,n.toString());return[i,p]}s.push(u),n++}return[Q.fromArray(s),i]}function qu(e){return Number.isInteger(e)?new y(e):new k(0)}function Cu(e){return typeof e=="string"?new y(e):new k("")}var gt=class extends d{constructor(t,r,n){super(),this.expected=t,this.found=r,this.path=n}},De=class extends d{constructor(t){super(),this.function=t}};function Xn(e,t){let r=t.function(e),n=r[0],i=r[1];return i.hasLength(0)?new y(n):new k(i)}function Ee(e){return new De(t=>[e,l([])])}function Cl(e,t){return new De(r=>{let n=e.function(r),i=n[0],s=n[1];return[t(i),s]})}function Bu(e,t){return new De(r=>{let n=e.function(r),i=n[0],s=n[1],a=t(i).function(r),u=a,c=a[0];return s.hasLength(0)?u:[c,s]})}function xd(e,t,r){for(;;){let n=e,i=t,s=r;if(s.hasLength(0))return i;{let o=s.head,a=s.tail,u=o.function(n),c=u;if(u[1].hasLength(0))return c;e=n,t=i,r=a}}}function cs(e,t){return new De(r=>{let n=e.function(r),i=n;return n[1].hasLength(0)?i:xd(r,i,t)})}function Pu(e,t){return l([new gt(e,Ie(t),l([]))])}function Nu(e,t,r){let n=r(e);return n.isOk()?[n[0],l([])]:[n[0],l([new gt(t,Ie(e),l([]))])]}function bd(e){return T(!0,e)?[!0,l([])]:T(!1,e)?[!1,l([])]:[!1,Pu("Bool",e)]}function yd(e){return Nu(e,"Int",qu)}function Iu(e,t){return new De(r=>[e,Pu(t,r)])}var Mu=new De(bd),me=new De(yd);function kd(e){return Nu(e,"String",Cu)}var fe=new De(kd);function Tt(e){return new De(t=>Tu(t,e.function,(r,n)=>Qn(r,l([n])),0,l([])))}function Qn(e,t){let r=cs(fe,l([Cl(me,D)])),n=M(t,s=>{let o=s,a=Xn(o,r);return a.isOk()?a[0]:"<"+Ie(o)+">"}),i=M(e[1],s=>{let o=s;return new gt(o.expected,o.found,ee(n,s.path))});return[e[0],i]}function vd(e,t,r,n,i){for(;;){let s=e,o=t,a=r,u=n,c=i;if(s.hasLength(0)){let _=a(u);return Qn(_,C(o))}else{let _=s.head,p=s.tail,w=ql(u,_);if(w.isOk()&&w[0]instanceof $){let b=w[0][0];e=p,t=x(_,o),r=a,n=b,i=c}else{if(w.isOk()&&w[0]instanceof m)return c(u,x(_,o));{let b=w[0],j=[a(u)[0],l([new gt(b,Ie(u),l([]))])];return Qn(j,C(o))}}}}}function Ld(e,t,r){return new De(n=>{let i=vd(e,l([]),t.function,n,(_,p)=>{let v=[t.function(_)[0],l([new gt("Field","Nothing",l([]))])];return Qn(v,C(p))}),s=i[0],o=i[1],a=r(s).function(n),u=a[0],c=a[1];return[u,ee(o,c)]})}function R(e,t,r){return Ld(l([e]),t,r)}function Bl(e,t,r,n){return new De(i=>{let s,o=ql(i,e);if(o.isOk()&&o[0]instanceof $){let B=o[0][0];s=r.function(B)}else if(o.isOk()&&o[0]instanceof m)s=[t,l([])];else{let B=o[0];s=[t,l([new gt(B,Ie(i),l([]))])]}let a;a=Qn(s,l([e]));let c=a,_=c[0],p=c[1],w=n(_).function(i),b=w[0],v=w[1];return[b,ee(p,v)]})}function Pl(e){return JSON.stringify(e)}function Du(e){return Object.fromEntries(e)}function Uu(e){return e.toArray()}function Ru(e){try{let t=JSON.parse(e);return new y(t)}catch(t){return new k(jd(t,e))}}function jd(e,t){return zd(e)?new cn:Od(e,t)}function zd(e){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(e.message)}function Od(e,t){let r=[Sd,Ed,qd,Td];for(let n of r){let i=n(e,t);if(i)return i}return new xt("",0)}function Sd(e){let r=/unexpected token '(.)', ".+" is not valid JSON/i.exec(e.message);if(!r)return null;let n=fs(r[1]);return new xt(n,-1)}function Ed(e){let r=/unexpected token (.) in JSON at position (\d+)/i.exec(e.message);if(!r)return null;let n=fs(r[1]),i=Number(r[2]);return new xt(n,i)}function Td(e,t){let n=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(e.message);if(!n)return null;let i=Number(n[2]),s=Number(n[3]),o=Cd(i,s,t),a=fs(t[o]);return new xt(a,o)}function qd(e){let r=/unexpected (identifier|token) "(.)"/i.exec(e.message);if(!r)return null;let n=fs(r[2]);return new xt(n,0)}function fs(e){return"0x"+e.charCodeAt(0).toString(16).toUpperCase()}function Cd(e,t,r){if(e===1)return t-1;let n=1,i=0;return r.split("").find((s,o)=>(s===`
`&&(n+=1),n===e?(i=o+t,!0):!1)),i}var cn=class extends d{},xt=class extends d{constructor(t){super(),this[0]=t}},ps=class extends d{constructor(t){super(),this[0]=t}},ds=class extends d{constructor(t){super(),this[0]=t}},Nl=class extends d{constructor(t){super(),this[0]=t}};function Bd(e,t){return Je(Ru(e),r=>{let n=Xn(r,t);return es(n,i=>new Nl(i))})}function Fu(e,t){return Bd(e,t)}function it(e){return Pl(e)}function ce(e){return e}function Ml(e){return e}function bt(e){return e}function st(e){return Du(e)}function Dl(e){return Uu(e)}function ti(e,t){let n=M(e,t);return Dl(n)}var ri=class extends d{constructor(t){super(),this.all=t}};function Wu(e){return new ri(l([t=>e(t.dispatch,t.emit,t.select,t.root)]))}function qt(e){return Wu((t,r,n,i)=>e(t))}function A(){return new ri(l([]))}function Sr(e){return new ri(Oe(e,l([]),(t,r)=>{let n=r.all;return ee(t,n)}))}var Tr=class extends d{constructor(t){super(),this.content=t}},oe=class extends d{constructor(t,r,n,i,s,o,a){super(),this.key=t,this.namespace=r,this.tag=n,this.attrs=i,this.children=s,this.self_closing=o,this.void=a}},ni=class extends d{constructor(t){super(),this.subtree=t}},qr=class extends d{constructor(t,r,n){super(),this[0]=t,this[1]=r,this.as_property=n}},ii=class extends d{constructor(t,r){super(),this[0]=t,this[1]=r}};function Id(e){if(e instanceof qr)return new k(void 0);{let t=e[0],r=e[1],n=Ki(t,2);return new y([n,r])}}function Md(e,t,r){return rl(e,t,(n,i,s)=>{let o=r+"-"+D(s);return Gu(i,n,o)})}function Gu(e,t,r){for(;;){let n=e,i=t,s=r;if(n instanceof Tr)return i;if(n instanceof ni){let o=n.subtree;e=o(),t=i,r=s}else{let o=n.attrs,a=n.children,u=Oe(o,i,(c,_)=>{let p=Id(_);if(p.isOk()){let w=p[0][0],b=p[0][1];return Pe(c,s+"-"+w,b)}else return c});return Md(a,u,s)}}}function Hu(e){return Gu(e,V(),"0")}function z(e,t){return new qr(e,t,!1)}function Dd(e,t){return new qr(e,t,!0)}function Ku(e,t){return new ii("on"+e,t)}function f(e){return z("class",e)}function si(e){return z("class",(()=>{let r=br(e,n=>n[1]?new y(n[0]):new k(void 0));return He(r," ")})())}function Vt(e){return z("id",e)}function Vu(e){return z("role",e)}function Yt(e){return z("title",e)}function Ul(e){return z("type",e)}function Zt(e){return z("value",e)}function fn(e){return z("placeholder",e)}function _s(e){return Dd("disabled",e)}function Qt(e){return z("href",e)}function Yu(e){return z("src",e)}function Zu(e){return z("alt",e)}function G(e,t,r){return e==="area"?new oe("","",e,t,l([]),!1,!0):e==="base"?new oe("","",e,t,l([]),!1,!0):e==="br"?new oe("","",e,t,l([]),!1,!0):e==="col"?new oe("","",e,t,l([]),!1,!0):e==="embed"?new oe("","",e,t,l([]),!1,!0):e==="hr"?new oe("","",e,t,l([]),!1,!0):e==="img"?new oe("","",e,t,l([]),!1,!0):e==="input"?new oe("","",e,t,l([]),!1,!0):e==="link"?new oe("","",e,t,l([]),!1,!0):e==="meta"?new oe("","",e,t,l([]),!1,!0):e==="param"?new oe("","",e,t,l([]),!1,!0):e==="source"?new oe("","",e,t,l([]),!1,!0):e==="track"?new oe("","",e,t,l([]),!1,!0):e==="wbr"?new oe("","",e,t,l([]),!1,!0):new oe("","",e,t,r,!1,!1)}function li(e,t,r,n){return new oe("",e,t,r,n,!1,!1)}function ai(e){return new Tr(e)}function Te(){return new Tr("")}var hs=class extends d{constructor(t){super(),this[0]=t}},ms=class extends d{constructor(t,r){super(),this[0]=t,this[1]=r}},ws=class extends d{constructor(t,r){super(),this[0]=t,this[1]=r}};function Qu(e){return T(e.created,V())&&T(e.removed,ls())&&T(e.updated,V())}var gs=class extends d{constructor(t){super(),this[0]=t}},xs=class extends d{constructor(t,r){super(),this[0]=t,this[1]=r}},ui=class extends d{constructor(t){super(),this[0]=t}},yt=class extends d{constructor(t){super(),this[0]=t}},ci=class extends d{constructor(t,r){super(),this[0]=t,this[1]=r}},bs=class extends d{constructor(t,r){super(),this[0]=t,this[1]=r}};var fi=class extends d{},ys=class extends d{constructor(t,r){super(),this[0]=t,this[1]=r}},ks=class extends d{constructor(t){super(),this[0]=t}},vs=class extends d{constructor(t){super(),this[0]=t}};globalThis.customElements&&!globalThis.customElements.get("lustre-fragment")&&globalThis.customElements.define("lustre-fragment",class extends HTMLElement{constructor(){super()}});function Rl(e,t,r){let n,i=[{prev:e,next:t,parent:e.parentNode}];for(;i.length;){let{prev:s,next:o,parent:a}=i.pop();for(;o.subtree!==void 0;)o=o.subtree();if(o.content!==void 0)if(s)if(s.nodeType===Node.TEXT_NODE)s.textContent!==o.content&&(s.textContent=o.content),n??=s;else{let u=document.createTextNode(o.content);a.replaceChild(u,s),n??=u}else{let u=document.createTextNode(o.content);a.appendChild(u),n??=u}else if(o.tag!==void 0){let u=Fd({prev:s,next:o,dispatch:r,stack:i});s?s!==u&&a.replaceChild(u,s):a.appendChild(u),n??=u}}return n}function Fd({prev:e,next:t,dispatch:r,stack:n}){let i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),o=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag),a;if(pi.has(o))a=pi.get(o);else{let E=new Map;pi.set(o,E),a=E}let u=s?new Set(a.keys()):null,c=s?new Set(Array.from(e.attributes,E=>E.name)):null,_=null,p=null,w=null;if(s&&t.tag==="textarea"){let E=t.children[Symbol.iterator]().next().value?.content;E!==void 0&&(o.value=E)}let b=[];for(let E of t.attrs){let q=E[0],O=E[1];if(E.as_property)o[q]!==O&&(o[q]=O),s&&c.delete(q);else if(q.startsWith("on")){let te=q.slice(2),$r=r(O,te==="input");a.has(te)||o.addEventListener(te,di),a.set(te,$r),s&&u.delete(te)}else if(q.startsWith("data-lustre-on-")){let te=q.slice(15),$r=r(Wd);a.has(te)||o.addEventListener(te,di),a.set(te,$r),o.setAttribute(q,O),s&&(u.delete(te),c.delete(q))}else q.startsWith("delegate:data-")||q.startsWith("delegate:aria-")?(o.setAttribute(q,O),b.push([q.slice(10),O])):q==="class"?_=_===null?O:_+" "+O:q==="style"?p=p===null?O:p+O:q==="dangerous-unescaped-html"?w=O:(o.getAttribute(q)!==O&&o.setAttribute(q,O),(q==="value"||q==="selected")&&(o[q]=O),s&&c.delete(q))}if(_!==null&&(o.setAttribute("class",_),s&&c.delete("class")),p!==null&&(o.setAttribute("style",p),s&&c.delete("style")),s){for(let E of c)o.removeAttribute(E);for(let E of u)a.delete(E),o.removeEventListener(E,di)}if(t.tag==="slot"&&window.queueMicrotask(()=>{for(let E of o.assignedElements())for(let[q,O]of b)E.hasAttribute(q)||E.setAttribute(q,O)}),t.key!==void 0&&t.key!=="")o.setAttribute("data-lustre-key",t.key);else if(w!==null)return o.innerHTML=w,o;let v=o.firstChild,B=null,j=null,K=null,W=Ls(t).next().value;if(s&&W!==void 0&&W.key!==void 0&&W.key!==""){B=new Set,j=Xu(e),K=Xu(t);for(let E of Ls(t))v=Gd(v,E,o,n,K,j,B)}else for(let E of Ls(t))n.unshift({prev:v,next:E,parent:o}),v=v?.nextSibling;for(;v;){let E=v.nextSibling;o.removeChild(v),v=E}return o}var pi=new WeakMap;function di(e){let t=e.currentTarget;if(!pi.has(t)){t.removeEventListener(e.type,di);return}let r=pi.get(t);if(!r.has(e.type)){t.removeEventListener(e.type,di);return}r.get(e.type)(e)}function Wd(e){let t=e.currentTarget,r=t.getAttribute(`data-lustre-on-${e.type}`),n=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:r,data:i.reduce((s,o)=>{let a=o.split(".");for(let u=0,c=s,_=e;u<a.length;u++)u===a.length-1?c[a[u]]=_[a[u]]:(c[a[u]]??={},_=_[a[u]],c=c[a[u]]);return s},{data:n})}}function Xu(e){let t=new Map;if(e)for(let r of Ls(e)){let n=r?.key||r?.getAttribute?.("data-lustre-key");n&&t.set(n,r)}return t}function Gd(e,t,r,n,i,s,o){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){let u=e.nextSibling;r.removeChild(e),e=u}if(s.size===0)return n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e;if(o.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),n.unshift({prev:null,next:t,parent:r}),e;o.add(t.key);let a=s.get(t.key);if(!a&&!e)return n.unshift({prev:null,next:t,parent:r}),e;if(!a&&e!==null){let u=document.createTextNode("");return r.insertBefore(u,e),n.unshift({prev:u,next:t,parent:r}),e}return!a||a===e?(n.unshift({prev:e,next:t,parent:r}),e=e?.nextSibling,e):(r.insertBefore(a,e),n.unshift({prev:a,next:t,parent:r}),e)}function*Ls(e){for(let t of e.children)yield*ec(t)}function*ec(e){e.subtree!==void 0?yield*ec(e.subtree()):yield e}var Fl=class e{static start({init:t,update:r,view:n},i,s){if(!pn())return new k(new _i);let o=i instanceof HTMLElement?i:document.querySelector(i);if(!o)return new k(new As(i));let a=new e(o,t(s),r,n);return new y(u=>a.send(u))}constructor(t,[r,n],i,s){this.root=t,this.#e=r,this.#s=i,this.#r=s,this.#t=window.setTimeout(()=>this.#n(n.all.toArray(),!0),0)}root;send(t){if(t instanceof ui){if(t[0]instanceof vs){this.#t=window.clearTimeout(this.#t),this.#i=[],this.#e=t[0][0];let r=this.#r(this.#e),n=(s,o=!1)=>a=>{let u=s(a);u instanceof y&&this.send(new yt(u[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));Rl(i,r,n)}}else if(t instanceof yt){let r=t[0],n=t[1]??!1;this.#i.push(r),n?(this.#t=window.clearTimeout(this.#t),this.#n()):this.#t||(this.#t=window.setTimeout(()=>this.#n()))}else if(t instanceof ci){let r=t[0],n=t[1];this.root.dispatchEvent(new CustomEvent(r,{detail:n,bubbles:!0,composed:!0}))}else if(t instanceof fi)for(this.#t=window.clearTimeout(this.#t),this.#e=null,this.#s=null,this.#r=null,this.#i=null;this.root.firstChild;)this.root.firstChild.remove()}#e;#s;#r;#i=[];#t;#n(t=[]){this.#t=void 0,this.#o(t);let r=this.#r(this.#e),n=(s,o=!1)=>a=>{let u=s(a);u instanceof y&&this.send(new yt(u[0],o))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));Rl(i,r,n)}#o(t=[]){for(;this.#i.length>0;){let r=this.#i.shift(),[n,i]=this.#s(this.#e,r);t=t.concat(i.all.toArray()),this.#e=n}for(;t.length>0;){let r=t.shift(),n=a=>this.send(new yt(a)),i=(a,u)=>this.root.dispatchEvent(new CustomEvent(a,{detail:u,bubbles:!0,composed:!0})),s=()=>{},o=this.root;r({dispatch:n,emit:i,select:s,root:o})}this.#i.length>0&&this.#o(t)}},tc=Fl.start;var Wl=class e{static start({init:t,update:r,view:n,on_attribute_change:i},s){let o=new e(t(s),r,n,i);return new y(a=>o.send(a))}constructor([t,r],n,i,s){this.#e=t,this.#s=n,this.#i=i,this.#t=i(t),this.#a=s,this.#n=new Map,this.#o=Hu(this.#t),this.#l(r.all.toArray())}send(t){if(t instanceof gs){for(let r of t[0]){let n=this.#a.get(r[0]);if(!n)continue;let i=n(r[1]);i instanceof k||this.#r.push(i)}this.#l()}else if(t instanceof xs)this.#r=this.#r.concat(t[0].toArray()),this.#l(t[1].all.toArray());else if(!(t instanceof ui))if(t instanceof yt)this.#r.push(t[0]),this.#l();else if(t instanceof ci){let r=new ms(t[0],t[1]);for(let[n,i]of this.#n)i(r)}else if(t instanceof bs){let r=this.#o.get(t[0]);if(!r)return;let n=r(t[1]);if(n instanceof k)return;this.#r.push(n[0]),this.#l()}else if(t instanceof ys){let r=Zo(this.#a),n=new ws(r,this.#t);this.#n=this.#n.set(t[0],t[1]),t[1](n)}else t instanceof ks&&(this.#n=this.#n.delete(t[0]))}#e;#s;#r;#i;#t;#n;#o;#a;#l(t=[]){this.#u(t);let r=this.#i(this.#e),n=elements(this.#t,r);if(!Qu(n)){let i=new hs(n);for(let[s,o]of this.#n)o(i)}this.#t=r,this.#o=n.handlers}#u(t=[]){for(;this.#r.length>0;){let r=this.#r.shift(),[n,i]=this.#s(this.#e,r);t=t.concat(i.all.toArray()),this.#e=n}for(;t.length>0;)t.shift()({dispatch:a=>this.send(new yt(a)),emit:(a,u)=>this.root.dispatchEvent(new CustomEvent(a,{detail:u,bubbles:!0,composed:!0})),select:()=>{},root:null});this.#r.length>0&&this.#u(t)}},Hd=Wl.start,pn=()=>globalThis.window&&window.document;var Gl=class extends d{constructor(t,r,n,i){super(),this.init=t,this.update=r,this.view=n,this.on_attribute_change=i}};var As=class extends d{constructor(t){super(),this.selector=t}},_i=class extends d{};function rc(e,t,r){return new Gl(e,t,r,new m)}function nc(e,t,r){return ut(!pn(),new k(new _i),()=>tc(e,t,r))}function h(e){return ai(e)}function Hl(e,t){return G("article",e,t)}function js(e,t){return G("h1",e,t)}function $i(e,t){return G("h2",e,t)}function we(e,t){return G("h3",e,t)}function ke(e,t){return G("h4",e,t)}function sc(e,t){return G("h5",e,t)}function oc(e,t){return G("h6",e,t)}function zs(e,t){return G("main",e,t)}function lc(e,t){return G("nav",e,t)}function Jl(e,t){return G("section",e,t)}function g(e,t){return G("div",e,t)}function ac(e){return G("hr",e,l([]))}function Os(e,t){return G("li",e,t)}function qe(e,t){return G("p",e,t)}function ve(e,t){return G("pre",e,t)}function Ss(e,t){return G("ul",e,t)}function Xt(e,t){return G("a",e,t)}function uc(e){return G("br",e,l([]))}function ge(e,t){return G("code",e,t)}function cc(e,t){return G("em",e,t)}function P(e,t){return G("span",e,t)}function hi(e,t){return G("strong",e,t)}function fc(e){return G("img",e,l([]))}function Es(e,t){return li("http://www.w3.org/2000/svg","svg",e,t)}function F(e,t){return G("button",e,t)}function mi(e){return G("input",e,l([]))}function Cr(e,t){return G("label",e,t)}function Ts(e,t){return G("textarea",e,l([ai(t)]))}var pc="http://www.w3.org/2000/svg";function dn(e){return li(pc,"line",e,l([]))}function dc(e){return li(pc,"polyline",e,l([]))}function qs(e,t){return Ku(e,t)}function _c(e){return qs("click",t=>new y(e))}function N(e){return qs("mousedown",t=>new y(e))}function $c(e){return qs("mouseenter",t=>new y(e))}function Kd(e){let t=e;return pl("target",pl("value",Ha))(t)}function er(e){return qs("input",t=>{let r=Kd(t);return Gt(r,e)})}var Yd={handle_external_links:!1,handle_internal_links:!0},hc=window?.location?.href,Yl=()=>hc?new y(Vl(new URL(hc))):new k(void 0),Zl=(e,t=Yd)=>{document.addEventListener("click",r=>{let n=wc(r.target);if(n)try{let i=new URL(n.href),s=Vl(i),o=i.host!==window.location.host;return!t.handle_external_links&&o||!t.handle_internal_links&&!o?void 0:(r.preventDefault(),o||(window.history.pushState({},"",n.href),window.requestAnimationFrame(()=>{i.hash&&document.getElementById(i.hash.slice(1))?.scrollIntoView()})),e(s))}catch{return}}),window.addEventListener("popstate",r=>{r.preventDefault();let n=new URL(window.location.href),i=Vl(n);window.requestAnimationFrame(()=>{n.hash&&document.getElementById(n.hash.slice(1))?.scrollIntoView()}),e(i)}),window.addEventListener("modem-push",({detail:r})=>{e(r)}),window.addEventListener("modem-replace",({detail:r})=>{e(r)})},mc=e=>{window.history.pushState({},"",$e(e)),window.requestAnimationFrame(()=>{e.fragment[0]&&document.getElementById(e.fragment[0])?.scrollIntoView()}),window.dispatchEvent(new CustomEvent("modem-push",{detail:e}))};var wc=e=>!e||e.tagName==="BODY"?null:e.tagName==="A"?e:wc(e.parentElement),Vl=e=>new I(e.protocol?new $(e.protocol.slice(0,-1)):new m,new m,e.hostname?new $(e.hostname):new m,e.port?new $(Number(e.port)):new m,e.pathname,e.search?new $(e.search.slice(1)):new m,e.hash?new $(e.hash.slice(1)):new m);function gc(e){return qt(t=>ut(!pn(),void 0,()=>Zl(r=>{let i=e(r);return t(i)})))}var Zd=new I(new m,new m,new m,new m,"",new m,new m);function tr(e,t,r){return qt(n=>ut(!pn(),void 0,()=>mc((()=>{let i=Zd;return new I(i.scheme,i.userinfo,i.host,i.port,e,t,r)})())))}function _n(e,t){localStorage.setItem(e,t)}function xc(e){let t=localStorage.getItem(e);return t?new y(t):new k(void 0)}function bc(e){return JSON.parse(e)}function yc(e){navigator.clipboard.writeText(e).then(()=>{}).catch(t=>{console.error("Failed to copy to clipboard:",t)})}function kc(e,t){setTimeout(e,t)}var Ue=class extends d{},kt=class extends d{},Ql=class extends d{},Br=class extends d{},Pr=class extends d{},Xl=class extends d{},ea=class extends d{},ta=class extends d{},ra=class extends d{};var Ct=class extends d{},Ce=class extends d{};function vc(e){return e instanceof ea?"CONNECT":e instanceof Pr?"DELETE":e instanceof Ue?"GET":e instanceof Ql?"HEAD":e instanceof ta?"OPTIONS":e instanceof ra?"PATCH":e instanceof kt?"POST":e instanceof Br?"PUT":e instanceof Xl?"TRACE":e[0]}function Lc(e){return e instanceof Ct?"http":"https"}var vt=class extends d{constructor(t,r,n,i,s,o,a,u){super(),this.method=t,this.headers=r,this.body=n,this.scheme=i,this.host=s,this.port=o,this.path=a,this.query=u}};function jc(e){return new I(new $(Lc(e.scheme)),new m,new $(e.host),e.port,e.path,e.query,new m)}function Cs(e,t,r){let n=nl(e.headers,Ne(t),r),i=e;return new vt(i.method,n,i.body,i.scheme,i.host,i.port,i.path,i.query)}function Bt(e,t){let r=e.method,n=e.headers,i=e.scheme,s=e.host,o=e.port,a=e.path,u=e.query;return new vt(r,n,t,i,s,o,a,u)}function xe(e,t){let r=e;return new vt(t,r.headers,r.body,r.scheme,r.host,r.port,r.path,r.query)}function Le(){return new vt(new Ue,l([]),"",new Ce,"localhost",new m,"",new m)}function Ze(e,t){let r=e;return new vt(r.method,r.headers,r.body,t,r.host,r.port,r.path,r.query)}function hn(e,t){let r=e;return new vt(r.method,r.headers,r.body,r.scheme,t,r.port,r.path,r.query)}function mn(e,t){let r=e;return new vt(r.method,r.headers,r.body,r.scheme,r.host,new $(t),r.path,r.query)}function Ae(e,t){let r=e;return new vt(r.method,r.headers,r.body,r.scheme,r.host,r.port,t,r.query)}var rr=class extends d{constructor(t,r,n,i,s,o){super(),this.saving=t,this.slug=r,this.title=n,this.subtitle=i,this.leading=s,this.content=o}};function zc(e,t,r,n,i){return new rr(!1,e,t,r,n,i)}function Ps(e){return e.saving}function Ns(e){return e.slug}function Is(e){return e.title}function Ms(e){return e.subtitle}function wi(e){return e.leading}function gi(e){return e.content}function Oc(e,t){{let r=e.saving,n=e.title,i=e.subtitle,s=e.leading,o=e.content;return new rr(r,t,n,i,s,o)}}function Sc(e,t){{let r=e.saving,n=e.slug,i=e.subtitle,s=e.leading,o=e.content;return new rr(r,n,t,i,s,o)}}function Ec(e,t){{let r=e.saving,n=e.slug,i=e.title,s=e.leading,o=e.content;return new rr(r,n,i,t,s,o)}}function Tc(e,t){{let r=e.saving,n=e.slug,i=e.title,s=e.subtitle,o=e.content;return new rr(r,n,i,s,t,o)}}function qc(e,t){{let r=e.saving,n=e.slug,i=e.title,s=e.subtitle,o=e.leading;return new rr(r,n,i,s,o,t)}}var Pt=class extends d{constructor(t,r,n){super(),this.status=t,this.headers=r,this.body=n}};var wn=class e{constructor(t){this.promise=t}static wrap(t){return t instanceof Promise?new e(t):t}static unwrap(t){return t instanceof e?t.promise:t}};function Ds(e){return Promise.resolve(wn.wrap(e))}function Bc(e,t){return e.then(r=>t(wn.unwrap(r)))}function Us(e,t){return e.then(r=>wn.wrap(t(wn.unwrap(r))))}function na(e,t){return e.catch(r=>t(r))}function Pc(e,t){return Us(e,n=>(t(n),n))}function Rs(e,t){return Bc(e,n=>{if(n.isOk()){let i=n[0];return t(i)}else{let i=n[0];return Ds(new k(i))}})}async function Ic(e){try{return new y(await fetch(e))}catch(t){return new k(new Fs(t.toString()))}}function Mc(e){return new Pt(e.status,Q.fromArray([...e.headers]),e)}function n_(e){let t=$e(jc(e)),r=vc(e.method).toUpperCase(),n={headers:i_(e.headers),method:r};return[t,n]}function Dc(e){let[t,r]=n_(e);return r.method!=="GET"&&r.method!=="HEAD"&&(r.body=e.body),new globalThis.Request(t,r)}function i_(e){let t=new globalThis.Headers;for(let[r,n]of e)t.append(r.toLowerCase(),n);return t}async function ia(e){let t;try{t=await e.body.text()}catch{return new k(new Ws)}return new y(e.withFields({body:t}))}var Fs=class extends d{constructor(t){super(),this[0]=t}},Ws=class extends d{};function Uc(e){let r=Dc(e),n=Ic(r);return Rs(n,i=>Ds(new y(Mc(i))))}var Gs=class extends d{constructor(t){super(),this[0]=t}},xi=class extends d{constructor(t){super(),this[0]=t}},bi=class extends d{constructor(t){super(),this[0]=t}},Hs=class extends d{},yi=class extends d{},ki=class extends d{constructor(t,r){super(),this[0]=t,this[1]=r}},vi=class extends d{},Js=class extends d{constructor(t){super(),this.run=t}};function o_(e,t,r){let n=Uc(e),i=Rs(n,ia),s=Us(i,a=>{if(a.isOk()){let u=a[0];return t.run(new y(u))}else return t.run(new k(new Hs))}),o=na(s,a=>t.run(new k(new Hs)));Pc(o,r)}function je(e,t){return qt(r=>o_(e,t,r))}function Rc(e){if(e instanceof Pt&&200<=e.status&&e.status<=299){let t=e.status,r=e.body;return new y(r)}else{if(e instanceof Pt&&e.status===401)return new k(new vi);if(e instanceof Pt&&e.status===404)return new k(new yi);if(e instanceof Pt&&e.status===500){let t=e.body;return new k(new xi(t))}else{let t=e.status,r=e.body;return new k(new ki(t,r))}}}function gn(e){return new Js(t=>{let n=Je(t,Rc);return e(n)})}function Qe(e,t){return new Js(r=>{let i=Je(r,Rc),s=Je(i,o=>{let a=Fu(o,e);if(a.isOk()){let u=a[0];return new y(u)}else{let u=a[0];return new k(new bi(u))}});return t(s)})}var U=class extends d{},H=class extends d{},S=class extends d{constructor(t){super(),this[0]=t}},Xe=class extends d{constructor(t){super(),this[0]=t}},ze=class extends d{constructor(t){super(),this[0]=t}};function Re(e,t){if(e instanceof S){let r=e[0];return new S(t(r))}else if(e instanceof Xe){let r=e[0];return new Xe(t(r))}else return e}var xn=class extends d{},Fe=class extends d{},nr=class extends d{constructor(t){super(),this.session=t}},oa=class extends d{constructor(t,r,n){super(),this.subject=t,this.expiry=r,this.permissions=n}};function l_(e){return e instanceof xn?l([]):e instanceof Fe?l([]):e.session.permissions}function Vs(e,t){return In(l_(e),r=>In(t,n=>n===r))}function la(e,t){let r,n=t.scheme;n instanceof $&&n[0]==="http"?r=Ze(e,new Ct):n instanceof $&&n[0]==="https"?r=Ze(e,new Ce):r=Ze(e,new Ce);let i=r,s,o=t.host;if(o instanceof $){let p=o[0];s=hn(i,p)}else s=i;let a=s,u,c=t.port;if(c instanceof $){let p=c[0];u=mn(a,p)}else u=a;return u}function Fc(e,t){let r=Le(),n=xe(r,new Ue),i=Ae(n,"/api/auth/logout"),s=Cs(i,"credentials","include"),o=la(s,t);return je(o,gn(e))}function a_(){return R("subject",fe,e=>R("expiresAt",me,t=>R("permissions",Tt(fe),r=>Ee(new oa(e,t,r)))))}function Wc(){let e=a_();return Bu(e,t=>Ee(new nr(t)))}function Gc(e,t,r,n){let i,s=st(l([["username",ce(t)],["password",ce(r)]]));i=it(s);let o=i,a=Le(),u=xe(a,new kt),c=Ae(u,"/api/auth"),_=Bt(c,o),p=la(_,n);return je(p,Qe(Wc(),e))}function aa(e,t){let r=Le(),n=xe(r,new Ue),i=Ae(n,"/api/auth"),s=Cs(i,"credentials","include"),o=la(s,t);return je(o,Qe(Wc(),e))}var Z=class extends d{constructor(t,r,n,i,s,o,a,u,c,_,p){super(),this.id=t,this.slug=r,this.revision=n,this.author=i,this.tags=s,this.published_at=o,this.title=a,this.subtitle=u,this.leading=c,this.content=_,this.draft=p}};function bn(e){if(e instanceof Z&&e.content instanceof S){let t=e.slug,r=e.title,n=e.subtitle,i=e.leading,s=e.content[0],o=zc(t,r,n,i,s);return new $(o)}else return new m}function Li(e,t){return Vs(t,l(["post_edit_any"]))}function Jc(e,t){return Vs(t,l(["post_edit_any"]))}function Kc(e,t){return Vs(t,l(["post_edit_any"]))}function Ai(e,t){let r,n=t.scheme;n instanceof $&&n[0]==="http"?r=Ze(e,new Ct):n instanceof $&&n[0]==="https"?r=Ze(e,new Ce):r=Ze(e,new Ce);let i=r,s,o=t.host;if(o instanceof $){let p=o[0];s=hn(i,p)}else s=i;let a=s,u,c=t.port;if(c instanceof $){let p=c[0];u=mn(a,p)}else u=a;return u}function Vc(e,t,r){let n,i=Le(),s=xe(i,new Pr),o=Ae(s,"/api/articles/"+t);return n=Ai(o,r),je(n,gn(e))}function yn(){return Bl("version",0,me,e=>R("id",fe,t=>R("author",fe,r=>R("tags",cs(Tt(fe),l([Ee(l([]))])),n=>R("published_at",Cl(me,s=>s===0?new m:new $(Or(s))),i=>R("slug",fe,s=>R("revision",me,o=>R("title",fe,a=>R("leading",fe,u=>R("subtitle",fe,c=>Bl("content","",fe,_=>{let p;_===""?p=new U:p=new S(_);let w=p;return Ee(new Z(t,s,o,r,n,i,a,c,u,w,new m))})))))))))))}function ir(e,t,r){let n,i=Le(),s=xe(i,new Ue),o=Ae(s,"/api/articles/"+t);return n=Ai(o,r),je(n,Qe(yn(),e))}function u_(){return R("articles",cs(Tt(yn()),l([Ee(l([]))])),e=>Ee(e))}function ji(e,t){let r,n=Le(),i=xe(n,new Ue),s=Ae(i,"/api/articles");return r=Ai(s,t),je(r,Qe(u_(),e))}function Ys(e){{let t=e.id,r=e.slug,n=e.revision,i=e.author,s=e.tags,o=e.published_at,a=e.title,u=e.subtitle,c=e.leading,_=e.content,p;if(_ instanceof S){let B=_[0];p=ce(B)}else p=ce("");let w=p,b;if(o instanceof $){let B=o[0];b=bt(Lu(B))}else b=bt(0);let v=b;return st(l([["struct_version",bt(1)],["id",ce(t)],["revision",bt(n)],["slug",ce(r)],["title",ce(a)],["leading",ce(c)],["subtitle",ce(u)],["author",ce(i)],["published_at",v],["tags",ti(s,ce)],["content",w]]))}}function Zs(e,t,r){let n,i=Le(),s=xe(i,new Br),o=Ae(s,"/api/articles/"+t.id),a=Bt(o,(()=>{let c=Ys(t);return it(c)})());return n=Ai(a,r),je(n,Qe(yn(),e))}function Yc(e,t,r){let n,i=Le(),s=xe(i,new kt),o=Ae(s,"/api/articles"),a=Bt(o,(()=>{let c=Ys(t);return it(c)})());return n=Ai(a,r),je(n,Qe(yn(),e))}function kn(e,t){if(e instanceof Z&&e.draft instanceof $){let r=e.draft[0],n=e;return new Z(n.id,n.slug,n.revision,n.author,n.tags,n.published_at,n.title,n.subtitle,n.leading,n.content,new $(t(r)))}else return c_("draft_update: not an article with draft","src\\article\\article.gleam",316),e}function c_(e,t,r){let n="\x1B[90m",i="\x1B[39m",s=`${t}:${r}`,o=Nt(e);if(globalThis.process?.stderr?.write){let a=`${n}${s}${i}
${o}
`;process.stderr.write(a)}else if(globalThis.Deno){let a=`${n}${s}${i}
${o}
`;globalThis.Deno.stderr.writeSync(new TextEncoder().encode(a))}else{let a=`${s}
${o}`;globalThis.console.log(a)}return e}function f_(e){let t='"';for(let r=0;r<e.length;r++){let n=e[r];n==`
`?t+="\\n":n=="\r"?t+="\\r":n=="	"?t+="\\t":n=="\f"?t+="\\f":n=="\\"?t+="\\\\":n=='"'?t+='\\"':n<" "||n>"~"&&n<"\xA0"?t+="\\u{"+n.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=n}return t+='"',t}function p_(e){let t="dict.from_list([",r=!0,n=[];return e.forEach((i,s)=>{n.push([s,i])}),n.sort(),n.forEach(([i,s])=>{r||(t=t+", "),t=t+"#("+Nt(i)+", "+Nt(s)+")",r=!1}),t+"])"}function d_(e){let t=globalThis.Object.keys(e).map(r=>{let n=Nt(e[r]);return isNaN(parseInt(r))?`${r}: ${n}`:n}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function __(e){let t=Object.getPrototypeOf(e)?.constructor?.name||"Object",r=[];for(let s of Object.keys(e))r.push(`${Nt(s)}: ${Nt(e[s])}`);let n=r.length?" "+r.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${n}})`}function Nt(e){let t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return f_(e);if(t==="bigint"||t==="number")return e.toString();if(globalThis.Array.isArray(e))return`#(${e.map(Nt).join(", ")})`;if(e instanceof Q)return`[${e.toArray().map(Nt).join(", ")}]`;if(e instanceof Rt)return`//utfcodepoint(${String.fromCodePoint(e.value)})`;if(e instanceof Be)return $_(e);if(e instanceof d)return d_(e);if(h_(e))return p_(e);if(e instanceof Set)return`//js(Set(${[...e].map(Nt).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){let r=[];for(let n of Array(e.length).keys())r.push(String.fromCharCode(n+97));return`//fn(${r.join(", ")}) { ... }`}return __(e)}function $_(e){let t=e.bitOffset+8*Math.trunc(e.bitSize/8),r=mr(e,e.bitOffset,t),n=e.bitSize%8;if(n>0){let i=Gi(e,t,e.bitSize,!1,!1),s=Array.from(r.rawBuffer),o=`${i}:size(${n})`;return s.length===0?`<<${o}>>`:`<<${Array.from(r.rawBuffer).join(", ")}, ${o}>>`}else return`<<${Array.from(r.rawBuffer).join(", ")}>>`}function h_(e){try{return e instanceof Se}catch{return!1}}var It=class extends d{},ot=class extends d{},Lt=class extends d{constructor(t){super(),this.slug=t}},lt=class extends d{constructor(t){super(),this.id=t}},At=class extends d{},jt=class extends d{},et=class extends d{},sr=class extends d{constructor(t){super(),this[0]=t}},zi=class extends d{constructor(t){super(),this.uri=t}};function ca(e){let t=Zn(e.path);if(t.hasLength(0))return new It;if(t.hasLength(1)&&t.head==="")return new It;if(t.hasLength(1)&&t.head==="articles")return new ot;if(t.hasLength(2)&&t.head==="article"){let r=t.tail.head;return new Lt(r)}else if(t.hasLength(3)&&t.head==="article"&&t.tail.tail.head==="edit"){let r=t.tail.head;return new lt(r)}else{if(t.hasLength(1)&&t.head==="about")return new At;if(t.hasLength(1)&&t.head==="djot-demo")return new jt;if(t.hasLength(1)&&t.head==="url")return new et;if(t.hasLength(2)&&t.head==="url"){let r=t.tail.head;return new sr(r)}else return new zi(e)}}function vn(e){if(e instanceof It)return"/";if(e instanceof At)return"/about";if(e instanceof ot)return"/articles";if(e instanceof Lt)return"/article/"+e.slug;if(e instanceof lt)return"/article/"+e.id+"/edit";if(e instanceof jt)return"/djot-demo/";if(e instanceof et)return"/url/";if(e instanceof sr)return"/url/"+e[0];{let t=e.uri;return"/404?uri="+$e(t)}}function We(e){let t,n=vn(e);t=ie(n);let i=t;if(!i.isOk())throw J("let_assert","routes/routes",49,"to_uri","Pattern match failed, no pattern matched the value.",{value:i});return i[0]}function m_(e,t){for(;;){let r=e,n=t;if(r.hasLength(0)&&n.hasLength(0))return!0;if(r.hasLength(0))return!1;if(n.hasLength(0))return!1;{let i=r.head,s=r.tail,o=n.head,a=n.tail;if(T(i,o))e=s,t=a;else return!1}}}function Zc(e,t){let r,i=vn(e);r=Zn(i);let s=r,o,u=vn(t);return o=Zn(u),m_(s,o)}var Oi=class extends d{constructor(t){super(),this[0]=t}},Nr=class extends d{},Mt=class extends d{constructor(t,r){super(),this.article=t,this.session=r}},zt=class extends d{constructor(t){super(),this.article=t}},Ir=class extends d{constructor(t,r){super(),this.articles=t,this.session=r}},or=class extends d{},Ln=class extends d{},An=class extends d{constructor(t){super(),this.short=t}},he=class extends d{constructor(t){super(),this.error=t}},jn=class extends d{},Qs=class extends d{constructor(t){super(),this.requested_uri=t}},Mr=class extends d{constructor(t){super(),this.content=t}},Dr=class extends d{constructor(t,r){super(),this.slug=t,this.available_slugs=r}},Ur=class extends d{constructor(t){super(),this.id=t}},lr=class extends d{constructor(t,r){super(),this.error=t,this.context=r}},Rr=class extends d{constructor(t){super(),this.attempted_action=t}},zn=class extends d{constructor(t){super(),this.msg=t}};function Xs(e){if(e instanceof Oi){let t=e[0];return We(t)}else if(e instanceof Nr){let t=ie("/");if(!t.isOk())throw J("let_assert","pages/pages",51,"to_uri","Pattern match failed, no pattern matched the value.",{value:t});return t[0]}else if(e instanceof Ir){let t=ie("/articles");if(!t.isOk())throw J("let_assert","pages/pages",55,"to_uri","Pattern match failed, no pattern matched the value.",{value:t});return t[0]}else if(e instanceof or){let t=ie("/articles");if(!t.isOk())throw J("let_assert","pages/pages",59,"to_uri","Pattern match failed, no pattern matched the value.",{value:t});return t[0]}else if(e instanceof Mt){let t=e.article,r=ie("/article/"+t.slug);if(!r.isOk())throw J("let_assert","pages/pages",63,"to_uri","Pattern match failed, no pattern matched the value.",{value:r});return r[0]}else if(e instanceof zt){let t=e.article,r=ie("/article/"+t.id+"/edit");if(!r.isOk())throw J("let_assert","pages/pages",67,"to_uri","Pattern match failed, no pattern matched the value.",{value:r});return r[0]}else if(e instanceof Ln){let t=ie("/url/");if(!t.isOk())throw J("let_assert","pages/pages",71,"to_uri","Pattern match failed, no pattern matched the value.",{value:t});return t[0]}else if(e instanceof An){let t=e.short,r=ie("/url/");if(!r.isOk())throw J("let_assert","pages/pages",75,"to_uri","Pattern match failed, no pattern matched the value.",{value:r});return r[0]}else if(e instanceof he){let t=e.error;if(t instanceof Dr){let r=t.slug,n=ie("/article/"+r);if(!n.isOk())throw J("let_assert","pages/pages",82,"to_uri","Pattern match failed, no pattern matched the value.",{value:n});return n[0]}else if(t instanceof Ur){let r=t.id,n=ie("/article/"+r+"/edit");if(!n.isOk())throw J("let_assert","pages/pages",86,"to_uri","Pattern match failed, no pattern matched the value.",{value:n});return n[0]}else if(t instanceof lr){let r=ie("/");if(!r.isOk())throw J("let_assert","pages/pages",90,"to_uri","Pattern match failed, no pattern matched the value.",{value:r});return r[0]}else if(t instanceof Rr){let r=ie("/");if(!r.isOk())throw J("let_assert","pages/pages",94,"to_uri","Pattern match failed, no pattern matched the value.",{value:r});return r[0]}else{let r=ie("/");if(!r.isOk())throw J("let_assert","pages/pages",98,"to_uri","Pattern match failed, no pattern matched the value.",{value:r});return r[0]}}else if(e instanceof jn){let t=ie("/about");if(!t.isOk())throw J("let_assert","pages/pages",104,"to_uri","Pattern match failed, no pattern matched the value.",{value:t});return t[0]}else if(e instanceof Mr){let t=e.content,r=ie("/djot-demo/"+t);if(!r.isOk())throw J("let_assert","pages/pages",108,"to_uri","Pattern match failed, no pattern matched the value.",{value:r});return r[0]}else return e.requested_uri}function fa(e){return M(e,t=>t.slug)}function g_(e){{let t=e.expected,r=e.found,n=e.path;return"expected: "+t+", found: "+r+", path: "+He(n,"/")}}function Xc(e){if(e.hasLength(0))return"no errors";{let t=e.head,r=e.tail;return g_(t)+`
`+Xc(r)}}function x_(e){{let t=e.expected,r=e.found,n=e.path;return"expected: "+t+", found: "+r+", path: "+He(n,"/")}}function ef(e){if(e.hasLength(0))return"";{let t=e.head,r=e.tail;return x_(t)+`
`+ef(r)}}function b_(e){if(e instanceof cn)return"unexpected end of input";if(e instanceof xt)return"unexpected byte: "+e[0];if(e instanceof ps)return"unexpected sequence: "+e[0];if(e instanceof ds){let t=e[0];return`unexpected format
`+Xc(t)}else{let t=e[0];return`unable to decode
`+ef(t)}}function Si(e){if(e instanceof Gs)return"bad url: "+e[0];if(e instanceof xi)return"internal server error: "+e[0];if(e instanceof bi){let t=e[0];return`json error
`+b_(t)}else{if(e instanceof yi)return"not found";if(e instanceof vi)return"unauthorized";if(e instanceof ki){let t=e[0],r=e[1];return"other error: "+D(t)+" "+r}else return"network error"}}var On=class extends d{},Ei=class extends d{},eo=class extends d{};function Ti(e,t){return t instanceof On?Es(ee(e,l([z("viewBox","0 0 24 24"),z("fill","none"),z("stroke","currentColor"),z("stroke-width","2"),z("stroke-linecap","round"),z("stroke-linejoin","round")])),l([dn(l([z("x1","18"),z("y1","6"),z("x2","6"),z("y2","18")])),dn(l([z("x1","6"),z("y1","6"),z("x2","18"),z("y2","18")]))])):t instanceof Ei?Es(ee(e,l([z("viewBox","0 0 24 24"),z("fill","none"),z("stroke","currentColor"),z("stroke-width","2"),z("stroke-linecap","round"),z("stroke-linejoin","round")])),l([dn(l([z("x1","3"),z("y1","6"),z("x2","21"),z("y2","6")])),dn(l([z("x1","3"),z("y1","12"),z("x2","21"),z("y2","12")])),dn(l([z("x1","3"),z("y1","18"),z("x2","21"),z("y2","18")]))])):Es(ee(e,l([z("viewBox","0 0 24 24"),z("fill","none"),z("stroke","currentColor"),z("stroke-width","2"),z("stroke-linecap","round"),z("stroke-linejoin","round")])),l([dc(l([z("points","20,6 9,17 4,12")]))]))}var pa=class extends d{constructor(t,r){super(),this.content=t,this.references=r}},ro=class extends d{},qi=class extends d{constructor(t,r){super(),this.attributes=t,this.content=r}},Ci=class extends d{constructor(t,r,n){super(),this.attributes=t,this.level=r,this.content=n}},Bi=class extends d{constructor(t,r,n){super(),this.attributes=t,this.language=r,this.content=n}},Pi=class extends d{},Ge=class extends d{constructor(t){super(),this[0]=t}},Fr=class extends d{constructor(t,r){super(),this.content=t,this.destination=r}},Wr=class extends d{constructor(t,r){super(),this.content=t,this.destination=r}},Gr=class extends d{constructor(t){super(),this.content=t}},Hr=class extends d{constructor(t){super(),this.content=t}},Sn=class extends d{constructor(t){super(),this.content=t}},Ni=class extends d{constructor(t){super(),this[0]=t}},Ii=class extends d{constructor(t){super(),this[0]=t}};function to(e,t,r){return t==="class"?Xo(e,t,n=>n instanceof m?r:n[0]+" "+r):Pe(e,t,r)}function v_(e){for(;;){let t=e;if(t.hasLength(0))return l([]);if(t.atLeastLength(1)&&t.head===`
`)e=t.tail;else{let r=t.head,n=t.tail;return x(r,n)}}}function En(e){for(;;){let t=e;if(t.hasLength(0))return l([]);if(t.atLeastLength(1)&&t.head===" ")e=t.tail;else{let r=t.head,n=t.tail;return x(r,n)}}}function tf(e,t){for(;;){let r=e,n=t;if(n.hasLength(0))return r>=3?new $([new ro,n]):new m;if(n.atLeastLength(1)&&n.head===`
`)return r>=3?new $([new ro,n]):new m;if(n.atLeastLength(1)&&n.head===" "){let i=n.tail;e=r,t=i}else if(n.atLeastLength(1)&&n.head==="	"){let i=n.tail;e=r,t=i}else if(n.atLeastLength(1)&&n.head==="-"){let i=n.tail;e=r+1,t=i}else if(n.atLeastLength(1)&&n.head==="*"){let i=n.tail;e=r+1,t=i}else return new m}}function L_(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return[n,l([])];if(r.atLeastLength(1)&&r.head===`
`){let i=r.tail;return[n+`
`,i]}else{let i=r.head;e=r.tail,t=n+i}}}function A_(e,t,r){for(;;){let n=e,i=t,s=r;if(n.atLeastLength(1)&&n.head===`
`&&s===0){let o=n.tail;return new $([o])}else{if(s===0)return new $([n]);if(n.atLeastLength(1)&&n.head===i){let o=n.head;e=n.tail,t=i,r=s-1}else return n.hasLength(0)?new $([n]):new m}}}function j_(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n,u=A_(i,s,o);if(u instanceof m){let c=L_(i,a),_=c[0];e=c[1],t=s,r=o,n=_}else{let c=u[0][0];return[a,c]}}}function z_(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1)&&r.head==="`")return new m;if(r.hasLength(0))return new $([new m,r]);if(r.atLeastLength(1)&&r.head===`
`&&n===""){let i=r.tail;return new $([new m,i])}else if(r.atLeastLength(1)&&r.head===`
`){let i=r.tail;return new $([new $(n),i])}else{let i=r.head;e=r.tail,t=n+i}}}function O_(e,t,r){for(;;){let n=e,i=t,s=r;if(n.atLeastLength(1)&&n.head===i){let o=n.head;e=n.tail,t=i,r=s+1}else if(n.atLeastLength(1)&&n.head===`
`&&s>=3){let o=n.tail;return new $([new m,s,o])}else if(n.atLeastLength(1)&&s>=3){let o=En(n);return Nn(z_(o,""),a=>{let u=a[0],c=a[1];return[u,s,c]})}else return new m}}function rf(e,t,r){return ja(O_(e,r,1),n=>{let i=n[0],s=n[1],o=n[2],a=j_(o,r,s,""),u=a[0],c=a[1];return new $([new Bi(t,i,u),c])})}function S_(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return new $([i,rn(s),l([])]);if(n.atLeastLength(2)&&n.head===`
`&&n.tail.head===" "){let o=n.tail.tail;e=En(o),t=i,r=s}else if(n.atLeastLength(1)&&n.head===`
`){let o=n.tail;return new $([i,rn(s),o])}else{let o=n.head;e=n.tail,t=i,r=s+o}}}function E_(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(2)&&r.head==="]"&&r.tail.head===":"){let i=r.tail.tail;return S_(i,n,"")}else{if(r.hasLength(0))return new m;if(r.atLeastLength(1)&&r.head==="]")return new m;if(r.atLeastLength(1)&&r.head===`
`)return new m;{let i=r.head;e=r.tail,t=n+i}}}}function T_(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return new m;if(n.atLeastLength(1)&&n.head===" "){let o=n.tail;return new $([i,s,o])}else{if(n.atLeastLength(1)&&n.head==="}")return new $([i,s,n]);{let o=n.head;e=n.tail,t=i,r=s+o}}}}function q_(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return new m;if(n.atLeastLength(1)&&n.head==='"'){let o=n.tail;return new $([i,s,o])}else{let o=n.head;e=n.tail,t=i,r=s+o}}}function C_(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return new m;if(r.atLeastLength(1)&&r.head===" ")return new m;if(r.atLeastLength(2)&&r.head==="="&&r.tail.head==='"'){let i=r.tail.tail;return q_(i,n,"")}else if(r.atLeastLength(1)&&r.head==="="){let i=r.tail;return T_(i,n,"")}else{let i=r.head;e=r.tail,t=n+i}}}function nf(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return new $([n,r]);if(r.atLeastLength(1)&&r.head==="}")return new $([n,r]);if(r.atLeastLength(1)&&r.head===" ")return new $([n,r]);if(r.atLeastLength(1)&&r.head==="#")return new m;if(r.atLeastLength(1)&&r.head===".")return new m;if(r.atLeastLength(1)&&r.head==="=")return new m;if(r.atLeastLength(1)&&r.head===`
`)return new m;{let i=r.head;e=r.tail,t=n+i}}}function B_(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return new $([n,l([])]);if(r.atLeastLength(1)&&r.head===`
`){let i=r.tail;return new $([n,i])}else if(r.atLeastLength(1)&&r.head===" ")e=r.tail,t=n;else return new m}}function P_(e,t){for(;;){let r=e,n=t,i=En(r);if(i.hasLength(0))return new m;if(i.atLeastLength(1)&&i.head==="}"){let s=i.tail;return B_(s,n)}else if(i.atLeastLength(1)&&i.head==="#"){let s=i.tail,o=nf(s,"");if(o instanceof $){let a=o[0][0];e=o[0][1],t=to(n,"id",a)}else return new m}else if(i.atLeastLength(1)&&i.head==="."){let s=i.tail,o=nf(s,"");if(o instanceof $){let a=o[0][0];e=o[0][1],t=to(n,"class",a)}else return new m}else{let s=C_(i,"");if(s instanceof $){let o=s[0][0],a=s[0][1];e=s[0][2],t=to(n,o,a)}else return new m}}}function N_(e){return e==="#"||e==="?"||e==="!"?!1:e!==","}function I_(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;if(r.atLeastLength(1)&&r.head===" "&&T(r.tail,l([]))){let i=r.tail;return n}else if(r.atLeastLength(1)&&r.head===`
`&&T(r.tail,l([]))){let i=r.tail;return n}else if(r.atLeastLength(1)&&r.head===" "&&n==="")e=r.tail,t=n;else if(r.atLeastLength(1)&&r.head===`
`&&n==="")e=r.tail,t=n;else if(r.atLeastLength(1)&&r.head===" ")e=r.tail,t=n+"-";else if(r.atLeastLength(1)&&r.head===`
`)e=r.tail,t=n+"-";else{let i=r.head;e=r.tail,t=n+i}}}function M_(e){let r=tn(e),n=dt(r,N_);return I_(n,"")}function D_(e,t,r){for(;;){let n=e,i=t,s=r;if(i<0)return new m;if(n.hasLength(0)&&i>0)return new m;if(n.hasLength(0)&&i===0)return new $([s,l([])]);if(n.atLeastLength(1)&&n.head===" "&&i===0){let o=n.tail;return new $([s,o])}else if(n.atLeastLength(1)&&n.head==="#")e=n.tail,t=i-1,r=s;else return new m}}function U_(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return[C(s),l([])];if(n.hasLength(1)&&n.head===`
`)return[C(s),l([])];if(n.atLeastLength(2)&&n.head===`
`&&n.tail.head===`
`){let o=n.tail.tail;return[C(s),o]}else if(n.atLeastLength(2)&&n.head===`
`&&n.tail.head==="#"){let o=n.tail.tail,a=D_(o,i-1,x(`
`,s));if(a instanceof $){let u=a[0][0];e=a[0][1],t=i,r=u}else return[C(s),n]}else{let o=n.head;e=n.tail,t=i,r=x(o,s)}}}function R_(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(i.hasLength(0))return[!0,a,i];if(i.atLeastLength(1)&&i.head==="`")e=i.tail,t=s,r=o+1,n=a;else return i.atLeastLength(1)&&s===o?[!0,a,i]:[!1,a+Un("`",o),i]}}function F_(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return[s,n];if(n.atLeastLength(1)&&n.head==="`"){let o=n.tail,a=R_(o,i,1,s),u=a[0],c=a[1],_=a[2];if(u)return[c,_];e=_,t=i,r=c}else{let o=n.head;e=n.tail,t=i,r=s+o}}}function W_(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1)&&r.head==="`")e=r.tail,t=n+1;else{let i=F_(r,n,""),s=i[0],o=i[1],a;kr(s," `")?a=Qi(s):a=s;let c=a,_;Zi(c,"` ")?_=Xi(c):_=c;let w=_;return[new Sn(w),o]}}}function G_(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return new m;if(n.atLeastLength(1)&&n.head==="`")return new m;if(n.atLeastLength(2)&&n.head==="	"&&n.tail.head===i){let o=n.tail.head;e=n.tail.tail,t=i,r=x(" ",x(o,s))}else if(n.atLeastLength(2)&&n.head===`
`&&n.tail.head===i){let o=n.tail.head;e=n.tail.tail,t=i,r=x(" ",x(o,s))}else if(n.atLeastLength(2)&&n.head===" "&&n.tail.head===i){let o=n.tail.head;e=n.tail.tail,t=i,r=x(" ",x(o,s))}else if(n.atLeastLength(1)&&n.head===i){let o=n.head,a=n.tail,u=C(s);if(u.hasLength(0))return new m;{let c=u;return new $([c,a])}}else{let o=n.head;e=n.tail,t=i,r=x(o,s)}}}function sf(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n;if(i.hasLength(0))return new m;if(i.atLeastLength(1)&&i.head===")"&&s){let u=i.tail;return new $([o,new Ii(a),u])}else if(i.atLeastLength(1)&&i.head==="]"&&!s){let u=i.tail;return new $([o,new Ni(a),u])}else if(i.atLeastLength(1)&&i.head===`
`&&s)e=i.tail,t=s,r=o,n=a;else if(i.atLeastLength(1)&&i.head===`
`&&!s)e=i.tail,t=s,r=o,n=a+" ";else{let u=i.head;e=i.tail,t=s,r=o,n=a+u}}}function H_(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return new m;if(r.atLeastLength(2)&&r.head==="]"&&r.tail.head==="["){let i=r.tail.tail,s=C(n);return sf(i,!1,s,"")}else if(r.atLeastLength(2)&&r.head==="]"&&r.tail.head==="("){let i=r.tail.tail,s=C(n);return sf(i,!0,s,"")}else{let i=r.head;e=r.tail,t=x(i,n)}}}function J_(e,t){for(;;){let r=e,n=t;if(r.atLeastLength(1)&&r.head==="#")e=r.tail,t=n+1;else{if(r.hasLength(0)&&n>0)return new $([n,l([])]);if(r.atLeastLength(1)&&r.head===" "&&n!==0){let i=r.tail;return new $([n,i])}else if(r.atLeastLength(1)&&r.head===`
`&&n!==0){let i=r.tail;return new $([n,i])}else return new m}}}function no(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head,s=r.tail;if(i instanceof Ge){let o=i[0];e=s,t=n+o}else if(i instanceof Sn){let o=i.content;e=s,t=n+o}else if(i instanceof Hr){let o=i.content;e=ee(o,s),t=n}else if(i instanceof Gr){let o=i.content;e=ee(o,s),t=n}else if(i instanceof Fr){let o=i.content,a=no(o,n);e=s,t=a}else if(i instanceof Wr){let o=i.content,a=no(o,n);e=s,t=a}else e=s,t=n}}}function K_(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return[C(n),l([])];if(r.hasLength(1)&&r.head===`
`)return[C(n),l([])];if(r.atLeastLength(2)&&r.head===`
`&&r.tail.head===`
`){let i=r.tail.tail;return[C(n),i]}else{let i=r.head;e=r.tail,t=x(i,n)}}}function of(e,t){let r=G_(e,t,l([]));if(r instanceof m)return new m;{let n=r[0][0],i=r[0][1],s=io(n,"",l([]));return new $([s,i])}}function io(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0)&&i==="")return C(s);if(n.hasLength(0))return C(x(new Ge(i),s));if(n.atLeastLength(2)&&n.head==="\\"){let o=n.tail.head,a=n.tail.tail;o===`
`?(e=a,t="",r=x(new Pi,x(new Ge(i),s))):o===" "?(e=a,t=i+"&nbsp;",r=s):o==="!"||o==='"'||o==="#"||o==="$"||o==="%"||o==="&"||o==="'"||o==="("||o===")"||o==="*"||o==="+"||o===","||o==="-"||o==="."||o==="/"||o===":"||o===";"||o==="<"||o==="="||o===">"||o==="?"||o==="@"||o==="["||o==="\\"||o==="]"||o==="^"||o==="_"||o==="`"||o==="{"||o==="|"||o==="}"||o==="~"?(e=a,t=i+o,r=s):(e=ee(l([o]),a),t=i+"\\",r=s)}else if(n.atLeastLength(2)&&n.head==="_"&&n.tail.head!==" "&&n.tail.head!=="	"&&n.tail.head!==`
`){let o=n.tail.head,a=n.tail.tail,u=x(o,a),c=of(u,"_");if(c instanceof m)e=u,t=i+"_",r=s;else{let _=c[0][0];e=c[0][1],t="",r=x(new Gr(_),x(new Ge(i),s))}}else if(n.atLeastLength(2)&&n.head==="*"&&n.tail.head!==" "&&n.tail.head!=="	"&&n.tail.head!==`
`){let o=n.tail.head,a=n.tail.tail,u=x(o,a),c=of(u,"*");if(c instanceof m)e=u,t=i+"*",r=s;else{let _=c[0][0];e=c[0][1],t="",r=x(new Hr(_),x(new Ge(i),s))}}else if(n.atLeastLength(1)&&n.head==="["){let o=n.tail,a=lf(o,(u,c)=>new Fr(u,c));if(a instanceof m)e=o,t=i+"[",r=s;else{let u=a[0][0];e=a[0][1],t="",r=x(u,x(new Ge(i),s))}}else if(n.atLeastLength(2)&&n.head==="!"&&n.tail.head==="["){let o=n.tail.tail,a=lf(o,(u,c)=>new Wr(u,c));if(a instanceof m)e=o,t=i+"![",r=s;else{let u=a[0][0];e=a[0][1],t="",r=x(u,x(new Ge(i),s))}}else if(n.atLeastLength(1)&&n.head==="`"){let o=n.tail,a=W_(o,1),u=a[0];e=a[1],t="",r=x(u,x(new Ge(i),s))}else if(n.atLeastLength(1)&&n.head===`
`){let o=n.tail;e=En(o),t=i+`
`,r=s}else{let o=n.head;e=n.tail,t=i+o,r=s}}}function lf(e,t){let r=H_(e,l([]));if(r instanceof m)return new m;{let n=r[0][0],i=r[0][1],s=r[0][2],o=io(n,"",l([])),a;i instanceof Ni&&i[0]===""?a=new Ni(no(o,"")):a=i;let u=a;return new $([t(o,u),s])}}function ar(e,t){let r=K_(e,l([])),n=r[0],i=r[1],s=io(n,"",l([]));return[new qi(t,s),i]}function V_(e,t,r){let n=J_(e,1);if(n instanceof $){let i=n[0][0],s=n[0][1],o=En(s),a=U_(o,i,l([])),u=a[0],c=a[1],_=io(u,"",l([])),p=no(_,""),w,b=M_(p);if(b==="")w=[t,r];else{let W=b;if(rt(t,W).isOk())w=[t,r];else{let q=Pe(t,W,"#"+W),O=to(r,"id",W);w=[q,O]}}let v=w,B=v[0],j=v[1];return[new Ci(j,i,_),B,c]}else{let i=ar(x("#",e),r),s=i[0],o=i[1];return[s,t,o]}}function Y_(e,t,r,n){for(;;){let i=e,s=t,o=r,a=n,u=v_(i),c=En(u);if(c.hasLength(0))return new pa(C(o),s);if(c.atLeastLength(1)&&c.head==="{"){let _=c.tail,p=P_(_,a);if(p instanceof m){let w=ar(c,a),b=w[0];e=w[1],t=s,r=x(b,o),n=V()}else{let w=p[0][0];e=p[0][1],t=s,r=o,n=w}}else if(c.atLeastLength(1)&&c.head==="#"){let _=c.tail,p=V_(_,s,a),w=p[0],b=p[1];e=p[2],t=b,r=x(w,o),n=V()}else if(c.atLeastLength(1)&&c.head==="~"){let _=c.head,p=c.tail,w=rf(p,a,_);if(w instanceof m){let b=ar(c,a),v=b[0];e=b[1],t=s,r=x(v,o),n=V()}else{let b=w[0][0];e=w[0][1],t=s,r=x(b,o),n=V()}}else if(c.atLeastLength(1)&&c.head==="`"){let _=c.head,p=c.tail,w=rf(p,a,_);if(w instanceof m){let b=ar(c,a),v=b[0];e=b[1],t=s,r=x(v,o),n=V()}else{let b=w[0][0];e=w[0][1],t=s,r=x(b,o),n=V()}}else if(c.atLeastLength(1)&&c.head==="["){let _=c.tail,p=E_(_,"");if(p instanceof m){let w=ar(c,a),b=w[0];e=w[1],t=s,r=x(b,o),n=V()}else{let w=p[0][0],b=p[0][1],v=p[0][2],B=Pe(s,w,b);e=v,t=B,r=o,n=V()}}else if(c.atLeastLength(1)&&c.head==="-"){let _=c.tail,p=tf(1,_);if(p instanceof m){let w=ar(c,a),b=w[0];e=w[1],t=s,r=x(b,o),n=V()}else{let w=p[0][0];e=p[0][1],t=s,r=x(w,o),n=V()}}else if(c.atLeastLength(1)&&c.head==="*"){let _=c.tail,p=tf(1,_);if(p instanceof m){let w=ar(c,a),b=w[0];e=w[1],t=s,r=x(b,o),n=V()}else{let w=p[0][0];e=p[0][1],t=s,r=x(w,o),n=V()}}else{let _=ar(c,a),p=_[0];e=_[1],t=s,r=x(p,o),n=V()}}}function af(e){let r=Ji(e,`\r
`,`
`),n=tn(r);return Y_(n,V(),l([]),V())}function uf(e,t){if(e instanceof Ii)return e[0];{let r=e[0],n=rt(t,r);return n.isOk()?n[0]:""}}function da(e,t){for(;;){let r=e,n=t;if(r.hasLength(0))return n;{let i=r.head,s=r.tail;if(i instanceof Ge){let o=i[0];e=s,t=n+o}else if(i instanceof Sn){let o=i.content;e=s,t=n+o}else if(i instanceof Hr){let o=i.content;e=ee(o,s),t=n}else if(i instanceof Gr){let o=i.content;e=ee(o,s),t=n}else if(i instanceof Fr){let o=i.content,a=da(o,n);e=s,t=a}else if(i instanceof Wr){let o=i.content,a=da(o,n);e=s,t=a}else e=s,t=n}}}function ur(e,t){let n=xr(e),i=en(n,(s,o)=>Dn(s[0],o[0]));return Oe(i,t,(s,o)=>x(z(o[0],o[1]),s))}function Z_(e,t,r){if(t instanceof Pi)return l([uc(l([]))]);if(t instanceof Ge){let n=t[0];return l([h(n)])}else if(t instanceof Hr){let n=t.content;return l([hi(l([f("font-bold")]),Ot(e,n,r))])}else if(t instanceof Gr){let n=t.content;return l([cc(l([f("italic")]),Ot(e,n,r))])}else if(t instanceof Fr){let n=t.content,i=t.destination;return l([Xt(l([Qt(uf(i,r)),f("text-pink-700 hover:underline cursor-pointer")]),Ot(e,n,r))])}else if(t instanceof Wr){let n=t.content,i=t.destination;return l([fc(l([Yu(uf(i,r)),Zu(da(n,"")),f("max-w-full h-auto rounded-lg shadow-lg mt-8")]))])}else{let n=t.content;return l([ge(l([f("bg-zinc-800 px-1 py-0.5 rounded text-sm font-mono")]),l([h(n)]))])}}function Ot(e,t,r){for(;;){let n=e,i=t,s=r;if(i.hasLength(0))return n;{let o=i.head,a=i.tail;e=Z_(n,o,s),t=a,r=s}}}function Q_(e,t,r){let n;if(t instanceof qi){let s=t.attributes,o=t.content;n=qe(ur(s,l([f("pt-8")])),Ot(l([]),o,r))}else if(t instanceof Ci){let s=t.attributes,o=t.level,a=t.content;o===1?n=js(ur(s,l([f("text-3xl text-pink-700 font-light")])),Ot(l([]),a,r)):o===2?n=$i(ur(s,l([f("text-2xl text-pink-600 font-light pt-16")])),Ot(l([]),a,r)):o===3?n=we(ur(s,l([f("text-xl text-pink-600 font-light pt-12")])),Ot(l([]),a,r)):o===4?n=ke(ur(s,l([f("text-lg text-pink-600 font-light pt-8")])),Ot(l([]),a,r)):o===5?n=sc(ur(s,l([f("text-base text-pink-600 font-light pt-6")])),Ot(l([]),a,r)):n=oc(ur(s,l([f("text-sm text-pink-600 font-light pt-4")])),Ot(l([]),a,r))}else if(t instanceof Bi){let s=t.attributes,o=t.language,a=t.content;n=ve(ur(s,l([f("pt-8")])),l([ge((()=>{if(o instanceof $){let u=o[0];return l([f("language-"+u+" bg-zinc-800 p-4 rounded-md block overflow-x-auto")])}else return l([f("bg-zinc-800 p-4 rounded-md block overflow-x-auto")])})(),l([h(a)]))]))}else n=ac(l([f("border-zinc-700 my-8")]));return x(n,e)}function X_(e,t,r){for(;;){let n=e,i=t,s=r;if(n.hasLength(0))return s;{let o=n.head,a=n.tail,u=Q_(s,o,i);e=a,t=i,r=u}}}function e$(e){return C(X_(e.content,e.references,l([Te()])))}function so(e){let r=af(e);return e$(r)}var cr=class extends d{},Jr=class extends d{constructor(t){super(),this.articles=t}};function oo(e){let t;if(e instanceof cr)t=st(l([["version",bt(0)]]));else{let n=e.articles;t=st(l([["version",bt(1)],["articles",ti(n,Ys)]]))}return it(t)}function cf(){return R("version",me,e=>e===0?Ee(new cr):e===1?R("articles",Tt(yn()),t=>Ee(new Jr(t))):Iu(new cr,"Unsupported model version"))}function ff(e,t,r){return qt(n=>{let i=xc(e);if(i.isOk()){let s=i[0],o=Xn(bc(s),t);if(o.isOk()){let a=o[0];return n(r(new $(a)))}else return n(r(new m))}else return n(r(new m))})}var Tn="jst_lustre_state";var _a=class extends d{constructor(t,r,n,i,s,o,a,u){super(),this.id=t,this.short_code=r,this.target_url=n,this.created_by=i,this.created_at=s,this.updated_at=o,this.access_count=a,this.is_active=u}},lo=class extends d{constructor(t,r){super(),this.short_code=t,this.target_url=r}},$a=class extends d{constructor(t,r,n,i){super(),this.short_urls=t,this.total=r,this.limit=n,this.offset=i}},ao=class extends d{constructor(t,r){super(),this.id=t,this.is_active=r}};function ha(){return R("id",fe,e=>R("shortCode",fe,t=>R("targetUrl",fe,r=>R("createdBy",fe,n=>R("createdAt",me,i=>R("updatedAt",me,s=>R("accessCount",me,o=>R("isActive",Mu,a=>Ee(new _a(e,t,r,n,i,s,o,a))))))))))}function n$(){return R("shortUrls",Tt(ha()),e=>R("total",me,t=>R("limit",me,r=>R("offset",me,n=>Ee(new $a(e,t,r,n))))))}function i$(e){return st(l([["shortCode",ce(e.short_code)],["targetUrl",ce(e.target_url)]]))}function s$(e){let t=l([["id",ce(e.id)]]),r,n=e.is_active;if(n instanceof $){let s=n[0];r=x(["isActive",Ml(s)],t)}else r=t;return st(r)}function uo(e,t){let r,n=t.scheme;n instanceof $&&n[0]==="http"?r=Ze(e,new Ct):n instanceof $&&n[0]==="https"?r=Ze(e,new Ce):r=Ze(e,new Ce);let i=r,s,o=t.host;if(o instanceof $){let p=o[0];s=hn(i,p)}else s=i;let a=s,u,c=t.port;if(c instanceof $){let p=c[0];u=mn(a,p)}else u=a;return u}function pf(e,t,r){let n,i=i$(r);n=it(i);let s=n,o=Le(),a=xe(o,new kt),u=Ae(a,"/api/url"),c=Bt(u,s),_=uo(c,t);return je(_,Qe(ha(),e))}function df(e,t,r,n){let i="/api/url?limit="+D(r)+"&offset="+D(n),s=Le(),o=xe(s,new Ue),a=Ae(o,i),u=uo(a,t);return je(u,Qe(n$(),e))}function _f(e,t,r){let n=Le(),i=xe(n,new Pr),s=Ae(i,"/api/url/"+r),o=uo(s,t);return je(o,gn(e))}function $f(e,t,r){let n,i=s$(r);n=it(i);let s=n,o=Le(),a=xe(o,new Br),u=Ae(a,"/api/url/"+r.id),c=Bt(u,s),_=uo(c,t);return je(_,Qe(ha(),e))}var L=class extends d{constructor(t,r,n,i,s,o,a,u,c,_,p,w,b,v,B){super(),this.base_uri=t,this.route=r,this.session=n,this.articles=i,this.short_urls=s,this.short_url_form_short_code=o,this.short_url_form_target_url=a,this.djot_demo_content=u,this.edit_view_mode=c,this.profile_menu_open=_,this.notice=p,this.debug_use_local_storage=w,this.delete_confirmation=b,this.copy_feedback=v,this.expanded_urls=B}},pr=class extends d{},Di=class extends d{},fo=class extends d{constructor(t){super(),this.uri=t}},Ut=class extends d{constructor(t){super(),this.uri=t}},po=class extends d{},_o=class extends d{},ga=class extends d{constructor(t){super(),this.opt=t}},$o=class extends d{constructor(t){super(),this.article=t}},at=class extends d{constructor(t,r){super(),this.id=t,this.result=r}},dr=class extends d{constructor(t){super(),this.result=t}},ho=class extends d{constructor(t,r){super(),this.article=t,this.text=r}},mo=class extends d{constructor(t,r){super(),this.article=t,this.text=r}},wo=class extends d{constructor(t,r){super(),this.article=t,this.text=r}},go=class extends d{constructor(t,r){super(),this.article=t,this.text=r}},xo=class extends d{constructor(t,r){super(),this.article=t,this.content=r}},qn=class extends d{constructor(t,r){super(),this.id=t,this.result=r}},bo=class extends d{constructor(t){super(),this.article=t}},yo=class extends d{constructor(t){super(),this.article=t}},Ui=class extends d{},ko=class extends d{constructor(t){super(),this.result=t}},vo=class extends d{constructor(t){super(),this.article=t}},Lo=class extends d{constructor(t,r){super(),this.id=t,this.result=r}},Ao=class extends d{constructor(t){super(),this.article=t}},jo=class extends d{constructor(t){super(),this.article=t}},zo=class extends d{constructor(t,r){super(),this.username=t,this.password=r}},Oo=class extends d{constructor(t){super(),this.result=t}},Ri=class extends d{},So=class extends d{constructor(t){super(),this.result=t}},Eo=class extends d{},Fi=class extends d{constructor(t){super(),this.result=t}},To=class extends d{constructor(t){super(),this.content=t}},qo=class extends d{constructor(t,r){super(),this.short_code=t,this.target_url=r}},Co=class extends d{constructor(t){super(),this.result=t}},Bo=class extends d{constructor(t){super(),this.result=t}},Wi=class extends d{constructor(t){super(),this.id=t}},Po=class extends d{constructor(t,r){super(),this.id=t,this.result=r}},No=class extends d{constructor(t){super(),this.id=t}},Io=class extends d{},Mo=class extends d{constructor(t){super(),this.text=t}},Do=class extends d{constructor(t){super(),this.text=t}},Vr=class extends d{constructor(t){super(),this.short_code=t}},Uo=class extends d{},Yr=class extends d{constructor(t,r){super(),this.id=t,this.is_active=r}},Ro=class extends d{constructor(t,r){super(),this.id=t,this.result=r}},_r=class extends d{constructor(t){super(),this.id=t}},Fo=class extends d{},Wo=class extends d{},Go=class extends d{constructor(t){super(),this.res=t}},xa=class extends d{},Ho=class extends d{},Jo=class extends d{};function hf(e){if(e==="")return!1;if(Yi(e,".")){let r=St(e,".");if(el(r)>=2)if(qa(r,s=>Et(s)>0)){let s=Ca(r);if(s.isOk()){let o=s[0];return Et(o)>=2}else return!1}else return!1;else return!1}else return!1}function Mi(e){if(e==="")return[!1,new $("URL is required")];{let t=ie(e);if(t.isOk()){let r=t[0],n=r.scheme,i=r.host;if(n instanceof $&&i instanceof $){let s=n[0],o=i[0];return s==="http"?hf(o)?[!0,new m]:[!1,new $("Host must be a valid domain with a TLD (e.g., example.com)")]:s==="https"?hf(o)?[!0,new m]:[!1,new $("Host must be a valid domain with a TLD (e.g., example.com)")]:[!1,new $("URL must use http or https protocol")]}else return n instanceof m&&i instanceof $?[!1,new $("URL must include a protocol (http or https)")]:n instanceof $&&i instanceof m?[!1,new $("URL must include a host")]:[!1,new $("URL must include both protocol and host")]}else return[!1,new $("Invalid URL format")]}}function l$(e){re("fetch_articles_model called","src\\jst_lustre.gleam",1057);let t=e[0],r=e[1],n,i=t;n=new L(i.base_uri,i.route,i.session,new H,i.short_urls,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage,i.delete_confirmation,i.copy_feedback,i.expanded_urls);let s=n,o=Sr(l([r,ji(a=>new dr(a),s.base_uri)]));return[s,o]}function co(e,t){let r=ca(t);if(r instanceof At)return[(()=>{let n=e;return new L(n.base_uri,r,n.session,n.articles,n.short_urls,n.short_url_form_short_code,n.short_url_form_target_url,n.djot_demo_content,n.edit_view_mode,n.profile_menu_open,n.notice,n.debug_use_local_storage,n.delete_confirmation,n.copy_feedback,n.expanded_urls)})(),A()];if(r instanceof Lt){let n=r.slug,i=e.articles;if(i instanceof U)return[(()=>{let s=e;return new L(s.base_uri,r,s.session,new H,s.short_urls,s.short_url_form_short_code,s.short_url_form_target_url,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage,s.delete_confirmation,s.copy_feedback,s.expanded_urls)})(),ji(s=>new dr(s),e.base_uri)];if(i instanceof S){let s=i[0],o=tl(s,A(),(c,_)=>{let p=_.slug===n,w=_.content;return p&&w instanceof U?[Sr(l([c,ir(b=>new at(_.id,b),_.id,e.base_uri)])),(()=>{let b=_;return new Z(b.id,b.slug,b.revision,b.author,b.tags,b.published_at,b.title,b.subtitle,b.leading,new H,b.draft)})()]:[c,_]}),a=o[0],u=o[1];return[(()=>{let c=e;return new L(c.base_uri,r,c.session,new S(u),c.short_urls,c.short_url_form_short_code,c.short_url_form_target_url,c.djot_demo_content,c.edit_view_mode,c.profile_menu_open,c.notice,c.debug_use_local_storage,c.delete_confirmation,c.copy_feedback,c.expanded_urls)})(),a]}else return[(()=>{let s=e;return new L(s.base_uri,r,s.session,s.articles,s.short_urls,s.short_url_form_short_code,s.short_url_form_target_url,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage,s.delete_confirmation,s.copy_feedback,s.expanded_urls)})(),A()]}else if(r instanceof lt){let n=r.id,i=e.articles;if(i instanceof U)return[(()=>{let s=e;return new L(s.base_uri,r,s.session,new H,s.short_urls,s.short_url_form_short_code,s.short_url_form_target_url,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage,s.delete_confirmation,s.copy_feedback,s.expanded_urls)})(),ji(s=>new dr(s),e.base_uri)];if(i instanceof S){let s=i[0],o=tl(s,A(),(c,_)=>{let p;if(_.draft instanceof $)p=_;else{let j=_;p=new Z(j.id,j.slug,j.revision,j.author,j.tags,j.published_at,j.title,j.subtitle,j.leading,j.content,bn(_))}let b=p,v=b.id===n,B=b.content;return v&&B instanceof U?[Sr(l([c,ir(j=>new at(b.id,j),b.id,e.base_uri)])),(()=>{let j=b;return new Z(j.id,j.slug,j.revision,j.author,j.tags,j.published_at,j.title,j.subtitle,j.leading,new H,bn(b))})()]:[c,b]}),a=o[0],u=o[1];return re(vn(r),"src\\jst_lustre.gleam",1143),[(()=>{let c=e;return new L(c.base_uri,r,c.session,new S(u),c.short_urls,c.short_url_form_short_code,c.short_url_form_target_url,c.djot_demo_content,c.edit_view_mode,c.profile_menu_open,c.notice,c.debug_use_local_storage,c.delete_confirmation,c.copy_feedback,c.expanded_urls)})(),a]}else return[(()=>{let s=e;return new L(s.base_uri,r,s.session,s.articles,s.short_urls,s.short_url_form_short_code,s.short_url_form_target_url,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage,s.delete_confirmation,s.copy_feedback,s.expanded_urls)})(),A()]}else{if(r instanceof ot)return e.articles instanceof U?[(()=>{let i=e;return new L(i.base_uri,r,i.session,new H,i.short_urls,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage,i.delete_confirmation,i.copy_feedback,i.expanded_urls)})(),ji(i=>new dr(i),e.base_uri)]:[(()=>{let i=e;return new L(i.base_uri,r,i.session,i.articles,i.short_urls,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage,i.delete_confirmation,i.copy_feedback,i.expanded_urls)})(),A()];if(r instanceof It)return[(()=>{let n=e;return new L(n.base_uri,r,n.session,n.articles,n.short_urls,n.short_url_form_short_code,n.short_url_form_target_url,n.djot_demo_content,n.edit_view_mode,n.profile_menu_open,n.notice,n.debug_use_local_storage,n.delete_confirmation,n.copy_feedback,n.expanded_urls)})(),A()];if(r instanceof et)return e.short_urls instanceof U?[(()=>{let i=e;return new L(i.base_uri,r,i.session,i.articles,new H,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage,i.delete_confirmation,i.copy_feedback,i.expanded_urls)})(),df(i=>new Bo(i),e.base_uri,10,0)]:[(()=>{let i=e;return new L(i.base_uri,r,i.session,i.articles,i.short_urls,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage,i.delete_confirmation,i.copy_feedback,i.expanded_urls)})(),A()];if(r instanceof sr){let n=r[0];return[(()=>{let i=e;return new L(i.base_uri,r,i.session,i.articles,i.short_urls,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage,i.delete_confirmation,i.copy_feedback,i.expanded_urls)})(),A()]}else return r instanceof jt?[(()=>{let n=e;return new L(n.base_uri,r,n.session,n.articles,n.short_urls,n.short_url_form_short_code,n.short_url_form_target_url,n.djot_demo_content,n.edit_view_mode,n.profile_menu_open,n.notice,n.debug_use_local_storage,n.delete_confirmation,n.copy_feedback,n.expanded_urls)})(),A()]:[(()=>{let n=e;return new L(n.base_uri,r,n.session,n.articles,n.short_urls,n.short_url_form_short_code,n.short_url_form_target_url,n.djot_demo_content,n.edit_view_mode,n.profile_menu_open,n.notice,n.debug_use_local_storage,n.delete_confirmation,n.copy_feedback,n.expanded_urls)})(),A()]}}function mf(e,t){if(t instanceof Go){let r=t.res;re("GotLocalModelResult called","src\\jst_lustre.gleam",293),re(r,"src\\jst_lustre.gleam",294);let n=We(e.route);if(r instanceof $){let i=r[0];if(i instanceof cr)return co(e,n);{let s=i.articles;return co((()=>{let o=e;return new L(o.base_uri,o.route,o.session,new S(s),o.short_urls,o.short_url_form_short_code,o.short_url_form_target_url,o.djot_demo_content,o.edit_view_mode,o.profile_menu_open,o.notice,!0,o.delete_confirmation,o.copy_feedback,o.expanded_urls)})(),n)}}else{let i,s=e;i=new L(s.base_uri,s.route,s.session,s.articles,s.short_urls,s.short_url_form_short_code,s.short_url_form_target_url,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,!1,s.delete_confirmation,s.copy_feedback,s.expanded_urls);let a=co(i,n);return l$(a)}}else if(t instanceof fo){let r=t.uri;return co(e,r)}else if(t instanceof Ut){let r=t.uri;return re("user mouse down navigation","src\\jst_lustre.gleam",324),re(r,"src\\jst_lustre.gleam",325),[e,tr($e(r),new m,new m)]}else{if(t instanceof po)return[(()=>{let r=e;return new L(r.base_uri,r.route,r.session,r.articles,r.short_urls,r.short_url_form_short_code,r.short_url_form_target_url,r.djot_demo_content,r.edit_view_mode,!e.profile_menu_open,r.notice,r.debug_use_local_storage,r.delete_confirmation,r.copy_feedback,r.expanded_urls)})(),A()];if(t instanceof _o)return[(()=>{let r=e;return new L(r.base_uri,r.route,r.session,r.articles,r.short_urls,r.short_url_form_short_code,r.short_url_form_target_url,r.djot_demo_content,r.edit_view_mode,r.profile_menu_open,"",r.debug_use_local_storage,r.delete_confirmation,r.copy_feedback,r.expanded_urls)})(),A()];if(t instanceof ga){let r=t.opt;if(r instanceof $&&r[0]instanceof Jr){let n=r[0].articles;return[(()=>{let i=e;return new L(i.base_uri,i.route,i.session,new S(n),i.short_urls,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage,i.delete_confirmation,i.copy_feedback,i.expanded_urls)})(),A()]}else return r instanceof $&&r[0]instanceof cr?[e,A()]:[e,A()]}else if(t instanceof dr){let r=t.result,n=e.route;if(r.isOk()&&n instanceof Lt){let i=r[0],s=n.slug,o=nt(i,a=>a.slug===s);if(o.isOk()&&o[0]instanceof Z&&o[0].content instanceof U){let a=o[0].id,u=M(i,c=>{if(c.slug===s){let p=c;return new Z(p.id,p.slug,p.revision,p.author,p.tags,p.published_at,p.title,p.subtitle,p.leading,new H,p.draft)}else return c});return[(()=>{let c=e;return new L(c.base_uri,c.route,c.session,new S(u),c.short_urls,c.short_url_form_short_code,c.short_url_form_target_url,c.djot_demo_content,c.edit_view_mode,c.profile_menu_open,c.notice,c.debug_use_local_storage,c.delete_confirmation,c.copy_feedback,c.expanded_urls)})(),ir(c=>new at(a,c),a,e.base_uri)]}else if(o.isOk()&&o[0]instanceof Z&&o[0].content instanceof U){let a=o[0].id,u=M(i,c=>{if(c.slug===s){let p=c;return new Z(p.id,p.slug,p.revision,p.author,p.tags,p.published_at,p.title,p.subtitle,p.leading,new H,p.draft)}else return c});return[(()=>{let c=e;return new L(c.base_uri,c.route,c.session,new S(u),c.short_urls,c.short_url_form_short_code,c.short_url_form_target_url,c.djot_demo_content,c.edit_view_mode,c.profile_menu_open,c.notice,c.debug_use_local_storage,c.delete_confirmation,c.copy_feedback,c.expanded_urls)})(),ir(c=>new at(a,c),a,e.base_uri)]}else return o.isOk()?(re("article exists. content is pending or loading.","src\\jst_lustre.gleam",397),[e,A()]):[e,tr((()=>{let a=e.route,u=We(a),c=new zi(u);return vn(c)})(),new m,new m)]}else if(r.isOk()&&n instanceof lt){let i=r[0],s=n.id;return[(()=>{let o=e;return new L(o.base_uri,o.route,o.session,new S(i),o.short_urls,o.short_url_form_short_code,o.short_url_form_target_url,o.djot_demo_content,o.edit_view_mode,o.profile_menu_open,o.notice,o.debug_use_local_storage,o.delete_confirmation,o.copy_feedback,o.expanded_urls)})(),ir(o=>new at(s,o),s,e.base_uri)]}else if(r.isOk()){let i=r[0];return[(()=>{let s=e;return new L(s.base_uri,s.route,s.session,new S(i),s.short_urls,s.short_url_form_short_code,s.short_url_form_target_url,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage,s.delete_confirmation,s.copy_feedback,s.expanded_urls)})(),A()]}else{let i=r[0];return[(()=>{let s=e;return new L(s.base_uri,s.route,s.session,new ze(i),s.short_urls,s.short_url_form_short_code,s.short_url_form_target_url,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage,s.delete_confirmation,s.copy_feedback,s.expanded_urls)})(),A()]}}else if(t instanceof at){let r=t.id,n=t.result;if(n.isOk()){let i=n[0],s=r===i.id;if(!s)throw J("let_assert","jst_lustre",431,"update","Pattern match failed, no pattern matched the value.",{value:s});let o,a=e.articles;o=Re(a,c=>M(c,_=>r===_.id?i:_));let u=o;return[(()=>{let c=e;return new L(c.base_uri,c.route,c.session,u,c.short_urls,c.short_url_form_short_code,c.short_url_form_target_url,c.djot_demo_content,c.edit_view_mode,c.profile_menu_open,c.notice,c.debug_use_local_storage,c.delete_confirmation,c.copy_feedback,c.expanded_urls)})(),A()]}else{let i=n[0],s,o=e.articles;s=Re(o,u=>M(u,c=>{if(r===c.id){let p=c;return new Z(p.id,p.slug,p.revision,p.author,p.tags,p.published_at,p.title,p.subtitle,p.leading,new ze(i),p.draft)}else return c}));let a=s;return[(()=>{let u=e;return new L(u.base_uri,u.route,u.session,a,u.short_urls,u.short_url_form_short_code,u.short_url_form_target_url,u.djot_demo_content,u.edit_view_mode,u.profile_menu_open,u.notice,u.debug_use_local_storage,u.delete_confirmation,u.copy_feedback,u.expanded_urls)})(),A()]}}else if(t instanceof $o){let r=t.article,n=r.content;if(n instanceof U){let i,s=e.articles;i=Re(s,a=>M(a,u=>{if(r.id===u.id){let _=u;return new Z(_.id,_.slug,_.revision,_.author,_.tags,_.published_at,_.title,_.subtitle,_.leading,new H,_.draft)}else return u}));let o=i;return[(()=>{let a=e;return new L(a.base_uri,a.route,a.session,o,a.short_urls,a.short_url_form_short_code,a.short_url_form_target_url,a.djot_demo_content,a.edit_view_mode,a.profile_menu_open,a.notice,a.debug_use_local_storage,a.delete_confirmation,a.copy_feedback,a.expanded_urls)})(),ir(a=>new at(r.id,a),r.id,e.base_uri)]}else return n instanceof ze?[e,ir(i=>new at(r.id,i),r.id,e.base_uri)]:n instanceof H?[e,A()]:n instanceof S?[e,A()]:[e,A()]}else if(t instanceof ho){let r=t.article,n=t.text;if(r instanceof Z&&r.draft instanceof $){let i=kn(r,s=>Oc(s,n));return[(()=>{let s=e;return new L(s.base_uri,s.route,s.session,Re(e.articles,o=>M(o,a=>r.id===a.id?i:a)),s.short_urls,s.short_url_form_short_code,s.short_url_form_target_url,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage,s.delete_confirmation,s.copy_feedback,s.expanded_urls)})(),A()]}else return[e,A()]}else if(t instanceof mo){let r=t.article,n=t.text,i=kn(r,o=>Sc(o,n)),s=Re(e.articles,o=>M(o,a=>r.id===a.id?i:a));return[(()=>{let o=e;return new L(o.base_uri,o.route,o.session,s,o.short_urls,o.short_url_form_short_code,o.short_url_form_target_url,o.djot_demo_content,o.edit_view_mode,o.profile_menu_open,o.notice,o.debug_use_local_storage,o.delete_confirmation,o.copy_feedback,o.expanded_urls)})(),A()]}else if(t instanceof wo){let r=t.article,n=t.text,i=kn(r,o=>Tc(o,n)),s=Re(e.articles,o=>M(o,a=>r.id===a.id?i:a));return[(()=>{let o=e;return new L(o.base_uri,o.route,o.session,s,o.short_urls,o.short_url_form_short_code,o.short_url_form_target_url,o.djot_demo_content,o.edit_view_mode,o.profile_menu_open,o.notice,o.debug_use_local_storage,o.delete_confirmation,o.copy_feedback,o.expanded_urls)})(),A()]}else if(t instanceof go){let r=t.article,n=t.text,i=kn(r,o=>Ec(o,n)),s=Re(e.articles,o=>M(o,a=>r.id===a.id?i:a));return[(()=>{let o=e;return new L(o.base_uri,o.route,o.session,s,o.short_urls,o.short_url_form_short_code,o.short_url_form_target_url,o.djot_demo_content,o.edit_view_mode,o.profile_menu_open,o.notice,o.debug_use_local_storage,o.delete_confirmation,o.copy_feedback,o.expanded_urls)})(),A()]}else if(t instanceof xo){let r=t.article,n=t.content,i=kn(r,s=>qc(s,n));return[(()=>{let s=e;return new L(s.base_uri,s.route,s.session,Re(e.articles,o=>M(o,a=>r.id===a.id?i:a)),s.short_urls,s.short_url_form_short_code,s.short_url_form_target_url,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage,s.delete_confirmation,s.copy_feedback,s.expanded_urls)})(),A()]}else if(t instanceof yo){let r=t.article;re("article draft discard clicked","src\\jst_lustre.gleam",605);let n=Re(e.articles,i=>M(i,s=>{if(r.id===s.id){let a=r;return new Z(a.id,a.slug,a.revision,a.author,a.tags,a.published_at,a.title,a.subtitle,a.leading,a.content,new m)}else return s}));return[(()=>{let i=e;return new L(i.base_uri,i.route,i.session,n,i.short_urls,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage,i.delete_confirmation,i.copy_feedback,i.expanded_urls)})(),tr((()=>{let i=Xs(new Mt(r,e.session));return $e(i)})(),new m,new m)]}else if(t instanceof bo){let r=t.article,n=r.draft;if(n instanceof $){let i=n[0],s,o=r;s=new Z(o.id,Ns(i),o.revision,o.author,o.tags,o.published_at,Is(i),Ms(i),wi(i),new S(gi(i)),new $(i));let a=s,u=Re(e.articles,c=>M(c,_=>r.id===_.id?a:_));return[(()=>{let c=e;return new L(c.base_uri,c.route,c.session,u,c.short_urls,c.short_url_form_short_code,c.short_url_form_target_url,c.djot_demo_content,c.edit_view_mode,c.profile_menu_open,c.notice,c.debug_use_local_storage,c.delete_confirmation,c.copy_feedback,c.expanded_urls)})(),Sr(l([Zs(c=>new qn(a.id,c),a,e.base_uri),tr((()=>{let c=Xs(new Mt(a,e.session));return $e(c)})(),new m,new m)]))]}else return[e,A()]}else if(t instanceof qn){let r=t.id,n=t.result;if(n.isOk()){let i=n[0],s=Re(e.articles,o=>M(o,a=>r===a.id?i:a));return[(()=>{let o=e;return new L(o.base_uri,o.route,o.session,s,o.short_urls,o.short_url_form_short_code,o.short_url_form_target_url,o.djot_demo_content,o.edit_view_mode,o.profile_menu_open,o.notice,o.debug_use_local_storage,o.delete_confirmation,o.copy_feedback,o.expanded_urls)})(),A()]}else{let i=n[0];return re("article update response error","src\\jst_lustre.gleam",686),re(i,"src\\jst_lustre.gleam",687),[e,A()]}}else if(t instanceof zo){let r=t.username,n=t.password;return[(()=>{let i=e;return new L(i.base_uri,i.route,new xn,i.articles,i.short_urls,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,"login, CLICK",i.debug_use_local_storage,i.delete_confirmation,i.copy_feedback,i.expanded_urls)})(),Gc(i=>new Oo(i),r,n,e.base_uri)]}else if(t instanceof Oo){let r=t.result;if(r.isOk()){let n=r[0];return[(()=>{let i=e;return new L(i.base_uri,i.route,n,i.articles,i.short_urls,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,"login, OK",i.debug_use_local_storage,i.delete_confirmation,i.copy_feedback,i.expanded_urls)})(),A()]}else{let n=r[0];return re(n,"src\\jst_lustre.gleam",706),[(()=>{let i=e;return new L(i.base_uri,i.route,new Fe,i.articles,i.short_urls,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,"login, ERROR",i.debug_use_local_storage,i.delete_confirmation,i.copy_feedback,i.expanded_urls)})(),A()]}}else{if(t instanceof Ri)return[(()=>{let r=e;return new L(r.base_uri,r.route,new Fe,r.articles,r.short_urls,r.short_url_form_short_code,r.short_url_form_target_url,r.djot_demo_content,r.edit_view_mode,r.profile_menu_open,r.notice,r.debug_use_local_storage,r.delete_confirmation,r.copy_feedback,r.expanded_urls)})(),Fc(r=>new So(r),e.base_uri)];if(t instanceof So)return[(()=>{let r=e;return new L(r.base_uri,r.route,new Fe,r.articles,r.short_urls,r.short_url_form_short_code,r.short_url_form_target_url,r.djot_demo_content,r.edit_view_mode,r.profile_menu_open,r.notice,r.debug_use_local_storage,r.delete_confirmation,r.copy_feedback,r.expanded_urls)})(),A()];if(t instanceof Eo)return[(()=>{let r=e;return new L(r.base_uri,r.route,r.session,r.articles,r.short_urls,r.short_url_form_short_code,r.short_url_form_target_url,r.djot_demo_content,r.edit_view_mode,r.profile_menu_open,"auth check, CLICK",r.debug_use_local_storage,r.delete_confirmation,r.copy_feedback,r.expanded_urls)})(),aa(r=>new Fi(r),e.base_uri)];if(t instanceof Fi){let r=t.result;if(r.isOk()){let n=r[0];return[(()=>{let i=e;return new L(i.base_uri,i.route,n,i.articles,i.short_urls,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,"auth check, OK",i.debug_use_local_storage,i.delete_confirmation,i.copy_feedback,i.expanded_urls)})(),A()]}else{let n=r[0];return re("session check response error","src\\jst_lustre.gleam",739),re(n,"src\\jst_lustre.gleam",740),[(()=>{let i=e;return new L(i.base_uri,i.route,new Fe,i.articles,i.short_urls,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,"auth check, ERROR",i.debug_use_local_storage,i.delete_confirmation,i.copy_feedback,i.expanded_urls)})(),A()]}}else if(t instanceof To){let r=t.content;return[(()=>{let n=e;return new L(n.base_uri,n.route,n.session,n.articles,n.short_urls,n.short_url_form_short_code,n.short_url_form_target_url,r,n.edit_view_mode,n.profile_menu_open,n.notice,n.debug_use_local_storage,n.delete_confirmation,n.copy_feedback,n.expanded_urls)})(),A()]}else if(t instanceof Fo){let r;e.edit_view_mode instanceof pr?r=new Di:r=new pr;let i=r;return[(()=>{let s=e;return new L(s.base_uri,s.route,s.session,s.articles,s.short_urls,s.short_url_form_short_code,s.short_url_form_target_url,s.djot_demo_content,i,s.profile_menu_open,s.notice,s.debug_use_local_storage,s.delete_confirmation,s.copy_feedback,s.expanded_urls)})(),A()]}else if(t instanceof Ui){re("article create clicked","src\\jst_lustre.gleam",771);let r=new Z("","new-article",1,"current-user",l([]),new m,"New Article","A new article subtitle","This is a new article. Start editing to customize it.",new S(`# New Article

Start writing your article content here...`),new m);return[e,Yc(n=>new ko(n),r,e.base_uri)]}else if(t instanceof ko){let r=t.result;if(r.isOk()){let n=r[0];re("article created successfully with id: "+n.id,"src\\jst_lustre.gleam",803);let i,s=e.articles;if(s instanceof S){let a=s[0];i=new S(x(n,a))}else i=s;let o=i;return[(()=>{let a=e;return new L(a.base_uri,a.route,a.session,o,a.short_urls,a.short_url_form_short_code,a.short_url_form_target_url,a.djot_demo_content,a.edit_view_mode,a.profile_menu_open,a.notice,a.debug_use_local_storage,a.delete_confirmation,a.copy_feedback,a.expanded_urls)})(),tr((()=>{let a=new lt(n.id),u=We(a);return $e(u)})(),new m,new m)]}else{let n=r[0];return re("article creation error","src\\jst_lustre.gleam",823),re(n,"src\\jst_lustre.gleam",824),[e,A()]}}else if(t instanceof vo){let r=t.article;return re("article delete clicked","src\\jst_lustre.gleam",831),[e,Sr(l([Vc(n=>new Lo(r.id,n),r.id,e.base_uri),tr((()=>{let n=new ot,i=We(n);return $e(i)})(),new m,new m)]))]}else if(t instanceof Lo){let r=t.id,n=t.result;if(n.isOk()){let i=Re(e.articles,s=>dt(s,o=>o.id!==r));return[(()=>{let s=e;return new L(s.base_uri,s.route,s.session,i,s.short_urls,s.short_url_form_short_code,s.short_url_form_target_url,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage,s.delete_confirmation,s.copy_feedback,s.expanded_urls)})(),A()]}else{let i=n[0];return re("article delete response error","src\\jst_lustre.gleam",859),re(i,"src\\jst_lustre.gleam",860),[e,A()]}}else if(t instanceof Ao){let r=t.article;re("article publish clicked","src\\jst_lustre.gleam",866);let n,i=r;return n=new Z(i.id,i.slug,i.revision,i.author,i.tags,new $(ju()),i.title,i.subtitle,i.leading,i.content,i.draft),[e,Zs(o=>new qn(r.id,o),n,e.base_uri)]}else if(t instanceof jo){let r=t.article;return re("article unpublish clicked","src\\jst_lustre.gleam",878),[e,Zs(n=>new qn(r.id,n),(()=>{let n=r;return new Z(n.id,n.slug,n.revision,n.author,n.tags,new m,n.title,n.subtitle,n.leading,n.content,n.draft)})(),e.base_uri)]}else if(t instanceof qo){let r=t.short_code,n=t.target_url,s=Mi(n)[0],o=e.session;if(s&&o instanceof nr){let a=new lo(r,n);return[e,pf(u=>new Co(u),e.base_uri,a)]}else return s?[e,A()]:[e,A()]}else if(t instanceof Co){let r=t.result;if(r.isOk()){let n=r[0],i,s=e.short_urls;if(s instanceof U)i=new S(l([n]));else if(s instanceof H)i=new S(l([n]));else if(s instanceof S){let a=s[0];i=new S(x(n,a))}else s instanceof Xe?i=new S(l([n])):i=new S(l([n]));let o=i;return[(()=>{let a=e;return new L(a.base_uri,a.route,a.session,a.articles,o,a.short_url_form_short_code,a.short_url_form_target_url,a.djot_demo_content,a.edit_view_mode,a.profile_menu_open,a.notice,a.debug_use_local_storage,a.delete_confirmation,a.copy_feedback,a.expanded_urls)})(),A()]}else{let n=r[0];return[(()=>{let i=e;return new L(i.base_uri,i.route,i.session,i.articles,new ze(n),i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage,i.delete_confirmation,i.copy_feedback,i.expanded_urls)})(),A()]}}else if(t instanceof Bo){let r=t.result;if(r.isOk()){let n=r[0];return[(()=>{let i=e;return new L(i.base_uri,i.route,i.session,i.articles,new S(n.short_urls),i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage,i.delete_confirmation,i.copy_feedback,i.expanded_urls)})(),A()]}else{let n=r[0];return[(()=>{let i=e;return new L(i.base_uri,i.route,i.session,i.articles,new ze(n),i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage,i.delete_confirmation,i.copy_feedback,i.expanded_urls)})(),A()]}}else if(t instanceof Wi){let r=t.id;return[(()=>{let n=e;return new L(n.base_uri,n.route,n.session,n.articles,n.short_urls,n.short_url_form_short_code,n.short_url_form_target_url,n.djot_demo_content,n.edit_view_mode,n.profile_menu_open,n.notice,n.debug_use_local_storage,new $(r),n.copy_feedback,n.expanded_urls)})(),A()]}else if(t instanceof No){let r=t.id;return[(()=>{let n=e;return new L(n.base_uri,n.route,n.session,n.articles,n.short_urls,n.short_url_form_short_code,n.short_url_form_target_url,n.djot_demo_content,n.edit_view_mode,n.profile_menu_open,n.notice,n.debug_use_local_storage,new m,n.copy_feedback,n.expanded_urls)})(),_f(n=>new Po(r,n),e.base_uri,r)]}else{if(t instanceof Io)return[(()=>{let r=e;return new L(r.base_uri,r.route,r.session,r.articles,r.short_urls,r.short_url_form_short_code,r.short_url_form_target_url,r.djot_demo_content,r.edit_view_mode,r.profile_menu_open,r.notice,r.debug_use_local_storage,new m,r.copy_feedback,r.expanded_urls)})(),A()];if(t instanceof Po){let r=t.id;if(t.result.isOk()){let i,s=e.short_urls;if(s instanceof U)i=new U;else if(s instanceof H)i=new H;else if(s instanceof S){let a=s[0];i=new S(dt(a,u=>u.id!==r))}else s instanceof Xe?i=new U:i=new U;let o=i;return[(()=>{let a=e;return new L(a.base_uri,a.route,a.session,a.articles,o,a.short_url_form_short_code,a.short_url_form_target_url,a.djot_demo_content,a.edit_view_mode,a.profile_menu_open,a.notice,a.debug_use_local_storage,a.delete_confirmation,a.copy_feedback,a.expanded_urls)})(),tr($e(We(new et)),new m,new m)]}else return[e,A()]}else if(t instanceof Mo){let r=t.text;return[(()=>{let n=e;return new L(n.base_uri,n.route,n.session,n.articles,n.short_urls,r,n.short_url_form_target_url,n.djot_demo_content,n.edit_view_mode,n.profile_menu_open,n.notice,n.debug_use_local_storage,n.delete_confirmation,n.copy_feedback,n.expanded_urls)})(),A()]}else if(t instanceof Do){let r=t.text;return[(()=>{let n=e;return new L(n.base_uri,n.route,n.session,n.articles,n.short_urls,n.short_url_form_short_code,r,n.djot_demo_content,n.edit_view_mode,n.profile_menu_open,n.notice,n.debug_use_local_storage,n.delete_confirmation,n.copy_feedback,n.expanded_urls)})(),A()]}else if(t instanceof Vr){let r=t.short_code,n="u.jst.dev/"+r;return yc(n),[(()=>{let i=e;return new L(i.base_uri,i.route,i.session,i.articles,i.short_urls,i.short_url_form_short_code,i.short_url_form_target_url,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage,i.delete_confirmation,new $(r),i.expanded_urls)})(),qt(i=>kc(()=>i(new Uo),2e3))]}else{if(t instanceof Uo)return[(()=>{let r=e;return new L(r.base_uri,r.route,r.session,r.articles,r.short_urls,r.short_url_form_short_code,r.short_url_form_target_url,r.djot_demo_content,r.edit_view_mode,r.profile_menu_open,r.notice,r.debug_use_local_storage,r.delete_confirmation,new m,r.expanded_urls)})(),A()];if(t instanceof Yr){let r=t.id,n=t.is_active,i=new ao(r,new $(!n));return[e,$f(s=>new Ro(r,s),e.base_uri,i)]}else if(t instanceof Ro){let r=t.id,n=t.result;if(n.isOk()){let i=n[0],s,o=e.short_urls;if(o instanceof U)s=new U;else if(o instanceof H)s=new H;else if(o instanceof S){let u=o[0];s=new S(M(u,c=>c.id===r?i:c))}else o instanceof Xe?s=new U:s=new U;let a=s;return[(()=>{let u=e;return new L(u.base_uri,u.route,u.session,u.articles,a,u.short_url_form_short_code,u.short_url_form_target_url,u.djot_demo_content,u.edit_view_mode,u.profile_menu_open,u.notice,u.debug_use_local_storage,u.delete_confirmation,u.copy_feedback,u.expanded_urls)})(),A()]}else{let i=n[0];return[(()=>{let s=e;return new L(s.base_uri,s.route,s.session,s.articles,new ze(i),s.short_url_form_short_code,s.short_url_form_target_url,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage,s.delete_confirmation,s.copy_feedback,s.expanded_urls)})(),A()]}}else if(t instanceof _r){let r=t.id,n;Sl(e.expanded_urls,r)?n=Ou(e.expanded_urls,r):n=El(e.expanded_urls,r);let s=n;return[(()=>{let o=e;return new L(o.base_uri,o.route,o.session,o.articles,o.short_urls,o.short_url_form_short_code,o.short_url_form_target_url,o.djot_demo_content,o.edit_view_mode,o.profile_menu_open,o.notice,o.debug_use_local_storage,o.delete_confirmation,o.copy_feedback,s)})(),A()]}else{if(e.debug_use_local_storage)_n(Tn,"");else{let n=new Jr((()=>{let i=e.articles;return i instanceof U?l([]):i instanceof H?l([]):i instanceof S?i[0]:i instanceof Xe?l([]):l([])})());_n(Tn,oo(n))}return[(()=>{let n=e;return new L(n.base_uri,n.route,n.session,n.articles,n.short_urls,n.short_url_form_short_code,n.short_url_form_target_url,n.djot_demo_content,n.edit_view_mode,n.profile_menu_open,n.notice,!e.debug_use_local_storage,n.delete_confirmation,n.copy_feedback,n.expanded_urls)})(),A()]}}}}}}function a$(e,t){if(e.debug_use_local_storage){let n=mf(e,t),i=n[0],s=n[1],o=a=>new Jr((()=>{let u=a.articles;return u instanceof U?l([]):u instanceof H?l([]):u instanceof S?u[0]:u instanceof Xe?l([]):l([])})());return t instanceof dr?_n(Tn,oo(o(i))):t instanceof at&&_n(Tn,oo(o(i))),[i,s]}else return mf(e,t)}function u$(e){let t=e.route;if(t instanceof It)return new Nr;if(t instanceof ot){let r=e.articles;if(r instanceof H)return new or;if(r instanceof U)return new he(new zn("articles not initialized"));if(r instanceof ze){let n=r[0];return new he(new lr(n,"Failed to load article list"))}else if(r instanceof S){let n=r[0];return new Ir(n,e.session)}else{let n=r[0];return new Ir(n,e.session)}}else if(t instanceof Lt){let r=t.slug,n=e.articles;if(n instanceof H)return new or;if(n instanceof U)return new he(new zn("articles not initialized"));if(n instanceof ze){let i=n[0];return new he(new lr(i,"Failed to load articles"))}else if(n instanceof S){let i=n[0],s=nt(i,o=>o.slug===r);if(s.isOk()){let o=s[0];return new Mt(o,e.session)}else return new he(new Dr(r,fa(i)))}else{let i=n[0],s=nt(i,o=>o.slug===r);if(s.isOk()){let o=s[0];return new Mt(o,e.session)}else return new he(new Dr(r,fa(i)))}}else if(t instanceof lt){let r=t.id,n=e.articles;if(n instanceof H)return new or;if(n instanceof U)return new he(new zn("articles not initialized"));if(n instanceof ze){let i=n[0];return new he(new lr(i,"Failed to load articles for editing"))}else if(n instanceof S){let i=n[0],s=nt(i,o=>o.id===r);if(s.isOk()){let o=s[0],a=Li(o,e.session),u=o.draft;return a&&u instanceof $?new zt(o):a&&u instanceof m?new zt((()=>{let c=o;return new Z(c.id,c.slug,c.revision,c.author,c.tags,c.published_at,c.title,c.subtitle,c.leading,c.content,bn(o))})()):new he(new Rr("edit article"))}else return new he(new Ur(r))}else{let i=n[0],s=nt(i,o=>o.id===r);if(s.isOk()){let o=s[0],a=Li(o,e.session),u=o.draft;return a&&u instanceof $?new zt(o):a&&u instanceof m?new zt((()=>{let c=o;return new Z(c.id,c.slug,c.revision,c.author,c.tags,c.published_at,c.title,c.subtitle,c.leading,c.content,bn(o))})()):new he(new Rr("edit article"))}else return new he(new Ur(r))}}else{if(t instanceof et)return new Ln;if(t instanceof sr){let r=t[0];return new An(r)}else{if(t instanceof jt)return new Mr(e.djot_demo_content);if(t instanceof At)return new jn;{let r=t.uri;return new Qs(r)}}}}function ma(e){if(e==="")return Te();{let t=e;return g(l([_c(new _o),f("h-5 w-full cursor-pointer bg-zinc-700 text-mono text-zinc-200 text-xs px-8")]),l([h(t)]))}}function c$(){return g(l([f("mt-8 p-4 bg-zinc-800 rounded-lg border border-zinc-700")]),l([we(l([f("text-lg text-pink-700 font-light")]),l([h("Djot Quick Reference")])),qe(l([f("text-zinc-300 mb-6")]),l([hi(l([]),l([h("Note: ")])),h("This editor uses Djot format. See the "),Xt(l([Qt("https://htmlpreview.github.io/?https://github.com/jgm/djot/blob/master/doc/syntax.html"),f("text-zinc-300 underline")]),l([h("djot syntax documentation")])),h(" for complete details.")])),g(l([f("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm")]),l([g(l([]),l([ke(l([f("text-pink-700 font-medium mb-2")]),l([h("Headings")])),ge(l([f("text-zinc-300")]),l([ve(l([f("text-zinc-300")]),l([h(`# H1
## H2
### H3`)]))]))])),g(l([]),l([ke(l([f("text-pink-700 font-medium mb-2")]),l([h("Text")])),ge(l([f("text-zinc-300")]),l([ve(l([f("text-zinc-300")]),l([h("_italic_\n*bold*\n`code`")]))]))])),g(l([]),l([ke(l([f("text-pink-700 font-medium mb-2")]),l([h("Lists")])),ge(l([f("text-zinc-300")]),l([ve(l([f("text-zinc-300")]),l([h(`- item 1
- item 2

  - nested`)]))]))])),g(l([]),l([ke(l([f("text-pink-700 font-medium mb-2")]),l([h("Links")])),ge(l([f("text-zinc-300")]),l([ve(l([f("text-zinc-300")]),l([h(`[text](url)
[text](url){title="tooltip"}`)]))]))])),g(l([]),l([ke(l([f("text-pink-700 font-medium mb-2")]),l([h("Code Blocks")])),ge(l([f("text-zinc-300")]),l([ve(l([f("text-zinc-300")]),l([h("```\ncode here\n```")]))]))])),g(l([]),l([ke(l([f("text-pink-700 font-medium mb-2")]),l([h("Blockquotes")])),ge(l([f("text-zinc-300")]),l([ve(l([f("text-zinc-300")]),l([h("> quoted text")]))]))]))]))]))}function wf(e,t,r,n,i){let s=f("block text-sm font-medium text-zinc-400 mb-1"),o;t instanceof xa?o=f("w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 font-light text-zinc-100 focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"):t instanceof Ho?o=f("w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 text-3xl text-pink-700 font-light focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"):t instanceof Jo?o=f("w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 text-md text-zinc-500 font-light focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"):o=f("w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 font-bold text-zinc-100 focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200");let a=o;return g(l([f("mb-4")]),l([Cr(l([s]),l([h(e)])),mi(l([a,Zt(r),Vt("edit-"+i+"-"+e),er(n)]))]))}function f$(e){return g(l([f("mt-8 p-6 bg-zinc-800 rounded-lg border border-zinc-700")]),l([we(l([f("text-lg text-pink-700 font-light mb-4")]),l([h("Create Short URL")])),g(l([f("space-y-4")]),l([g(l([]),l([Cr(l([f("block text-sm font-medium text-zinc-300 mb-2")]),l([h("Target URL")])),mi(l([f(Mi(e.short_url_form_target_url)[1]instanceof $?"w-full px-3 py-2 bg-zinc-700 border border-red-500 rounded-md text-zinc-100 focus:outline-none focus:border-red-400":"w-full px-3 py-2 bg-zinc-700 border border-zinc-600 rounded-md text-zinc-100 focus:outline-none focus:border-pink-500"),fn("https://example.com"),Ul("url"),Zt(e.short_url_form_target_url),er(t=>new Do(t))])),(()=>{let t=Mi(e.short_url_form_target_url);if(t[1]instanceof $){let r=t[1][0];return qe(l([f("text-xs text-red-400 mt-1")]),l([h(r)]))}else return t[0]&&t[1]instanceof m?qe(l([f("text-xs text-green-400 mt-1")]),l([h("\u2713 Valid URL")])):Te()})()])),g(l([]),l([Cr(l([f("block text-sm font-medium text-zinc-300 mb-2")]),l([h("Short Code"),P(l([f("text-xs text-zinc-500 font-normal ml-2")]),l([h("(optional)")]))])),mi(l([f("w-full px-3 py-2 bg-zinc-700 border border-zinc-600 rounded-md text-zinc-100 focus:outline-none focus:border-pink-500"),fn("Leave empty for random code"),Ul("text"),Zt(e.short_url_form_short_code),er(t=>new Mo(t))])),qe(l([f("text-xs text-zinc-500 mt-1")]),l([h("Only fill this if you want a specific short code. Otherwise, a random one will be generated.")]))])),F(l([f((()=>{let t=Mi(e.short_url_form_target_url);return t[0]&&t[1]instanceof m?"w-full px-4 py-2 bg-pink-600 text-white rounded-md hover:bg-pink-700 transition-colors":"w-full px-4 py-2 bg-gray-600 text-gray-300 rounded-md cursor-not-allowed"})()),_s((()=>{let t=Mi(e.short_url_form_target_url);return!(t[0]&&t[1]instanceof m)})()),N(new qo(e.short_url_form_short_code,e.short_url_form_target_url))]),l([h("Create Short URL")]))]))]))}function p$(e,t){return Os(l([f("bg-zinc-800 border border-zinc-700 rounded-lg transition-colors")]),l([g(l([f("flex items-center justify-between p-4")]),l([g(l([f("flex items-center space-x-4 flex-1 min-w-0")]),l([F(l([f("font-mono text-sm font-medium text-zinc-100 hover:text-pink-300 transition-colors cursor-pointer"),N(new Vr(t.short_code)),Yt("Click to copy short URL")]),l([P(l([f("text-zinc-500")]),l([h("u.jst.dev/")])),P(l([f("text-pink-400")]),l([h(t.short_code)])),T(e.copy_feedback,new $(t.short_code))?P(l([f("ml-2 text-green-400 text-xs")]),l([h("\u2713 Copied!")])):Te()])),g(l([f("text-sm text-zinc-400 truncate flex-1 cursor-pointer hover:text-zinc-300 transition-colors"),Yt(t.target_url),N(new _r(t.id))]),l([P(l([f("text-zinc-600")]),l([h("\u2192 ")])),h(t.target_url)])),F(l([f(t.is_active?"inline-flex shrink-0 items-center rounded-full bg-green-600/20 px-2 py-1 text-xs font-medium text-green-400 ring-1 ring-inset ring-green-600/30 cursor-pointer hover:bg-green-600/30 transition-colors":"inline-flex shrink-0 items-center rounded-full bg-red-600/20 px-2 py-1 text-xs font-medium text-red-400 ring-1 ring-inset ring-red-600/30 cursor-pointer hover:bg-red-600/30 transition-colors"),N(new Yr(t.id,t.is_active)),Yt("Toggle active/inactive")]),l([h(t.is_active?"Active":"Inactive")])),g(l([f("text-xs text-zinc-500 shrink-0 cursor-pointer hover:text-zinc-400 transition-colors"),N(new _r(t.id))]),l([h(D(t.access_count)+" clicks")]))])),g(l([f("flex items-center space-x-2 ml-4 cursor-pointer hover:text-zinc-300 transition-colors"),N(new _r(t.id))]),l([g(l([f("text-zinc-500 text-sm")]),l([h("\u25BC")]))]))]))]))}function d$(e,t){return Os(l([f("bg-zinc-800 border border-zinc-700 rounded-lg transition-colors")]),l([g(l([f("flex items-center justify-between p-4")]),l([g(l([f("flex items-center space-x-4 flex-1 min-w-0")]),l([F(l([f("font-mono text-sm font-medium text-zinc-100 hover:text-pink-300 transition-colors cursor-pointer"),N(new Vr(t.short_code)),Yt("Click to copy short URL")]),l([P(l([f("text-zinc-500")]),l([h("u.jst.dev/")])),P(l([f("text-pink-400")]),l([h(t.short_code)])),T(e.copy_feedback,new $(t.short_code))?P(l([f("ml-2 text-green-400 text-xs")]),l([h("\u2713 Copied!")])):Te()])),g(l([f("text-sm text-zinc-400 truncate flex-1"),Yt(t.target_url)]),l([P(l([f("text-zinc-600")]),l([h("\u2192 ")])),h(t.target_url)])),F(l([f(t.is_active?"inline-flex shrink-0 items-center rounded-full bg-green-600/20 px-2 py-1 text-xs font-medium text-green-400 ring-1 ring-inset ring-green-600/30 cursor-pointer hover:bg-green-600/30 transition-colors":"inline-flex shrink-0 items-center rounded-full bg-red-600/20 px-2 py-1 text-xs font-medium text-red-400 ring-1 ring-inset ring-red-600/30 cursor-pointer hover:bg-red-600/30 transition-colors"),N(new Yr(t.id,t.is_active)),Yt("Toggle active/inactive")]),l([h(t.is_active?"Active":"Inactive")])),g(l([f("text-xs text-zinc-500 shrink-0")]),l([h(D(t.access_count)+" clicks")]))])),g(l([f("flex items-center space-x-2 ml-4 cursor-pointer hover:text-zinc-300 transition-colors"),N(new _r(t.id))]),l([g(l([f("text-zinc-500 text-sm")]),l([h("\u25B2")]))]))])),g(l([f("px-4 pb-4")]),l([g(l([f("mb-4 pt-2 border-t border-zinc-700")]),l([g(l([f("text-sm text-zinc-500 mb-2")]),l([h("Target URL:")])),g(l([f("text-zinc-300 break-all bg-zinc-900 rounded px-3 py-2 text-sm cursor-pointer hover:bg-zinc-850 transition-colors"),Yt(t.target_url+" (click to collapse)"),N(new _r(t.id))]),l([h(t.target_url)]))])),g(l([f("grid grid-cols-2 gap-4 text-sm mb-4")]),l([g(l([f("space-y-2")]),l([g(l([f("flex justify-between")]),l([P(l([f("text-zinc-500")]),l([h("Created By:")])),P(l([f("text-zinc-300")]),l([h(t.created_by)]))])),g(l([f("flex justify-between")]),l([P(l([f("text-zinc-500")]),l([h("Access Count:")])),P(l([f("text-zinc-300 font-mono")]),l([h(D(t.access_count))]))]))])),g(l([f("space-y-2")]),l([g(l([f("flex justify-between")]),l([P(l([f("text-zinc-500")]),l([h("Created:")])),P(l([f("text-zinc-300")]),l([h((()=>{let r=Or(t.created_at*1e3);return ln(r)})())]))])),g(l([f("flex justify-between")]),l([P(l([f("text-zinc-500")]),l([h("Updated:")])),P(l([f("text-zinc-300")]),l([h((()=>{let r=Or(t.updated_at*1e3);return ln(r)})())]))]))]))])),g(l([f("flex gap-2")]),l([F(l([f("flex-1 inline-flex items-center justify-center gap-x-2 py-3 text-sm font-medium text-zinc-100 bg-blue-600 hover:bg-blue-700 rounded transition-colors"),N(new Vr(t.short_code))]),l([g(l([f("text-sm")]),l([h("\u{1F4CB}")])),h(T(e.copy_feedback,new $(t.short_code))?"Copied!":"Copy URL")])),F(l([f(t.is_active?"flex-1 inline-flex items-center justify-center gap-x-2 py-3 text-sm font-medium text-zinc-100 bg-orange-600 hover:bg-orange-700 rounded transition-colors":"flex-1 inline-flex items-center justify-center gap-x-2 py-3 text-sm font-medium text-zinc-100 bg-green-600 hover:bg-green-700 rounded transition-colors"),N(new Yr(t.id,t.is_active))]),l([g(l([f("text-sm")]),l([h(t.is_active?"\u23F8":"\u25B6")])),h(t.is_active?"Deactivate":"Activate")])),F(l([f("flex-1 inline-flex items-center justify-center gap-x-2 py-3 text-sm font-medium text-zinc-100 bg-red-600 hover:bg-red-700 rounded transition-colors"),N(new Wi(t.id))]),l([g(l([f("text-sm")]),l([h("\u{1F5D1}")])),h("Delete")]))]))]))]))}function _$(e,t){let r,n=nt(t,s=>s.id===e);n.isOk()?r=n[0].short_code:r="unknown";let i=r;return g(l([f("fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50")]),l([g(l([f("bg-zinc-800 rounded-lg p-6 max-w-md w-full mx-4 border border-zinc-700")]),l([we(l([f("text-lg font-medium text-white mb-4")]),l([h("Delete Short URL")])),qe(l([f("text-zinc-300 mb-6")]),l([h("Are you sure you want to delete the short URL "),P(l([f("font-mono text-pink-400")]),l([h("u.jst.dev/"+i)])),h("? This action cannot be undone.")])),g(l([f("flex gap-3 justify-end")]),l([F(l([f("px-4 py-2 bg-zinc-600 text-white rounded hover:bg-zinc-700 transition-colors"),N(new Io)]),l([h("Cancel")])),F(l([f("px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors"),N(new No(e))]),l([h("Delete")]))]))]))]))}function $$(e){let t=e.short_urls;if(t instanceof U)return g(l([f("mt-8 p-6 bg-zinc-800 rounded-lg border border-zinc-700")]),l([we(l([f("text-lg text-pink-700 font-light mb-6")]),l([h("URLs")])),g(l([f("text-center py-12")]),l([g(l([f("text-zinc-400 text-lg")]),l([h("Loading...")]))]))]));if(t instanceof H)return g(l([f("mt-8 p-6 bg-zinc-800 rounded-lg border border-zinc-700")]),l([we(l([f("text-lg text-pink-700 font-light mb-6")]),l([h("URLs")])),g(l([f("text-center py-12")]),l([g(l([f("text-zinc-400 text-lg")]),l([h("Loading...")]))]))]));if(t instanceof S){let r=t[0];if(r.hasLength(0))return g(l([f("mt-8 p-6 bg-zinc-800 rounded-lg border border-zinc-700")]),l([we(l([f("text-lg text-pink-700 font-light mb-6")]),l([h("URLs")])),g(l([f("text-center py-12")]),l([g(l([f("text-zinc-400 text-lg mb-2")]),l([h("No short URLs created yet.")])),g(l([f("text-zinc-500 text-sm")]),l([h("Create your first short URL using the form above.")]))]))]));{let n=M(r,i=>Sl(e.expanded_urls,i.id)?d$(e,i):p$(e,i));return g(l([f("mt-8 p-6 bg-zinc-800 rounded-lg border border-zinc-700")]),l([we(l([f("text-lg text-pink-700 font-light mb-6")]),l([h("URLs")])),Ss(l([f("space-y-2"),Vu("list")]),n),(()=>{let i=e.delete_confirmation;if(i instanceof $){let s=i[0];return _$(s,r)}else return Te()})()]))}}else if(t instanceof ze){let r=t[0];return g(l([f("mt-8 p-6 bg-zinc-800 rounded-lg border border-zinc-700")]),l([we(l([f("text-lg text-pink-700 font-light mb-6")]),l([h("URLs")])),g(l([f("text-center py-12")]),l([g(l([f("text-red-400 text-lg mb-2")]),l([h("Error loading short URLs")])),g(l([f("text-zinc-500 text-sm")]),l([h(Si(r))]))]))]))}else return g(l([f("mt-8 p-6 bg-zinc-800 rounded-lg border border-zinc-700")]),l([we(l([f("text-lg text-pink-700 font-light mb-6")]),l([h("URLs")])),g(l([f("text-center py-12")]),l([g(l([f("text-zinc-400 text-lg")]),l([h("Loading...")]))]))]))}function gf(e){let t=e.published_at;if(t instanceof $){let r=t[0],n=ln(r);return P(l([f("text-xs text-zinc-500 px-2 pt-2 w-max border-t border-r border-zinc-700 group-hover:border-pink-700 transition-colors duration-25")]),l([h(n)]))}else return P(l([f("text-xs text-zinc-500 px-2 pt-2 w-max italic border-t border-r border-zinc-700 group-hover:border-pink-700 transition-colors duration-25")]),l([h("not published")]))}function xf(e){return g(l([f("text-xs text-zinc-400 pt-0 border-r border-zinc-700 pr-2 group-hover:border-pink-700 transition-colors duration-25")]),l([P(l([f("text-zinc-500 font-light")]),l([h("by ")])),P(l([f("text-zinc-300")]),l([h(e)]))]))}function bf(e){return e.hasLength(0)?Te():g(l([f("flex justify-end align-end gap-0 ml-auto flex-wrap border-b border-r border-zinc-700 pb-1 pr-2 hover:border-pink-700 group-hover:border-pink-700 transition-colors duration-25 mt-2")]),M(e,r=>P(l([f("text-xs cursor-pointer text-zinc-500 px-2 hover:border-pink-700 hover:text-pink-700 transition-colors duration-25")]),l([h(r)]))))}function yf(e,t){let r=Li(e,t),n=Kc(e,t),i=Jc(e,t);return g(l([f("flex justify-start h-10")]),l([r?F(l([f("text-gray-500 pe-4 text-underline pb-2 hover:text-teal-300 hover:border-teal-300 border-b border-zinc-700"),N(new Ut(We(new lt(e.id))))]),l([h("Edit")])):Te(),n&&T(e.published_at,new m)?F(l([f("text-gray-500 pe-4 text-underline pb-2 hover:text-green-300 hover:border-green-300 border-b border-zinc-700"),N(new Ao(e))]),l([h("Publish")])):Te(),n&&!T(e.published_at,new m)?F(l([f("text-gray-500 pe-4 text-underline pb-2 hover:text-yellow-300 hover:border-yellow-300 border-b border-zinc-700"),N(new jo(e))]),l([h("Unpublish")])):Te(),i?F(l([f("text-gray-500 pe-4 text-underline pb-2 hover:text-red-400 hover:border-red-400 border-b border-zinc-700"),N(new vo(e))]),l([h("Delete")])):Te()]))}function h$(e,t){return l([g(l([f("mb-4")]),l([g(l([f("flex items-center justify-between mb-1")]),l([Cr(l([f("block text-sm font-medium text-zinc-400")]),l([h("Slug")])),P(l([f("text-xs text-zinc-500")]),l([h("rev "+D(t.revision))]))])),mi(l([f("w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 font-light text-zinc-100 focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"),Zt(Ns(e)),Vt("edit-"+t.slug+"-Slug"),er(r=>new ho(t,r))]))])),wf("Title",new Ho,Is(e),r=>new mo(t,r),t.slug),wf("Subtitle",new Jo,Ms(e),r=>new go(t,r),t.slug),g(l([f("mb-4")]),l([Cr(l([f("block text-sm font-medium text-zinc-400 mb-1")]),l([h("Leading")])),Ts(l([f("w-full h-24 bg-zinc-800 border border-zinc-600 rounded-md p-2 font-bold text-zinc-100 resize-none focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"),Zt(wi(e)),Vt("edit-"+t.slug+"-Leading"),er(r=>new wo(t,r)),fn("Write a compelling leading paragraph...")]),wi(e))])),g(l([f("mb-4")]),l([Cr(l([f("block text-sm font-medium text-zinc-400 mb-1")]),l([h("Content")])),Ts(l([f("w-full h-96 bg-zinc-800 border border-zinc-600 rounded-md p-4 font-mono text-sm text-zinc-100 resize-none focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"),Zt(gi(e)),er(r=>new xo(t,r)),fn("Write your article content in Djot format...")]),gi(e))])),g(l([f("flex justify-between gap-4")]),l([yf(t,new Fe),g(l([f("flex gap-4")]),l([F(l([f("px-4 py-2 bg-zinc-700 text-zinc-300 rounded-md hover:bg-zinc-600 transition-colors duration-200"),N(new yo(t)),_s(Ps(e))]),l([h("Discard Changes")])),F(l([f("px-4 py-2 bg-teal-700 text-white rounded-md hover:bg-teal-600 transition-colors duration-200"),N(new bo(t)),_s(Ps(e))]),l([Ps(e)?h("Saving..."):h("Save Article")]))]))]))])}function pe(e,t){return js(l([Vt("article-title-"+t),f("text-3xl text-pink-700 font-light"),f("article-title")]),l([h(e)]))}function Ko(e,t){return g(l([Vt("article-subtitle-"+t),f("text-md text-zinc-500 font-light italic"),f("article-subtitle")]),l([h(e)]))}function kf(e,t){return qe(l([Vt("article-lead-"+t),f("font-bold pt-8"),f("article-leading")]),l([h(e)]))}function le(e){return qe(l([f("pt-8")]),l([h(e)]))}function m$(){return l([pe("Loading","loading"),le("Loading...")])}function w$(e,t){let r;t instanceof Fe?r=dt(e,w=>w.published_at instanceof $):r=e;let n=r,i,o=en(n,(p,w)=>{let b=p.published_at,v=w.published_at;if(b instanceof m&&v instanceof m)return Dn(p.slug,w.slug);if(b instanceof m&&v instanceof $)return new X;if(b instanceof $&&v instanceof m)return new se;{let B=b[0],j=v[0];return Au(j,B)}});i=M(o,p=>{{let w=p.slug,b=p.tags,v=p.title,B=p.subtitle,j=p.leading,K,W=new Lt(w);K=We(W);let E=K;return Hl(l([f("mt-14")]),l([Xt(l([f("group block border-l border-zinc-700 pl-4 hover:border-pink-700 transition-colors duration-25"),Qt($e(E)),$c(new $o(p)),N(new Ut(E))]),l([g(l([f("flex justify-between gap-4")]),l([g(l([f("flex flex-col")]),l([we(l([Vt("article-title-"+w),f("article-title"),f("text-xl text-pink-700 font-light")]),l([h(v)])),Ko(B,w)])),g(l([f("flex flex-col items-end")]),l([gf(p),xf(p.author)]))])),le(j),g(l([f("flex justify-end mt-2")]),l([bf(b)]))]))]))}});let a=i,u=l([g(l([f("flex justify-between items-center mb-4")]),l([pe("Articles","articles"),t instanceof nr?F(l([f("text-gray-500 pe-4 text-underline pt-2 hover:text-teal-300 hover:border-teal-300 border-t border-zinc-700 border-e"),N(new Ui)]),l([h("New")])):Te()]))]),c;return a.hasLength(0)?c=l([g(l([f("mt-14 text-center")]),l([g(l([f("border-l border-zinc-700 pl-4 py-8")]),l([we(l([f("text-xl text-zinc-500 font-light mb-4")]),l([h("No articles yet")])),t instanceof nr?g(l([f("space-y-4")]),l([le("Ready to share your thoughts? Create your first article to get started."),F(l([f("inline-block px-6 py-2 bg-pink-700 text-white rounded-md hover:bg-pink-600 transition-colors duration-200 font-medium"),N(new Ui)]),l([h("Create Your First Article")]))])):g(l([f("space-y-4")]),l([le("No published articles are available yet."),le("Check back later for new content!")]))]))]))]):c=a,ee(u,c)}function g$(e,t){return l([pe("Article not found",t),le("The article you are looking for does not exist.")])}function x$(e,t){if(e instanceof S)return l([pe("Article not found",t),le("The article you are looking for does not exist.")]);if(e instanceof Xe)return l([pe("Article not found",t),le("The article you are looking for might not exist yet. Please check back later.")]);if(e instanceof ze){let r=e[0];return l([pe("There was an error loading the article",t),le(Si(r))])}else return e instanceof H?l([pe("Loading article",t),le("Loading article...")]):l([pe("Loading article",t),le("Loading article...")])}function b$(){return l([pe("About","about"),le(`I'm a software developer and a writer. I'm also a father and a husband. 
      I'm also a software developer and a writer. I'm also a father and a 
      husband. I'm also a software developer and a writer. I'm also a father 
      and a husband. I'm also a software developer and a writer. I'm also a 
      father and a husband.`),le(`If you enjoy these glimpses into my mind, feel free to come back
       semi-regularly. But not too regularly, you creep.`)])}function y$(e){return l([pe("URL Shortener","url-shortener"),le("Create and manage short URLs for easy sharing."),f$(e),$$(e)])}function k$(e,t){let r=e.short_urls;if(r instanceof S){let n=r[0],i=nt(n,s=>s.short_code===t);if(i.isOk()){let s=i[0];return l([pe("URL Info","url-info"),g(l([f("mt-8 p-6 bg-zinc-800 rounded-lg border border-zinc-700")]),l([we(l([f("text-lg text-pink-700 font-light mb-4")]),l([h("URL Details")])),g(l([f("space-y-4 text-zinc-300")]),l([g(l([f("flex justify-between items-center")]),l([P(l([f("text-zinc-500")]),l([h("Short Code:")])),P(l([f("font-mono text-pink-700")]),l([h(s.short_code)]))])),g(l([f("flex justify-between items-center")]),l([P(l([f("text-zinc-500")]),l([h("Target URL:")])),P(l([f("break-all")]),l([h(s.target_url)]))])),g(l([f("flex justify-between items-center")]),l([P(l([f("text-zinc-500")]),l([h("Created By:")])),P(l([]),l([h(s.created_by)]))])),g(l([f("flex justify-between items-center")]),l([P(l([f("text-zinc-500")]),l([h("Created:")])),P(l([]),l([h((()=>{let o=Or(s.created_at*1e3);return ln(o)})())]))])),g(l([f("flex justify-between items-center")]),l([P(l([f("text-zinc-500")]),l([h("Updated:")])),P(l([]),l([h((()=>{let o=Or(s.updated_at*1e3);return ln(o)})())]))])),g(l([f("flex justify-between items-center")]),l([P(l([f("text-zinc-500")]),l([h("Access Count:")])),P(l([]),l([h(D(s.access_count))]))])),g(l([f("flex justify-between items-center")]),l([P(l([f("text-zinc-500")]),l([h("Status:")])),s.is_active?P(l([f("text-green-400")]),l([h("Active")])):P(l([f("text-red-400")]),l([h("Inactive")]))]))])),g(l([f("mt-6 flex gap-4")]),l([F(l([f("px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors"),N(new Ut(We(new et)))]),l([h("Back to URLs")])),F(l([f("px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors"),N(new Vr(s.short_code))]),l([h(T(e.copy_feedback,new $(s.short_code))?"Copied!":"Copy URL")])),F(l([f(s.is_active?"px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 transition-colors":"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors"),N(new Yr(s.id,s.is_active))]),l([h(s.is_active?"Deactivate":"Activate")])),F(l([f("px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors"),N(new Wi(s.id))]),l([h("Delete URL")]))]))]))])}else return l([pe("URL Not Found","url-not-found"),le("The requested URL was not found.")])}else return l([pe("URL Info","url-info"),le("Loading URL information...")])}function v$(e){return l([pe("404 - Page Not Found","not-found"),Ko("The page you're looking for doesn't exist.","not-found"),le("The page at "+$e(e)+" could not be found.")])}function Kr(e){return qe(l([f("pt-8 text-orange-500")]),l([h(e)]))}function vf(e,t){let r,n=e.content;if(n instanceof U)r=l([Kr("content not initialized")]);else if(n instanceof H)r=l([Kr("loading")]);else if(n instanceof S){let s=n[0];r=so(s)}else if(n instanceof Xe){let s=n[0];r=so(s)}else{let s=n[0];r=l([Kr(Si(s))])}let i=r;return l([Hl(l([f("with-transition")]),x(g(l([f("flex flex-col justify-between")]),l([yf(e,t),g(l([f("flex gap-2 justify-between")]),l([g(l([f("flex flex-col justify-between")]),l([pe(e.title,e.slug),Ko(e.subtitle,e.slug)])),g(l([f("flex flex-col items-end")]),l([gf(e),xf(e.author)]))])),g(l([f("flex justify-between mt-2")]),l([bf(e.tags)]))])),x(kf(e.leading,e.slug),i)))])}function L$(e,t){let r=t.draft;if(r instanceof m)return l([Kr("no draft..")]);{let n=r[0],i,s=gi(n);s===""?i="Start typing in the editor to see the preview here...":i=s;let o=i,a=new Z(t.id,Ns(n),t.revision,t.author,t.tags,t.published_at,Is(n),Ms(n),wi(n),new S(o),new m),u=vf(a,new Fe);return l([g(l([f("lg:hidden mb-4 flex justify-center")]),l([F(l([f("px-4 py-2 bg-pink-700 text-white rounded-md hover:bg-pink-700 transition-colors duration-200"),N(new Fo)]),l([e.edit_view_mode instanceof pr?h("Show Preview"):h("Show Editor")]))])),g(l([si(l([["grid gap-8 h-screen",!0],["grid-cols-2 lg:grid-cols-2",!0]]))]),l([g(l([si(l([["space-y-4",!0],["lg:block",!0],["lg:col-span-1",!0],["col-span-2",T(e.edit_view_mode,new pr)],["hidden",T(e.edit_view_mode,new Di)]]))]),h$(n,t)),g(l([si(l([["max-w-screen-md mx-auto px-10 py-10 overflow-y-auto",!0],["lg:block",!0],["lg:col-span-1",!0],["col-span-2",T(e.edit_view_mode,new Di)],["hidden",T(e.edit_view_mode,new pr)]]))]),u)])),c$()])}}function A$(e,t){return Xt(l([Qt($e(e)),f("text-pink-700 hover:underline cursor-pointer"),N(new Ut(e))]),l([h(t)]))}function j$(){let e=ie("/article/nats-all-the-way-down");if(!e.isOk())throw J("let_assert","jst_lustre",1567,"view_index","Pattern match failed, no pattern matched the value.",{value:e});let t=e[0];return l([pe("Welcome to jst.dev!","welcome"),Ko(`...or, A lession on overengineering for fun and.. 
      well just for fun.`,"welcome"),kf(`This site and it's underlying IT-infrastructure is the primary 
      place for me to experiment with technologies and topologies. I 
      also share some of my thoughts and learnings here.`,"welcome"),qe(l([f("mt-14")]),l([h(`This site and it's underlying IT-infrastructure is the primary 
        place for me to experiment with technologies and topologies. I 
        also share some of my thoughts and learnings here. Feel free to 
        check out my overview, `),A$(t,"NATS all the way down ->")])),le("It to is a work in progress and I mostly keep it here for my own reference."),le(`I'm also a software developer and a writer. I'm also a father and a 
        husband. I'm also a software developer and a writer. I'm also a father 
        and a husband. I'm also a software developer and a writer. I'm also a 
        father and a husband. I'm also a software developer and a writer.`)])}function z$(){return l([pe("Articles","articles"),le("Loading articles...")])}function Lf(e,t){return Xt(l([f(""),Qt($e(e)),N(new Ut(e))]),t)}function fr(e,t,r,n){return Os(ee(n,l([si(l([["border-transparent border-b-2 hover:border-pink-700 cursor-pointer",!0],["text-pink-700",Zc(e,t)]])),N(new Ut(We(e)))])),l([Lf(We(e),l([h(r)]))]))}function wa(e){let t=l([f("block w-full text-left px-4 py-2 text-sm text-zinc-200 hover:bg-teal-800 transition-colors cursor-pointe")]);return lc(l([f("py-2 border-b bg-zinc-800 border-pink-700 font-mono relative")]),l([g(l([f("flex justify-between px-10 items-center max-w-screen-md mx-auto")]),l([g(l([]),l([Lf(Xs(new Nr),l([h("jst.dev")]))])),g(l([f("flex items-center space-x-8")]),l([Ss(l([f("hidden sm:flex space-x-8 pr-2")]),l([fr(new ot,e.route,"Articles",l([])),fr(new At,e.route,"About",l([])),fr(new et,e.route,"Short Urls",l([])),fr(new jt,e.route,"Djot Demo",l([]))])),g(l([f("relative")]),l([F(l([f("p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 transition-colors"),N(new po)]),l([e.profile_menu_open?Ti(l([f("w-6 h-6")]),new On):Ti(l([f("w-6 h-6")]),new Ei)])),e.profile_menu_open?g(l([f("absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-zinc-700 ring-1 ring-black ring-opacity-5 z-50")]),l([g(l([f("py-1")]),l([Ss(l([f("sm:hidden flex flex-col border-b border-zinc-400")]),l([fr(new ot,e.route,"Articles",t),fr(new At,e.route,"About",t),fr(new et,e.route,"Short urls",t),fr(new jt,e.route,"Djot Demo",t)])),(()=>{let n=e.session;return n instanceof Fe?F(l([f("block w-full text-left px-4 py-2 text-sm text-zinc-200 hover:bg-green-800 transition-colors cursor-pointe"),N(new zo("johan-st","password"))]),l([h("Login")])):n instanceof xn?F(l([f("block w-full text-left px-4 py-2 text-sm bg-zinc-700 text-zinc-400 hover:bg-orange-800 transition-colors cursor-not-allowed opacity-60"),N(new Ri)]),l([h("logging in..")])):F(l([f("block w-full text-left px-4 py-2 text-sm text-zinc-200 hover:bg-orange-800 transition-colors cursor-pointe"),N(new Ri)]),l([h("Logout")]))})(),F(l([f("block w-full text-left px-4 py-2 text-sm text-zinc-200 hover:bg-teal-800 transition-colors cursor-pointe"),N(new Eo)]),l([h("Check")])),e.debug_use_local_storage?F(l([f("block w-full text-left px-4 py-2 text-sm text-zinc-200 hover:bg-orange-800 transition-colors cursor-pointe"),N(new Wo)]),l([g(l([f("flex justify-between")]),l([h("LocalStorage"),Ti(l([f("w-6 text-green-400")]),new eo)]))])):F(l([f("block w-full text-left px-4 py-2 text-sm text-zinc-200 hover:bg-green-800 transition-colors cursor-pointe"),N(new Wo)]),l([g(l([f("flex justify-between ")]),l([h("LocalStorage"),Ti(l([f("w-6 text-orange-400")]),new On)]))]))]))])):g(l([]),l([]))]))]))]))]))}function O$(e){let t;e===""?t=l([g(l([f("text-zinc-500 italic text-center mt-8")]),l([h("Start typing in the editor to see the preview here...")]))]):t=so(e);let r=t;return l([pe("Djot Demo","djot-demo"),g(l([f("grid grid-cols-1 lg:grid-cols-2 gap-6")]),l([Jl(l([f("space-y-4")]),l([g(l([f("flex items-center justify-between")]),l([$i(l([f("text-xl text-pink-700 font-light")]),l([h("Editor")])),g(l([f("text-xs text-zinc-500")]),l([h("Live preview updates as you type")]))])),g(l([f("relative")]),l([Ts(l([f("w-full h-[400px] lg:h-[600px] bg-zinc-800 border border-zinc-600 rounded-lg p-4 font-mono text-sm text-zinc-100 resize-none focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"),fn(`# Start typing your article content here...

## Headings

- Lists
- Work too

**Bold** and *italic* text

[Link text](url)`),Zt(e),er(n=>new To(n)),z("spellcheck","false")]),e),g(l([f("absolute bottom-2 right-2 text-xs text-zinc-500 bg-zinc-800 px-2 py-1 rounded")]),l([h((()=>{let n=Et(e);return al(n)})()),h(" chars")]))]))])),Jl(l([f("space-y-4")]),l([g(l([f("flex items-center justify-between")]),l([$i(l([f("text-xl text-pink-700 font-light")]),l([h("Preview")])),g(l([f("text-xs text-zinc-500")]),l([h("Rendered output")]))])),g(l([f("w-full h-[400px] lg:h-[600px] bg-zinc-900 border border-zinc-600 rounded-lg p-6 overflow-y-auto prose prose-invert prose-pink max-w-none")]),r)]))])),g(l([f("mt-8 p-4 bg-zinc-800 rounded-lg border border-zinc-700")]),l([we(l([f("text-lg text-pink-700 font-light")]),l([h("Quick Reference")])),qe(l([f("text-zinc-300")]),l([hi(l([]),l([h("Note: ")])),h("The djot implementation is a work in progress. Not all features are supported yet.")])),qe(l([f("mb-6")]),l([h("See the "),Xt(l([Qt("https://htmlpreview.github.io/?https://github.com/jgm/djot/blob/master/doc/syntax.html"),f("text-zinc-300 underline")]),l([h("djot syntax documentation")])),h(" for more details.")])),g(l([f("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm")]),l([g(l([]),l([ke(l([f("text-pink-700 font-medium mb-2")]),l([h("Headings")])),ge(l([f("text-zinc-300")]),l([ve(l([f("text-zinc-300")]),l([h(`# H1
## H2
### H3`)]))]))])),g(l([]),l([ke(l([f("text-pink-700 font-medium mb-2")]),l([h("Text")])),ge(l([f("text-zinc-300")]),l([ve(l([f("text-zinc-300")]),l([h("_italic_\n*bold*\n`code`")]))]))])),g(l([]),l([ke(l([f("text-pink-700 font-medium mb-2")]),l([h("Lists")])),ge(l([f("text-zinc-300")]),l([ve(l([f("text-zinc-300")]),l([h(`- item 1
- item 2

  - nested`)]))]))])),g(l([]),l([ke(l([f("text-pink-700 font-medium mb-2")]),l([h("Links")])),ge(l([f("text-zinc-300")]),l([ve(l([f("text-zinc-300")]),l([h(`[text](url)
[text](url){title="tooltip"}`)]))]))])),g(l([]),l([ke(l([f("text-pink-700 font-medium mb-2")]),l([h("Code Blocks")])),ge(l([f("text-zinc-300")]),l([ve(l([f("text-zinc-300")]),l([h("```\ncode here\n```")]))]))])),g(l([]),l([ke(l([f("text-pink-700 font-medium mb-2")]),l([h("Blockquotes")])),ge(l([f("text-zinc-300")]),l([ve(l([f("text-zinc-300")]),l([h("> quoted text")]))]))]))]))]))])}function S$(e){let t=u$(e),r;if(t instanceof Oi)r=m$();else if(t instanceof Nr)r=j$();else if(t instanceof Ir){let o=t.articles,a=t.session;r=w$(o,a)}else if(t instanceof or)r=z$();else if(t instanceof Mt){let o=t.article,a=t.session;r=vf(o,a)}else if(t instanceof zt){let o=t.article;r=L$(e,o)}else if(t instanceof he){let o=t.error;if(o instanceof Dr){let a=o.slug;r=x$(e.articles,a)}else if(o instanceof Ur){let a=o.id;r=g$(e.articles,a)}else if(o instanceof lr){let a=o.error;r=l([Kr(Si(a))])}else if(o instanceof Rr){let a=o.attempted_action;r=l([Kr("Authentication required: "+a)])}else{let a=o.msg;r=l([Kr(a)])}}else if(t instanceof jn)r=b$();else if(t instanceof Ln)r=y$(e);else if(t instanceof An){let o=t.short;r=k$(e,o)}else if(t instanceof Mr){let o=t.content;r=O$(o)}else{let o=t.requested_uri;r=v$(o)}let n=r,i;return t instanceof Mr?i=o=>g(l([f("min-h-screen bg-zinc-900 text-zinc-100 selection:bg-pink-700 selection:text-zinc-100 ")]),l([ma(e.notice),wa(e),zs(l([f("mx-auto px-10 py-10")]),o)])):t instanceof zt?i=o=>g(l([f("min-h-screen bg-zinc-900 text-zinc-100 selection:bg-pink-700 selection:text-zinc-100 ")]),l([ma(e.notice),wa(e),zs(l([f("mx-auto px-10 py-10")]),o)])):i=o=>g(l([f("min-h-screen bg-zinc-900 text-zinc-100 selection:bg-pink-700 selection:text-zinc-100 ")]),l([ma(e.notice),wa(e),zs(l([f("max-w-screen-md mx-auto px-10 py-10")]),o)])),i(n)}var E$=`# Quick Start for Markdown users

Djot is a lot like Markdown.  Here are some of the main
differences you need to be aware of in making the transition.

#### Blank lines

In djot you need blank lines around block-level
elements.  Hence, instead of

\`\`\`
This is some text.
## My next heading
\`\`\`

you must write

\`\`\`
This is some text.

## My next heading
\`\`\`

Instead of

\`\`\`\`
This is some text.
\`\`\` lua
local foo = bar.baz or false
\`\`\`
\`\`\`\`

you must write

\`\`\`\`
This is some text.

\`\`\` lua
local foo = bar.baz or false
\`\`\`
\`\`\`\`

Instead of

\`\`\`
Text.
> a blockquote.
\`\`\`

you must write

\`\`\`
Text.

> a blockquote.
\`\`\`

And instead of

\`\`\`
Before a thematic break.
****
After a thematic break.
\`\`\`

you must write

\`\`\`
Before a thematic break.

****

After a thematic break.
\`\`\`

#### Lists

A special case of this is that you always need a blank line before a
list, even if it's a sublist. So, while in Markdown you can write

\`\`\`
- one
  - two
  - three
\`\`\`

in djot you must write

\`\`\`
- one

  - two
  - three
\`\`\`

#### Headings

There are no Setext-style (underlined) headings, only ATX- (\`#\`) style.

Heading content can extend over several lines, which may or
may not be preceded by \`#\` characters:

\`\`\`
## This is a single
## level-2 heading

### This is a single
level-3 heading
\`\`\`

As a result, headings must always have a blank line following.

Trailing \`#\` characters in a heading are read as part of the
content and not ignored.

#### Code blocks

There are no indented code blocks, only fenced with \` \`\`\` \`.

#### Block quotes

You need a space after the \`>\` character, unless it is followed
by a newline.

#### Emphasis

Use single \`_\` delimiters for regular emphasis and
single \`*\` delimiters for strong emphasis.

#### Links

There is no special syntax for adding a title to a link, as
in Markdown:

\`\`\`
[link](http://example.com "Go to my website")
\`\`\`

If you want a title attribute on a link, use the general attribute syntax:

\`\`\`
[link](http://example.com){title="Go to my website"}
\`\`\`

#### Hard line breaks

In Markdown you can create a hard line break by ending a line
with two spaces. In djot you use a backslash before the newline.

\`\`\`
A new\\
line.
\`\`\`

#### Raw HTML

In Markdown you can just insert raw HTML "as is."  In djot,
you must mark it as raw HTML:

\`\`\`\`
This is raw HTML: \`<a id="foo">\`{=html}.

Here is a raw HTML block:

\`\`\` =html
<table>
<tr><td>foo</td></tr>
</table>
\`\`\`
\`\`\`\`

#### Tables

Pipe tables always require a pipe character at the start and end
of each line, unlike in many Markdown implementations.  So, this
is not a table:

\`\`\`
a|b
-|-
1|2
\`\`\`

but this is:

\`\`\`
| a | b |
| - | - |
| 1 | 2 |
\`\`\`


#### That's enough to get started!

Here we have just focused on things that might trip up
Markdown users.  If you keep these in mind, you should be
able to start using djot without looking at any more
documentation.

However, we haven't discussed any of the things
you can do in djot but not Markdown. See the [syntax
description](https://htmlpreview.github.io/?https://github.com/jgm/djot/blob/master/doc/syntax.html)
to find about the new constructions that are available.
`;function T$(e){let t=Yl();if(!t.isOk())throw J("let_assert","jst_lustre",138,"init","Pattern match failed, no pattern matched the value.",{value:t});let r=t[0],n=ff(Tn,cf(),o=>new Go(o)),i=new L(r,ca(r),new Fe,new U,new U,"","",E$,new pr,!1,"",!0,new m,new m,ls()),s=gc(o=>{let a=o;return new fo(a)});return[i,Sr(l([s,n,aa(o=>new Fi(o),i.base_uri)]))]}function Af(){let e=rc(T$,a$,S$),t=nc(e,"#app",void 0);if(!t.isOk())throw J("let_assert","jst_lustre",104,"main","Pattern match failed, no pattern matched the value.",{value:t})}function re(e,t,r){let n="\x1B[90m",i="\x1B[39m",s=`${t}:${r}`,o=Dt(e);if(globalThis.process?.stderr?.write){let a=`${n}${s}${i}
${o}
`;process.stderr.write(a)}else if(globalThis.Deno){let a=`${n}${s}${i}
${o}
`;globalThis.Deno.stderr.writeSync(new TextEncoder().encode(a))}else{let a=`${s}
${o}`;globalThis.console.log(a)}return e}function q$(e){let t='"';for(let r=0;r<e.length;r++){let n=e[r];n==`
`?t+="\\n":n=="\r"?t+="\\r":n=="	"?t+="\\t":n=="\f"?t+="\\f":n=="\\"?t+="\\\\":n=='"'?t+='\\"':n<" "||n>"~"&&n<"\xA0"?t+="\\u{"+n.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=n}return t+='"',t}function C$(e){let t="dict.from_list([",r=!0,n=[];return e.forEach((i,s)=>{n.push([s,i])}),n.sort(),n.forEach(([i,s])=>{r||(t=t+", "),t=t+"#("+Dt(i)+", "+Dt(s)+")",r=!1}),t+"])"}function B$(e){let t=globalThis.Object.keys(e).map(r=>{let n=Dt(e[r]);return isNaN(parseInt(r))?`${r}: ${n}`:n}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function P$(e){let t=Object.getPrototypeOf(e)?.constructor?.name||"Object",r=[];for(let s of Object.keys(e))r.push(`${Dt(s)}: ${Dt(e[s])}`);let n=r.length?" "+r.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${n}})`}function Dt(e){let t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return q$(e);if(t==="bigint"||t==="number")return e.toString();if(globalThis.Array.isArray(e))return`#(${e.map(Dt).join(", ")})`;if(e instanceof Q)return`[${e.toArray().map(Dt).join(", ")}]`;if(e instanceof Rt)return`//utfcodepoint(${String.fromCodePoint(e.value)})`;if(e instanceof Be)return N$(e);if(e instanceof d)return B$(e);if(I$(e))return C$(e);if(e instanceof Set)return`//js(Set(${[...e].map(Dt).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){let r=[];for(let n of Array(e.length).keys())r.push(String.fromCharCode(n+97));return`//fn(${r.join(", ")}) { ... }`}return P$(e)}function N$(e){let t=e.bitOffset+8*Math.trunc(e.bitSize/8),r=mr(e,e.bitOffset,t),n=e.bitSize%8;if(n>0){let i=Gi(e,t,e.bitSize,!1,!1),s=Array.from(r.rawBuffer),o=`${i}:size(${n})`;return s.length===0?`<<${o}>>`:`<<${Array.from(r.rawBuffer).join(", ")}, ${o}>>`}else return`<<${Array.from(r.rawBuffer).join(", ")}>>`}function I$(e){try{return e instanceof Se}catch{return!1}}Af();
