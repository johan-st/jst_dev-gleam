var d=class{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}},U=class{static fromArray(t,n){let r=n||new pr;for(let i=t.length-1;i>=0;--i)r=new Jt(t[i],r);return r}[Symbol.iterator](){return new Zs(this)}toArray(){return[...this]}atLeastLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return n!==void 0}hasLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return t===-1&&n instanceof pr}countLength(){let t=this,n=0;for(;t;)t=t.tail,n++;return n-1}};function w(e,t){return new Jt(e,t)}function a(e,t){return U.fromArray(e,t)}var Zs=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof pr)return{done:!0};{let{head:t,tail:n}=this.#e;return this.#e=n,{value:t,done:!1}}}},pr=class extends U{},Jt=class extends U{constructor(t,n){super(),this.head=t,this.tail=n}},be=class{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,n,r){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=n??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=r??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return fr(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;let n=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<n;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;let r=this.bitSize%8;if(r){let i=8-r;if(this.rawBuffer[n]>>i!==t.rawBuffer[n]>>i)return!1}}else{for(let i=0;i<n;i++){let s=fr(this.rawBuffer,this.bitOffset,i),l=fr(t.rawBuffer,t.bitOffset,i);if(s!==l)return!1}let r=this.bitSize%8;if(r){let i=fr(this.rawBuffer,this.bitOffset,n),s=fr(t.rawBuffer,t.bitOffset,n),l=8-r;if(i>>l!==s>>l)return!1}}return!0}get buffer(){if(vo("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(vo("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}};function fr(e,t,n){if(t===0)return e[n]??0;{let r=e[n]<<t&255,i=e[n+1]>>8-t;return r|i}}var yt=class{constructor(t){this.value=t}},Lo={};function vo(e,t){Lo[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),Lo[e]=!0)}function Kt(e,t,n){if(n??=e.bitSize,jo(e,t,n),t===n)return new be(new Uint8Array);if(t===0&&n===e.bitSize)return e;t+=e.bitOffset,n+=e.bitOffset;let r=Math.trunc(t/8),s=Math.trunc((n+7)/8)-r,l;return r===0&&s===e.rawBuffer.byteLength?l=e.rawBuffer:l=new Uint8Array(e.rawBuffer.buffer,e.rawBuffer.byteOffset+r,s),new be(l,n-t,t%8)}function ui(e,t,n,r,i){if(jo(e,t,n),t===n)return 0;t+=e.bitOffset,n+=e.bitOffset;let s=t%8===0,l=n%8===0;if(s&&l)return pc(e,t/8,n/8,r,i);let o=n-t,u=Math.trunc(t/8),c=Math.trunc((n-1)/8);if(u==c){let p=255>>t%8,f=(8-n%8)%8,m=(e.rawBuffer[u]&p)>>f;if(i){let g=2**(o-1);m>=g&&(m-=g*2)}return m}return o<=53?hc(e.rawBuffer,t,n,r,i):$c(e.rawBuffer,t,n,r,i)}function pc(e,t,n,r,i){return n-t<=6?dc(e.rawBuffer,t,n,r,i):_c(e.rawBuffer,t,n,r,i)}function dc(e,t,n,r,i){let s=n-t,l=0;if(r)for(let o=t;o<n;o++)l*=256,l+=e[o];else for(let o=n-1;o>=t;o--)l*=256,l+=e[o];if(i){let o=2**(s*8-1);l>=o&&(l-=o*2)}return l}function _c(e,t,n,r,i){let s=n-t,l=0n;if(r)for(let o=t;o<n;o++)l*=256n,l+=BigInt(e[o]);else for(let o=n-1;o>=t;o--)l*=256n,l+=BigInt(e[o]);if(i){let o=1n<<BigInt(s*8-1);l>=o&&(l-=o*2n)}return Number(l)}function hc(e,t,n,r,i){let s=t%8===0,l=n-t,o=Math.trunc(t/8),u=0;if(r){if(!s){let c=8-t%8;u=e[o++]&(1<<c)-1,l-=c}for(;l>=8;)u*=256,u+=e[o++],l-=8;l>0&&(u*=2**l,u+=e[o]>>8-l)}else if(s){let c=n-t,p=1;for(;c>=8;)u+=e[o++]*p,p*=256,c-=8;u+=(e[o]>>8-c)*p}else{let c=t%8,p=8-c,f=n-t,m=1;for(;f>=8;){let g=e[o]<<c|e[o+1]>>p;u+=(g&255)*m,m*=256,f-=8,o++}if(f>0){let g=f-Math.max(0,f-p),k=(e[o]&(1<<p)-1)>>p-g;f-=g,f>0&&(k*=2**f,k+=e[o+1]>>8-f),u+=k*m}}if(i){let c=2**(n-t-1);u>=c&&(u-=c*2)}return u}function $c(e,t,n,r,i){let s=t%8===0,l=n-t,o=Math.trunc(t/8),u=0n;if(r){if(!s){let c=8-t%8;u=BigInt(e[o++]&(1<<c)-1),l-=c}for(;l>=8;)u*=256n,u+=BigInt(e[o++]),l-=8;l>0&&(u<<=BigInt(l),u+=BigInt(e[o]>>8-l))}else if(s){let c=n-t,p=0n;for(;c>=8;)u+=BigInt(e[o++])<<p,p+=8n,c-=8;u+=BigInt(e[o]>>8-c)<<p}else{let c=t%8,p=8-c,f=n-t,m=0n;for(;f>=8;){let g=e[o]<<c|e[o+1]>>p;u+=BigInt(g&255)<<m,m+=8n,f-=8,o++}if(f>0){let g=f-Math.max(0,f-p),k=(e[o]&(1<<p)-1)>>p-g;f-=g,f>0&&(k<<=f,k+=e[o+1]>>8-f),u+=BigInt(k)<<m}}if(i){let c=2n**BigInt(n-t-1);u>=c&&(u-=c*2n)}return Number(u)}function jo(e,t,n){if(t<0||t>e.bitSize||n<t||n>e.bitSize){let r=`Invalid bit array slice: start = ${t}, end = ${n}, bit size = ${e.bitSize}`;throw new globalThis.Error(r)}}var Tn=class e extends d{static isResult(t){return t instanceof e}},x=class extends Tn{constructor(t){super(),this[0]=t}isOk(){return!0}},y=class extends Tn{constructor(t){super(),this[0]=t}isOk(){return!1}};function z(e,t){let n=[e,t];for(;n.length;){let r=n.pop(),i=n.pop();if(r===i)continue;if(!Ao(r)||!Ao(i)||!Lc(r,i)||wc(r,i)||gc(r,i)||xc(r,i)||bc(r,i)||yc(r,i)||kc(r,i))return!1;let l=Object.getPrototypeOf(r);if(l!==null&&typeof l.equals=="function")try{if(r.equals(i))continue;return!1}catch{}let[o,u]=mc(r);for(let c of o(r))n.push(u(r,c),u(i,c))}return!0}function mc(e){if(e instanceof Map)return[t=>t.keys(),(t,n)=>t.get(n)];{let t=e instanceof globalThis.Error?["message"]:[];return[n=>[...t,...Object.keys(n)],(n,r)=>n[r]]}}function wc(e,t){return e instanceof Date&&(e>t||e<t)}function gc(e,t){return!(e instanceof be)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((n,r)=>n===t[r]))}function xc(e,t){return Array.isArray(e)&&e.length!==t.length}function bc(e,t){return e instanceof Map&&e.size!==t.size}function yc(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(n=>!t.has(n)))}function kc(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function Ao(e){return typeof e=="object"&&e!==null}function Lc(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(r=>e instanceof r)?!1:e.constructor===t.constructor}function Vt(e,t){return t===0?0:e%t}function Yt(e,t){return Math.trunc(Qs(e,t))}function Qs(e,t){return t===0?0:e/t}function W(e,t,n,r,i,s){let l=new globalThis.Error(i);l.gleam_error=e,l.module=t,l.line=n,l.function=r,l.fn=r;for(let o in s)l[o]=s[o];return l}var h=class extends d{constructor(t){super(),this[0]=t}},$=class extends d{};function ci(e,t){if(e instanceof h){let n=e[0];return new x(n)}else return new y(t)}function dr(e,t){if(e instanceof h){let n=e[0];return new h(t(n))}else return new $}function Oo(e){return e instanceof h?e[0]:new $}function So(e,t){if(e instanceof h){let n=e[0];return t(n)}else return new $}function We(e,t,n){return e?t:n()}var H=class extends d{},Z=class extends d{},K=class extends d{};function Se(e,t,n){return To(t,n,e)}function Ac(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head;e=n.tail,t=w(i,r)}}}function jc(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return Ac(r,a([]));{let i=n.head[0];e=n.tail,t=w(i,r)}}}function Xs(e){return jc(Zt(e),a([]))}function el(e,t,n){let r=Re(e,t);if(r.isOk()){let i=r[0];return Se(e,t,n(new h(i)))}else return Se(e,t,n(new $))}function qo(e,t){let n=e[0],r=e[1];return[n,t(r)]}var V=class extends d{},He=class extends d{};function Bn(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head;e=n.tail,t=w(i,r)}}}function S(e){return Bn(e,a([]))}function Ec(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return S(s);{let l=r.head,o=r.tail,u;i(l)?u=w(l,s):u=s;let p=u;e=o,t=i,n=p}}}function ct(e,t){return Ec(e,t,a([]))}function Tc(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return S(s);{let l=r.head,o=r.tail,u,c=i(l);if(c.isOk()){let f=c[0];u=w(f,s)}else u=s;let p=u;e=o,t=i,n=p}}}function Qt(e,t){return Tc(e,t,a([]))}function qc(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return S(s);{let l=r.head;e=r.tail,t=i,n=w(i(l),s)}}}function C(e,t){return qc(e,t,a([]))}function Bc(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head;e=n.tail,t=w(i,r)}}}function ne(e,t){return Bc(S(e),t)}function ye(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return i;{let l=r.head;e=r.tail,t=s(i,l),n=s}}}function tl(e,t,n){let r=ye(e,[t,a([])],(i,s)=>{let l=i[0],o=i[1],u=n(l,s),c=u[0],p=u[1];return[c,w(p,o)]});return qo(r,S)}function Cc(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r;if(i.hasLength(0))return s;{let u=i.head;e=i.tail,t=l(s,u,o),n=l,r=o+1}}}function nl(e,t,n){return Cc(e,t,n,0)}function ft(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return new y(void 0);{let i=n.head,s=n.tail;if(r(i))return new x(i);e=s,t=r}}}function _r(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return!1;{let i=n.head,s=n.tail;if(r(i))return!0;e=s,t=r}}}function Pc(e,t,n,r,i,s){for(;;){let l=e,o=t,u=n,c=r,p=i,f=s,m=w(p,u);if(l.hasLength(0))return c instanceof V?w(S(m),f):w(m,f);{let g=l.head,k=l.tail,q=o(p,g);if(q instanceof K&&c instanceof He)e=k,t=o,n=m,r=c,i=g,s=f;else if(q instanceof H&&c instanceof V)e=k,t=o,n=m,r=c,i=g,s=f;else if(q instanceof Z&&c instanceof V)e=k,t=o,n=m,r=c,i=g,s=f;else if(q instanceof K&&c instanceof V){let v;c instanceof V?v=w(S(m),f):v=w(m,f);let I=v;if(k.hasLength(0))return w(a([g]),I);{let N=k.head,j=k.tail,O,A=o(g,N);A instanceof H?O=new V:A instanceof Z?O=new V:O=new He;let J=O;e=j,t=o,n=a([g]),r=J,i=N,s=I}}else if(q instanceof H&&c instanceof He){let v;c instanceof V?v=w(S(m),f):v=w(m,f);let I=v;if(k.hasLength(0))return w(a([g]),I);{let N=k.head,j=k.tail,O,A=o(g,N);A instanceof H?O=new V:A instanceof Z?O=new V:O=new He;let J=O;e=j,t=o,n=a([g]),r=J,i=N,s=I}}else{let v;c instanceof V?v=w(S(m),f):v=w(m,f);let I=v;if(k.hasLength(0))return w(a([g]),I);{let N=k.head,j=k.tail,O,A=o(g,N);A instanceof H?O=new V:A instanceof Z?O=new V:O=new He;let J=O;e=j,t=o,n=a([g]),r=J,i=N,s=I}}}}}function Nc(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r;if(i.hasLength(0))return Bn(s,o);if(s.hasLength(0))return Bn(i,o);{let u=i.head,c=i.tail,p=s.head,f=s.tail,m=l(u,p);m instanceof H?(e=c,t=s,n=l,r=w(u,o)):m instanceof K?(e=i,t=f,n=l,r=w(p,o)):(e=i,t=f,n=l,r=w(p,o))}}}function Mc(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return S(s);if(r.hasLength(1)){let l=r.head;return S(w(S(l),s))}else{let l=r.head,o=r.tail.head,u=r.tail.tail,c=Nc(l,o,i,a([]));e=u,t=i,n=w(c,s)}}}function Ic(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r;if(i.hasLength(0))return Bn(s,o);if(s.hasLength(0))return Bn(i,o);{let u=i.head,c=i.tail,p=s.head,f=s.tail,m=l(u,p);m instanceof H?(e=i,t=f,n=l,r=w(p,o)):m instanceof K?(e=c,t=s,n=l,r=w(u,o)):(e=c,t=s,n=l,r=w(u,o))}}}function Dc(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return S(s);if(r.hasLength(1)){let l=r.head;return S(w(S(l),s))}else{let l=r.head,o=r.tail.head,u=r.tail.tail,c=Ic(l,o,i,a([]));e=u,t=i,n=w(c,s)}}}function Fc(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return a([]);if(r.hasLength(1)&&i instanceof V)return r.head;if(r.hasLength(1)&&i instanceof He){let l=r.head;return S(l)}else i instanceof V?(e=Mc(r,s,a([])),t=new He,n=s):(e=Dc(r,s,a([])),t=new V,n=s)}}function Cn(e,t){if(e.hasLength(0))return a([]);if(e.hasLength(1)){let n=e.head;return a([n])}else{let n=e.head,r=e.tail.head,i=e.tail.tail,s,l=t(n,r);l instanceof H?s=new V:l instanceof Z?s=new V:s=new He;let o=s,u=Pc(i,t,a([n]),o,r,a([]));return Fc(u,new V,t)}}function Uc(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r;if(i.atLeastLength(1)&&z(i.head[0],s)){let u=i.head[0],c=i.tail;return Bn(o,w([u,l],c))}else if(i.atLeastLength(1)){let u=i.head;e=i.tail,t=s,n=l,r=w(u,o)}else return S(w([s,l],o))}}function rl(e,t,n){return Uc(e,t,n,a([]))}function fi(e,t,n){let i=e,s=sl(i,t,n);return s}function $r(e,t){return e===t?new Z:Io(e,t)?new H:new K}function Mo(e,t,n){if(n<0)return"";if(t<0){let s=tn(e)+t;return s<0?"":ol(e,s,n)}else return ol(e,t,n)}function Kc(e,t){for(;;){let n=e,r=t;if(n.atLeastLength(1)){let i=n.head;e=n.tail,t=r+i}else return r}}function kt(e){return Kc(e,"")}function Vc(e,t,n){for(;;){let r=e,i=t,s=n;if(i<=0)return s;e=r,t=i-1,n=s+r}}function mr(e,t){return Vc(e,t,"")}function Yc(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return s;{let l=r.head;e=r.tail,t=i,n=s+i+l}}}function ze(e,t){if(e.hasLength(0))return"";{let n=e.head,r=e.tail;return Yc(r,t,n)}}function Zc(e,t){let n=tn(t),r=Yt(e,n),i=Vt(e,n);return mr(t,r)+Mo(t,0,i)}function Lt(e,t,n){let r=tn(e),i=t-r;return i<=0?e:Zc(i,n)+e}function Nn(e){let n=hi(e);return $i(n)}function pi(e,t){for(;;){let n=e,r=t;if(r>0){let s=di(n);if(s.isOk())e=s[0][1],t=r-1;else return n}else return n}}function en(e,t){if(t==="")return Pn(e);{let r=e,i=ll(r,t);return C(i,Q)}}function al(e){let t=Je(e);return t}function vt(e,t){if(e.isOk()){let n=e[0];return new x(t(n))}else{let n=e[0];return new y(n)}}function mi(e,t){if(e.isOk()){let n=e[0];return new x(n)}else{let n=e[0];return new y(t(n))}}function wr(e,t){if(e.isOk()){let n=e[0];return t(n)}else{let n=e[0];return new y(n)}}function Ee(e,t){return wr(e,t)}var rn=class extends d{constructor(t,n,r){super(),this.expected=t,this.found=n,this.path=r}};function rf(e,t){return mi(e,n=>C(n,t))}function Go(e){return dl(e)}function Ro(e){return t=>{if(e.hasLength(0))return new y(a([new rn("another type",qe(t),a([]))]));{let n=e.head,r=e.tail,i=n(t);if(i.isOk()){let s=i[0];return new x(s)}else return Ro(r)(t)}}}function sf(e,t){let n=t,r=Ro(a([dl,u=>vt(Ho(u),R)])),i,s=r(n);if(s.isOk())i=s[0];else{let u=a(["<",qe(n),">"]),c=Xt(u);i=c}let l=i,o=e;return new rn(o.expected,o.found,w(l,e.path))}function pl(e,t){return n=>{let r=new rn("field","nothing",a([]));return wr(Jo(n,e),i=>{let l=ci(i,a([r])),o=wr(l,t);return rf(o,u=>sf(u,e))})}}var Ko=new WeakMap,_l=new DataView(new ArrayBuffer(8)),hl=0;function $l(e){let t=Ko.get(e);if(t!==void 0)return t;let n=hl++;return hl===2147483647&&(hl=0),Ko.set(e,n),n}function ml(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function gl(e){let t=0,n=e.length;for(let r=0;r<n;r++)t=Math.imul(31,t)+e.charCodeAt(r)|0;return t}function Yo(e){_l.setFloat64(0,e);let t=_l.getInt32(0),n=_l.getInt32(4);return Math.imul(73244475,t>>16^t)^n}function lf(e){return gl(e.toString())}function of(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let r=e.hashCode(e);if(typeof r=="number")return r}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return $l(e);if(e instanceof Date)return Yo(e.getTime());let n=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let r=0;r<e.length;r++)n=Math.imul(31,n)+Be(e[r])|0;else if(e instanceof Set)e.forEach(r=>{n=n+Be(r)|0});else if(e instanceof Map)e.forEach((r,i)=>{n=n+ml(Be(r),Be(i))|0});else{let r=Object.keys(e);for(let i=0;i<r.length;i++){let s=r[i],l=e[s];n=n+ml(Be(l),gl(s))|0}}return n}function Be(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return Yo(e);case"string":return gl(e);case"bigint":return lf(e);case"object":return of(e);case"symbol":return $l(e);case"function":return $l(e);default:return 0}}var Ve=5,xl=Math.pow(2,Ve),af=xl-1,uf=xl/2,cf=xl/4,de=0,Ke=1,Le=2,ln=3,bl={type:Le,bitmap:0,array:[]};function gr(e,t){return e>>>t&af}function gi(e,t){return 1<<gr(e,t)}function ff(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function yl(e,t){return ff(e&t-1)}function Ce(e,t,n){let r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=e[s];return i[t]=n,i}function pf(e,t,n){let r=e.length,i=new Array(r+1),s=0,l=0;for(;s<t;)i[l++]=e[s++];for(i[l++]=n;s<r;)i[l++]=e[s++];return i}function wl(e,t){let n=e.length,r=new Array(n-1),i=0,s=0;for(;i<t;)r[s++]=e[i++];for(++i;i<n;)r[s++]=e[i++];return r}function Zo(e,t,n,r,i,s){let l=Be(t);if(l===r)return{type:ln,hash:l,array:[{type:de,k:t,v:n},{type:de,k:i,v:s}]};let o={val:!1};return xr(kl(bl,e,l,t,n,o),e,r,i,s,o)}function xr(e,t,n,r,i,s){switch(e.type){case Ke:return df(e,t,n,r,i,s);case Le:return kl(e,t,n,r,i,s);case ln:return _f(e,t,n,r,i,s)}}function df(e,t,n,r,i,s){let l=gr(n,t),o=e.array[l];if(o===void 0)return s.val=!0,{type:Ke,size:e.size+1,array:Ce(e.array,l,{type:de,k:r,v:i})};if(o.type===de)return z(r,o.k)?i===o.v?e:{type:Ke,size:e.size,array:Ce(e.array,l,{type:de,k:r,v:i})}:(s.val=!0,{type:Ke,size:e.size,array:Ce(e.array,l,Zo(t+Ve,o.k,o.v,n,r,i))});let u=xr(o,t+Ve,n,r,i,s);return u===o?e:{type:Ke,size:e.size,array:Ce(e.array,l,u)}}function kl(e,t,n,r,i,s){let l=gi(n,t),o=yl(e.bitmap,l);if((e.bitmap&l)!==0){let u=e.array[o];if(u.type!==de){let p=xr(u,t+Ve,n,r,i,s);return p===u?e:{type:Le,bitmap:e.bitmap,array:Ce(e.array,o,p)}}let c=u.k;return z(r,c)?i===u.v?e:{type:Le,bitmap:e.bitmap,array:Ce(e.array,o,{type:de,k:r,v:i})}:(s.val=!0,{type:Le,bitmap:e.bitmap,array:Ce(e.array,o,Zo(t+Ve,c,u.v,n,r,i))})}else{let u=e.array.length;if(u>=uf){let c=new Array(32),p=gr(n,t);c[p]=kl(bl,t+Ve,n,r,i,s);let f=0,m=e.bitmap;for(let g=0;g<32;g++){if((m&1)!==0){let k=e.array[f++];c[g]=k}m=m>>>1}return{type:Ke,size:u+1,array:c}}else{let c=pf(e.array,o,{type:de,k:r,v:i});return s.val=!0,{type:Le,bitmap:e.bitmap|l,array:c}}}}function _f(e,t,n,r,i,s){if(n===e.hash){let l=Ll(e,r);if(l!==-1)return e.array[l].v===i?e:{type:ln,hash:n,array:Ce(e.array,l,{type:de,k:r,v:i})};let o=e.array.length;return s.val=!0,{type:ln,hash:n,array:Ce(e.array,o,{type:de,k:r,v:i})}}return xr({type:Le,bitmap:gi(e.hash,t),array:[e]},t,n,r,i,s)}function Ll(e,t){let n=e.array.length;for(let r=0;r<n;r++)if(z(t,e.array[r].k))return r;return-1}function wi(e,t,n,r){switch(e.type){case Ke:return hf(e,t,n,r);case Le:return $f(e,t,n,r);case ln:return mf(e,r)}}function hf(e,t,n,r){let i=gr(n,t),s=e.array[i];if(s!==void 0){if(s.type!==de)return wi(s,t+Ve,n,r);if(z(r,s.k))return s}}function $f(e,t,n,r){let i=gi(n,t);if((e.bitmap&i)===0)return;let s=yl(e.bitmap,i),l=e.array[s];if(l.type!==de)return wi(l,t+Ve,n,r);if(z(r,l.k))return l}function mf(e,t){let n=Ll(e,t);if(!(n<0))return e.array[n]}function vl(e,t,n,r){switch(e.type){case Ke:return wf(e,t,n,r);case Le:return gf(e,t,n,r);case ln:return xf(e,r)}}function wf(e,t,n,r){let i=gr(n,t),s=e.array[i];if(s===void 0)return e;let l;if(s.type===de){if(!z(s.k,r))return e}else if(l=vl(s,t+Ve,n,r),l===s)return e;if(l===void 0){if(e.size<=cf){let o=e.array,u=new Array(e.size-1),c=0,p=0,f=0;for(;c<i;){let m=o[c];m!==void 0&&(u[p]=m,f|=1<<c,++p),++c}for(++c;c<o.length;){let m=o[c];m!==void 0&&(u[p]=m,f|=1<<c,++p),++c}return{type:Le,bitmap:f,array:u}}return{type:Ke,size:e.size-1,array:Ce(e.array,i,l)}}return{type:Ke,size:e.size,array:Ce(e.array,i,l)}}function gf(e,t,n,r){let i=gi(n,t);if((e.bitmap&i)===0)return e;let s=yl(e.bitmap,i),l=e.array[s];if(l.type!==de){let o=vl(l,t+Ve,n,r);return o===l?e:o!==void 0?{type:Le,bitmap:e.bitmap,array:Ce(e.array,s,o)}:e.bitmap===i?void 0:{type:Le,bitmap:e.bitmap^i,array:wl(e.array,s)}}return z(r,l.k)?e.bitmap===i?void 0:{type:Le,bitmap:e.bitmap^i,array:wl(e.array,s)}:e}function xf(e,t){let n=Ll(e,t);if(n<0)return e;if(e.array.length!==1)return{type:ln,hash:e.hash,array:wl(e.array,n)}}function Qo(e,t){if(e===void 0)return;let n=e.array,r=n.length;for(let i=0;i<r;i++){let s=n[i];if(s!==void 0){if(s.type===de){t(s.v,s.k);continue}Qo(s,t)}}}var we=class e{static fromObject(t){let n=Object.keys(t),r=e.new();for(let i=0;i<n.length;i++){let s=n[i];r=r.set(s,t[s])}return r}static fromMap(t){let n=e.new();return t.forEach((r,i)=>{n=n.set(i,r)}),n}static new(){return new e(void 0,0)}constructor(t,n){this.root=t,this.size=n}get(t,n){if(this.root===void 0)return n;let r=wi(this.root,0,Be(t),t);return r===void 0?n:r.v}set(t,n){let r={val:!1},i=this.root===void 0?bl:this.root,s=xr(i,0,Be(t),t,n,r);return s===this.root?this:new e(s,r.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let n=vl(this.root,0,Be(t),t);return n===this.root?this:n===void 0?e.new():new e(n,this.size-1)}has(t){return this.root===void 0?!1:wi(this.root,0,Be(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((n,r)=>t.push([r,n])),t}forEach(t){Qo(this.root,t)}hashCode(){let t=0;return this.forEach((n,r)=>{t=t+ml(Be(n),Be(r))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((n,r)=>{if(!z(t.get(r,!n),n))throw Vo}),!0}catch(n){if(n===Vo)return!1;throw n}}},Vo=Symbol();var ia=void 0,ea={};function Q(e){return e}function R(e){return e.toString()}function Al(e){let t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{let n=t.indexOf("e");return n>=0?t.slice(0,n)+".0"+t.slice(n):t+".0"}}function sl(e,t,n){return typeof e.replaceAll<"u"?e.replaceAll(t,n):e.replace(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),n)}function tn(e){if(e==="")return 0;let t=xi(e);if(t){let n=0;for(let r of t)n++;return n}else return e.match(/./gsu).length}function Pn(e){let t=xi(e);return t?U.fromArray(Array.from(t).map(n=>n.segment)):U.fromArray(e.match(/./gsu))}var ta;function xi(e){if(globalThis.Intl&&Intl.Segmenter)return ta||=new Intl.Segmenter,ta.segment(e)[Symbol.iterator]()}function di(e){let t,n=xi(e);return n?t=n.next().value?.segment:t=e.match(/./su)?.[0],t?new x([t,e.slice(t.length)]):new y(ia)}function on(e){return[e.charCodeAt(0)|0,e.slice(1)]}function ke(e){return e.toLowerCase()}function Io(e,t){return e<t}function ll(e,t){return U.fromArray(e.split(t))}function Xt(e){let t="";for(let n of e)t=t+n;return t}function ol(e,t,n){if(n<=0||t>=e.length)return"";let r=xi(e);if(r){for(;t-- >0;)r.next();let i="";for(;n-- >0;){let s=r.next().value;if(s===void 0)break;i+=s.segment}return i}else return e.match(/./gsu).slice(t,t+n).join("")}function oe(e,t,n){return e.slice(t,t+n)}function nn(e,t){return e.startsWith(t)}function _i(e,t){return e.endsWith(t)}var sa=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),bf=new RegExp(`^[${sa}]*`),yf=new RegExp(`[${sa}]*$`);function hi(e){return e.replace(bf,"")}function $i(e){return e.replace(yf,"")}function D(){return we.new()}function Zt(e){return U.fromArray(e.entries())}function Re(e,t){let n=e.get(t,ea);return n===ea?new y(ia):new x(n)}function To(e,t,n){return n.set(e,t)}function qe(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof Tn)return"Result";if(e instanceof U)return"List";if(e instanceof be)return"BitArray";if(e instanceof we)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function jl(e,t){return kf(e,qe(t))}function kf(e,t){return new y(U.fromArray([new rn(e,t,U.fromArray([]))]))}function dl(e){return typeof e=="string"?new x(e):jl("String",e)}function Ho(e){return Number.isInteger(e)?new x(e):jl("Int",e)}function Jo(e,t){let n=()=>jl("Dict",e);if(e instanceof we||e instanceof WeakMap||e instanceof Map){let r=Re(e,t);return new x(r.isOk()?new h(r[0]):new $)}else return e===null?n():Object.getPrototypeOf(e)==Object.prototype?na(e,t,()=>new x(new $)):na(e,t,n)}function na(e,t,n){try{return t in e?new x(new h(e[t])):n()}catch{return n()}}function Je(e){let t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return Lf(e);if(t==="bigint"||Number.isInteger(e))return e.toString();if(t==="number")return Al(e);if(Array.isArray(e))return`#(${e.map(Je).join(", ")})`;if(e instanceof U)return Of(e);if(e instanceof yt)return Sf(e);if(e instanceof be)return`<<${Uo(e,"")}>>`;if(e instanceof d)return jf(e);if(e instanceof we)return vf(e);if(e instanceof Set)return`//js(Set(${[...e].map(Je).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){let n=[];for(let r of Array(e.length).keys())n.push(String.fromCharCode(r+97));return`//fn(${n.join(", ")}) { ... }`}return Af(e)}function Lf(e){let t='"';for(let n=0;n<e.length;n++){let r=e[n];switch(r){case`
`:t+="\\n";break;case"\r":t+="\\r";break;case"	":t+="\\t";break;case"\f":t+="\\f";break;case"\\":t+="\\\\";break;case'"':t+='\\"';break;default:r<" "||r>"~"&&r<"\xA0"?t+="\\u{"+r.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=r}}return t+='"',t}function vf(e){let t="dict.from_list([",n=!0;return e.forEach((r,i)=>{n||(t=t+", "),t=t+"#("+Je(i)+", "+Je(r)+")",n=!1}),t+"])"}function Af(e){let t=Object.getPrototypeOf(e)?.constructor?.name||"Object",n=[];for(let s of Object.keys(e))n.push(`${Je(s)}: ${Je(e[s])}`);let r=n.length?" "+n.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${r}})`}function jf(e){let t=Object.keys(e).map(n=>{let r=Je(e[n]);return isNaN(parseInt(n))?`${n}: ${r}`:r}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function Of(e){return`[${e.toArray().map(Je).join(", ")}]`}function Sf(e){return`//utfcodepoint(${String.fromCodePoint(e.value)})`}function Uo(e,t){if(e.bitSize===0)return t;for(let n=0;n<e.byteSize-1;n++)t+=e.byteAt(n).toString(),t+=", ";if(e.byteSize*8===e.bitSize)t+=e.byteAt(e.byteSize-1).toString();else{let n=e.bitSize%8;t+=e.byteAt(e.byteSize-1)>>8-n,t+=`:size(${n})`}return t}function sn(e){return e>=0?e:e*-1}var bi=class extends d{constructor(t){super(),this[0]=t}},In=class extends d{},br=class extends d{},yr=class extends d{},Dn=class extends d{},an=class extends d{},kr=class extends d{},Lr=class extends d{},vr=class extends d{},yi=class extends d{};function At(e,t){return[Yt(e,t),Vt(e,t)]}var la=1e3;var oa=1e6;var aa=6e7;var ua=36e8;var ca=864e8;var fa=6048e8;var pa=2592e9;var da=31536e9;function _a(e){let n=ye(e,0,(r,i)=>{if(i[1]instanceof In){let s=i[0];return r+s}else if(i[1]instanceof br){let s=i[0];return r+s*la}else if(i[1]instanceof yr){let s=i[0];return r+s*oa}else if(i[1]instanceof Dn){let s=i[0];return r+s*aa}else if(i[1]instanceof an){let s=i[0];return r+s*ua}else if(i[1]instanceof kr){let s=i[0];return r+s*ca}else if(i[1]instanceof Lr){let s=i[0];return r+s*fa}else if(i[1]instanceof vr){let s=i[0];return r+s*pa}else{let s=i[0];return r+s*da}});return new bi(n)}function ha(e){let t=e[0],n=sn(t),r=At(n,da),i=r[0],s=r[1],l=At(s,pa),o=l[0],u=l[1],c=At(u,fa),p=c[0],f=c[1],m=At(f,ca),g=m[0],k=m[1],q=At(k,ua),v=q[0],I=q[1],N=At(I,aa),j=N[0],O=N[1],A=At(O,oa),J=A[0],Ht=A[1],ko=At(Ht,la),ac=ko[0],uc=ko[1],cc=a([[i,new yi],[o,new vr],[p,new Lr],[g,new kr],[v,new an],[j,new Dn],[J,new yr],[ac,new br],[uc,new In]]),fc=ct(cc,cr=>cr[0]>0);return C(fc,cr=>t<0?[-1*cr[0],cr[1]]:cr)}var $a=a([["Africa/Abidjan",0],["Africa/Algiers",3600],["Africa/Bissau",0],["Africa/Cairo",7200],["Africa/Casablanca",3600],["Africa/Ceuta",3600],["Africa/El_Aaiun",3600],["Africa/Johannesburg",7200],["Africa/Juba",7200],["Africa/Khartoum",7200],["Africa/Lagos",3600],["Africa/Maputo",7200],["Africa/Monrovia",0],["Africa/Nairobi",10800],["Africa/Ndjamena",3600],["Africa/Sao_Tome",0],["Africa/Tripoli",7200],["Africa/Tunis",3600],["Africa/Windhoek",7200],["America/Adak",-36e3],["America/Anchorage",-32400],["America/Araguaina",-10800],["America/Argentina/Buenos_Aires",-10800],["America/Argentina/Catamarca",-10800],["America/Argentina/Cordoba",-10800],["America/Argentina/Jujuy",-10800],["America/Argentina/La_Rioja",-10800],["America/Argentina/Mendoza",-10800],["America/Argentina/Rio_Gallegos",-10800],["America/Argentina/Salta",-10800],["America/Argentina/San_Juan",-10800],["America/Argentina/San_Luis",-10800],["America/Argentina/Tucuman",-10800],["America/Argentina/Ushuaia",-10800],["America/Asuncion",-14400],["America/Bahia",-10800],["America/Bahia_Banderas",-21600],["America/Barbados",-14400],["America/Belem",-10800],["America/Belize",-21600],["America/Boa_Vista",-14400],["America/Bogota",-18e3],["America/Boise",-25200],["America/Cambridge_Bay",-25200],["America/Campo_Grande",-14400],["America/Cancun",-18e3],["America/Caracas",-14400],["America/Cayenne",-10800],["America/Chicago",-21600],["America/Chihuahua",-21600],["America/Ciudad_Juarez",-25200],["America/Costa_Rica",-21600],["America/Cuiaba",-14400],["America/Danmarkshavn",0],["America/Dawson",-25200],["America/Dawson_Creek",-25200],["America/Denver",-25200],["America/Detroit",-18e3],["America/Edmonton",-25200],["America/Eirunepe",-18e3],["America/El_Salvador",-21600],["America/Fort_Nelson",-25200],["America/Fortaleza",-10800],["America/Glace_Bay",-14400],["America/Goose_Bay",-14400],["America/Grand_Turk",-18e3],["America/Guatemala",-21600],["America/Guayaquil",-18e3],["America/Guyana",-14400],["America/Halifax",-14400],["America/Havana",-18e3],["America/Hermosillo",-25200],["America/Indiana/Indianapolis",-18e3],["America/Indiana/Knox",-21600],["America/Indiana/Marengo",-18e3],["America/Indiana/Petersburg",-18e3],["America/Indiana/Tell_City",-21600],["America/Indiana/Vevay",-18e3],["America/Indiana/Vincennes",-18e3],["America/Indiana/Winamac",-18e3],["America/Inuvik",-25200],["America/Iqaluit",-18e3],["America/Jamaica",-18e3],["America/Juneau",-32400],["America/Kentucky/Louisville",-18e3],["America/Kentucky/Monticello",-18e3],["America/La_Paz",-14400],["America/Lima",-18e3],["America/Los_Angeles",-28800],["America/Maceio",-10800],["America/Managua",-21600],["America/Manaus",-14400],["America/Martinique",-14400],["America/Matamoros",-21600],["America/Mazatlan",-25200],["America/Menominee",-21600],["America/Merida",-21600],["America/Metlakatla",-32400],["America/Mexico_City",-21600],["America/Miquelon",-10800],["America/Moncton",-14400],["America/Monterrey",-21600],["America/Montevideo",-10800],["America/New_York",-18e3],["America/Nome",-32400],["America/Noronha",-7200],["America/North_Dakota/Beulah",-21600],["America/North_Dakota/Center",-21600],["America/North_Dakota/New_Salem",-21600],["America/Nuuk",-7200],["America/Ojinaga",-21600],["America/Panama",-18e3],["America/Paramaribo",-10800],["America/Phoenix",-25200],["America/Port-au-Prince",-18e3],["America/Porto_Velho",-14400],["America/Puerto_Rico",-14400],["America/Punta_Arenas",-10800],["America/Rankin_Inlet",-21600],["America/Recife",-10800],["America/Regina",-21600],["America/Resolute",-21600],["America/Rio_Branco",-18e3],["America/Santarem",-10800],["America/Santiago",-14400],["America/Santo_Domingo",-14400],["America/Sao_Paulo",-10800],["America/Scoresbysund",-7200],["America/Sitka",-32400],["America/St_Johns",-12600],["America/Swift_Current",-21600],["America/Tegucigalpa",-21600],["America/Thule",-14400],["America/Tijuana",-28800],["America/Toronto",-18e3],["America/Vancouver",-28800],["America/Whitehorse",-25200],["America/Winnipeg",-21600],["America/Yakutat",-32400],["Antarctica/Casey",28800],["Antarctica/Davis",25200],["Antarctica/Macquarie",36e3],["Antarctica/Mawson",18e3],["Antarctica/Palmer",-10800],["Antarctica/Rothera",-10800],["Antarctica/Troll",0],["Antarctica/Vostok",18e3],["Asia/Almaty",18e3],["Asia/Amman",10800],["Asia/Anadyr",43200],["Asia/Aqtau",18e3],["Asia/Aqtobe",18e3],["Asia/Ashgabat",18e3],["Asia/Atyrau",18e3],["Asia/Baghdad",10800],["Asia/Baku",14400],["Asia/Bangkok",25200],["Asia/Barnaul",25200],["Asia/Beirut",7200],["Asia/Bishkek",21600],["Asia/Chita",32400],["Asia/Colombo",19800],["Asia/Damascus",10800],["Asia/Dhaka",21600],["Asia/Dili",32400],["Asia/Dubai",14400],["Asia/Dushanbe",18e3],["Asia/Famagusta",7200],["Asia/Gaza",7200],["Asia/Hebron",7200],["Asia/Ho_Chi_Minh",25200],["Asia/Hong_Kong",28800],["Asia/Hovd",25200],["Asia/Irkutsk",28800],["Asia/Jakarta",25200],["Asia/Jayapura",32400],["Asia/Jerusalem",7200],["Asia/Kabul",16200],["Asia/Kamchatka",43200],["Asia/Karachi",18e3],["Asia/Kathmandu",20700],["Asia/Khandyga",32400],["Asia/Kolkata",19800],["Asia/Krasnoyarsk",25200],["Asia/Kuching",28800],["Asia/Macau",28800],["Asia/Magadan",39600],["Asia/Makassar",28800],["Asia/Manila",28800],["Asia/Nicosia",7200],["Asia/Novokuznetsk",25200],["Asia/Novosibirsk",25200],["Asia/Omsk",21600],["Asia/Oral",18e3],["Asia/Pontianak",25200],["Asia/Pyongyang",32400],["Asia/Qatar",10800],["Asia/Qostanay",18e3],["Asia/Qyzylorda",18e3],["Asia/Riyadh",10800],["Asia/Sakhalin",39600],["Asia/Samarkand",18e3],["Asia/Seoul",32400],["Asia/Shanghai",28800],["Asia/Singapore",28800],["Asia/Srednekolymsk",39600],["Asia/Taipei",28800],["Asia/Tashkent",18e3],["Asia/Tbilisi",14400],["Asia/Tehran",12600],["Asia/Thimphu",21600],["Asia/Tokyo",32400],["Asia/Tomsk",25200],["Asia/Ulaanbaatar",28800],["Asia/Urumqi",21600],["Asia/Ust-Nera",36e3],["Asia/Vladivostok",36e3],["Asia/Yakutsk",32400],["Asia/Yangon",23400],["Asia/Yekaterinburg",18e3],["Asia/Yerevan",14400],["Atlantic/Azores",-3600],["Atlantic/Bermuda",-14400],["Atlantic/Canary",0],["Atlantic/Cape_Verde",-3600],["Atlantic/Faroe",0],["Atlantic/Madeira",0],["Atlantic/South_Georgia",-7200],["Atlantic/Stanley",-10800],["Australia/Adelaide",34200],["Australia/Brisbane",36e3],["Australia/Broken_Hill",34200],["Australia/Darwin",34200],["Australia/Eucla",31500],["Australia/Hobart",36e3],["Australia/Lindeman",36e3],["Australia/Lord_Howe",37800],["Australia/Melbourne",36e3],["Australia/Perth",28800],["Australia/Sydney",36e3],["Etc/GMT",0],["Etc/GMT+1",-3600],["Etc/GMT+10",-36e3],["Etc/GMT+11",-39600],["Etc/GMT+12",-43200],["Etc/GMT+2",-7200],["Etc/GMT+3",-10800],["Etc/GMT+4",-14400],["Etc/GMT+5",-18e3],["Etc/GMT+6",-21600],["Etc/GMT+7",-25200],["Etc/GMT+8",-28800],["Etc/GMT+9",-32400],["Etc/GMT-1",3600],["Etc/GMT-10",36e3],["Etc/GMT-11",39600],["Etc/GMT-12",43200],["Etc/GMT-13",46800],["Etc/GMT-14",50400],["Etc/GMT-2",7200],["Etc/GMT-3",10800],["Etc/GMT-4",14400],["Etc/GMT-5",18e3],["Etc/GMT-6",21600],["Etc/GMT-7",25200],["Etc/GMT-8",28800],["Etc/GMT-9",32400],["Etc/UTC",0],["Europe/Andorra",3600],["Europe/Astrakhan",14400],["Europe/Athens",7200],["Europe/Belgrade",3600],["Europe/Berlin",3600],["Europe/Brussels",3600],["Europe/Bucharest",7200],["Europe/Budapest",3600],["Europe/Chisinau",7200],["Europe/Dublin",3600],["Europe/Gibraltar",3600],["Europe/Helsinki",7200],["Europe/Istanbul",10800],["Europe/Kaliningrad",7200],["Europe/Kirov",10800],["Europe/Kyiv",7200],["Europe/Lisbon",0],["Europe/London",0],["Europe/Madrid",3600],["Europe/Malta",3600],["Europe/Minsk",10800],["Europe/Moscow",10800],["Europe/Paris",3600],["Europe/Prague",3600],["Europe/Riga",7200],["Europe/Rome",3600],["Europe/Samara",14400],["Europe/Saratov",14400],["Europe/Simferopol",10800],["Europe/Sofia",7200],["Europe/Tallinn",7200],["Europe/Tirane",3600],["Europe/Ulyanovsk",14400],["Europe/Vienna",3600],["Europe/Vilnius",7200],["Europe/Volgograd",10800],["Europe/Warsaw",3600],["Europe/Zurich",3600],["Indian/Chagos",21600],["Indian/Maldives",18e3],["Indian/Mauritius",14400],["Pacific/Apia",46800],["Pacific/Auckland",43200],["Pacific/Bougainville",39600],["Pacific/Chatham",45900],["Pacific/Easter",-21600],["Pacific/Efate",39600],["Pacific/Fakaofo",46800],["Pacific/Fiji",43200],["Pacific/Galapagos",-21600],["Pacific/Gambier",-32400],["Pacific/Guadalcanal",39600],["Pacific/Guam",36e3],["Pacific/Honolulu",-36e3],["Pacific/Kanton",46800],["Pacific/Kiritimati",50400],["Pacific/Kosrae",39600],["Pacific/Kwajalein",43200],["Pacific/Marquesas",-34200],["Pacific/Nauru",43200],["Pacific/Niue",-39600],["Pacific/Norfolk",39600],["Pacific/Noumea",39600],["Pacific/Pago_Pago",-39600],["Pacific/Palau",32400],["Pacific/Pitcairn",-28800],["Pacific/Port_Moresby",36e3],["Pacific/Rarotonga",-36e3],["Pacific/Tahiti",-36e3],["Pacific/Tarawa",43200],["Pacific/Tongatapu",46800]]);function ma(){return Date.now()*1e3}function wa(){return-new Date().getTimezoneOffset()}function ga(){return new h(Intl.DateTimeFormat().resolvedOptions().timeZone)}function xa(){return Math.floor(globalThis.performance.now()*1e3)}function ba(e,t){let n=new Date((e+t)/1e3);return[[n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate()],[n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()]]}var ki=class extends d{constructor(t,n,r,i){super(),this.wall_time=t,this.offset=n,this.timezone=r,this.monotonic_time=i}};function ka(e){{let t=e.wall_time;return Yt(t,1e3)}}function La(e){return new ki(e*1e3,0,new $,new $)}function Sl(e,t){let n=e.wall_time,r=e.monotonic_time,i=t.wall_time,s=t.monotonic_time,l;if(r instanceof h&&s instanceof h){let m=r[0],g=s[0];l=[m,g]}else l=[n,i];let o=l,u=o[0],c=o[1],p=u===c,f=u<c;return p?new Z:f?new H:new K}function Mf(e){return We(e===0,new x("Z"),()=>{let t=(()=>{let n=a([[e,new In]]),r=_a(n);return ha(r)})();if(t.hasLength(2)&&t.head[1]instanceof an&&t.tail.head[1]instanceof Dn){let n=t.head[0],r=t.tail.head[0],i=a([n>0?kt(a(["+",(()=>{let u=R(n);return Lt(u,2,"0")})()])):kt(a(["-",(()=>{let u=sn(n),c=R(u);return Lt(c,2,"0")})()])),(()=>{let o=sn(r),u=R(o);return Lt(u,2,"0")})()]),s=ze(i,":");return new x(s)}else if(t.hasLength(1)&&t.head[1]instanceof an){let n=t.head[0],r=a([n>0?kt(a(["+",(()=>{let o=R(n);return Lt(o,2,"0")})()])):kt(a(["-",(()=>{let o=sn(n),u=R(o);return Lt(u,2,"0")})()])),"00"]),i=ze(r,":");return new x(i)}else return new y(void 0)})}function If(e){{let t=e.wall_time,n=e.offset,r=ba(t,n),i=r[0],s=r[1],l=Mf(n);if(!l.isOk())throw W("let_assert","birl",1324,"to_parts","Pattern match failed, no pattern matched the value.",{value:l});let o=l[0];return[i,s,o]}}function va(e){let t=If(e),n=t[0][0],r=t[0][1],i=t[0][2];return R(n)+"-"+(()=>{let l=R(r);return Lt(l,2,"0")})()+"-"+(()=>{let l=R(i);return Lt(l,2,"0")})()}function zl(){let e=ma(),t=wa(),n=xa(),r=ga();return new ki(e,t*6e7,(()=>{let i=dr(r,s=>_r($a,o=>o[0]===s)?new h(s):new $);return Oo(i)})(),new h(n))}var B=class extends d{constructor(t,n,r,i,s,l,o){super(),this.scheme=t,this.userinfo=n,this.host=r,this.port=i,this.path=s,this.query=l,this.fragment=o}};function Uf(e){return 48>=e&&e<=57||65>=e&&e<=90||97>=e&&e<=122||e===58||e===46}function Ze(e,t){return new x((()=>{let n=t;return new B(n.scheme,n.userinfo,n.host,n.port,n.path,n.query,new h(e))})())}function Wf(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r;if(s.startsWith("#")&&o===0){let u=s.slice(1);return Ze(u,l)}else if(s.startsWith("#")){let u=s.slice(1),c=oe(i,0,o),p,f=l;return p=new B(f.scheme,f.userinfo,f.host,f.port,f.path,new h(c),f.fragment),Ze(u,p)}else{if(s==="")return new x((()=>{let u=l;return new B(u.scheme,u.userinfo,u.host,u.port,u.path,new h(i),u.fragment)})());{let c=on(s)[1];e=i,t=c,n=l,r=o+1}}}}function jt(e,t){return Wf(e,e,t,0)}function Gf(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r;if(s.startsWith("?")){let u=s.slice(1),c=oe(i,0,o),p,f=l;return p=new B(f.scheme,f.userinfo,f.host,f.port,c,f.query,f.fragment),jt(u,p)}else if(s.startsWith("#")){let u=s.slice(1),c=oe(i,0,o),p,f=l;return p=new B(f.scheme,f.userinfo,f.host,f.port,c,f.query,f.fragment),Ze(u,p)}else{if(s==="")return new x((()=>{let u=l;return new B(u.scheme,u.userinfo,u.host,u.port,i,u.query,u.fragment)})());{let c=on(s)[1];e=i,t=c,n=l,r=o+1}}}}function Un(e,t){return Gf(e,e,t,0)}function Ye(e,t,n){for(;;){let r=e,i=t,s=n;if(r.startsWith("0"))e=r.slice(1),t=i,n=s*10;else if(r.startsWith("1"))e=r.slice(1),t=i,n=s*10+1;else if(r.startsWith("2"))e=r.slice(1),t=i,n=s*10+2;else if(r.startsWith("3"))e=r.slice(1),t=i,n=s*10+3;else if(r.startsWith("4"))e=r.slice(1),t=i,n=s*10+4;else if(r.startsWith("5"))e=r.slice(1),t=i,n=s*10+5;else if(r.startsWith("6"))e=r.slice(1),t=i,n=s*10+6;else if(r.startsWith("7"))e=r.slice(1),t=i,n=s*10+7;else if(r.startsWith("8"))e=r.slice(1),t=i,n=s*10+8;else if(r.startsWith("9"))e=r.slice(1),t=i,n=s*10+9;else if(r.startsWith("?")){let l=r.slice(1),o,u=i;return o=new B(u.scheme,u.userinfo,u.host,new h(s),u.path,u.query,u.fragment),jt(l,o)}else if(r.startsWith("#")){let l=r.slice(1),o,u=i;return o=new B(u.scheme,u.userinfo,u.host,new h(s),u.path,u.query,u.fragment),Ze(l,o)}else if(r.startsWith("/")){let l,o=i;return l=new B(o.scheme,o.userinfo,o.host,new h(s),o.path,o.query,o.fragment),Un(r,l)}else return r===""?new x((()=>{let l=i;return new B(l.scheme,l.userinfo,l.host,new h(s),l.path,l.query,l.fragment)})()):new y(void 0)}}function Li(e,t){if(e.startsWith(":0")){let n=e.slice(2);return Ye(n,t,0)}else if(e.startsWith(":1")){let n=e.slice(2);return Ye(n,t,1)}else if(e.startsWith(":2")){let n=e.slice(2);return Ye(n,t,2)}else if(e.startsWith(":3")){let n=e.slice(2);return Ye(n,t,3)}else if(e.startsWith(":4")){let n=e.slice(2);return Ye(n,t,4)}else if(e.startsWith(":5")){let n=e.slice(2);return Ye(n,t,5)}else if(e.startsWith(":6")){let n=e.slice(2);return Ye(n,t,6)}else if(e.startsWith(":7")){let n=e.slice(2);return Ye(n,t,7)}else if(e.startsWith(":8")){let n=e.slice(2);return Ye(n,t,8)}else if(e.startsWith(":9")){let n=e.slice(2);return Ye(n,t,9)}else{if(e.startsWith(":"))return new y(void 0);if(e.startsWith("?")){let n=e.slice(1);return jt(n,t)}else if(e.startsWith("#")){let n=e.slice(1);return Ze(n,t)}else return e.startsWith("/")?Un(e,t):e===""?new x(t):new y(void 0)}}function ja(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r;if(s==="")return new x((()=>{let u=l;return new B(u.scheme,u.userinfo,new h(i),u.port,u.path,u.query,u.fragment)})());if(s.startsWith(":")){let u=oe(i,0,o),c,p=l;return c=new B(p.scheme,p.userinfo,new h(u),p.port,p.path,p.query,p.fragment),Li(s,c)}else if(s.startsWith("/")){let u=oe(i,0,o),c,p=l;return c=new B(p.scheme,p.userinfo,new h(u),p.port,p.path,p.query,p.fragment),Un(s,c)}else if(s.startsWith("?")){let u=s.slice(1),c=oe(i,0,o),p,f=l;return p=new B(f.scheme,f.userinfo,new h(c),f.port,f.path,f.query,f.fragment),jt(u,p)}else if(s.startsWith("#")){let u=s.slice(1),c=oe(i,0,o),p,f=l;return p=new B(f.scheme,f.userinfo,new h(c),f.port,f.path,f.query,f.fragment),Ze(u,p)}else{let c=on(s)[1];e=i,t=c,n=l,r=o+1}}}function Rf(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r;if(s==="")return new x((()=>{let u=l;return new B(u.scheme,u.userinfo,new h(s),u.port,u.path,u.query,u.fragment)})());if(s.startsWith("]")&&o===0){let u=s.slice(1);return Li(u,l)}else if(s.startsWith("]")){let u=s.slice(1),c=oe(i,0,o+1),p,f=l;return p=new B(f.scheme,f.userinfo,new h(c),f.port,f.path,f.query,f.fragment),Li(u,p)}else{if(s.startsWith("/")&&o===0)return Un(s,l);if(s.startsWith("/")){let u=oe(i,0,o),c,p=l;return c=new B(p.scheme,p.userinfo,new h(u),p.port,p.path,p.query,p.fragment),Un(s,c)}else if(s.startsWith("?")&&o===0){let u=s.slice(1);return jt(u,l)}else if(s.startsWith("?")){let u=s.slice(1),c=oe(i,0,o),p,f=l;return p=new B(f.scheme,f.userinfo,new h(c),f.port,f.path,f.query,f.fragment),jt(u,p)}else if(s.startsWith("#")&&o===0){let u=s.slice(1);return Ze(u,l)}else if(s.startsWith("#")){let u=s.slice(1),c=oe(i,0,o),p,f=l;return p=new B(f.scheme,f.userinfo,new h(c),f.port,f.path,f.query,f.fragment),Ze(u,p)}else{let u=on(s),c=u[0],p=u[1];if(Uf(c))e=i,t=p,n=l,r=o+1;else return ja(i,i,l,0)}}}}function Hf(e,t){return Rf(e,e,t,0)}function Jf(e,t){return ja(e,e,t,0)}function Fn(e,t){if(e.startsWith("["))return Hf(e,t);if(e.startsWith(":")){let n,r=t;return n=new B(r.scheme,r.userinfo,new h(""),r.port,r.path,r.query,r.fragment),Li(e,n)}else return e===""?new x((()=>{let n=t;return new B(n.scheme,n.userinfo,new h(""),n.port,n.path,n.query,n.fragment)})()):Jf(e,t)}function Kf(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r;if(s.startsWith("@")&&o===0){let u=s.slice(1);return Fn(u,l)}else if(s.startsWith("@")){let u=s.slice(1),c=oe(i,0,o),p,f=l;return p=new B(f.scheme,new h(c),f.host,f.port,f.path,f.query,f.fragment),Fn(u,p)}else{if(s==="")return Fn(i,l);if(s.startsWith("/"))return Fn(i,l);if(s.startsWith("?"))return Fn(i,l);if(s.startsWith("#"))return Fn(i,l);{let c=on(s)[1];e=i,t=c,n=l,r=o+1}}}}function Vf(e,t){return Kf(e,e,t,0)}function El(e,t){if(e==="//")return new x((()=>{let n=t;return new B(n.scheme,n.userinfo,new h(""),n.port,n.path,n.query,n.fragment)})());if(e.startsWith("//")){let n=e.slice(2);return Vf(n,t)}else return Un(e,t)}function Yf(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r;if(s.startsWith("/")&&o===0)return El(s,l);if(s.startsWith("/")){let u=oe(i,0,o),c,p=l;return c=new B(new h(ke(u)),p.userinfo,p.host,p.port,p.path,p.query,p.fragment),El(s,c)}else if(s.startsWith("?")&&o===0){let u=s.slice(1);return jt(u,l)}else if(s.startsWith("?")){let u=s.slice(1),c=oe(i,0,o),p,f=l;return p=new B(new h(ke(c)),f.userinfo,f.host,f.port,f.path,f.query,f.fragment),jt(u,p)}else if(s.startsWith("#")&&o===0){let u=s.slice(1);return Ze(u,l)}else if(s.startsWith("#")){let u=s.slice(1),c=oe(i,0,o),p,f=l;return p=new B(new h(ke(c)),f.userinfo,f.host,f.port,f.path,f.query,f.fragment),Ze(u,p)}else{if(s.startsWith(":")&&o===0)return new y(void 0);if(s.startsWith(":")){let u=s.slice(1),c=oe(i,0,o),p,f=l;return p=new B(new h(ke(c)),f.userinfo,f.host,f.port,f.path,f.query,f.fragment),El(u,p)}else{if(s==="")return new x((()=>{let u=l;return new B(u.scheme,u.userinfo,u.host,u.port,i,u.query,u.fragment)})());{let c=on(s)[1];e=i,t=c,n=l,r=o+1}}}}}function Zf(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return S(r);{let i=n.head,s=n.tail,l;i===""||i==="."?l=r:i===".."&&r.hasLength(0)?l=a([]):i===".."&&r.atLeastLength(1)?l=r.tail:l=w(i,r);let o=l;e=s,t=o}}}function Qf(e){return Zf(e,a([]))}function Wn(e){return Qf(en(e,"/"))}function ue(e){let t,n=e.fragment;if(n instanceof h){let A=n[0];t=a(["#",A])}else t=a([]);let r=t,i,s=e.query;if(s instanceof h){let A=s[0];i=w("?",w(A,r))}else i=r;let l=i,o=w(e.path,l),u,c=e.host,p=nn(e.path,"/");if(c instanceof h&&!p&&c[0]!==""){let A=c[0];u=w("/",o)}else u=o;let f=u,m,g=e.host,k=e.port;if(g instanceof h&&k instanceof h){let A=k[0];m=w(":",w(R(A),f))}else m=f;let q=m,v,I=e.scheme,N=e.userinfo,j=e.host;if(I instanceof h&&N instanceof h&&j instanceof h){let A=I[0],J=N[0],Ht=j[0];v=w(A,w("://",w(J,w("@",w(Ht,q)))))}else if(I instanceof h&&N instanceof $&&j instanceof h){let A=I[0],J=j[0];v=w(A,w("://",w(J,q)))}else if(I instanceof h&&N instanceof h&&j instanceof $){let A=I[0];v=w(A,w(":",q))}else if(I instanceof h&&N instanceof $&&j instanceof $){let A=I[0];v=w(A,w(":",q))}else if(I instanceof $&&N instanceof $&&j instanceof h){let A=j[0];v=w("//",w(A,q))}else v=q;return kt(v)}var Xf=new B(new $,new $,new $,new $,"",new $,new $);function re(e){return Yf(e,e,Xf,0)}function Tl(e,t){if(e instanceof we||e instanceof WeakMap||e instanceof Map){let r={},i=e.get(t,r);return i===r?new x(new $):new x(new h(i))}let n=Number.isInteger(t);if(n&&t>=0&&t<8&&e instanceof U){let r=0;for(let i of e){if(r===t)return new x(new h(i));r++}return new y("Indexable")}return n&&Array.isArray(e)||e&&typeof e=="object"||e&&Object.getPrototypeOf(e)===Object.prototype?t in e?new x(new h(e[t])):new x(new $):new y(n?"Indexable":"Dict")}function Oa(e,t,n,r,i){if(!(e instanceof U||Array.isArray(e))){let l=new pt("List",qe(e),i);return[i,U.fromArray([l])]}let s=[];for(let l of e){let o=t(l),[u,c]=o;if(c instanceof Jt){let[p,f]=n(o,r.toString());return[i,f]}s.push(u),r++}return[U.fromArray(s),i]}function Sa(e){return Number.isInteger(e)?new x(e):new y(0)}function za(e){return typeof e=="string"?new x(e):new y("")}var pt=class extends d{constructor(t,n,r){super(),this.expected=t,this.found=n,this.path=r}},Me=class extends d{constructor(t){super(),this.function=t}};function Ai(e,t){let n=t.function(e),r=n[0],i=n[1];return i.hasLength(0)?new x(r):new y(i)}function dt(e){return new Me(t=>[e,a([])])}function Bl(e,t){return new Me(n=>{let r=e.function(n),i=r[0],s=r[1];return[t(i),s]})}function Ea(e,t){return new Me(n=>{let r=e.function(n),i=r[0],s=r[1],o=t(i).function(n),u=o,c=o[0];return s.hasLength(0)?u:[c,s]})}function ep(e,t,n){for(;;){let r=e,i=t,s=n;if(s.hasLength(0))return i;{let l=s.head,o=s.tail,u=l.function(r),c=u;if(u[1].hasLength(0))return c;e=r,t=i,n=o}}}function ji(e,t){return new Me(n=>{let r=e.function(n),i=r;return r[1].hasLength(0)?i:ep(n,i,t)})}function Ta(e,t,n){let r=n(e);return r.isOk()?[r[0],a([])]:[r[0],a([new pt(t,qe(e),a([]))])]}function tp(e){return Ta(e,"Int",Sa)}var Ot=new Me(tp);function np(e){return Ta(e,"String",za)}var ve=new Me(np);function Gn(e){return new Me(t=>Oa(t,e.function,(n,r)=>Ar(n,a([r])),0,a([])))}function Ar(e,t){let n=ji(ve,a([Bl(Ot,R)])),r=C(t,s=>{let l=s,o=Ai(l,n);return o.isOk()?o[0]:"<"+qe(l)+">"}),i=C(e[1],s=>{let l=s;return new pt(l.expected,l.found,ne(r,s.path))});return[e[0],i]}function rp(e,t,n,r,i){for(;;){let s=e,l=t,o=n,u=r,c=i;if(s.hasLength(0)){let p=o(u);return Ar(p,S(l))}else{let p=s.head,f=s.tail,m=Tl(u,p);if(m.isOk()&&m[0]instanceof h){let g=m[0][0];e=f,t=w(p,l),n=o,r=g,i=c}else{if(m.isOk()&&m[0]instanceof $)return c(u,w(p,l));{let g=m[0],v=[o(u)[0],a([new pt(g,qe(u),a([]))])];return Ar(v,S(l))}}}}}function ip(e,t,n){return new Me(r=>{let i=rp(e,a([]),t.function,r,(p,f)=>{let k=[t.function(p)[0],a([new pt("Field","Nothing",a([]))])];return Ar(k,S(f))}),s=i[0],l=i[1],o=n(s).function(r),u=o[0],c=o[1];return[u,ne(l,c)]})}function ce(e,t,n){return ip(a([e]),t,n)}function Cl(e,t,n,r){return new Me(i=>{let s,l=Tl(i,e);if(l.isOk()&&l[0]instanceof h){let q=l[0][0];s=n.function(q)}else if(l.isOk()&&l[0]instanceof $)s=[t,a([])];else{let q=l[0];s=[t,a([new pt(q,qe(i),a([]))])]}let o;o=Ar(s,a([e]));let c=o,p=c[0],f=c[1],m=r(p).function(i),g=m[0],k=m[1];return[g,ne(f,k)]})}function Pl(e){return JSON.stringify(e)}function qa(e){return Object.fromEntries(e)}function Ba(e){return e.toArray()}function Ca(e){try{let t=JSON.parse(e);return new x(t)}catch(t){return new y(lp(t,e))}}function lp(e,t){return op(e)?new Rn:ap(e,t)}function op(e){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(e.message)}function ap(e,t){let n=[up,cp,pp,fp];for(let r of n){let i=r(e,t);if(i)return i}return new Qe("",0)}function up(e){let n=/unexpected token '(.)', ".+" is not valid JSON/i.exec(e.message);if(!n)return null;let r=Si(n[1]);return new Qe(r,-1)}function cp(e){let n=/unexpected token (.) in JSON at position (\d+)/i.exec(e.message);if(!n)return null;let r=Si(n[1]),i=Number(n[2]);return new Qe(r,i)}function fp(e,t){let r=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(e.message);if(!r)return null;let i=Number(r[2]),s=Number(r[3]),l=dp(i,s,t),o=Si(t[l]);return new Qe(o,l)}function pp(e){let n=/unexpected (identifier|token) "(.)"/i.exec(e.message);if(!n)return null;let r=Si(n[2]);return new Qe(r,0)}function Si(e){return"0x"+e.charCodeAt(0).toString(16).toUpperCase()}function dp(e,t,n){if(e===1)return t-1;let r=1,i=0;return n.split("").find((s,l)=>(s===`
`&&(r+=1),r===e?(i=l+t,!0):!1)),i}var Rn=class extends d{},Qe=class extends d{constructor(t){super(),this[0]=t}},zi=class extends d{constructor(t){super(),this[0]=t}},Ei=class extends d{constructor(t){super(),this[0]=t}},Nl=class extends d{constructor(t){super(),this[0]=t}};function _p(e,t){return Ee(Ca(e),n=>{let r=Ai(n,t);return mi(r,i=>new Nl(i))})}function Pa(e,t){return _p(e,t)}function un(e){return Pl(e)}function _e(e){return e}function St(e){return e}function Hn(e){return qa(e)}function Il(e){return Ba(e)}function Ti(e,t){let r=C(e,t);return Il(r)}var jr=class extends d{constructor(t){super(),this.all=t}};function Na(e){return new jr(a([t=>e(t.dispatch,t.emit,t.select,t.root)]))}function Jn(e){return Na((t,n,r,i)=>e(t))}function T(){return new jr(a([]))}function Kn(e){return new jr(ye(e,a([]),(t,n)=>{let r=n.all;return ne(t,r)}))}var pn=class extends d{constructor(t){super(),this.content=t}},Y=class extends d{constructor(t,n,r,i,s,l,o){super(),this.key=t,this.namespace=n,this.tag=r,this.attrs=i,this.children=s,this.self_closing=l,this.void=o}},Or=class extends d{constructor(t){super(),this.subtree=t}},dn=class extends d{constructor(t,n,r){super(),this[0]=t,this[1]=n,this.as_property=r}},Sr=class extends d{constructor(t,n){super(),this[0]=t,this[1]=n}};function mp(e){if(e instanceof dn)return new y(void 0);{let t=e[0],n=e[1],r=pi(t,2);return new x([r,n])}}function wp(e,t,n){return nl(e,t,(r,i,s)=>{let l=n+"-"+R(s);return Ma(i,r,l)})}function Ma(e,t,n){for(;;){let r=e,i=t,s=n;if(r instanceof pn)return i;if(r instanceof Or){let l=r.subtree;e=l(),t=i,n=s}else{let l=r.attrs,o=r.children,u=ye(l,i,(c,p)=>{let f=mp(p);if(f.isOk()){let m=f[0][0],g=f[0][1];return Se(c,s+"-"+m,g)}else return c});return wp(o,u,s)}}}function Ia(e){return Ma(e,D(),"0")}function X(e,t){return new dn(e,t,!1)}function gp(e,t){return new dn(e,t,!0)}function Fa(e,t){return new Sr("on"+e,t)}function _(e){return X("class",e)}function _n(e){return X("class",(()=>{let n=Qt(e,r=>r[1]?new x(r[0]):new y(void 0));return ze(n," ")})())}function zt(e){return X("id",e)}function Vn(e){return X("value",e)}function qi(e){return X("placeholder",e)}function Dl(e){return gp("disabled",e)}function Et(e){return X("href",e)}function Ua(e){return X("src",e)}function Wa(e){return X("alt",e)}function M(e,t,n){return e==="area"?new Y("","",e,t,a([]),!1,!0):e==="base"?new Y("","",e,t,a([]),!1,!0):e==="br"?new Y("","",e,t,a([]),!1,!0):e==="col"?new Y("","",e,t,a([]),!1,!0):e==="embed"?new Y("","",e,t,a([]),!1,!0):e==="hr"?new Y("","",e,t,a([]),!1,!0):e==="img"?new Y("","",e,t,a([]),!1,!0):e==="input"?new Y("","",e,t,a([]),!1,!0):e==="link"?new Y("","",e,t,a([]),!1,!0):e==="meta"?new Y("","",e,t,a([]),!1,!0):e==="param"?new Y("","",e,t,a([]),!1,!0):e==="source"?new Y("","",e,t,a([]),!1,!0):e==="track"?new Y("","",e,t,a([]),!1,!0):e==="wbr"?new Y("","",e,t,a([]),!1,!0):new Y("","",e,t,n,!1,!1)}function Ci(e,t,n,r){return new Y("",e,t,n,r,!1,!1)}function zr(e){return new pn(e)}function _t(){return new pn("")}var Fl=class extends d{constructor(t){super(),this.dict=t}};function Ga(){return new Fl(D())}var Ni=class extends d{constructor(t){super(),this[0]=t}},Mi=class extends d{constructor(t,n){super(),this[0]=t,this[1]=n}},Ii=class extends d{constructor(t,n){super(),this[0]=t,this[1]=n}};function Ra(e){return z(e.created,D())&&z(e.removed,Ga())&&z(e.updated,D())}var Di=class extends d{constructor(t){super(),this[0]=t}},Fi=class extends d{constructor(t,n){super(),this[0]=t,this[1]=n}},Er=class extends d{constructor(t){super(),this[0]=t}},Xe=class extends d{constructor(t){super(),this[0]=t}},Tr=class extends d{constructor(t,n){super(),this[0]=t,this[1]=n}},Ui=class extends d{constructor(t,n){super(),this[0]=t,this[1]=n}};var qr=class extends d{},Wi=class extends d{constructor(t,n){super(),this[0]=t,this[1]=n}},Gi=class extends d{constructor(t){super(),this[0]=t}},Ri=class extends d{constructor(t){super(),this[0]=t}};globalThis.customElements&&!globalThis.customElements.get("lustre-fragment")&&globalThis.customElements.define("lustre-fragment",class extends HTMLElement{constructor(){super()}});function Ul(e,t,n){let r,i=[{prev:e,next:t,parent:e.parentNode}];for(;i.length;){let{prev:s,next:l,parent:o}=i.pop();for(;l.subtree!==void 0;)l=l.subtree();if(l.content!==void 0)if(s)if(s.nodeType===Node.TEXT_NODE)s.textContent!==l.content&&(s.textContent=l.content),r??=s;else{let u=document.createTextNode(l.content);o.replaceChild(u,s),r??=u}else{let u=document.createTextNode(l.content);o.appendChild(u),r??=u}else if(l.tag!==void 0){let u=Lp({prev:s,next:l,dispatch:n,stack:i});s?s!==u&&o.replaceChild(u,s):o.appendChild(u),r??=u}}return r}function Lp({prev:e,next:t,dispatch:n,stack:r}){let i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),l=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag),o;if(Br.has(l))o=Br.get(l);else{let j=new Map;Br.set(l,j),o=j}let u=s?new Set(o.keys()):null,c=s?new Set(Array.from(e.attributes,j=>j.name)):null,p=null,f=null,m=null;if(s&&t.tag==="textarea"){let j=t.children[Symbol.iterator]().next().value?.content;j!==void 0&&(l.value=j)}let g=[];for(let j of t.attrs){let O=j[0],A=j[1];if(j.as_property)l[O]!==A&&(l[O]=A),s&&c.delete(O);else if(O.startsWith("on")){let J=O.slice(2),Ht=n(A,J==="input");o.has(J)||l.addEventListener(J,Cr),o.set(J,Ht),s&&u.delete(J)}else if(O.startsWith("data-lustre-on-")){let J=O.slice(15),Ht=n(vp);o.has(J)||l.addEventListener(J,Cr),o.set(J,Ht),l.setAttribute(O,A),s&&(u.delete(J),c.delete(O))}else O.startsWith("delegate:data-")||O.startsWith("delegate:aria-")?(l.setAttribute(O,A),g.push([O.slice(10),A])):O==="class"?p=p===null?A:p+" "+A:O==="style"?f=f===null?A:f+A:O==="dangerous-unescaped-html"?m=A:(l.getAttribute(O)!==A&&l.setAttribute(O,A),(O==="value"||O==="selected")&&(l[O]=A),s&&c.delete(O))}if(p!==null&&(l.setAttribute("class",p),s&&c.delete("class")),f!==null&&(l.setAttribute("style",f),s&&c.delete("style")),s){for(let j of c)l.removeAttribute(j);for(let j of u)o.delete(j),l.removeEventListener(j,Cr)}if(t.tag==="slot"&&window.queueMicrotask(()=>{for(let j of l.assignedElements())for(let[O,A]of g)j.hasAttribute(O)||j.setAttribute(O,A)}),t.key!==void 0&&t.key!=="")l.setAttribute("data-lustre-key",t.key);else if(m!==null)return l.innerHTML=m,l;let k=l.firstChild,q=null,v=null,I=null,N=Hi(t).next().value;if(s&&N!==void 0&&N.key!==void 0&&N.key!==""){q=new Set,v=Ha(e),I=Ha(t);for(let j of Hi(t))k=Ap(k,j,l,r,I,v,q)}else for(let j of Hi(t))r.unshift({prev:k,next:j,parent:l}),k=k?.nextSibling;for(;k;){let j=k.nextSibling;l.removeChild(k),k=j}return l}var Br=new WeakMap;function Cr(e){let t=e.currentTarget;if(!Br.has(t)){t.removeEventListener(e.type,Cr);return}let n=Br.get(t);if(!n.has(e.type)){t.removeEventListener(e.type,Cr);return}n.get(e.type)(e)}function vp(e){let t=e.currentTarget,n=t.getAttribute(`data-lustre-on-${e.type}`),r=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:n,data:i.reduce((s,l)=>{let o=l.split(".");for(let u=0,c=s,p=e;u<o.length;u++)u===o.length-1?c[o[u]]=p[o[u]]:(c[o[u]]??={},p=p[o[u]],c=c[o[u]]);return s},{data:r})}}function Ha(e){let t=new Map;if(e)for(let n of Hi(e)){let r=n?.key||n?.getAttribute?.("data-lustre-key");r&&t.set(r,n)}return t}function Ap(e,t,n,r,i,s,l){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){let u=e.nextSibling;n.removeChild(e),e=u}if(s.size===0)return r.unshift({prev:e,next:t,parent:n}),e=e?.nextSibling,e;if(l.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),r.unshift({prev:null,next:t,parent:n}),e;l.add(t.key);let o=s.get(t.key);if(!o&&!e)return r.unshift({prev:null,next:t,parent:n}),e;if(!o&&e!==null){let u=document.createTextNode("");return n.insertBefore(u,e),r.unshift({prev:u,next:t,parent:n}),e}return!o||o===e?(r.unshift({prev:e,next:t,parent:n}),e=e?.nextSibling,e):(n.insertBefore(o,e),r.unshift({prev:o,next:t,parent:n}),e)}function*Hi(e){for(let t of e.children)yield*Ja(t)}function*Ja(e){e.subtree!==void 0?yield*Ja(e.subtree()):yield e}var Wl=class e{static start({init:t,update:n,view:r},i,s){if(!Yn())return new y(new Pr);let l=i instanceof HTMLElement?i:document.querySelector(i);if(!l)return new y(new Ji(i));let o=new e(l,t(s),n,r);return new x(u=>o.send(u))}constructor(t,[n,r],i,s){this.root=t,this.#e=n,this.#s=i,this.#n=s,this.#t=window.setTimeout(()=>this.#r(r.all.toArray(),!0),0)}root;send(t){if(t instanceof Er){if(t[0]instanceof Ri){this.#t=window.clearTimeout(this.#t),this.#i=[],this.#e=t[0][0];let n=this.#n(this.#e),r=(s,l=!1)=>o=>{let u=s(o);u instanceof x&&this.send(new Xe(u[0],l))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));Ul(i,n,r)}}else if(t instanceof Xe){let n=t[0],r=t[1]??!1;this.#i.push(n),r?(this.#t=window.clearTimeout(this.#t),this.#r()):this.#t||(this.#t=window.setTimeout(()=>this.#r()))}else if(t instanceof Tr){let n=t[0],r=t[1];this.root.dispatchEvent(new CustomEvent(n,{detail:r,bubbles:!0,composed:!0}))}else if(t instanceof qr)for(this.#t=window.clearTimeout(this.#t),this.#e=null,this.#s=null,this.#n=null,this.#i=null;this.root.firstChild;)this.root.firstChild.remove()}#e;#s;#n;#i=[];#t;#r(t=[]){this.#t=void 0,this.#l(t);let n=this.#n(this.#e),r=(s,l=!1)=>o=>{let u=s(o);u instanceof x&&this.send(new Xe(u[0],l))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));Ul(i,n,r)}#l(t=[]){for(;this.#i.length>0;){let n=this.#i.shift(),[r,i]=this.#s(this.#e,n);t=t.concat(i.all.toArray()),this.#e=r}for(;t.length>0;){let n=t.shift(),r=o=>this.send(new Xe(o)),i=(o,u)=>this.root.dispatchEvent(new CustomEvent(o,{detail:u,bubbles:!0,composed:!0})),s=()=>{},l=this.root;n({dispatch:r,emit:i,select:s,root:l})}this.#i.length>0&&this.#l(t)}},Ka=Wl.start;var Gl=class e{static start({init:t,update:n,view:r,on_attribute_change:i},s){let l=new e(t(s),n,r,i);return new x(o=>l.send(o))}constructor([t,n],r,i,s){this.#e=t,this.#s=r,this.#i=i,this.#t=i(t),this.#a=s,this.#r=new Map,this.#l=Ia(this.#t),this.#o(n.all.toArray())}send(t){if(t instanceof Di){for(let n of t[0]){let r=this.#a.get(n[0]);if(!r)continue;let i=r(n[1]);i instanceof y||this.#n.push(i)}this.#o()}else if(t instanceof Fi)this.#n=this.#n.concat(t[0].toArray()),this.#o(t[1].all.toArray());else if(!(t instanceof Er))if(t instanceof Xe)this.#n.push(t[0]),this.#o();else if(t instanceof Tr){let n=new Mi(t[0],t[1]);for(let[r,i]of this.#r)i(n)}else if(t instanceof Ui){let n=this.#l.get(t[0]);if(!n)return;let r=n(t[1]);if(r instanceof y)return;this.#n.push(r[0]),this.#o()}else if(t instanceof Wi){let n=Xs(this.#a),r=new Ii(n,this.#t);this.#r=this.#r.set(t[0],t[1]),t[1](r)}else t instanceof Gi&&(this.#r=this.#r.delete(t[0]))}#e;#s;#n;#i;#t;#r;#l;#a;#o(t=[]){this.#u(t);let n=this.#i(this.#e),r=elements(this.#t,n);if(!Ra(r)){let i=new Ni(r);for(let[s,l]of this.#r)l(i)}this.#t=n,this.#l=r.handlers}#u(t=[]){for(;this.#n.length>0;){let n=this.#n.shift(),[r,i]=this.#s(this.#e,n);t=t.concat(i.all.toArray()),this.#e=r}for(;t.length>0;)t.shift()({dispatch:o=>this.send(new Xe(o)),emit:(o,u)=>this.root.dispatchEvent(new CustomEvent(o,{detail:u,bubbles:!0,composed:!0})),select:()=>{},root:null});this.#n.length>0&&this.#u(t)}},jp=Gl.start,Yn=()=>globalThis.window&&window.document;var Rl=class extends d{constructor(t,n,r,i){super(),this.init=t,this.update=n,this.view=r,this.on_attribute_change=i}};var Ji=class extends d{constructor(t){super(),this.selector=t}},Pr=class extends d{};function Va(e,t,n){return new Rl(e,t,n,new $)}function Ya(e,t,n){return We(!Yn(),new y(new Pr),()=>Ka(e,t,n))}function b(e){return zr(e)}function Hl(e,t){return M("article",e,t)}function Ki(e,t){return M("h1",e,t)}function Nr(e,t){return M("h2",e,t)}function hn(e,t){return M("h3",e,t)}function he(e,t){return M("h4",e,t)}function Qa(e,t){return M("h5",e,t)}function Xa(e,t){return M("h6",e,t)}function Vi(e,t){return M("main",e,t)}function eu(e,t){return M("nav",e,t)}function Jl(e,t){return M("section",e,t)}function L(e,t){return M("div",e,t)}function tu(e){return M("hr",e,a([]))}function nu(e,t){return M("li",e,t)}function et(e,t){return M("p",e,t)}function $e(e,t){return M("pre",e,t)}function Kl(e,t){return M("ul",e,t)}function Tt(e,t){return M("a",e,t)}function ru(e){return M("br",e,a([]))}function fe(e,t){return M("code",e,t)}function iu(e,t){return M("em",e,t)}function $n(e,t){return M("span",e,t)}function Mr(e,t){return M("strong",e,t)}function su(e){return M("img",e,a([]))}function lu(e,t){return Ci("http://www.w3.org/2000/svg","svg",e,t)}function ge(e,t){return M("button",e,t)}function Vl(e){return M("input",e,a([]))}function Ir(e,t){return M("label",e,t)}function Yi(e,t){return M("textarea",e,a([zr(t)]))}var Op="http://www.w3.org/2000/svg";function au(e){return Ci(Op,"path",e,a([]))}function Yl(e,t){return Fa(e,t)}function ie(e){return Yl("mousedown",t=>new x(e))}function uu(e){return Yl("mouseenter",t=>new x(e))}function zp(e){let t=e;return pl("target",pl("value",Go))(t)}function Zn(e){return Yl("input",t=>{let n=zp(t);return vt(n,e)})}var Tp={handle_external_links:!1,handle_internal_links:!0},cu=window?.location?.href,Ql=()=>cu?new x(Zl(new URL(cu))):new y(void 0),Xl=(e,t=Tp)=>{document.addEventListener("click",n=>{let r=pu(n.target);if(r)try{let i=new URL(r.href),s=Zl(i),l=i.host!==window.location.host;return!t.handle_external_links&&l||!t.handle_internal_links&&!l?void 0:(n.preventDefault(),l||(window.history.pushState({},"",r.href),window.requestAnimationFrame(()=>{i.hash&&document.getElementById(i.hash.slice(1))?.scrollIntoView()})),e(s))}catch{return}}),window.addEventListener("popstate",n=>{n.preventDefault();let r=new URL(window.location.href),i=Zl(r);window.requestAnimationFrame(()=>{r.hash&&document.getElementById(r.hash.slice(1))?.scrollIntoView()}),e(i)}),window.addEventListener("modem-push",({detail:n})=>{e(n)}),window.addEventListener("modem-replace",({detail:n})=>{e(n)})},fu=e=>{window.history.pushState({},"",ue(e)),window.requestAnimationFrame(()=>{e.fragment[0]&&document.getElementById(e.fragment[0])?.scrollIntoView()}),window.dispatchEvent(new CustomEvent("modem-push",{detail:e}))};var pu=e=>!e||e.tagName==="BODY"?null:e.tagName==="A"?e:pu(e.parentElement),Zl=e=>new B(e.protocol?new h(e.protocol.slice(0,-1)):new $,new $,e.hostname?new h(e.hostname):new $,e.port?new h(Number(e.port)):new $,e.pathname,e.search?new h(e.search.slice(1)):new $,e.hash?new h(e.hash.slice(1)):new $);function du(e){return Jn(t=>We(!Yn(),void 0,()=>Xl(n=>{let i=e(n);return t(i)})))}var qp=new B(new $,new $,new $,new $,"",new $,new $);function mn(e,t,n){return Jn(r=>We(!Yn(),void 0,()=>fu((()=>{let i=qp;return new B(i.scheme,i.userinfo,i.host,i.port,e,t,n)})())))}var Ie=class extends d{},qt=class extends d{},eo=class extends d{},Dr=class extends d{},Fr=class extends d{},to=class extends d{},no=class extends d{},ro=class extends d{},io=class extends d{};var wn=class extends d{},De=class extends d{};function _u(e){return e instanceof no?"CONNECT":e instanceof Fr?"DELETE":e instanceof Ie?"GET":e instanceof eo?"HEAD":e instanceof ro?"OPTIONS":e instanceof io?"PATCH":e instanceof qt?"POST":e instanceof Dr?"PUT":e instanceof to?"TRACE":e[0]}function hu(e){return e instanceof wn?"http":"https"}var tt=class extends d{constructor(t,n,r,i,s,l,o,u){super(),this.method=t,this.headers=n,this.body=r,this.scheme=i,this.host=s,this.port=l,this.path=o,this.query=u}};function mu(e){return new B(new h(hu(e.scheme)),new $,new h(e.host),e.port,e.path,e.query,new $)}function Zi(e,t,n){let r=rl(e.headers,ke(t),n),i=e;return new tt(i.method,r,i.body,i.scheme,i.host,i.port,i.path,i.query)}function Qn(e,t){let n=e.method,r=e.headers,i=e.scheme,s=e.host,l=e.port,o=e.path,u=e.query;return new tt(n,r,t,i,s,l,o,u)}function Fe(e,t){let n=e;return new tt(t,n.headers,n.body,n.scheme,n.host,n.port,n.path,n.query)}function nt(){return new tt(new Ie,a([]),"",new De,"localhost",new $,"",new $)}function Bt(e,t){let n=e;return new tt(n.method,n.headers,n.body,t,n.host,n.port,n.path,n.query)}function Qi(e,t){let n=e;return new tt(n.method,n.headers,n.body,n.scheme,t,n.port,n.path,n.query)}function Xi(e,t){let n=e;return new tt(n.method,n.headers,n.body,n.scheme,n.host,new h(t),n.path,n.query)}function rt(e,t){let n=e;return new tt(n.method,n.headers,n.body,n.scheme,n.host,n.port,t,n.query)}var Ct=class extends d{constructor(t,n,r,i,s,l){super(),this.saving=t,this.slug=n,this.title=r,this.subtitle=i,this.leading=s,this.content=l}};function wu(e,t,n,r,i){return new Ct(!1,e,t,n,r,i)}function es(e){return e.saving}function ts(e){return e.slug}function ns(e){return e.title}function rs(e){return e.subtitle}function Wr(e){return e.leading}function Gr(e){return e.content}function gu(e,t){{let n=e.saving,r=e.title,i=e.subtitle,s=e.leading,l=e.content;return new Ct(n,t,r,i,s,l)}}function xu(e,t){{let n=e.saving,r=e.slug,i=e.subtitle,s=e.leading,l=e.content;return new Ct(n,r,t,i,s,l)}}function bu(e,t){{let n=e.saving,r=e.slug,i=e.title,s=e.leading,l=e.content;return new Ct(n,r,i,t,s,l)}}function yu(e,t){{let n=e.saving,r=e.slug,i=e.title,s=e.subtitle,l=e.content;return new Ct(n,r,i,s,t,l)}}function ku(e,t){{let n=e.saving,r=e.slug,i=e.title,s=e.subtitle,l=e.leading;return new Ct(n,r,i,s,l,t)}}var ht=class extends d{constructor(t,n,r){super(),this.status=t,this.headers=n,this.body=r}};var Xn=class e{constructor(t){this.promise=t}static wrap(t){return t instanceof Promise?new e(t):t}static unwrap(t){return t instanceof e?t.promise:t}};function is(e){return Promise.resolve(Xn.wrap(e))}function vu(e,t){return e.then(n=>t(Xn.unwrap(n)))}function ss(e,t){return e.then(n=>Xn.wrap(t(Xn.unwrap(n))))}function lo(e,t){return e.catch(n=>t(n))}function Au(e,t){return ss(e,r=>(t(r),r))}function ls(e,t){return vu(e,r=>{if(r.isOk()){let i=r[0];return t(i)}else{let i=r[0];return is(new y(i))}})}async function Ou(e){try{return new x(await fetch(e))}catch(t){return new y(new os(t.toString()))}}function Su(e){return new ht(e.status,U.fromArray([...e.headers]),e)}function Ip(e){let t=ue(mu(e)),n=_u(e.method).toUpperCase(),r={headers:Dp(e.headers),method:n};return[t,r]}function zu(e){let[t,n]=Ip(e);return n.method!=="GET"&&n.method!=="HEAD"&&(n.body=e.body),new globalThis.Request(t,n)}function Dp(e){let t=new globalThis.Headers;for(let[n,r]of e)t.append(n.toLowerCase(),r);return t}async function oo(e){let t;try{t=await e.body.text()}catch{return new y(new as)}return new x(e.withFields({body:t}))}var os=class extends d{constructor(t){super(),this[0]=t}},as=class extends d{};function Eu(e){let n=zu(e),r=Ou(n);return ls(r,i=>is(new x(Su(i))))}var us=class extends d{constructor(t){super(),this[0]=t}},Rr=class extends d{constructor(t){super(),this[0]=t}},Hr=class extends d{constructor(t){super(),this[0]=t}},cs=class extends d{},Jr=class extends d{},Kr=class extends d{constructor(t,n){super(),this[0]=t,this[1]=n}},Vr=class extends d{},fs=class extends d{constructor(t){super(),this.run=t}};function Up(e,t,n){let r=Eu(e),i=ls(r,oo),s=ss(i,o=>{if(o.isOk()){let u=o[0];return t.run(new x(u))}else return t.run(new y(new cs))}),l=lo(s,o=>t.run(new y(new cs)));Au(l,n)}function it(e,t){return Jn(n=>Up(e,t,n))}function Tu(e){if(e instanceof ht&&200<=e.status&&e.status<=299){let t=e.status,n=e.body;return new x(n)}else{if(e instanceof ht&&e.status===401)return new y(new Vr);if(e instanceof ht&&e.status===404)return new y(new Jr);if(e instanceof ht&&e.status===500){let t=e.body;return new y(new Rr(t))}else{let t=e.status,n=e.body;return new y(new Kr(t,n))}}}function ps(e){return new fs(t=>{let r=Ee(t,Tu);return e(r)})}function Pt(e,t){return new fs(n=>{let i=Ee(n,Tu),s=Ee(i,l=>{let o=Pa(l,e);if(o.isOk()){let u=o[0];return new x(u)}else{let u=o[0];return new y(new Hr(u))}});return t(s)})}var ee=class extends d{},se=class extends d{},P=class extends d{constructor(t){super(),this[0]=t}},gn=class extends d{constructor(t){super(),this[0]=t}},Ue=class extends d{constructor(t){super(),this[0]=t}};function Ae(e,t){if(e instanceof P){let n=e[0];return new P(t(n))}else if(e instanceof gn){let n=e[0];return new gn(t(n))}else return e}var xe=class extends d{},xn=class extends d{constructor(t){super(),this.session=t}},ds=class extends d{constructor(t,n,r){super(),this.subject=t,this.expiry=n,this.permissions=r}};function Wp(e){return e instanceof xn&&e.session instanceof ds?e.session.permissions:a([])}function _s(e,t){return _r(Wp(e),n=>_r(t,r=>r===n))}function co(e,t){let n,r=t.scheme;r instanceof h&&r[0]==="http"?n=Bt(e,new wn):r instanceof h&&r[0]==="https"?n=Bt(e,new De):n=Bt(e,new De);let i=n,s,l=t.host;if(l instanceof h){let f=l[0];s=Qi(i,f)}else s=i;let o=s,u,c=t.port;if(c instanceof h){let f=c[0];u=Xi(o,f)}else u=o;return u}function qu(e,t){let n=nt(),r=Fe(n,new Ie),i=rt(r,"/api/auth/logout"),s=Zi(i,"credentials","include"),l=co(s,t);return it(l,ps(e))}function Gp(){return ce("subject",ve,e=>ce("expiresAt",Ot,t=>ce("permissions",Gn(ve),n=>dt(new ds(e,t,n)))))}function Bu(){let e=Gp();return Ea(e,t=>dt(new xn(t)))}function Cu(e,t,n,r){let i,s=Hn(a([["username",_e(t)],["password",_e(n)]]));i=un(s);let l=i,o=nt(),u=Fe(o,new qt),c=rt(u,"/api/auth"),p=Qn(c,l),f=co(p,r);return it(f,Pt(Bu(),e))}function fo(e,t){let n=nt(),r=Fe(n,new Ie),i=rt(r,"/api/auth"),s=Zi(i,"credentials","include"),l=co(s,t);return it(l,Pt(Bu(),e))}var F=class extends d{constructor(t,n,r,i,s,l,o,u,c,p,f){super(),this.id=t,this.slug=n,this.revision=r,this.author=i,this.tags=s,this.published_at=l,this.title=o,this.subtitle=u,this.leading=c,this.content=p,this.draft=f}};function er(e){if(e instanceof F&&e.content instanceof P){let t=e.slug,n=e.title,r=e.subtitle,i=e.leading,s=e.content[0],l=wu(t,n,r,i,s);return new h(l)}else return new $}function Yr(e,t){return _s(t,a(["post_edit_any"]))}function Nu(e,t){return _s(t,a(["post_edit_any"]))}function Mu(e,t){return _s(t,a(["post_edit_any"]))}function Zr(e,t){let n,r=t.scheme;r instanceof h&&r[0]==="http"?n=Bt(e,new wn):r instanceof h&&r[0]==="https"?n=Bt(e,new De):n=Bt(e,new De);let i=n,s,l=t.host;if(l instanceof h){let f=l[0];s=Qi(i,f)}else s=i;let o=s,u,c=t.port;if(c instanceof h){let f=c[0];u=Xi(o,f)}else u=o;return u}function Iu(e,t,n){let r,i=nt(),s=Fe(i,new Fr),l=rt(s,"/api/articles/"+t);return r=Zr(l,n),it(r,ps(e))}function Qr(){return Cl("version",0,Ot,e=>ce("id",ve,t=>ce("author",ve,n=>ce("tags",ji(Gn(ve),a([dt(a([]))])),r=>ce("published_at",Bl(Ot,s=>s===0?new $:new h(La(s))),i=>ce("slug",ve,s=>ce("revision",Ot,l=>ce("title",ve,o=>ce("leading",ve,u=>ce("subtitle",ve,c=>Cl("content","",ve,p=>{let f;p===""?f=new ee:f=new P(p);let m=f;return dt(new F(t,s,l,n,r,i,o,c,u,m,new $))})))))))))))}function Nt(e,t,n){let r,i=nt(),s=Fe(i,new Ie),l=rt(s,"/api/articles/"+t);return r=Zr(l,n),it(r,Pt(Qr(),e))}function Rp(){return ce("articles",ji(Gn(Qr()),a([dt(a([]))])),e=>dt(e))}function hs(e,t){let n,r=nt(),i=Fe(r,new Ie),s=rt(i,"/api/articles");return n=Zr(s,t),it(n,Pt(Rp(),e))}function po(e){{let t=e.id,n=e.slug,r=e.revision,i=e.author,s=e.tags,l=e.published_at,o=e.title,u=e.subtitle,c=e.leading,p=e.content,f;if(p instanceof P){let q=p[0];f=_e(q)}else f=_e("");let m=f,g;if(l instanceof h){let q=l[0];g=St(ka(q))}else g=St(0);let k=g;return Hn(a([["struct_version",St(1)],["id",_e(t)],["revision",St(r)],["slug",_e(n)],["title",_e(o)],["leading",_e(c)],["subtitle",_e(u)],["author",_e(i)],["published_at",k],["tags",Ti(s,_e)],["content",m]]))}}function $s(e,t,n){let r,i=nt(),s=Fe(i,new Dr),l=rt(s,"/api/articles/"+t.id),o=Qn(l,(()=>{let c=po(t);return un(c)})());return r=Zr(o,n),it(r,Pt(Qr(),e))}function Du(e,t,n){let r,i=nt(),s=Fe(i,new qt),l=rt(s,"/api/articles"),o=Qn(l,(()=>{let c=po(t);return un(c)})());return r=Zr(o,n),it(r,Pt(Qr(),e))}function tr(e,t){if(e instanceof F&&e.draft instanceof h){let n=e.draft[0],r=e;return new F(r.id,r.slug,r.revision,r.author,r.tags,r.published_at,r.title,r.subtitle,r.leading,r.content,new h(t(n)))}else return Hp("draft_update: not an article with draft","src\\article\\article.gleam",317),e}function Hp(e,t,n){let r="\x1B[90m",i="\x1B[39m",s=`${t}:${n}`,l=$t(e);if(globalThis.process?.stderr?.write){let o=`${r}${s}${i}
${l}
`;process.stderr.write(o)}else if(globalThis.Deno){let o=`${r}${s}${i}
${l}
`;globalThis.Deno.stderr.writeSync(new TextEncoder().encode(o))}else{let o=`${s}
${l}`;globalThis.console.log(o)}return e}function Jp(e){let t='"';for(let n=0;n<e.length;n++){let r=e[n];r==`
`?t+="\\n":r=="\r"?t+="\\r":r=="	"?t+="\\t":r=="\f"?t+="\\f":r=="\\"?t+="\\\\":r=='"'?t+='\\"':r<" "||r>"~"&&r<"\xA0"?t+="\\u{"+r.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=r}return t+='"',t}function Kp(e){let t="dict.from_list([",n=!0,r=[];return e.forEach((i,s)=>{r.push([s,i])}),r.sort(),r.forEach(([i,s])=>{n||(t=t+", "),t=t+"#("+$t(i)+", "+$t(s)+")",n=!1}),t+"])"}function Vp(e){let t=globalThis.Object.keys(e).map(n=>{let r=$t(e[n]);return isNaN(parseInt(n))?`${n}: ${r}`:r}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function Yp(e){let t=Object.getPrototypeOf(e)?.constructor?.name||"Object",n=[];for(let s of Object.keys(e))n.push(`${$t(s)}: ${$t(e[s])}`);let r=n.length?" "+n.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${r}})`}function $t(e){let t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return Jp(e);if(t==="bigint"||t==="number")return e.toString();if(globalThis.Array.isArray(e))return`#(${e.map($t).join(", ")})`;if(e instanceof U)return`[${e.toArray().map($t).join(", ")}]`;if(e instanceof yt)return`//utfcodepoint(${String.fromCodePoint(e.value)})`;if(e instanceof be)return Zp(e);if(e instanceof d)return Vp(e);if(Qp(e))return Kp(e);if(e instanceof Set)return`//js(Set(${[...e].map($t).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){let n=[];for(let r of Array(e.length).keys())n.push(String.fromCharCode(r+97));return`//fn(${n.join(", ")}) { ... }`}return Yp(e)}function Zp(e){let t=e.bitOffset+8*Math.trunc(e.bitSize/8),n=Kt(e,e.bitOffset,t),r=e.bitSize%8;if(r>0){let i=ui(e,t,e.bitSize,!1,!1),s=Array.from(n.rawBuffer),l=`${i}:size(${r})`;return s.length===0?`<<${l}>>`:`<<${Array.from(n.rawBuffer).join(", ")}, ${l}>>`}else return`<<${Array.from(n.rawBuffer).join(", ")}>>`}function Qp(e){try{return e instanceof we}catch{return!1}}var bn=class extends d{},mt=class extends d{constructor(t,n){super(),this.article=t,this.session=n}},st=class extends d{constructor(t){super(),this.article=t}},yn=class extends d{constructor(t,n){super(),this.articles=t,this.session=n}},Mt=class extends d{},ae=class extends d{constructor(t){super(),this.error=t}},nr=class extends d{},ms=class extends d{constructor(t){super(),this.requested_uri=t}},kn=class extends d{constructor(t){super(),this.content=t}},Ln=class extends d{constructor(t,n){super(),this.slug=t,this.available_slugs=n}},vn=class extends d{constructor(t){super(),this.id=t}},It=class extends d{constructor(t,n){super(),this.error=t,this.context=n}},An=class extends d{constructor(t){super(),this.attempted_action=t}},rr=class extends d{constructor(t){super(),this.msg=t}};function ws(e){if(e instanceof bn){let t=re("/");if(!t.isOk())throw W("let_assert","pages/pages",41,"to_uri","Pattern match failed, no pattern matched the value.",{value:t});return t[0]}else if(e instanceof yn){let t=re("/articles");if(!t.isOk())throw W("let_assert","pages/pages",45,"to_uri","Pattern match failed, no pattern matched the value.",{value:t});return t[0]}else if(e instanceof Mt){let t=re("/articles");if(!t.isOk())throw W("let_assert","pages/pages",49,"to_uri","Pattern match failed, no pattern matched the value.",{value:t});return t[0]}else if(e instanceof mt){let t=e.article,n=re("/article/"+t.slug);if(!n.isOk())throw W("let_assert","pages/pages",53,"to_uri","Pattern match failed, no pattern matched the value.",{value:n});return n[0]}else if(e instanceof st){let t=e.article,n=re("/article/"+t.id+"/edit");if(!n.isOk())throw W("let_assert","pages/pages",57,"to_uri","Pattern match failed, no pattern matched the value.",{value:n});return n[0]}else if(e instanceof ae){let t=e.error;if(t instanceof Ln){let n=t.slug,r=re("/article/"+n);if(!r.isOk())throw W("let_assert","pages/pages",63,"to_uri","Pattern match failed, no pattern matched the value.",{value:r});return r[0]}else if(t instanceof vn){let n=t.id,r=re("/article/"+n+"/edit");if(!r.isOk())throw W("let_assert","pages/pages",67,"to_uri","Pattern match failed, no pattern matched the value.",{value:r});return r[0]}else if(t instanceof It){let n=re("/");if(!n.isOk())throw W("let_assert","pages/pages",71,"to_uri","Pattern match failed, no pattern matched the value.",{value:n});return n[0]}else if(t instanceof An){let n=re("/");if(!n.isOk())throw W("let_assert","pages/pages",75,"to_uri","Pattern match failed, no pattern matched the value.",{value:n});return n[0]}else{let n=re("/");if(!n.isOk())throw W("let_assert","pages/pages",79,"to_uri","Pattern match failed, no pattern matched the value.",{value:n});return n[0]}}else if(e instanceof nr){let t=re("/about");if(!t.isOk())throw W("let_assert","pages/pages",85,"to_uri","Pattern match failed, no pattern matched the value.",{value:t});return t[0]}else if(e instanceof kn){let t=e.content,n=re("/djot-demo/"+t);if(!n.isOk())throw W("let_assert","pages/pages",89,"to_uri","Pattern match failed, no pattern matched the value.",{value:n});return n[0]}else return e.requested_uri}function ho(e){return C(e,t=>t.slug)}var Dt=class extends d{},lt=class extends d{},wt=class extends d{constructor(t){super(),this.slug=t}},ot=class extends d{constructor(t){super(),this.id=t}},gt=class extends d{},xt=class extends d{},Xr=class extends d{constructor(t){super(),this.uri=t}};function $o(e){let t=Wn(e.path);if(t.hasLength(0))return new Dt;if(t.hasLength(1)&&t.head==="")return new Dt;if(t.hasLength(1)&&t.head==="articles")return new lt;if(t.hasLength(2)&&t.head==="article"){let n=t.tail.head;return new wt(n)}else if(t.hasLength(3)&&t.head==="article"&&t.tail.tail.head==="edit"){let n=t.tail.head;return new ot(n)}else return t.hasLength(1)&&t.head==="about"?new gt:t.hasLength(1)&&t.head==="djot-demo"?new xt:new Xr(e)}function ir(e){if(e instanceof Dt)return"/";if(e instanceof gt)return"/about";if(e instanceof lt)return"/articles";if(e instanceof wt)return"/article/"+e.slug;if(e instanceof ot)return"/article/"+e.id+"/edit";if(e instanceof xt)return"/djot-demo/";{let t=e.uri;return"/404?uri="+ue(t)}}function Ft(e){let t,r=ir(e);t=re(r);let i=t;if(!i.isOk())throw W("let_assert","routes/routes",45,"to_uri","Pattern match failed, no pattern matched the value.",{value:i});return i[0]}function ed(e,t){for(;;){let n=e,r=t;if(n.hasLength(0)&&r.hasLength(0))return!0;if(n.hasLength(0))return!1;if(r.hasLength(0))return!1;{let i=n.head,s=n.tail,l=r.head,o=r.tail;if(z(i,l))e=s,t=o;else return!1}}}function Fu(e,t){let n,i=ir(e);n=Wn(i);let s=n,l,u=ir(t);return l=Wn(u),ed(s,l)}function nd(e){{let t=e.expected,n=e.found,r=e.path;return"expected: "+t+", found: "+n+", path: "+ze(r,"/")}}function Uu(e){if(e.hasLength(0))return"no errors";{let t=e.head,n=e.tail;return nd(t)+`
`+Uu(n)}}function rd(e){{let t=e.expected,n=e.found,r=e.path;return"expected: "+t+", found: "+n+", path: "+ze(r,"/")}}function Wu(e){if(e.hasLength(0))return"";{let t=e.head,n=e.tail;return rd(t)+`
`+Wu(n)}}function id(e){if(e instanceof Rn)return"unexpected end of input";if(e instanceof Qe)return"unexpected byte: "+e[0];if(e instanceof zi)return"unexpected sequence: "+e[0];if(e instanceof Ei){let t=e[0];return`unexpected format
`+Uu(t)}else{let t=e[0];return`unable to decode
`+Wu(t)}}function gs(e){if(e instanceof us)return"bad url: "+e[0];if(e instanceof Rr)return"internal server error: "+e[0];if(e instanceof Hr){let t=e[0];return`json error
`+id(t)}else{if(e instanceof Jr)return"not found";if(e instanceof Vr)return"unauthorized";if(e instanceof Kr){let t=e[0],n=e[1];return"other error: "+R(t)+" "+n}else return"network error"}}var mo=class extends d{constructor(t,n){super(),this.content=t,this.references=n}},bs=class extends d{},ei=class extends d{constructor(t,n){super(),this.attributes=t,this.content=n}},ti=class extends d{constructor(t,n,r){super(),this.attributes=t,this.level=n,this.content=r}},ni=class extends d{constructor(t,n,r){super(),this.attributes=t,this.language=n,this.content=r}},ri=class extends d{},je=class extends d{constructor(t){super(),this[0]=t}},jn=class extends d{constructor(t,n){super(),this.content=t,this.destination=n}},On=class extends d{constructor(t,n){super(),this.content=t,this.destination=n}},Sn=class extends d{constructor(t){super(),this.content=t}},zn=class extends d{constructor(t){super(),this.content=t}},sr=class extends d{constructor(t){super(),this.content=t}},ii=class extends d{constructor(t){super(),this[0]=t}},si=class extends d{constructor(t){super(),this[0]=t}};function xs(e,t,n){return t==="class"?el(e,t,r=>r instanceof $?n:r[0]+" "+n):Se(e,t,n)}function ld(e){for(;;){let t=e;if(t.hasLength(0))return a([]);if(t.atLeastLength(1)&&t.head===`
`)e=t.tail;else{let n=t.head,r=t.tail;return w(n,r)}}}function lr(e){for(;;){let t=e;if(t.hasLength(0))return a([]);if(t.atLeastLength(1)&&t.head===" ")e=t.tail;else{let n=t.head,r=t.tail;return w(n,r)}}}function Gu(e,t){for(;;){let n=e,r=t;if(r.hasLength(0))return n>=3?new h([new bs,r]):new $;if(r.atLeastLength(1)&&r.head===`
`)return n>=3?new h([new bs,r]):new $;if(r.atLeastLength(1)&&r.head===" "){let i=r.tail;e=n,t=i}else if(r.atLeastLength(1)&&r.head==="	"){let i=r.tail;e=n,t=i}else if(r.atLeastLength(1)&&r.head==="-"){let i=r.tail;e=n+1,t=i}else if(r.atLeastLength(1)&&r.head==="*"){let i=r.tail;e=n+1,t=i}else return new $}}function od(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return[r,a([])];if(n.atLeastLength(1)&&n.head===`
`){let i=n.tail;return[r+`
`,i]}else{let i=n.head;e=n.tail,t=r+i}}}function ad(e,t,n){for(;;){let r=e,i=t,s=n;if(r.atLeastLength(1)&&r.head===`
`&&s===0){let l=r.tail;return new h([l])}else{if(s===0)return new h([r]);if(r.atLeastLength(1)&&r.head===i){let l=r.head;e=r.tail,t=i,n=s-1}else return r.hasLength(0)?new h([r]):new $}}}function ud(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r,u=ad(i,s,l);if(u instanceof $){let c=od(i,o),p=c[0];e=c[1],t=s,n=l,r=p}else{let c=u[0][0];return[o,c]}}}function cd(e,t){for(;;){let n=e,r=t;if(n.atLeastLength(1)&&n.head==="`")return new $;if(n.hasLength(0))return new h([new $,n]);if(n.atLeastLength(1)&&n.head===`
`&&r===""){let i=n.tail;return new h([new $,i])}else if(n.atLeastLength(1)&&n.head===`
`){let i=n.tail;return new h([new h(r),i])}else{let i=n.head;e=n.tail,t=r+i}}}function fd(e,t,n){for(;;){let r=e,i=t,s=n;if(r.atLeastLength(1)&&r.head===i){let l=r.head;e=r.tail,t=i,n=s+1}else if(r.atLeastLength(1)&&r.head===`
`&&s>=3){let l=r.tail;return new h([new $,s,l])}else if(r.atLeastLength(1)&&s>=3){let l=lr(r);return dr(cd(l,""),o=>{let u=o[0],c=o[1];return[u,s,c]})}else return new $}}function Ru(e,t,n){return So(fd(e,n,1),r=>{let i=r[0],s=r[1],l=r[2],o=ud(l,n,s,""),u=o[0],c=o[1];return new h([new ni(t,i,u),c])})}function pd(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return new h([i,Nn(s),a([])]);if(r.atLeastLength(2)&&r.head===`
`&&r.tail.head===" "){let l=r.tail.tail;e=lr(l),t=i,n=s}else if(r.atLeastLength(1)&&r.head===`
`){let l=r.tail;return new h([i,Nn(s),l])}else{let l=r.head;e=r.tail,t=i,n=s+l}}}function dd(e,t){for(;;){let n=e,r=t;if(n.atLeastLength(2)&&n.head==="]"&&n.tail.head===":"){let i=n.tail.tail;return pd(i,r,"")}else{if(n.hasLength(0))return new $;if(n.atLeastLength(1)&&n.head==="]")return new $;if(n.atLeastLength(1)&&n.head===`
`)return new $;{let i=n.head;e=n.tail,t=r+i}}}}function _d(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return new $;if(r.atLeastLength(1)&&r.head===" "){let l=r.tail;return new h([i,s,l])}else{if(r.atLeastLength(1)&&r.head==="}")return new h([i,s,r]);{let l=r.head;e=r.tail,t=i,n=s+l}}}}function hd(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return new $;if(r.atLeastLength(1)&&r.head==='"'){let l=r.tail;return new h([i,s,l])}else{let l=r.head;e=r.tail,t=i,n=s+l}}}function $d(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return new $;if(n.atLeastLength(1)&&n.head===" ")return new $;if(n.atLeastLength(2)&&n.head==="="&&n.tail.head==='"'){let i=n.tail.tail;return hd(i,r,"")}else if(n.atLeastLength(1)&&n.head==="="){let i=n.tail;return _d(i,r,"")}else{let i=n.head;e=n.tail,t=r+i}}}function Hu(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return new h([r,n]);if(n.atLeastLength(1)&&n.head==="}")return new h([r,n]);if(n.atLeastLength(1)&&n.head===" ")return new h([r,n]);if(n.atLeastLength(1)&&n.head==="#")return new $;if(n.atLeastLength(1)&&n.head===".")return new $;if(n.atLeastLength(1)&&n.head==="=")return new $;if(n.atLeastLength(1)&&n.head===`
`)return new $;{let i=n.head;e=n.tail,t=r+i}}}function md(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return new h([r,a([])]);if(n.atLeastLength(1)&&n.head===`
`){let i=n.tail;return new h([r,i])}else if(n.atLeastLength(1)&&n.head===" ")e=n.tail,t=r;else return new $}}function wd(e,t){for(;;){let n=e,r=t,i=lr(n);if(i.hasLength(0))return new $;if(i.atLeastLength(1)&&i.head==="}"){let s=i.tail;return md(s,r)}else if(i.atLeastLength(1)&&i.head==="#"){let s=i.tail,l=Hu(s,"");if(l instanceof h){let o=l[0][0];e=l[0][1],t=xs(r,"id",o)}else return new $}else if(i.atLeastLength(1)&&i.head==="."){let s=i.tail,l=Hu(s,"");if(l instanceof h){let o=l[0][0];e=l[0][1],t=xs(r,"class",o)}else return new $}else{let s=$d(i,"");if(s instanceof h){let l=s[0][0],o=s[0][1];e=s[0][2],t=xs(r,l,o)}else return new $}}}function gd(e){return e==="#"||e==="?"||e==="!"?!1:e!==","}function xd(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;if(n.atLeastLength(1)&&n.head===" "&&z(n.tail,a([]))){let i=n.tail;return r}else if(n.atLeastLength(1)&&n.head===`
`&&z(n.tail,a([]))){let i=n.tail;return r}else if(n.atLeastLength(1)&&n.head===" "&&r==="")e=n.tail,t=r;else if(n.atLeastLength(1)&&n.head===`
`&&r==="")e=n.tail,t=r;else if(n.atLeastLength(1)&&n.head===" ")e=n.tail,t=r+"-";else if(n.atLeastLength(1)&&n.head===`
`)e=n.tail,t=r+"-";else{let i=n.head;e=n.tail,t=r+i}}}function bd(e){let n=Pn(e),r=ct(n,gd);return xd(r,"")}function yd(e,t,n){for(;;){let r=e,i=t,s=n;if(i<0)return new $;if(r.hasLength(0)&&i>0)return new $;if(r.hasLength(0)&&i===0)return new h([s,a([])]);if(r.atLeastLength(1)&&r.head===" "&&i===0){let l=r.tail;return new h([s,l])}else if(r.atLeastLength(1)&&r.head==="#")e=r.tail,t=i-1,n=s;else return new $}}function kd(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return[S(s),a([])];if(r.hasLength(1)&&r.head===`
`)return[S(s),a([])];if(r.atLeastLength(2)&&r.head===`
`&&r.tail.head===`
`){let l=r.tail.tail;return[S(s),l]}else if(r.atLeastLength(2)&&r.head===`
`&&r.tail.head==="#"){let l=r.tail.tail,o=yd(l,i-1,w(`
`,s));if(o instanceof h){let u=o[0][0];e=o[0][1],t=i,n=u}else return[S(s),r]}else{let l=r.head;e=r.tail,t=i,n=w(l,s)}}}function Ld(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r;if(i.hasLength(0))return[!0,o,i];if(i.atLeastLength(1)&&i.head==="`")e=i.tail,t=s,n=l+1,r=o;else return i.atLeastLength(1)&&s===l?[!0,o,i]:[!1,o+mr("`",l),i]}}function vd(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return[s,r];if(r.atLeastLength(1)&&r.head==="`"){let l=r.tail,o=Ld(l,i,1,s),u=o[0],c=o[1],p=o[2];if(u)return[c,p];e=p,t=i,n=c}else{let l=r.head;e=r.tail,t=i,n=s+l}}}function Ad(e,t){for(;;){let n=e,r=t;if(n.atLeastLength(1)&&n.head==="`")e=n.tail,t=r+1;else{let i=vd(n,r,""),s=i[0],l=i[1],o;nn(s," `")?o=hi(s):o=s;let c=o,p;_i(c,"` ")?p=$i(c):p=c;let m=p;return[new sr(m),l]}}}function jd(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return new $;if(r.atLeastLength(1)&&r.head==="`")return new $;if(r.atLeastLength(2)&&r.head==="	"&&r.tail.head===i){let l=r.tail.head;e=r.tail.tail,t=i,n=w(" ",w(l,s))}else if(r.atLeastLength(2)&&r.head===`
`&&r.tail.head===i){let l=r.tail.head;e=r.tail.tail,t=i,n=w(" ",w(l,s))}else if(r.atLeastLength(2)&&r.head===" "&&r.tail.head===i){let l=r.tail.head;e=r.tail.tail,t=i,n=w(" ",w(l,s))}else if(r.atLeastLength(1)&&r.head===i){let l=r.head,o=r.tail,u=S(s);if(u.hasLength(0))return new $;{let c=u;return new h([c,o])}}else{let l=r.head;e=r.tail,t=i,n=w(l,s)}}}function Ju(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r;if(i.hasLength(0))return new $;if(i.atLeastLength(1)&&i.head===")"&&s){let u=i.tail;return new h([l,new si(o),u])}else if(i.atLeastLength(1)&&i.head==="]"&&!s){let u=i.tail;return new h([l,new ii(o),u])}else if(i.atLeastLength(1)&&i.head===`
`&&s)e=i.tail,t=s,n=l,r=o;else if(i.atLeastLength(1)&&i.head===`
`&&!s)e=i.tail,t=s,n=l,r=o+" ";else{let u=i.head;e=i.tail,t=s,n=l,r=o+u}}}function Od(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return new $;if(n.atLeastLength(2)&&n.head==="]"&&n.tail.head==="["){let i=n.tail.tail,s=S(r);return Ju(i,!1,s,"")}else if(n.atLeastLength(2)&&n.head==="]"&&n.tail.head==="("){let i=n.tail.tail,s=S(r);return Ju(i,!0,s,"")}else{let i=n.head;e=n.tail,t=w(i,r)}}}function Sd(e,t){for(;;){let n=e,r=t;if(n.atLeastLength(1)&&n.head==="#")e=n.tail,t=r+1;else{if(n.hasLength(0)&&r>0)return new h([r,a([])]);if(n.atLeastLength(1)&&n.head===" "&&r!==0){let i=n.tail;return new h([r,i])}else if(n.atLeastLength(1)&&n.head===`
`&&r!==0){let i=n.tail;return new h([r,i])}else return new $}}}function ys(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head,s=n.tail;if(i instanceof je){let l=i[0];e=s,t=r+l}else if(i instanceof sr){let l=i.content;e=s,t=r+l}else if(i instanceof zn){let l=i.content;e=ne(l,s),t=r}else if(i instanceof Sn){let l=i.content;e=ne(l,s),t=r}else if(i instanceof jn){let l=i.content,o=ys(l,r);e=s,t=o}else if(i instanceof On){let l=i.content,o=ys(l,r);e=s,t=o}else e=s,t=r}}}function zd(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return[S(r),a([])];if(n.hasLength(1)&&n.head===`
`)return[S(r),a([])];if(n.atLeastLength(2)&&n.head===`
`&&n.tail.head===`
`){let i=n.tail.tail;return[S(r),i]}else{let i=n.head;e=n.tail,t=w(i,r)}}}function Ku(e,t){let n=jd(e,t,a([]));if(n instanceof $)return new $;{let r=n[0][0],i=n[0][1],s=ks(r,"",a([]));return new h([s,i])}}function ks(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0)&&i==="")return S(s);if(r.hasLength(0))return S(w(new je(i),s));if(r.atLeastLength(2)&&r.head==="\\"){let l=r.tail.head,o=r.tail.tail;l===`
`?(e=o,t="",n=w(new ri,w(new je(i),s))):l===" "?(e=o,t=i+"&nbsp;",n=s):l==="!"||l==='"'||l==="#"||l==="$"||l==="%"||l==="&"||l==="'"||l==="("||l===")"||l==="*"||l==="+"||l===","||l==="-"||l==="."||l==="/"||l===":"||l===";"||l==="<"||l==="="||l===">"||l==="?"||l==="@"||l==="["||l==="\\"||l==="]"||l==="^"||l==="_"||l==="`"||l==="{"||l==="|"||l==="}"||l==="~"?(e=o,t=i+l,n=s):(e=ne(a([l]),o),t=i+"\\",n=s)}else if(r.atLeastLength(2)&&r.head==="_"&&r.tail.head!==" "&&r.tail.head!=="	"&&r.tail.head!==`
`){let l=r.tail.head,o=r.tail.tail,u=w(l,o),c=Ku(u,"_");if(c instanceof $)e=u,t=i+"_",n=s;else{let p=c[0][0];e=c[0][1],t="",n=w(new Sn(p),w(new je(i),s))}}else if(r.atLeastLength(2)&&r.head==="*"&&r.tail.head!==" "&&r.tail.head!=="	"&&r.tail.head!==`
`){let l=r.tail.head,o=r.tail.tail,u=w(l,o),c=Ku(u,"*");if(c instanceof $)e=u,t=i+"*",n=s;else{let p=c[0][0];e=c[0][1],t="",n=w(new zn(p),w(new je(i),s))}}else if(r.atLeastLength(1)&&r.head==="["){let l=r.tail,o=Vu(l,(u,c)=>new jn(u,c));if(o instanceof $)e=l,t=i+"[",n=s;else{let u=o[0][0];e=o[0][1],t="",n=w(u,w(new je(i),s))}}else if(r.atLeastLength(2)&&r.head==="!"&&r.tail.head==="["){let l=r.tail.tail,o=Vu(l,(u,c)=>new On(u,c));if(o instanceof $)e=l,t=i+"![",n=s;else{let u=o[0][0];e=o[0][1],t="",n=w(u,w(new je(i),s))}}else if(r.atLeastLength(1)&&r.head==="`"){let l=r.tail,o=Ad(l,1),u=o[0];e=o[1],t="",n=w(u,w(new je(i),s))}else if(r.atLeastLength(1)&&r.head===`
`){let l=r.tail;e=lr(l),t=i+`
`,n=s}else{let l=r.head;e=r.tail,t=i+l,n=s}}}function Vu(e,t){let n=Od(e,a([]));if(n instanceof $)return new $;{let r=n[0][0],i=n[0][1],s=n[0][2],l=ks(r,"",a([])),o;i instanceof ii&&i[0]===""?o=new ii(ys(l,"")):o=i;let u=o;return new h([t(l,u),s])}}function Ut(e,t){let n=zd(e,a([])),r=n[0],i=n[1],s=ks(r,"",a([]));return[new ei(t,s),i]}function Ed(e,t,n){let r=Sd(e,1);if(r instanceof h){let i=r[0][0],s=r[0][1],l=lr(s),o=kd(l,i,a([])),u=o[0],c=o[1],p=ks(u,"",a([])),f=ys(p,""),m,g=bd(f);if(g==="")m=[t,n];else{let N=g;if(Re(t,N).isOk())m=[t,n];else{let O=Se(t,N,"#"+N),A=xs(n,"id",N);m=[O,A]}}let k=m,q=k[0],v=k[1];return[new ti(v,i,p),q,c]}else{let i=Ut(w("#",e),n),s=i[0],l=i[1];return[s,t,l]}}function Td(e,t,n,r){for(;;){let i=e,s=t,l=n,o=r,u=ld(i),c=lr(u);if(c.hasLength(0))return new mo(S(l),s);if(c.atLeastLength(1)&&c.head==="{"){let p=c.tail,f=wd(p,o);if(f instanceof $){let m=Ut(c,o),g=m[0];e=m[1],t=s,n=w(g,l),r=D()}else{let m=f[0][0];e=f[0][1],t=s,n=l,r=m}}else if(c.atLeastLength(1)&&c.head==="#"){let p=c.tail,f=Ed(p,s,o),m=f[0],g=f[1];e=f[2],t=g,n=w(m,l),r=D()}else if(c.atLeastLength(1)&&c.head==="~"){let p=c.head,f=c.tail,m=Ru(f,o,p);if(m instanceof $){let g=Ut(c,o),k=g[0];e=g[1],t=s,n=w(k,l),r=D()}else{let g=m[0][0];e=m[0][1],t=s,n=w(g,l),r=D()}}else if(c.atLeastLength(1)&&c.head==="`"){let p=c.head,f=c.tail,m=Ru(f,o,p);if(m instanceof $){let g=Ut(c,o),k=g[0];e=g[1],t=s,n=w(k,l),r=D()}else{let g=m[0][0];e=m[0][1],t=s,n=w(g,l),r=D()}}else if(c.atLeastLength(1)&&c.head==="["){let p=c.tail,f=dd(p,"");if(f instanceof $){let m=Ut(c,o),g=m[0];e=m[1],t=s,n=w(g,l),r=D()}else{let m=f[0][0],g=f[0][1],k=f[0][2],q=Se(s,m,g);e=k,t=q,n=l,r=D()}}else if(c.atLeastLength(1)&&c.head==="-"){let p=c.tail,f=Gu(1,p);if(f instanceof $){let m=Ut(c,o),g=m[0];e=m[1],t=s,n=w(g,l),r=D()}else{let m=f[0][0];e=f[0][1],t=s,n=w(m,l),r=D()}}else if(c.atLeastLength(1)&&c.head==="*"){let p=c.tail,f=Gu(1,p);if(f instanceof $){let m=Ut(c,o),g=m[0];e=m[1],t=s,n=w(g,l),r=D()}else{let m=f[0][0];e=f[0][1],t=s,n=w(m,l),r=D()}}else{let p=Ut(c,o),f=p[0];e=p[1],t=s,n=w(f,l),r=D()}}}function Yu(e){let n=fi(e,`\r
`,`
`),r=Pn(n);return Td(r,D(),a([]),D())}function Zu(e,t){if(e instanceof si)return e[0];{let n=e[0],r=Re(t,n);return r.isOk()?r[0]:""}}function wo(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head,s=n.tail;if(i instanceof je){let l=i[0];e=s,t=r+l}else if(i instanceof sr){let l=i.content;e=s,t=r+l}else if(i instanceof zn){let l=i.content;e=ne(l,s),t=r}else if(i instanceof Sn){let l=i.content;e=ne(l,s),t=r}else if(i instanceof jn){let l=i.content,o=wo(l,r);e=s,t=o}else if(i instanceof On){let l=i.content,o=wo(l,r);e=s,t=o}else e=s,t=r}}}function Wt(e,t){let r=Zt(e),i=Cn(r,(s,l)=>$r(s[0],l[0]));return ye(i,t,(s,l)=>w(X(l[0],l[1]),s))}function qd(e,t,n){if(t instanceof ri)return a([ru(a([]))]);if(t instanceof je){let r=t[0];return a([b(r)])}else if(t instanceof zn){let r=t.content;return a([Mr(a([_("font-bold")]),at(e,r,n))])}else if(t instanceof Sn){let r=t.content;return a([iu(a([_("italic")]),at(e,r,n))])}else if(t instanceof jn){let r=t.content,i=t.destination;return a([Tt(a([Et(Zu(i,n)),_("text-pink-700 hover:underline cursor-pointer")]),at(e,r,n))])}else if(t instanceof On){let r=t.content,i=t.destination;return a([su(a([Ua(Zu(i,n)),Wa(wo(r,"")),_("max-w-full h-auto rounded-lg shadow-lg mt-8")]))])}else{let r=t.content;return a([fe(a([_("bg-zinc-800 px-1 py-0.5 rounded text-sm font-mono")]),a([b(r)]))])}}function at(e,t,n){for(;;){let r=e,i=t,s=n;if(i.hasLength(0))return r;{let l=i.head,o=i.tail;e=qd(r,l,s),t=o,n=s}}}function Bd(e,t,n){let r;if(t instanceof ei){let s=t.attributes,l=t.content;r=et(Wt(s,a([_("pt-8")])),at(a([]),l,n))}else if(t instanceof ti){let s=t.attributes,l=t.level,o=t.content;l===1?r=Ki(Wt(s,a([_("text-3xl text-pink-700 font-light")])),at(a([]),o,n)):l===2?r=Nr(Wt(s,a([_("text-2xl text-pink-600 font-light pt-16")])),at(a([]),o,n)):l===3?r=hn(Wt(s,a([_("text-xl text-pink-600 font-light pt-12")])),at(a([]),o,n)):l===4?r=he(Wt(s,a([_("text-lg text-pink-600 font-light pt-8")])),at(a([]),o,n)):l===5?r=Qa(Wt(s,a([_("text-base text-pink-600 font-light pt-6")])),at(a([]),o,n)):r=Xa(Wt(s,a([_("text-sm text-pink-600 font-light pt-4")])),at(a([]),o,n))}else if(t instanceof ni){let s=t.attributes,l=t.language,o=t.content;r=$e(Wt(s,a([_("pt-8")])),a([fe((()=>{if(l instanceof h){let u=l[0];return a([_("language-"+u+" bg-zinc-800 p-4 rounded-md block overflow-x-auto")])}else return a([_("bg-zinc-800 p-4 rounded-md block overflow-x-auto")])})(),a([b(o)]))]))}else r=tu(a([_("border-zinc-700 my-8")]));return w(r,e)}function Cd(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return s;{let l=r.head,o=r.tail,u=Bd(s,l,i);e=o,t=i,n=u}}}function Pd(e){return S(Cd(e.content,e.references,a([_t()])))}function Ls(e){let n=Yu(e);return Pd(n)}var vs=class extends d{constructor(t){super(),this.version=t}},As=class extends d{constructor(t,n){super(),this.version=t,this.articles=n}};var E=class extends d{constructor(t,n,r,i,s,l,o){super(),this.base_uri=t,this.route=n,this.session=r,this.articles=i,this.djot_demo_content=s,this.edit_view_mode=l,this.profile_menu_open=o}},Gt=class extends d{},li=class extends d{},js=class extends d{constructor(t){super(),this.uri=t}},Rt=class extends d{constructor(t){super(),this.uri=t}},Os=class extends d{},xo=class extends d{constructor(t){super(),this.opt=t}},Ss=class extends d{constructor(t){super(),this.article=t}},ut=class extends d{constructor(t,n){super(),this.id=t,this.result=n}},ur=class extends d{constructor(t){super(),this.result=t}},zs=class extends d{constructor(t,n){super(),this.article=t,this.text=n}},Es=class extends d{constructor(t,n){super(),this.article=t,this.text=n}},Ts=class extends d{constructor(t,n){super(),this.article=t,this.text=n}},qs=class extends d{constructor(t,n){super(),this.article=t,this.text=n}},Bs=class extends d{constructor(t,n){super(),this.article=t,this.content=n}},ar=class extends d{constructor(t,n){super(),this.id=t,this.result=n}},Cs=class extends d{constructor(t){super(),this.article=t}},Ps=class extends d{constructor(t){super(),this.article=t}},oi=class extends d{},Ns=class extends d{constructor(t){super(),this.result=t}},Ms=class extends d{constructor(t){super(),this.article=t}},Is=class extends d{constructor(t,n){super(),this.id=t,this.result=n}},Ds=class extends d{constructor(t){super(),this.article=t}},bo=class extends d{constructor(t){super(),this.article=t}},Fs=class extends d{constructor(t,n){super(),this.username=t,this.password=n}},Us=class extends d{constructor(t){super(),this.result=t}},Ws=class extends d{},Gs=class extends d{constructor(t){super(),this.result=t}},Rs=class extends d{},ai=class extends d{constructor(t){super(),this.result=t}},Hs=class extends d{constructor(t){super(),this.content=t}},Js=class extends d{},yo=class extends d{},Ks=class extends d{},Vs=class extends d{};function Xu(e,t){let n=$o(t);if(n instanceof gt)return[(()=>{let r=e;return new E(r.base_uri,n,r.session,r.articles,r.djot_demo_content,r.edit_view_mode,r.profile_menu_open)})(),T()];if(n instanceof wt){let r=n.slug,i=e.articles;if(i instanceof ee)return[(()=>{let s=e;return new E(s.base_uri,n,s.session,new se,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open)})(),hs(s=>new ur(s),e.base_uri)];if(i instanceof P){let s=i[0],l=tl(s,T(),(c,p)=>{let f=p.slug===r,m=p.content;return f&&m instanceof ee?[Kn(a([c,Nt(g=>new ut(p.id,g),p.id,e.base_uri)])),(()=>{let g=p;return new F(g.id,g.slug,g.revision,g.author,g.tags,g.published_at,g.title,g.subtitle,g.leading,new se,g.draft)})()]:[c,p]}),o=l[0],u=l[1];return[(()=>{let c=e;return new E(c.base_uri,n,c.session,new P(u),c.djot_demo_content,c.edit_view_mode,c.profile_menu_open)})(),o]}else return[(()=>{let s=e;return new E(s.base_uri,n,s.session,s.articles,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open)})(),T()]}else if(n instanceof ot){let r=n.id,i=e.articles;if(i instanceof ee)return[(()=>{let s=e;return new E(s.base_uri,n,s.session,new se,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open)})(),hs(s=>new ur(s),e.base_uri)];if(i instanceof P){let s=i[0],l=tl(s,T(),(c,p)=>{let f;if(p.draft instanceof h)f=p;else{let v=p;f=new F(v.id,v.slug,v.revision,v.author,v.tags,v.published_at,v.title,v.subtitle,v.leading,v.content,er(p))}let g=f,k=g.id===r,q=g.content;return k&&q instanceof ee?[Kn(a([c,Nt(v=>new ut(g.id,v),g.id,e.base_uri)])),(()=>{let v=g;return new F(v.id,v.slug,v.revision,v.author,v.tags,v.published_at,v.title,v.subtitle,v.leading,new se,er(g))})()]:[c,g]}),o=l[0],u=l[1];return te(ir(n),"src\\jst_lustre.gleam",800),[(()=>{let c=e;return new E(c.base_uri,n,c.session,new P(u),c.djot_demo_content,c.edit_view_mode,c.profile_menu_open)})(),o]}else return[(()=>{let s=e;return new E(s.base_uri,n,s.session,s.articles,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open)})(),T()]}else return n instanceof lt?e.articles instanceof ee?[(()=>{let i=e;return new E(i.base_uri,n,i.session,new se,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open)})(),hs(i=>new ur(i),e.base_uri)]:[(()=>{let i=e;return new E(i.base_uri,n,i.session,i.articles,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open)})(),T()]:n instanceof Dt?[(()=>{let r=e;return new E(r.base_uri,n,r.session,r.articles,r.djot_demo_content,r.edit_view_mode,r.profile_menu_open)})(),T()]:n instanceof xt?[(()=>{let r=e;return new E(r.base_uri,n,r.session,r.articles,r.djot_demo_content,r.edit_view_mode,r.profile_menu_open)})(),T()]:[(()=>{let r=e;return new E(r.base_uri,n,r.session,r.articles,r.djot_demo_content,r.edit_view_mode,r.profile_menu_open)})(),T()]}function Md(e,t){if(t instanceof js){let n=t.uri;return Xu(e,n)}else if(t instanceof Rt){let n=t.uri;return te("user mouse down navigation","src\\jst_lustre.gleam",184),te(n,"src\\jst_lustre.gleam",185),[e,mn(ue(n),new $,new $)]}else{if(t instanceof Os)return[(()=>{let n=e;return new E(n.base_uri,n.route,n.session,n.articles,n.djot_demo_content,n.edit_view_mode,!e.profile_menu_open)})(),T()];if(t instanceof xo){let n=t.opt;if(n instanceof h&&n[0]instanceof As){let r=n[0].articles;return[(()=>{let i=e;return new E(i.base_uri,i.route,i.session,new P(r),i.djot_demo_content,i.edit_view_mode,i.profile_menu_open)})(),T()]}else return n instanceof h&&n[0]instanceof vs?[e,T()]:[e,T()]}else if(t instanceof ur){let n=t.result,r=e.route;if(n.isOk()&&r instanceof wt){let i=n[0],s=r.slug,l=ft(i,o=>o.slug===s);if(l.isOk()&&l[0]instanceof F&&l[0].content instanceof ee){let o=l[0].id,u=C(i,c=>{if(c.slug===s){let f=c;return new F(f.id,f.slug,f.revision,f.author,f.tags,f.published_at,f.title,f.subtitle,f.leading,new se,f.draft)}else return c});return[(()=>{let c=e;return new E(c.base_uri,c.route,c.session,new P(u),c.djot_demo_content,c.edit_view_mode,c.profile_menu_open)})(),Nt(c=>new ut(o,c),o,e.base_uri)]}else if(l.isOk()&&l[0]instanceof F&&l[0].content instanceof ee){let o=l[0].id,u=C(i,c=>{if(c.slug===s){let f=c;return new F(f.id,f.slug,f.revision,f.author,f.tags,f.published_at,f.title,f.subtitle,f.leading,new se,f.draft)}else return c});return[(()=>{let c=e;return new E(c.base_uri,c.route,c.session,new P(u),c.djot_demo_content,c.edit_view_mode,c.profile_menu_open)})(),Nt(c=>new ut(o,c),o,e.base_uri)]}else return l.isOk()?(te("article exists. content is pending or loading.","src\\jst_lustre.gleam",253),[e,T()]):[e,mn((()=>{let o=e.route,u=Ft(o),c=new Xr(u);return ir(c)})(),new $,new $)]}else if(n.isOk()&&r instanceof ot){let i=n[0],s=r.id;return[(()=>{let l=e;return new E(l.base_uri,l.route,l.session,new P(i),l.djot_demo_content,l.edit_view_mode,l.profile_menu_open)})(),Nt(l=>new ut(s,l),s,e.base_uri)]}else if(n.isOk()){let i=n[0];return[(()=>{let s=e;return new E(s.base_uri,s.route,s.session,new P(i),s.djot_demo_content,s.edit_view_mode,s.profile_menu_open)})(),T()]}else{let i=n[0];return[(()=>{let s=e;return new E(s.base_uri,s.route,s.session,new Ue(i),s.djot_demo_content,s.edit_view_mode,s.profile_menu_open)})(),T()]}}else if(t instanceof ut){let n=t.id,r=t.result;if(r.isOk()){let i=r[0],s=n===i.id;if(!s)throw W("let_assert","jst_lustre",287,"update","Pattern match failed, no pattern matched the value.",{value:s});let l,o=e.articles;l=Ae(o,c=>C(c,p=>n===p.id?i:p));let u=l;return[(()=>{let c=e;return new E(c.base_uri,c.route,c.session,u,c.djot_demo_content,c.edit_view_mode,c.profile_menu_open)})(),T()]}else{let i=r[0],s,l=e.articles;s=Ae(l,u=>C(u,c=>{if(n===c.id){let f=c;return new F(f.id,f.slug,f.revision,f.author,f.tags,f.published_at,f.title,f.subtitle,f.leading,new Ue(i),f.draft)}else return c}));let o=s;return[(()=>{let u=e;return new E(u.base_uri,u.route,u.session,o,u.djot_demo_content,u.edit_view_mode,u.profile_menu_open)})(),T()]}}else if(t instanceof Ss){let n=t.article,r=n.content;if(r instanceof ee){let i,s=e.articles;i=Ae(s,o=>C(o,u=>{if(n.id===u.id){let p=u;return new F(p.id,p.slug,p.revision,p.author,p.tags,p.published_at,p.title,p.subtitle,p.leading,new se,p.draft)}else return u}));let l=i;return[(()=>{let o=e;return new E(o.base_uri,o.route,o.session,l,o.djot_demo_content,o.edit_view_mode,o.profile_menu_open)})(),Nt(o=>new ut(n.id,o),n.id,e.base_uri)]}else return r instanceof Ue?[e,Nt(i=>new ut(n.id,i),n.id,e.base_uri)]:r instanceof se?[e,T()]:r instanceof P?[e,T()]:[e,T()]}else if(t instanceof zs){let n=t.article,r=t.text;if(n instanceof F&&n.draft instanceof h){let i=tr(n,s=>gu(s,r));return[(()=>{let s=e;return new E(s.base_uri,s.route,s.session,Ae(e.articles,l=>C(l,o=>n.id===o.id?i:o)),s.djot_demo_content,s.edit_view_mode,s.profile_menu_open)})(),T()]}else return[e,T()]}else if(t instanceof Es){let n=t.article,r=t.text,i=tr(n,l=>xu(l,r)),s=Ae(e.articles,l=>C(l,o=>n.id===o.id?i:o));return[(()=>{let l=e;return new E(l.base_uri,l.route,l.session,s,l.djot_demo_content,l.edit_view_mode,l.profile_menu_open)})(),T()]}else if(t instanceof Ts){let n=t.article,r=t.text,i=tr(n,l=>yu(l,r)),s=Ae(e.articles,l=>C(l,o=>n.id===o.id?i:o));return[(()=>{let l=e;return new E(l.base_uri,l.route,l.session,s,l.djot_demo_content,l.edit_view_mode,l.profile_menu_open)})(),T()]}else if(t instanceof qs){let n=t.article,r=t.text,i=tr(n,l=>bu(l,r)),s=Ae(e.articles,l=>C(l,o=>n.id===o.id?i:o));return[(()=>{let l=e;return new E(l.base_uri,l.route,l.session,s,l.djot_demo_content,l.edit_view_mode,l.profile_menu_open)})(),T()]}else if(t instanceof Bs){let n=t.article,r=t.content,i=tr(n,s=>ku(s,r));return[(()=>{let s=e;return new E(s.base_uri,s.route,s.session,Ae(e.articles,l=>C(l,o=>n.id===o.id?i:o)),s.djot_demo_content,s.edit_view_mode,s.profile_menu_open)})(),T()]}else if(t instanceof Ps){let n=t.article;te("article draft discard clicked","src\\jst_lustre.gleam",461);let r=Ae(e.articles,i=>C(i,s=>{if(n.id===s.id){let o=n;return new F(o.id,o.slug,o.revision,o.author,o.tags,o.published_at,o.title,o.subtitle,o.leading,o.content,new $)}else return s}));return[(()=>{let i=e;return new E(i.base_uri,i.route,i.session,r,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open)})(),mn((()=>{let i=ws(new mt(n,e.session));return ue(i)})(),new $,new $)]}else if(t instanceof Cs){let n=t.article,r=n.draft;if(r instanceof h){let i=r[0],s,l=n;s=new F(l.id,ts(i),l.revision,l.author,l.tags,l.published_at,ns(i),rs(i),Wr(i),new P(Gr(i)),new $);let o=s,u=Ae(e.articles,c=>C(c,p=>n.id===p.id?o:p));return[(()=>{let c=e;return new E(c.base_uri,c.route,c.session,u,c.djot_demo_content,c.edit_view_mode,c.profile_menu_open)})(),Kn(a([$s(c=>new ar(o.id,c),o,e.base_uri),mn((()=>{let c=ws(new mt(o,e.session));return ue(c)})(),new $,new $)]))]}else return[e,T()]}else if(t instanceof ar){let n=t.id,r=t.result;if(r.isOk()){let i=r[0],s=Ae(e.articles,l=>C(l,o=>n===o.id?i:o));return[(()=>{let l=e;return new E(l.base_uri,l.route,l.session,s,l.djot_demo_content,l.edit_view_mode,l.profile_menu_open)})(),T()]}else{let i=r[0];return te("article update response error","src\\jst_lustre.gleam",542),te(i,"src\\jst_lustre.gleam",543),[e,T()]}}else if(t instanceof Fs){let n=t.username,r=t.password;return[e,Cu(i=>new Us(i),n,r,e.base_uri)]}else if(t instanceof Us){let n=t.result;if(n.isOk()){let r=n[0];return[(()=>{let i=e;return new E(i.base_uri,i.route,r,i.articles,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open)})(),T()]}else{let r=n[0];return te(r,"src\\jst_lustre.gleam",559),[(()=>{let i=e;return new E(i.base_uri,i.route,new xe,i.articles,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open)})(),T()]}}else{if(t instanceof Ws)return[(()=>{let n=e;return new E(n.base_uri,n.route,new xe,n.articles,n.djot_demo_content,n.edit_view_mode,n.profile_menu_open)})(),qu(n=>new Gs(n),e.base_uri)];if(t instanceof Gs)return[(()=>{let n=e;return new E(n.base_uri,n.route,new xe,n.articles,n.djot_demo_content,n.edit_view_mode,n.profile_menu_open)})(),T()];if(t instanceof Rs)return[e,fo(n=>new ai(n),e.base_uri)];if(t instanceof ai){let n=t.result;if(n.isOk()){let r=n[0];return[(()=>{let i=e;return new E(i.base_uri,i.route,r,i.articles,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open)})(),T()]}else{let r=n[0];return te("session check response error","src\\jst_lustre.gleam",582),te(r,"src\\jst_lustre.gleam",583),[(()=>{let i=e;return new E(i.base_uri,i.route,new xe,i.articles,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open)})(),T()]}}else if(t instanceof Hs){let n=t.content;return[(()=>{let r=e;return new E(r.base_uri,r.route,r.session,r.articles,n,r.edit_view_mode,r.profile_menu_open)})(),T()]}else if(t instanceof Js){let n;e.edit_view_mode instanceof Gt?n=new li:n=new Gt;let i=n;return[(()=>{let s=e;return new E(s.base_uri,s.route,s.session,s.articles,s.djot_demo_content,i,s.profile_menu_open)})(),T()]}else if(t instanceof oi){te("article create clicked","src\\jst_lustre.gleam",607);let n=new F("","new-article",1,"current-user",a([]),new $,"New Article","A new article subtitle","This is a new article. Start editing to customize it.",new P(`# New Article

Start writing your article content here...`),new $);return[e,Du(r=>new Ns(r),n,e.base_uri)]}else if(t instanceof Ns){let n=t.result;if(n.isOk()){let r=n[0];te("article created successfully with id: "+r.id,"src\\jst_lustre.gleam",639);let i,s=e.articles;if(s instanceof P){let o=s[0];i=new P(w(r,o))}else i=s;let l=i;return[(()=>{let o=e;return new E(o.base_uri,o.route,o.session,l,o.djot_demo_content,o.edit_view_mode,o.profile_menu_open)})(),mn((()=>{let o=new ot(r.id),u=Ft(o);return ue(u)})(),new $,new $)]}else{let r=n[0];return te("article creation error","src\\jst_lustre.gleam",659),te(r,"src\\jst_lustre.gleam",660),[e,T()]}}else if(t instanceof Ms){let n=t.article;return te("article delete clicked","src\\jst_lustre.gleam",667),[e,Kn(a([Iu(r=>new Is(n.id,r),n.id,e.base_uri),mn((()=>{let r=new lt,i=Ft(r);return ue(i)})(),new $,new $)]))]}else if(t instanceof Is){let n=t.id,r=t.result;if(r.isOk()){let i=Ae(e.articles,s=>ct(s,l=>l.id!==n));return[(()=>{let s=e;return new E(s.base_uri,s.route,s.session,i,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open)})(),T()]}else{let i=r[0];return te("article delete response error","src\\jst_lustre.gleam",695),te(i,"src\\jst_lustre.gleam",696),[e,T()]}}else if(t instanceof Ds){let n=t.article;te("article publish clicked","src\\jst_lustre.gleam",702);let r,i=n;return r=new F(i.id,i.slug,i.revision,i.author,i.tags,new h(zl()),i.title,i.subtitle,i.leading,i.content,i.draft),[e,$s(l=>new ar(n.id,l),r,e.base_uri)]}else{let n=t.article;return te("article unpublish clicked","src\\jst_lustre.gleam",714),[e,$s(r=>new ar(n.id,r),(()=>{let r=n;return new F(r.id,r.slug,r.revision,r.author,r.tags,new $,r.title,r.subtitle,r.leading,r.content,r.draft)})(),e.base_uri)]}}}}function Id(e){let t=e.route;if(t instanceof Dt)return new bn;if(t instanceof lt){let n=e.articles;if(n instanceof se)return new Mt;if(n instanceof ee)return new ae(new rr("articles not initialized"));if(n instanceof Ue){let r=n[0];return new ae(new It(r,"Failed to load article list"))}else if(n instanceof P){let r=n[0];return new yn(r,e.session)}else{let r=n[0];return new yn(r,e.session)}}else if(t instanceof wt){let n=t.slug,r=e.articles;if(r instanceof se)return new Mt;if(r instanceof ee)return new ae(new rr("articles not initialized"));if(r instanceof Ue){let i=r[0];return new ae(new It(i,"Failed to load articles"))}else if(r instanceof P){let i=r[0],s=ft(i,l=>l.slug===n);if(s.isOk()){let l=s[0];return new mt(l,e.session)}else return new ae(new Ln(n,ho(i)))}else{let i=r[0],s=ft(i,l=>l.slug===n);if(s.isOk()){let l=s[0];return new mt(l,e.session)}else return new ae(new Ln(n,ho(i)))}}else if(t instanceof ot){let n=t.id,r=e.articles;if(r instanceof se)return new Mt;if(r instanceof ee)return new ae(new rr("articles not initialized"));if(r instanceof Ue){let i=r[0];return new ae(new It(i,"Failed to load articles for editing"))}else if(r instanceof P){let i=r[0],s=ft(i,l=>l.id===n);if(s.isOk()){let l=s[0],o=Yr(l,e.session),u=l.draft;return o&&u instanceof h?new st(l):o&&u instanceof $?new st((()=>{let c=l;return new F(c.id,c.slug,c.revision,c.author,c.tags,c.published_at,c.title,c.subtitle,c.leading,c.content,er(l))})()):new ae(new An("edit article"))}else return new ae(new vn(n))}else{let i=r[0],s=ft(i,l=>l.id===n);if(s.isOk()){let l=s[0],o=Yr(l,e.session),u=l.draft;return o&&u instanceof h?new st(l):o&&u instanceof $?new st((()=>{let c=l;return new F(c.id,c.slug,c.revision,c.author,c.tags,c.published_at,c.title,c.subtitle,c.leading,c.content,er(l))})()):new ae(new An("edit article"))}else return new ae(new vn(n))}}else{if(t instanceof xt)return new kn(e.djot_demo_content);if(t instanceof gt)return new nr;{let n=t.uri;return new ms(n)}}}function Dd(){return L(a([_("mt-8 p-4 bg-zinc-800 rounded-lg border border-zinc-700")]),a([hn(a([_("text-lg text-pink-700 font-light")]),a([b("Djot Quick Reference")])),et(a([_("text-zinc-300 mb-6")]),a([Mr(a([]),a([b("Note: ")])),b("This editor uses Djot format. See the "),Tt(a([Et("https://htmlpreview.github.io/?https://github.com/jgm/djot/blob/master/doc/syntax.html"),_("text-zinc-300 underline")]),a([b("djot syntax documentation")])),b(" for complete details.")])),L(a([_("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm")]),a([L(a([]),a([he(a([_("text-pink-700 font-medium mb-2")]),a([b("Headings")])),fe(a([_("text-zinc-300")]),a([$e(a([_("text-zinc-300")]),a([b(`# H1
## H2
### H3`)]))]))])),L(a([]),a([he(a([_("text-pink-700 font-medium mb-2")]),a([b("Text")])),fe(a([_("text-zinc-300")]),a([$e(a([_("text-zinc-300")]),a([b("_italic_\n*bold*\n`code`")]))]))])),L(a([]),a([he(a([_("text-pink-700 font-medium mb-2")]),a([b("Lists")])),fe(a([_("text-zinc-300")]),a([$e(a([_("text-zinc-300")]),a([b(`- item 1
- item 2

  - nested`)]))]))])),L(a([]),a([he(a([_("text-pink-700 font-medium mb-2")]),a([b("Links")])),fe(a([_("text-zinc-300")]),a([$e(a([_("text-zinc-300")]),a([b(`[text](url)
[text](url){title="tooltip"}`)]))]))])),L(a([]),a([he(a([_("text-pink-700 font-medium mb-2")]),a([b("Code Blocks")])),fe(a([_("text-zinc-300")]),a([$e(a([_("text-zinc-300")]),a([b("```\ncode here\n```")]))]))])),L(a([]),a([he(a([_("text-pink-700 font-medium mb-2")]),a([b("Blockquotes")])),fe(a([_("text-zinc-300")]),a([$e(a([_("text-zinc-300")]),a([b("> quoted text")]))]))]))]))]))}function Qu(e,t,n,r,i){let s=_("block text-sm font-medium text-zinc-400 mb-1"),l;t instanceof yo?l=_("w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 font-light text-zinc-100 focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"):t instanceof Ks?l=_("w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 text-3xl text-pink-700 font-light focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"):t instanceof Vs?l=_("w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 text-md text-zinc-500 font-light focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"):l=_("w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 font-bold text-zinc-100 focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200");let o=l;return L(a([_("mb-4")]),a([Ir(a([s]),a([b(e)])),Vl(a([o,Vn(n),zt("edit-"+i+"-"+e),Zn(r)]))]))}function ec(e){let t=e.published_at;if(t instanceof h){let n=t[0],r=va(n);return $n(a([_("text-xs text-zinc-500 px-2 pt-2 w-max border-t border-r border-zinc-700 group-hover:border-pink-700 transition-colors duration-25")]),a([b(r)]))}else return $n(a([_("text-xs text-zinc-500 px-2 pt-2 w-max italic border-t border-r border-zinc-700 group-hover:border-pink-700 transition-colors duration-25")]),a([b("not published")]))}function tc(e){return L(a([_("text-xs text-zinc-400 pt-0 border-r border-zinc-700 pr-2 group-hover:border-pink-700 transition-colors duration-25")]),a([$n(a([_("text-zinc-500 font-light")]),a([b("by ")])),$n(a([_("text-zinc-300")]),a([b(e)]))]))}function nc(e){return e.hasLength(0)?_t():L(a([_("flex justify-end align-end gap-0 ml-auto flex-wrap border-b border-r border-zinc-700 pb-1 pr-2 hover:border-pink-700 group-hover:border-pink-700 transition-colors duration-25 mt-2")]),C(e,n=>$n(a([_("text-xs cursor-pointer text-zinc-500 px-2 hover:border-pink-700 hover:text-pink-700 transition-colors duration-25")]),a([b(n)]))))}function rc(e,t){let n=Yr(e,t),r=Mu(e,t),i=Nu(e,t);return L(a([_("flex justify-start h-10")]),a([n?ge(a([_("text-gray-500 pe-4 text-underline pb-2 hover:text-teal-300 hover:border-teal-300 border-b border-zinc-700"),ie(new Rt(Ft(new ot(e.id))))]),a([b("Edit")])):_t(),r&&z(e.published_at,new $)?ge(a([_("text-gray-500 pe-4 text-underline pb-2 hover:text-green-300 hover:border-green-300 border-b border-zinc-700"),ie(new Ds(e))]),a([b("Publish")])):_t(),r&&!z(e.published_at,new $)?ge(a([_("text-gray-500 pe-4 text-underline pb-2 hover:text-yellow-300 hover:border-yellow-300 border-b border-zinc-700"),ie(new bo(e))]),a([b("Unpublish")])):_t(),i?ge(a([_("text-gray-500 pe-4 text-underline pb-2 hover:text-red-400 hover:border-red-400 border-b border-zinc-700"),ie(new Ms(e))]),a([b("Delete")])):_t()]))}function Fd(e,t){return a([L(a([_("mb-4")]),a([L(a([_("flex items-center justify-between mb-1")]),a([Ir(a([_("block text-sm font-medium text-zinc-400")]),a([b("Slug")])),$n(a([_("text-xs text-zinc-500")]),a([b("rev "+R(t.revision))]))])),Vl(a([_("w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 font-light text-zinc-100 focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"),Vn(ts(e)),zt("edit-"+t.slug+"-Slug"),Zn(n=>new zs(t,n))]))])),Qu("Title",new Ks,ns(e),n=>new Es(t,n),t.slug),Qu("Subtitle",new Vs,rs(e),n=>new qs(t,n),t.slug),L(a([_("mb-4")]),a([Ir(a([_("block text-sm font-medium text-zinc-400 mb-1")]),a([b("Leading")])),Yi(a([_("w-full h-24 bg-zinc-800 border border-zinc-600 rounded-md p-2 font-bold text-zinc-100 resize-none focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"),Vn(Wr(e)),zt("edit-"+t.slug+"-Leading"),Zn(n=>new Ts(t,n)),qi("Write a compelling leading paragraph...")]),Wr(e))])),L(a([_("mb-4")]),a([Ir(a([_("block text-sm font-medium text-zinc-400 mb-1")]),a([b("Content")])),Yi(a([_("w-full h-96 bg-zinc-800 border border-zinc-600 rounded-md p-4 font-mono text-sm text-zinc-100 resize-none focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"),Vn(Gr(e)),Zn(n=>new Bs(t,n)),qi("Write your article content in Djot format...")]),Gr(e))])),L(a([_("flex justify-between gap-4")]),a([rc(t,new xe),L(a([_("flex gap-4")]),a([ge(a([_("px-4 py-2 bg-zinc-700 text-zinc-300 rounded-md hover:bg-zinc-600 transition-colors duration-200"),ie(new Ps(t)),Dl(es(e))]),a([b("Discard Changes")])),ge(a([_("px-4 py-2 bg-teal-700 text-white rounded-md hover:bg-teal-600 transition-colors duration-200"),ie(new Cs(t)),Dl(es(e))]),a([es(e)?b("Saving..."):b("Save Article")]))]))]))])}function Oe(e,t){return Ki(a([zt("article-title-"+t),_("text-3xl text-pink-700 font-light"),_("article-title")]),a([b(e)]))}function Ys(e,t){return L(a([zt("article-subtitle-"+t),_("text-md text-zinc-500 font-light italic"),_("article-subtitle")]),a([b(e)]))}function ic(e,t){return et(a([zt("article-lead-"+t),_("font-bold pt-8"),_("article-leading")]),a([b(e)]))}function pe(e){return et(a([_("pt-8")]),a([b(e)]))}function Ud(e,t){let n;t instanceof xe?n=ct(e,m=>m.published_at instanceof h):n=e;let r=n,i,l=Cn(r,(f,m)=>{let g=f.published_at,k=m.published_at;if(g instanceof $&&k instanceof $)return $r(f.slug,m.slug);if(g instanceof $&&k instanceof h)return new H;if(g instanceof h&&k instanceof $)return new K;{let q=g[0],v=k[0];return Sl(v,q)}});i=C(l,f=>{{let m=f.slug,g=f.tags,k=f.title,q=f.subtitle,v=f.leading,I,N=new wt(m);I=Ft(N);let j=I;return Hl(a([_("mt-14")]),a([Tt(a([_("group block border-l border-zinc-700 pl-4 hover:border-pink-700 transition-colors duration-25"),Et(ue(j)),uu(new Ss(f)),ie(new Rt(j))]),a([L(a([_("flex justify-between gap-4")]),a([hn(a([zt("article-title-"+m),_("article-title"),_("text-xl text-pink-700 font-light")]),a([b(k)])),L(a([_("flex flex-col items-end")]),a([ec(f),tc(f.author)]))])),Ys(q,m),pe(v),L(a([_("flex justify-end mt-2")]),a([nc(g)]))]))]))}});let o=i,u=a([L(a([_("flex justify-between items-center mb-4")]),a([Oe("Articles","articles"),t instanceof xn?ge(a([_("text-gray-500 pe-4 text-underline pt-2 hover:text-teal-300 hover:border-teal-300 border-t border-zinc-700 border-e"),ie(new oi)]),a([b("New")])):_t()]))]),c;return o.hasLength(0)?c=a([L(a([_("mt-14 text-center")]),a([L(a([_("border-l border-zinc-700 pl-4 py-8")]),a([hn(a([_("text-xl text-zinc-500 font-light mb-4")]),a([b("No articles yet")])),t instanceof xn?L(a([_("space-y-4")]),a([pe("Ready to share your thoughts? Create your first article to get started."),ge(a([_("inline-block px-6 py-2 bg-pink-700 text-white rounded-md hover:bg-pink-600 transition-colors duration-200 font-medium"),ie(new oi)]),a([b("Create Your First Article")]))])):L(a([_("space-y-4")]),a([pe("No published articles are available yet."),pe("Check back later for new content!")]))]))]))]):c=o,ne(u,c)}function Wd(e,t){return a([Oe("Article not found",t),pe("The article you are looking for does not exist.")])}function Gd(e,t){if(e instanceof P)return a([Oe("Article not found",t),pe("The article you are looking for does not exist.")]);if(e instanceof gn)return a([Oe("Article not found",t),pe("The article you are looking for might not exist yet. Please check back later.")]);if(e instanceof Ue){let n=e[0];return a([Oe("There was an error loading the article",t),pe(gs(n))])}else return e instanceof se?a([Oe("Loading article",t),pe("Loading article...")]):a([Oe("Loading article",t),pe("Loading article...")])}function Rd(){return a([Oe("About","about"),pe(`I'm a software developer and a writer. I'm also a father and a husband. 
      I'm also a software developer and a writer. I'm also a father and a 
      husband. I'm also a software developer and a writer. I'm also a father 
      and a husband. I'm also a software developer and a writer. I'm also a 
      father and a husband.`),pe(`If you enjoy these glimpses into my mind, feel free to come back
       semi-regularly. But not too regularly, you creep.`)])}function Hd(e){return a([Oe("404 - Page Not Found","not-found"),Ys("The page you're looking for doesn't exist.","not-found"),pe("The page at "+ue(e)+" could not be found.")])}function En(e){return et(a([_("pt-8 text-orange-500")]),a([b(e)]))}function sc(e,t){let n,r=e.content;if(r instanceof ee)n=a([En("content not initialized")]);else if(r instanceof se)n=a([En("loading")]);else if(r instanceof P){let s=r[0];n=Ls(s)}else if(r instanceof gn){let s=r[0];n=Ls(s)}else{let s=r[0];n=a([En(gs(s))])}let i=n;return a([Hl(a([_("with-transition")]),w(L(a([_("flex flex-col justify-between")]),a([rc(e,t),L(a([_("flex gap-2 justify-between")]),a([L(a([_("flex flex-col justify-between")]),a([Oe(e.title,e.slug),Ys(e.subtitle,e.slug)])),L(a([_("flex flex-col items-end")]),a([ec(e),tc(e.author)]))])),L(a([_("flex justify-between mt-2")]),a([nc(e.tags)]))])),w(ic(e.leading,e.slug),i)))])}function Jd(e,t){let n=t.draft;if(n instanceof $)return a([En("no draft..")]);{let r=n[0],i,s=Gr(r);s===""?i="Start typing in the editor to see the preview here...":i=s;let l=i,o=new F(t.id,ts(r),t.revision,t.author,t.tags,t.published_at,ns(r),rs(r),Wr(r),new P(l),new $),u=sc(o,new xe);return a([L(a([_("lg:hidden mb-4 flex justify-center")]),a([ge(a([_("px-4 py-2 bg-pink-700 text-white rounded-md hover:bg-pink-700 transition-colors duration-200"),ie(new Js)]),a([e.edit_view_mode instanceof Gt?b("Show Preview"):b("Show Editor")]))])),L(a([_n(a([["grid gap-8 h-screen",!0],["grid-cols-2 lg:grid-cols-2",!0]]))]),a([L(a([_n(a([["space-y-4",!0],["lg:block",!0],["lg:col-span-1",!0],["col-span-2",z(e.edit_view_mode,new Gt)],["hidden",z(e.edit_view_mode,new li)]]))]),Fd(r,t)),L(a([_n(a([["max-w-screen-md mx-auto px-10 py-10 overflow-y-auto",!0],["lg:block",!0],["lg:col-span-1",!0],["col-span-2",z(e.edit_view_mode,new li)],["hidden",z(e.edit_view_mode,new Gt)]]))]),u)])),Dd()])}}function Kd(e,t){return Tt(a([Et(ue(e)),_("text-pink-700 hover:underline cursor-pointer"),ie(new Rt(e))]),a([b(t)]))}function Vd(){let e=re("/article/nats-all-the-way-down");if(!e.isOk())throw W("let_assert","jst_lustre",1135,"view_index","Pattern match failed, no pattern matched the value.",{value:e});let t=e[0];return a([Oe("Welcome to jst.dev!","welcome"),Ys(`...or, A lession on overengineering for fun and.. 
      well just for fun.`,"welcome"),ic(`This site and it's underlying IT-infrastructure is the primary 
      place for me to experiment with technologies and topologies. I 
      also share some of my thoughts and learnings here.`,"welcome"),et(a([_("mt-14")]),a([b(`This site and it's underlying IT-infrastructure is the primary 
        place for me to experiment with technologies and topologies. I 
        also share some of my thoughts and learnings here. Feel free to 
        check out my overview, `),Kd(t,"NATS all the way down ->")])),pe("It to is a work in progress and I mostly keep it here for my own reference."),pe(`I'm also a software developer and a writer. I'm also a father and a 
        husband. I'm also a software developer and a writer. I'm also a father 
        and a husband. I'm also a software developer and a writer. I'm also a 
        father and a husband. I'm also a software developer and a writer.`)])}function Yd(){return a([Oe("Articles","articles"),pe("Loading articles...")])}function lc(e,t){return Tt(a([_(""),Et(ue(e)),ie(new Rt(e))]),t)}function or(e,t,n){return nu(a([_n(a([["border-transparent border-b-2 hover:border-pink-700 cursor-pointer",!0],["text-pink-700",Fu(e,t)]])),ie(new Rt(Ft(e)))]),a([lc(Ft(e),a([b(n)]))]))}function go(e){return eu(a([_("py-2 border-b bg-zinc-800 border-pink-700 font-mono relative")]),a([L(a([_("flex justify-between px-10 items-center max-w-screen-md mx-auto")]),a([L(a([]),a([lc(ws(new bn),a([b("jst.dev")]))])),L(a([_("flex items-center space-x-8")]),a([Kl(a([_("hidden sm:flex space-x-8 pr-2")]),a([or(new lt,e.route,"Articles"),or(new gt,e.route,"About"),or(new xt,e.route,"Djot Demo")])),L(a([_("relative")]),a([ge(a([_("p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 transition-colors"),ie(new Os)]),a([lu(a([X("fill","none"),X("viewBox","0 0 24 24"),X("stroke-width","1.5"),X("stroke","currentColor"),_("w-6 h-6")]),a([au(a([X("stroke-linecap","round"),X("stroke-linejoin","round"),X("d","M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5")]))]))])),e.profile_menu_open?L(a([_("absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-zinc-700 ring-1 ring-black ring-opacity-5 z-50")]),a([L(a([_("py-1")]),a([Kl(a([_("sm:hidden flex flex-col gap-2 px-4")]),a([or(new lt,e.route,"Articles"),or(new gt,e.route,"About"),or(new xt,e.route,"Djot Demo")])),ge(a([_("block w-full text-left px-4 py-2 text-sm text-zinc-200 hover:bg-green-800 transition-colors cursor-pointe"),_n(a([["hidden",!z(e.session,new xe)]])),ie(new Fs("johan-st","password"))]),a([b("Login")])),ge(a([_("block w-full text-left px-4 py-2 text-sm text-zinc-200 hover:bg-orange-800 transition-colors cursor-pointe"),_n(a([["hidden",z(e.session,new xe)]])),ie(new Ws)]),a([b("Logout")])),ge(a([_("block w-full text-left px-4 py-2 text-sm text-zinc-200 hover:bg-teal-800 transition-colors cursor-pointe"),ie(new Rs)]),a([b("Check")]))]))])):L(a([]),a([]))]))]))]))]))}function Zd(e){let t;e===""?t=a([L(a([_("text-zinc-500 italic text-center mt-8")]),a([b("Start typing in the editor to see the preview here...")]))]):t=Ls(e);let n=t;return a([Oe("Djot Demo","djot-demo"),L(a([_("grid grid-cols-1 lg:grid-cols-2 gap-6")]),a([Jl(a([_("space-y-4")]),a([L(a([_("flex items-center justify-between")]),a([Nr(a([_("text-xl text-pink-700 font-light")]),a([b("Editor")])),L(a([_("text-xs text-zinc-500")]),a([b("Live preview updates as you type")]))])),L(a([_("relative")]),a([Yi(a([_("w-full h-[400px] lg:h-[600px] bg-zinc-800 border border-zinc-600 rounded-lg p-4 font-mono text-sm text-zinc-100 resize-none focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"),qi(`# Start typing your article content here...

## Headings

- Lists
- Work too

**Bold** and *italic* text

[Link text](url)`),Vn(e),Zn(r=>new Hs(r)),X("spellcheck","false")]),e),L(a([_("absolute bottom-2 right-2 text-xs text-zinc-500 bg-zinc-800 px-2 py-1 rounded")]),a([b((()=>{let r=tn(e);return al(r)})()),b(" chars")]))]))])),Jl(a([_("space-y-4")]),a([L(a([_("flex items-center justify-between")]),a([Nr(a([_("text-xl text-pink-700 font-light")]),a([b("Preview")])),L(a([_("text-xs text-zinc-500")]),a([b("Rendered output")]))])),L(a([_("w-full h-[400px] lg:h-[600px] bg-zinc-900 border border-zinc-600 rounded-lg p-6 overflow-y-auto prose prose-invert prose-pink max-w-none")]),n)]))])),L(a([_("mt-8 p-4 bg-zinc-800 rounded-lg border border-zinc-700")]),a([hn(a([_("text-lg text-pink-700 font-light")]),a([b("Quick Reference")])),et(a([_("text-zinc-300")]),a([Mr(a([]),a([b("Note: ")])),b("The djot implementation is a work in progress. Not all features are supported yet.")])),et(a([_("mb-6")]),a([b("See the "),Tt(a([Et("https://htmlpreview.github.io/?https://github.com/jgm/djot/blob/master/doc/syntax.html"),_("text-zinc-300 underline")]),a([b("djot syntax documentation")])),b(" for more details.")])),L(a([_("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm")]),a([L(a([]),a([he(a([_("text-pink-700 font-medium mb-2")]),a([b("Headings")])),fe(a([_("text-zinc-300")]),a([$e(a([_("text-zinc-300")]),a([b(`# H1
## H2
### H3`)]))]))])),L(a([]),a([he(a([_("text-pink-700 font-medium mb-2")]),a([b("Text")])),fe(a([_("text-zinc-300")]),a([$e(a([_("text-zinc-300")]),a([b("_italic_\n*bold*\n`code`")]))]))])),L(a([]),a([he(a([_("text-pink-700 font-medium mb-2")]),a([b("Lists")])),fe(a([_("text-zinc-300")]),a([$e(a([_("text-zinc-300")]),a([b(`- item 1
- item 2

  - nested`)]))]))])),L(a([]),a([he(a([_("text-pink-700 font-medium mb-2")]),a([b("Links")])),fe(a([_("text-zinc-300")]),a([$e(a([_("text-zinc-300")]),a([b(`[text](url)
[text](url){title="tooltip"}`)]))]))])),L(a([]),a([he(a([_("text-pink-700 font-medium mb-2")]),a([b("Code Blocks")])),fe(a([_("text-zinc-300")]),a([$e(a([_("text-zinc-300")]),a([b("```\ncode here\n```")]))]))])),L(a([]),a([he(a([_("text-pink-700 font-medium mb-2")]),a([b("Blockquotes")])),fe(a([_("text-zinc-300")]),a([$e(a([_("text-zinc-300")]),a([b("> quoted text")]))]))]))]))]))])}function Qd(e){let t=Id(e),n;if(t instanceof bn)n=Vd();else if(t instanceof yn){let l=t.articles,o=t.session;n=Ud(l,o)}else if(t instanceof Mt)n=Yd();else if(t instanceof mt){let l=t.article,o=t.session;n=sc(l,o)}else if(t instanceof st){let l=t.article;n=Jd(e,l)}else if(t instanceof ae){let l=t.error;if(l instanceof Ln){let o=l.slug;n=Gd(e.articles,o)}else if(l instanceof vn){let o=l.id;n=Wd(e.articles,o)}else if(l instanceof It){let o=l.error;n=a([En(gs(o))])}else if(l instanceof An){let o=l.attempted_action;n=a([En("Authentication required: "+o)])}else{let o=l.msg;n=a([En(o)])}}else if(t instanceof nr)n=Rd();else if(t instanceof kn){let l=t.content;n=Zd(l)}else{let l=t.requested_uri;n=Hd(l)}let r=n,i;return t instanceof kn?i=l=>L(a([_("min-h-screen bg-zinc-900 text-zinc-100 selection:bg-pink-700 selection:text-zinc-100 ")]),a([go(e),Vi(a([_("mx-auto px-10 py-10")]),l)])):t instanceof st?i=l=>L(a([_("min-h-screen bg-zinc-900 text-zinc-100 selection:bg-pink-700 selection:text-zinc-100 ")]),a([go(e),Vi(a([_("mx-auto px-10 py-10")]),l)])):i=l=>L(a([_("min-h-screen bg-zinc-900 text-zinc-100 selection:bg-pink-700 selection:text-zinc-100 ")]),a([go(e),Vi(a([_("max-w-screen-md mx-auto px-10 py-10")]),l)])),i(r)}var Xd=`# Quick Start for Markdown users

Djot is a lot like Markdown.  Here are some of the main
differences you need to be aware of in making the transition.

#### Blank lines

In djot you need blank lines around block-level
elements.  Hence, instead of

\`\`\`
This is some text.
## My next heading
\`\`\`

you must write

\`\`\`
This is some text.

## My next heading
\`\`\`

Instead of

\`\`\`\`
This is some text.
\`\`\` lua
local foo = bar.baz or false
\`\`\`
\`\`\`\`

you must write

\`\`\`\`
This is some text.

\`\`\` lua
local foo = bar.baz or false
\`\`\`
\`\`\`\`

Instead of

\`\`\`
Text.
> a blockquote.
\`\`\`

you must write

\`\`\`
Text.

> a blockquote.
\`\`\`

And instead of

\`\`\`
Before a thematic break.
****
After a thematic break.
\`\`\`

you must write

\`\`\`
Before a thematic break.

****

After a thematic break.
\`\`\`

#### Lists

A special case of this is that you always need a blank line before a
list, even if it's a sublist. So, while in Markdown you can write

\`\`\`
- one
  - two
  - three
\`\`\`

in djot you must write

\`\`\`
- one

  - two
  - three
\`\`\`

#### Headings

There are no Setext-style (underlined) headings, only ATX- (\`#\`) style.

Heading content can extend over several lines, which may or
may not be preceded by \`#\` characters:

\`\`\`
## This is a single
## level-2 heading

### This is a single
level-3 heading
\`\`\`

As a result, headings must always have a blank line following.

Trailing \`#\` characters in a heading are read as part of the
content and not ignored.

#### Code blocks

There are no indented code blocks, only fenced with \` \`\`\` \`.

#### Block quotes

You need a space after the \`>\` character, unless it is followed
by a newline.

#### Emphasis

Use single \`_\` delimiters for regular emphasis and
single \`*\` delimiters for strong emphasis.

#### Links

There is no special syntax for adding a title to a link, as
in Markdown:

\`\`\`
[link](http://example.com "Go to my website")
\`\`\`

If you want a title attribute on a link, use the general attribute syntax:

\`\`\`
[link](http://example.com){title="Go to my website"}
\`\`\`

#### Hard line breaks

In Markdown you can create a hard line break by ending a line
with two spaces. In djot you use a backslash before the newline.

\`\`\`
A new\\
line.
\`\`\`

#### Raw HTML

In Markdown you can just insert raw HTML "as is."  In djot,
you must mark it as raw HTML:

\`\`\`\`
This is raw HTML: \`<a id="foo">\`{=html}.

Here is a raw HTML block:

\`\`\` =html
<table>
<tr><td>foo</td></tr>
</table>
\`\`\`
\`\`\`\`

#### Tables

Pipe tables always require a pipe character at the start and end
of each line, unlike in many Markdown implementations.  So, this
is not a table:

\`\`\`
a|b
-|-
1|2
\`\`\`

but this is:

\`\`\`
| a | b |
| - | - |
| 1 | 2 |
\`\`\`


#### That's enough to get started!

Here we have just focused on things that might trip up
Markdown users.  If you keep these in mind, you should be
able to start using djot without looking at any more
documentation.

However, we haven't discussed any of the things
you can do in djot but not Markdown. See the [syntax
description](https://htmlpreview.github.io/?https://github.com/jgm/djot/blob/master/doc/syntax.html)
to find about the new constructions that are available.
`;function e_(e){let t=Ql();if(!t.isOk())throw W("let_assert","jst_lustre",62,"init","Pattern match failed, no pattern matched the value.",{value:t});let n=t[0],r=new E(n,$o(n),new xe,new ee,Xd,new Gt,!1),i=du(u=>{let c=u;return new js(c)}),s=Xu(r,n),l=s[0],o=s[1];return[l,Kn(a([i,o,fo(u=>new ai(u),r.base_uri)]))]}function oc(){let e=Va(e_,Md,Qd),t=Ya(e,"#app",void 0);if(!t.isOk())throw W("let_assert","jst_lustre",36,"main","Pattern match failed, no pattern matched the value.",{value:t})}function te(e,t,n){let r="\x1B[90m",i="\x1B[39m",s=`${t}:${n}`,l=bt(e);if(globalThis.process?.stderr?.write){let o=`${r}${s}${i}
${l}
`;process.stderr.write(o)}else if(globalThis.Deno){let o=`${r}${s}${i}
${l}
`;globalThis.Deno.stderr.writeSync(new TextEncoder().encode(o))}else{let o=`${s}
${l}`;globalThis.console.log(o)}return e}function t_(e){let t='"';for(let n=0;n<e.length;n++){let r=e[n];r==`
`?t+="\\n":r=="\r"?t+="\\r":r=="	"?t+="\\t":r=="\f"?t+="\\f":r=="\\"?t+="\\\\":r=='"'?t+='\\"':r<" "||r>"~"&&r<"\xA0"?t+="\\u{"+r.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=r}return t+='"',t}function n_(e){let t="dict.from_list([",n=!0,r=[];return e.forEach((i,s)=>{r.push([s,i])}),r.sort(),r.forEach(([i,s])=>{n||(t=t+", "),t=t+"#("+bt(i)+", "+bt(s)+")",n=!1}),t+"])"}function r_(e){let t=globalThis.Object.keys(e).map(n=>{let r=bt(e[n]);return isNaN(parseInt(n))?`${n}: ${r}`:r}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function i_(e){let t=Object.getPrototypeOf(e)?.constructor?.name||"Object",n=[];for(let s of Object.keys(e))n.push(`${bt(s)}: ${bt(e[s])}`);let r=n.length?" "+n.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${r}})`}function bt(e){let t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return t_(e);if(t==="bigint"||t==="number")return e.toString();if(globalThis.Array.isArray(e))return`#(${e.map(bt).join(", ")})`;if(e instanceof U)return`[${e.toArray().map(bt).join(", ")}]`;if(e instanceof yt)return`//utfcodepoint(${String.fromCodePoint(e.value)})`;if(e instanceof be)return s_(e);if(e instanceof d)return r_(e);if(l_(e))return n_(e);if(e instanceof Set)return`//js(Set(${[...e].map(bt).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){let n=[];for(let r of Array(e.length).keys())n.push(String.fromCharCode(r+97));return`//fn(${n.join(", ")}) { ... }`}return i_(e)}function s_(e){let t=e.bitOffset+8*Math.trunc(e.bitSize/8),n=Kt(e,e.bitOffset,t),r=e.bitSize%8;if(r>0){let i=ui(e,t,e.bitSize,!1,!1),s=Array.from(n.rawBuffer),l=`${i}:size(${r})`;return s.length===0?`<<${l}>>`:`<<${Array.from(n.rawBuffer).join(", ")}, ${l}>>`}else return`<<${Array.from(n.rawBuffer).join(", ")}>>`}function l_(e){try{return e instanceof we}catch{return!1}}oc();
