var d=class{withFields(t){let n=Object.keys(this).map(r=>r in t?t[r]:this[r]);return new this.constructor(...n)}},R=class{static fromArray(t,n){let r=n||new kr;for(let i=t.length-1;i>=0;--i)r=new nn(t[i],r);return r}[Symbol.iterator](){return new xl(this)}toArray(){return[...this]}atLeastLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return n!==void 0}hasLength(t){let n=this;for(;t-- >0&&n;)n=n.tail;return t===-1&&n instanceof kr}countLength(){let t=this,n=0;for(;t;)t=t.tail,n++;return n-1}};function w(e,t){return new nn(e,t)}function o(e,t){return R.fromArray(e,t)}var xl=class{#e;constructor(t){this.#e=t}next(){if(this.#e instanceof kr)return{done:!0};{let{head:t,tail:n}=this.#e;return this.#e=n,{value:t,done:!1}}}},kr=class extends R{},nn=class extends R{constructor(t,n){super(),this.head=t,this.tail=n}},be=class{bitSize;byteSize;bitOffset;rawBuffer;constructor(t,n,r){if(!(t instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=n??t.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=r??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(t.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=t}byteAt(t){if(!(t<0||t>=this.byteSize))return yr(this.rawBuffer,this.bitOffset,t)}equals(t){if(this.bitSize!==t.bitSize)return!1;let n=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&t.bitOffset===0){for(let i=0;i<n;i++)if(this.rawBuffer[i]!==t.rawBuffer[i])return!1;let r=this.bitSize%8;if(r){let i=8-r;if(this.rawBuffer[n]>>i!==t.rawBuffer[n]>>i)return!1}}else{for(let i=0;i<n;i++){let s=yr(this.rawBuffer,this.bitOffset,i),l=yr(t.rawBuffer,t.bitOffset,i);if(s!==l)return!1}let r=this.bitSize%8;if(r){let i=yr(this.rawBuffer,this.bitOffset,n),s=yr(t.rawBuffer,t.bitOffset,n),l=8-r;if(i>>l!==s>>l)return!1}}return!0}get buffer(){if(Ro("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(Ro("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}};function yr(e,t,n){if(t===0)return e[n]??0;{let r=e[n]<<t&255,i=e[n+1]>>8-t;return r|i}}var Ot=class{constructor(t){this.value=t}},Go={};function Ro(e,t){Go[e]||(console.warn(`Deprecated BitArray.${e} property used in JavaScript FFI code. ${t}.`),Go[e]=!0)}function rn(e,t,n){if(n??=e.bitSize,Jo(e,t,n),t===n)return new be(new Uint8Array);if(t===0&&n===e.bitSize)return e;t+=e.bitOffset,n+=e.bitOffset;let r=Math.trunc(t/8),s=Math.trunc((n+7)/8)-r,l;return r===0&&s===e.rawBuffer.byteLength?l=e.rawBuffer:l=new Uint8Array(e.rawBuffer.buffer,e.rawBuffer.byteOffset+r,s),new be(l,n-t,t%8)}function zi(e,t,n,r,i){if(Jo(e,t,n),t===n)return 0;t+=e.bitOffset,n+=e.bitOffset;let s=t%8===0,l=n%8===0;if(s&&l)return Ic(e,t/8,n/8,r,i);let a=n-t,u=Math.trunc(t/8),c=Math.trunc((n-1)/8);if(u==c){let p=255>>t%8,f=(8-n%8)%8,m=(e.rawBuffer[u]&p)>>f;if(i){let g=2**(a-1);m>=g&&(m-=g*2)}return m}return a<=53?Fc(e.rawBuffer,t,n,r,i):Wc(e.rawBuffer,t,n,r,i)}function Ic(e,t,n,r,i){return n-t<=6?Dc(e.rawBuffer,t,n,r,i):Uc(e.rawBuffer,t,n,r,i)}function Dc(e,t,n,r,i){let s=n-t,l=0;if(r)for(let a=t;a<n;a++)l*=256,l+=e[a];else for(let a=n-1;a>=t;a--)l*=256,l+=e[a];if(i){let a=2**(s*8-1);l>=a&&(l-=a*2)}return l}function Uc(e,t,n,r,i){let s=n-t,l=0n;if(r)for(let a=t;a<n;a++)l*=256n,l+=BigInt(e[a]);else for(let a=n-1;a>=t;a--)l*=256n,l+=BigInt(e[a]);if(i){let a=1n<<BigInt(s*8-1);l>=a&&(l-=a*2n)}return Number(l)}function Fc(e,t,n,r,i){let s=t%8===0,l=n-t,a=Math.trunc(t/8),u=0;if(r){if(!s){let c=8-t%8;u=e[a++]&(1<<c)-1,l-=c}for(;l>=8;)u*=256,u+=e[a++],l-=8;l>0&&(u*=2**l,u+=e[a]>>8-l)}else if(s){let c=n-t,p=1;for(;c>=8;)u+=e[a++]*p,p*=256,c-=8;u+=(e[a]>>8-c)*p}else{let c=t%8,p=8-c,f=n-t,m=1;for(;f>=8;){let g=e[a]<<c|e[a+1]>>p;u+=(g&255)*m,m*=256,f-=8,a++}if(f>0){let g=f-Math.max(0,f-p),k=(e[a]&(1<<p)-1)>>p-g;f-=g,f>0&&(k*=2**f,k+=e[a+1]>>8-f),u+=k*m}}if(i){let c=2**(n-t-1);u>=c&&(u-=c*2)}return u}function Wc(e,t,n,r,i){let s=t%8===0,l=n-t,a=Math.trunc(t/8),u=0n;if(r){if(!s){let c=8-t%8;u=BigInt(e[a++]&(1<<c)-1),l-=c}for(;l>=8;)u*=256n,u+=BigInt(e[a++]),l-=8;l>0&&(u<<=BigInt(l),u+=BigInt(e[a]>>8-l))}else if(s){let c=n-t,p=0n;for(;c>=8;)u+=BigInt(e[a++])<<p,p+=8n,c-=8;u+=BigInt(e[a]>>8-c)<<p}else{let c=t%8,p=8-c,f=n-t,m=0n;for(;f>=8;){let g=e[a]<<c|e[a+1]>>p;u+=BigInt(g&255)<<m,m+=8n,f-=8,a++}if(f>0){let g=f-Math.max(0,f-p),k=(e[a]&(1<<p)-1)>>p-g;f-=g,f>0&&(k<<=f,k+=e[a+1]>>8-f),u+=BigInt(k)<<m}}if(i){let c=2n**BigInt(n-t-1);u>=c&&(u-=c*2n)}return Number(u)}function Jo(e,t,n){if(t<0||t>e.bitSize||n<t||n>e.bitSize){let r=`Invalid bit array slice: start = ${t}, end = ${n}, bit size = ${e.bitSize}`;throw new globalThis.Error(r)}}var Un=class e extends d{static isResult(t){return t instanceof e}},b=class extends Un{constructor(t){super(),this[0]=t}isOk(){return!0}},y=class extends Un{constructor(t){super(),this[0]=t}isOk(){return!1}};function q(e,t){let n=[e,t];for(;n.length;){let r=n.pop(),i=n.pop();if(r===i)continue;if(!Ho(r)||!Ho(i)||!Zc(r,i)||Rc(r,i)||Hc(r,i)||Jc(r,i)||Kc(r,i)||Vc(r,i)||Yc(r,i))return!1;let l=Object.getPrototypeOf(r);if(l!==null&&typeof l.equals=="function")try{if(r.equals(i))continue;return!1}catch{}let[a,u]=Gc(r);for(let c of a(r))n.push(u(r,c),u(i,c))}return!0}function Gc(e){if(e instanceof Map)return[t=>t.keys(),(t,n)=>t.get(n)];{let t=e instanceof globalThis.Error?["message"]:[];return[n=>[...t,...Object.keys(n)],(n,r)=>n[r]]}}function Rc(e,t){return e instanceof Date&&(e>t||e<t)}function Hc(e,t){return!(e instanceof be)&&e.buffer instanceof ArrayBuffer&&e.BYTES_PER_ELEMENT&&!(e.byteLength===t.byteLength&&e.every((n,r)=>n===t[r]))}function Jc(e,t){return Array.isArray(e)&&e.length!==t.length}function Kc(e,t){return e instanceof Map&&e.size!==t.size}function Vc(e,t){return e instanceof Set&&(e.size!=t.size||[...e].some(n=>!t.has(n)))}function Yc(e,t){return e instanceof RegExp&&(e.source!==t.source||e.flags!==t.flags)}function Ho(e){return typeof e=="object"&&e!==null}function Zc(e,t){return typeof e!="object"&&typeof t!="object"&&(!e||!t)||[Promise,WeakSet,WeakMap,Function].some(r=>e instanceof r)?!1:e.constructor===t.constructor}function sn(e,t){return t===0?0:e%t}function ln(e,t){return Math.trunc(bl(e,t))}function bl(e,t){return t===0?0:e/t}function I(e,t,n,r,i,s){let l=new globalThis.Error(i);l.gleam_error=e,l.module=t,l.line=n,l.function=r,l.fn=r;for(let a in s)l[a]=s[a];return l}var $=class extends d{constructor(t){super(),this[0]=t}},h=class extends d{};function Ei(e,t){if(e instanceof $){let n=e[0];return new b(n)}else return new y(t)}function vr(e,t){if(e instanceof $){let n=e[0];return new $(t(n))}else return new h}function Ko(e){return e instanceof $?e[0]:new h}function Vo(e,t){if(e instanceof $){let n=e[0];return t(n)}else return new h}function Je(e,t,n){return e?t:n()}var J=class extends d{},ie=class extends d{},te=class extends d{};function ze(e,t,n){return Qo(t,n,e)}function Xc(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head;e=n.tail,t=w(i,r)}}}function ef(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return Xc(r,o([]));{let i=n.head[0];e=n.tail,t=w(i,r)}}}function yl(e){return ef(on(e),o([]))}function kl(e,t,n){let r=Ye(e,t);if(r.isOk()){let i=r[0];return ze(e,t,n(new $(i)))}else return ze(e,t,n(new h))}function Xo(e,t){let n=e[0],r=e[1];return[n,t(r)]}var Q=class extends d{},Ze=class extends d{};function Wn(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head;e=n.tail,t=w(i,r)}}}function T(e){return Wn(e,o([]))}function sf(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return T(s);{let l=r.head,a=r.tail,u;i(l)?u=w(l,s):u=s;let p=u;e=a,t=i,n=p}}}function gt(e,t){return sf(e,t,o([]))}function lf(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return T(s);{let l=r.head,a=r.tail,u,c=i(l);if(c.isOk()){let f=c[0];u=w(f,s)}else u=s;let p=u;e=a,t=i,n=p}}}function an(e,t){return lf(e,t,o([]))}function of(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return T(s);{let l=r.head;e=r.tail,t=i,n=w(i(l),s)}}}function P(e,t){return of(e,t,o([]))}function af(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head;e=n.tail,t=w(i,r)}}}function K(e,t){return af(T(e),t)}function ye(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return i;{let l=r.head;e=r.tail,t=s(i,l),n=s}}}function vl(e,t,n){let r=ye(e,[t,o([])],(i,s)=>{let l=i[0],a=i[1],u=n(l,s),c=u[0],p=u[1];return[c,w(p,a)]});return Xo(r,T)}function uf(e,t,n,r){for(;;){let i=e,s=t,l=n,a=r;if(i.hasLength(0))return s;{let u=i.head;e=i.tail,t=l(s,u,a),n=l,r=a+1}}}function Ll(e,t,n){return uf(e,t,n,0)}function xt(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return new y(void 0);{let i=n.head,s=n.tail;if(r(i))return new b(i);e=s,t=r}}}function Lr(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return!1;{let i=n.head,s=n.tail;if(r(i))return!0;e=s,t=r}}}function cf(e,t,n,r,i,s){for(;;){let l=e,a=t,u=n,c=r,p=i,f=s,m=w(p,u);if(l.hasLength(0))return c instanceof Q?w(T(m),f):w(m,f);{let g=l.head,k=l.tail,C=a(p,g);if(C instanceof te&&c instanceof Ze)e=k,t=a,n=m,r=c,i=g,s=f;else if(C instanceof J&&c instanceof Q)e=k,t=a,n=m,r=c,i=g,s=f;else if(C instanceof ie&&c instanceof Q)e=k,t=a,n=m,r=c,i=g,s=f;else if(C instanceof te&&c instanceof Q){let L;c instanceof Q?L=w(T(m),f):L=w(m,f);let U=L;if(k.hasLength(0))return w(o([g]),U);{let M=k.head,S=k.tail,E,O=a(g,M);O instanceof J?E=new Q:O instanceof ie?E=new Q:E=new Ze;let V=E;e=S,t=a,n=o([g]),r=V,i=M,s=U}}else if(C instanceof J&&c instanceof Ze){let L;c instanceof Q?L=w(T(m),f):L=w(m,f);let U=L;if(k.hasLength(0))return w(o([g]),U);{let M=k.head,S=k.tail,E,O=a(g,M);O instanceof J?E=new Q:O instanceof ie?E=new Q:E=new Ze;let V=E;e=S,t=a,n=o([g]),r=V,i=M,s=U}}else{let L;c instanceof Q?L=w(T(m),f):L=w(m,f);let U=L;if(k.hasLength(0))return w(o([g]),U);{let M=k.head,S=k.tail,E,O=a(g,M);O instanceof J?E=new Q:O instanceof ie?E=new Q:E=new Ze;let V=E;e=S,t=a,n=o([g]),r=V,i=M,s=U}}}}}function ff(e,t,n,r){for(;;){let i=e,s=t,l=n,a=r;if(i.hasLength(0))return Wn(s,a);if(s.hasLength(0))return Wn(i,a);{let u=i.head,c=i.tail,p=s.head,f=s.tail,m=l(u,p);m instanceof J?(e=c,t=s,n=l,r=w(u,a)):m instanceof te?(e=i,t=f,n=l,r=w(p,a)):(e=i,t=f,n=l,r=w(p,a))}}}function pf(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return T(s);if(r.hasLength(1)){let l=r.head;return T(w(T(l),s))}else{let l=r.head,a=r.tail.head,u=r.tail.tail,c=ff(l,a,i,o([]));e=u,t=i,n=w(c,s)}}}function df(e,t,n,r){for(;;){let i=e,s=t,l=n,a=r;if(i.hasLength(0))return Wn(s,a);if(s.hasLength(0))return Wn(i,a);{let u=i.head,c=i.tail,p=s.head,f=s.tail,m=l(u,p);m instanceof J?(e=i,t=f,n=l,r=w(p,a)):m instanceof te?(e=c,t=s,n=l,r=w(u,a)):(e=c,t=s,n=l,r=w(u,a))}}}function _f(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return T(s);if(r.hasLength(1)){let l=r.head;return T(w(T(l),s))}else{let l=r.head,a=r.tail.head,u=r.tail.tail,c=df(l,a,i,o([]));e=u,t=i,n=w(c,s)}}}function $f(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return o([]);if(r.hasLength(1)&&i instanceof Q)return r.head;if(r.hasLength(1)&&i instanceof Ze){let l=r.head;return T(l)}else i instanceof Q?(e=pf(r,s,o([])),t=new Ze,n=s):(e=_f(r,s,o([])),t=new Q,n=s)}}function Gn(e,t){if(e.hasLength(0))return o([]);if(e.hasLength(1)){let n=e.head;return o([n])}else{let n=e.head,r=e.tail.head,i=e.tail.tail,s,l=t(n,r);l instanceof J?s=new Q:l instanceof ie?s=new Q:s=new Ze;let a=s,u=cf(i,t,o([n]),a,r,o([]));return $f(u,new Q,t)}}function hf(e,t,n,r){for(;;){let i=e,s=t,l=n,a=r;if(i.atLeastLength(1)&&q(i.head[0],s)){let u=i.head[0],c=i.tail;return Wn(a,w([u,l],c))}else if(i.atLeastLength(1)){let u=i.head;e=i.tail,t=s,n=l,r=w(u,a)}else return T(w([s,l],a))}}function Al(e,t,n){return hf(e,t,n,o([]))}function Ti(e,t,n){let i=e,s=Ol(i,t,n);return s}function jr(e,t){return e===t?new ie:sa(e,t)?new J:new te}function ia(e,t,n){if(n<0)return"";if(t<0){let s=fn(e)+t;return s<0?"":zl(e,s,n)}else return zl(e,t,n)}function yf(e,t){for(;;){let n=e,r=t;if(n.atLeastLength(1)){let i=n.head;e=n.tail,t=r+i}else return r}}function St(e){return yf(e,"")}function kf(e,t,n){for(;;){let r=e,i=t,s=n;if(i<=0)return s;e=r,t=i-1,n=s+r}}function Or(e,t){return kf(e,t,"")}function vf(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return s;{let l=r.head;e=r.tail,t=i,n=s+i+l}}}function Ee(e,t){if(e.hasLength(0))return"";{let n=e.head,r=e.tail;return vf(r,t,n)}}function Lf(e,t){let n=fn(t),r=ln(e,n),i=sn(e,n);return Or(t,r)+ia(t,0,i)}function zt(e,t,n){let r=fn(e),i=t-r;return i<=0?e:Lf(i,n)+e}function Hn(e){let n=Pi(e);return Ni(n)}function qi(e,t){for(;;){let n=e,r=t;if(r>0){let s=Ci(n);if(s.isOk())e=s[0][1],t=r-1;else return n}else return n}}function cn(e,t){if(t==="")return Rn(e);{let r=e,i=Sl(r,t);return P(i,se)}}function El(e){let t=Qe(e);return t}function Et(e,t){if(e.isOk()){let n=e[0];return new b(t(n))}else{let n=e[0];return new y(n)}}function Mi(e,t){if(e.isOk()){let n=e[0];return new b(n)}else{let n=e[0];return new y(t(n))}}function Sr(e,t){if(e.isOk()){let n=e[0];return t(n)}else{let n=e[0];return new y(n)}}function Te(e,t){return Sr(e,t)}var dn=class extends d{constructor(t,n,r){super(),this.expected=t,this.found=n,this.path=r}};function Ef(e,t){return Mi(e,n=>P(n,t))}function ca(e){return Pl(e)}function fa(e){return t=>{if(e.hasLength(0))return new y(o([new dn("another type",ve(t),o([]))]));{let n=e.head,r=e.tail,i=n(t);if(i.isOk()){let s=i[0];return new b(s)}else return fa(r)(t)}}}function Tf(e,t){let n=t,r=fa(o([Pl,u=>Et(pa(u),H)])),i,s=r(n);if(s.isOk())i=s[0];else{let u=o(["<",ve(n),">"]),c=un(u);i=c}let l=i,a=e;return new dn(a.expected,a.found,w(l,e.path))}function Bl(e,t){return n=>{let r=new dn("field","nothing",o([]));return Sr(da(n,e),i=>{let l=Ei(i,o([r])),a=Sr(l,t);return Ef(a,u=>Tf(u,e))})}}var _a=new WeakMap,Nl=new DataView(new ArrayBuffer(8)),Ml=0;function Il(e){let t=_a.get(e);if(t!==void 0)return t;let n=Ml++;return Ml===2147483647&&(Ml=0),_a.set(e,n),n}function Dl(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function Fl(e){let t=0,n=e.length;for(let r=0;r<n;r++)t=Math.imul(31,t)+e.charCodeAt(r)|0;return t}function ha(e){Nl.setFloat64(0,e);let t=Nl.getInt32(0),n=Nl.getInt32(4);return Math.imul(73244475,t>>16^t)^n}function qf(e){return Fl(e.toString())}function Cf(e){let t=Object.getPrototypeOf(e);if(t!==null&&typeof t.hashCode=="function")try{let r=e.hashCode(e);if(typeof r=="number")return r}catch{}if(e instanceof Promise||e instanceof WeakSet||e instanceof WeakMap)return Il(e);if(e instanceof Date)return ha(e.getTime());let n=0;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),Array.isArray(e)||e instanceof Uint8Array)for(let r=0;r<e.length;r++)n=Math.imul(31,n)+Ce(e[r])|0;else if(e instanceof Set)e.forEach(r=>{n=n+Ce(r)|0});else if(e instanceof Map)e.forEach((r,i)=>{n=n+Dl(Ce(r),Ce(i))|0});else{let r=Object.keys(e);for(let i=0;i<r.length;i++){let s=r[i],l=e[s];n=n+Dl(Ce(l),Fl(s))|0}}return n}function Ce(e){if(e===null)return 1108378658;if(e===void 0)return 1108378659;if(e===!0)return 1108378657;if(e===!1)return 1108378656;switch(typeof e){case"number":return ha(e);case"string":return Fl(e);case"bigint":return qf(e);case"object":return Cf(e);case"symbol":return Il(e);case"function":return Il(e);default:return 0}}var et=5,Wl=Math.pow(2,et),Bf=Wl-1,Pf=Wl/2,Nf=Wl/4,_e=0,Xe=1,Le=2,$n=3,Gl={type:Le,bitmap:0,array:[]};function zr(e,t){return e>>>t&Bf}function Di(e,t){return 1<<zr(e,t)}function Mf(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,e+=e>>16,e&127}function Rl(e,t){return Mf(e&t-1)}function Be(e,t,n){let r=e.length,i=new Array(r);for(let s=0;s<r;++s)i[s]=e[s];return i[t]=n,i}function If(e,t,n){let r=e.length,i=new Array(r+1),s=0,l=0;for(;s<t;)i[l++]=e[s++];for(i[l++]=n;s<r;)i[l++]=e[s++];return i}function Ul(e,t){let n=e.length,r=new Array(n-1),i=0,s=0;for(;i<t;)r[s++]=e[i++];for(++i;i<n;)r[s++]=e[i++];return r}function ma(e,t,n,r,i,s){let l=Ce(t);if(l===r)return{type:$n,hash:l,array:[{type:_e,k:t,v:n},{type:_e,k:i,v:s}]};let a={val:!1};return Er(Hl(Gl,e,l,t,n,a),e,r,i,s,a)}function Er(e,t,n,r,i,s){switch(e.type){case Xe:return Df(e,t,n,r,i,s);case Le:return Hl(e,t,n,r,i,s);case $n:return Uf(e,t,n,r,i,s)}}function Df(e,t,n,r,i,s){let l=zr(n,t),a=e.array[l];if(a===void 0)return s.val=!0,{type:Xe,size:e.size+1,array:Be(e.array,l,{type:_e,k:r,v:i})};if(a.type===_e)return q(r,a.k)?i===a.v?e:{type:Xe,size:e.size,array:Be(e.array,l,{type:_e,k:r,v:i})}:(s.val=!0,{type:Xe,size:e.size,array:Be(e.array,l,ma(t+et,a.k,a.v,n,r,i))});let u=Er(a,t+et,n,r,i,s);return u===a?e:{type:Xe,size:e.size,array:Be(e.array,l,u)}}function Hl(e,t,n,r,i,s){let l=Di(n,t),a=Rl(e.bitmap,l);if((e.bitmap&l)!==0){let u=e.array[a];if(u.type!==_e){let p=Er(u,t+et,n,r,i,s);return p===u?e:{type:Le,bitmap:e.bitmap,array:Be(e.array,a,p)}}let c=u.k;return q(r,c)?i===u.v?e:{type:Le,bitmap:e.bitmap,array:Be(e.array,a,{type:_e,k:r,v:i})}:(s.val=!0,{type:Le,bitmap:e.bitmap,array:Be(e.array,a,ma(t+et,c,u.v,n,r,i))})}else{let u=e.array.length;if(u>=Pf){let c=new Array(32),p=zr(n,t);c[p]=Hl(Gl,t+et,n,r,i,s);let f=0,m=e.bitmap;for(let g=0;g<32;g++){if((m&1)!==0){let k=e.array[f++];c[g]=k}m=m>>>1}return{type:Xe,size:u+1,array:c}}else{let c=If(e.array,a,{type:_e,k:r,v:i});return s.val=!0,{type:Le,bitmap:e.bitmap|l,array:c}}}}function Uf(e,t,n,r,i,s){if(n===e.hash){let l=Jl(e,r);if(l!==-1)return e.array[l].v===i?e:{type:$n,hash:n,array:Be(e.array,l,{type:_e,k:r,v:i})};let a=e.array.length;return s.val=!0,{type:$n,hash:n,array:Be(e.array,a,{type:_e,k:r,v:i})}}return Er({type:Le,bitmap:Di(e.hash,t),array:[e]},t,n,r,i,s)}function Jl(e,t){let n=e.array.length;for(let r=0;r<n;r++)if(q(t,e.array[r].k))return r;return-1}function Ii(e,t,n,r){switch(e.type){case Xe:return Ff(e,t,n,r);case Le:return Wf(e,t,n,r);case $n:return Gf(e,r)}}function Ff(e,t,n,r){let i=zr(n,t),s=e.array[i];if(s!==void 0){if(s.type!==_e)return Ii(s,t+et,n,r);if(q(r,s.k))return s}}function Wf(e,t,n,r){let i=Di(n,t);if((e.bitmap&i)===0)return;let s=Rl(e.bitmap,i),l=e.array[s];if(l.type!==_e)return Ii(l,t+et,n,r);if(q(r,l.k))return l}function Gf(e,t){let n=Jl(e,t);if(!(n<0))return e.array[n]}function Kl(e,t,n,r){switch(e.type){case Xe:return Rf(e,t,n,r);case Le:return Hf(e,t,n,r);case $n:return Jf(e,r)}}function Rf(e,t,n,r){let i=zr(n,t),s=e.array[i];if(s===void 0)return e;let l;if(s.type===_e){if(!q(s.k,r))return e}else if(l=Kl(s,t+et,n,r),l===s)return e;if(l===void 0){if(e.size<=Nf){let a=e.array,u=new Array(e.size-1),c=0,p=0,f=0;for(;c<i;){let m=a[c];m!==void 0&&(u[p]=m,f|=1<<c,++p),++c}for(++c;c<a.length;){let m=a[c];m!==void 0&&(u[p]=m,f|=1<<c,++p),++c}return{type:Le,bitmap:f,array:u}}return{type:Xe,size:e.size-1,array:Be(e.array,i,l)}}return{type:Xe,size:e.size,array:Be(e.array,i,l)}}function Hf(e,t,n,r){let i=Di(n,t);if((e.bitmap&i)===0)return e;let s=Rl(e.bitmap,i),l=e.array[s];if(l.type!==_e){let a=Kl(l,t+et,n,r);return a===l?e:a!==void 0?{type:Le,bitmap:e.bitmap,array:Be(e.array,s,a)}:e.bitmap===i?void 0:{type:Le,bitmap:e.bitmap^i,array:Ul(e.array,s)}}return q(r,l.k)?e.bitmap===i?void 0:{type:Le,bitmap:e.bitmap^i,array:Ul(e.array,s)}:e}function Jf(e,t){let n=Jl(e,t);if(n<0)return e;if(e.array.length!==1)return{type:$n,hash:e.hash,array:Ul(e.array,n)}}function wa(e,t){if(e===void 0)return;let n=e.array,r=n.length;for(let i=0;i<r;i++){let s=n[i];if(s!==void 0){if(s.type===_e){t(s.v,s.k);continue}wa(s,t)}}}var xe=class e{static fromObject(t){let n=Object.keys(t),r=e.new();for(let i=0;i<n.length;i++){let s=n[i];r=r.set(s,t[s])}return r}static fromMap(t){let n=e.new();return t.forEach((r,i)=>{n=n.set(i,r)}),n}static new(){return new e(void 0,0)}constructor(t,n){this.root=t,this.size=n}get(t,n){if(this.root===void 0)return n;let r=Ii(this.root,0,Ce(t),t);return r===void 0?n:r.v}set(t,n){let r={val:!1},i=this.root===void 0?Gl:this.root,s=Er(i,0,Ce(t),t,n,r);return s===this.root?this:new e(s,r.val?this.size+1:this.size)}delete(t){if(this.root===void 0)return this;let n=Kl(this.root,0,Ce(t),t);return n===this.root?this:n===void 0?e.new():new e(n,this.size-1)}has(t){return this.root===void 0?!1:Ii(this.root,0,Ce(t),t)!==void 0}entries(){if(this.root===void 0)return[];let t=[];return this.forEach((n,r)=>t.push([r,n])),t}forEach(t){wa(this.root,t)}hashCode(){let t=0;return this.forEach((n,r)=>{t=t+Dl(Ce(n),Ce(r))|0}),t}equals(t){if(!(t instanceof e)||this.size!==t.size)return!1;try{return this.forEach((n,r)=>{if(!q(t.get(r,!n),n))throw $a}),!0}catch(n){if(n===$a)return!1;throw n}}},$a=Symbol();var va=void 0,xa={};function se(e){return e}function H(e){return e.toString()}function Vl(e){let t=e.toString().replace("+","");if(t.indexOf(".")>=0)return t;{let n=t.indexOf("e");return n>=0?t.slice(0,n)+".0"+t.slice(n):t+".0"}}function Ol(e,t,n){return typeof e.replaceAll<"u"?e.replaceAll(t,n):e.replace(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),n)}function fn(e){if(e==="")return 0;let t=Ui(e);if(t){let n=0;for(let r of t)n++;return n}else return e.match(/./gsu).length}function Rn(e){let t=Ui(e);return t?R.fromArray(Array.from(t).map(n=>n.segment)):R.fromArray(e.match(/./gsu))}var ba;function Ui(e){if(globalThis.Intl&&Intl.Segmenter)return ba||=new Intl.Segmenter,ba.segment(e)[Symbol.iterator]()}function Ci(e){let t,n=Ui(e);return n?t=n.next().value?.segment:t=e.match(/./su)?.[0],t?new b([t,e.slice(t.length)]):new y(va)}function hn(e){return[e.charCodeAt(0)|0,e.slice(1)]}function ke(e){return e.toLowerCase()}function sa(e,t){return e<t}function Sl(e,t){return R.fromArray(e.split(t))}function un(e){let t="";for(let n of e)t=t+n;return t}function zl(e,t,n){if(n<=0||t>=e.length)return"";let r=Ui(e);if(r){for(;t-- >0;)r.next();let i="";for(;n-- >0;){let s=r.next().value;if(s===void 0)break;i+=s.segment}return i}else return e.match(/./gsu).slice(t,t+n).join("")}function ue(e,t,n){return e.slice(t,t+n)}function pn(e,t){return e.startsWith(t)}function Bi(e,t){return e.endsWith(t)}var La=[" ","	",`
`,"\v","\f","\r","\x85","\u2028","\u2029"].join(""),Kf=new RegExp(`^[${La}]*`),Vf=new RegExp(`[${La}]*$`);function Pi(e){return e.replace(Kf,"")}function Ni(e){return e.replace(Vf,"")}function F(){return xe.new()}function on(e){return R.fromArray(e.entries())}function Ye(e,t){let n=e.get(t,xa);return n===xa?new y(va):new b(n)}function Qo(e,t,n){return n.set(e,t)}function ve(e){if(typeof e=="string")return"String";if(typeof e=="boolean")return"Bool";if(e instanceof Un)return"Result";if(e instanceof R)return"List";if(e instanceof be)return"BitArray";if(e instanceof xe)return"Dict";if(Number.isInteger(e))return"Int";if(Array.isArray(e))return`Tuple of ${e.length} elements`;if(typeof e=="number")return"Float";if(e===null)return"Null";if(e===void 0)return"Nil";{let t=typeof e;return t.charAt(0).toUpperCase()+t.slice(1)}}function Yl(e,t){return Yf(e,ve(t))}function Yf(e,t){return new y(R.fromArray([new dn(e,t,R.fromArray([]))]))}function Pl(e){return typeof e=="string"?new b(e):Yl("String",e)}function pa(e){return Number.isInteger(e)?new b(e):Yl("Int",e)}function da(e,t){let n=()=>Yl("Dict",e);if(e instanceof xe||e instanceof WeakMap||e instanceof Map){let r=Ye(e,t);return new b(r.isOk()?new $(r[0]):new h)}else return e===null?n():Object.getPrototypeOf(e)==Object.prototype?ya(e,t,()=>new b(new h)):ya(e,t,n)}function ya(e,t,n){try{return t in e?new b(new $(e[t])):n()}catch{return n()}}function Qe(e){let t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return Zf(e);if(t==="bigint"||Number.isInteger(e))return e.toString();if(t==="number")return Vl(e);if(Array.isArray(e))return`#(${e.map(Qe).join(", ")})`;if(e instanceof R)return tp(e);if(e instanceof Ot)return np(e);if(e instanceof be)return`<<${aa(e,"")}>>`;if(e instanceof d)return ep(e);if(e instanceof xe)return Qf(e);if(e instanceof Set)return`//js(Set(${[...e].map(Qe).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){let n=[];for(let r of Array(e.length).keys())n.push(String.fromCharCode(r+97));return`//fn(${n.join(", ")}) { ... }`}return Xf(e)}function Zf(e){let t='"';for(let n=0;n<e.length;n++){let r=e[n];switch(r){case`
`:t+="\\n";break;case"\r":t+="\\r";break;case"	":t+="\\t";break;case"\f":t+="\\f";break;case"\\":t+="\\\\";break;case'"':t+='\\"';break;default:r<" "||r>"~"&&r<"\xA0"?t+="\\u{"+r.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=r}}return t+='"',t}function Qf(e){let t="dict.from_list([",n=!0;return e.forEach((r,i)=>{n||(t=t+", "),t=t+"#("+Qe(i)+", "+Qe(r)+")",n=!1}),t+"])"}function Xf(e){let t=Object.getPrototypeOf(e)?.constructor?.name||"Object",n=[];for(let s of Object.keys(e))n.push(`${Qe(s)}: ${Qe(e[s])}`);let r=n.length?" "+n.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${r}})`}function ep(e){let t=Object.keys(e).map(n=>{let r=Qe(e[n]);return isNaN(parseInt(n))?`${n}: ${r}`:r}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function tp(e){return`[${e.toArray().map(Qe).join(", ")}]`}function np(e){return`//utfcodepoint(${String.fromCodePoint(e.value)})`}function aa(e,t){if(e.bitSize===0)return t;for(let n=0;n<e.byteSize-1;n++)t+=e.byteAt(n).toString(),t+=", ";if(e.byteSize*8===e.bitSize)t+=e.byteAt(e.byteSize-1).toString();else{let n=e.bitSize%8;t+=e.byteAt(e.byteSize-1)>>8-n,t+=`:size(${n})`}return t}function _n(e){return e>=0?e:e*-1}var Fi=class extends d{constructor(t){super(),this[0]=t}},Kn=class extends d{},Tr=class extends d{},qr=class extends d{},Vn=class extends d{},mn=class extends d{},Cr=class extends d{},Br=class extends d{},Pr=class extends d{},Wi=class extends d{};function Tt(e,t){return[ln(e,t),sn(e,t)]}var Aa=1e3;var ja=1e6;var Oa=6e7;var Sa=36e8;var za=864e8;var Ea=6048e8;var Ta=2592e9;var qa=31536e9;function Ca(e){let n=ye(e,0,(r,i)=>{if(i[1]instanceof Kn){let s=i[0];return r+s}else if(i[1]instanceof Tr){let s=i[0];return r+s*Aa}else if(i[1]instanceof qr){let s=i[0];return r+s*ja}else if(i[1]instanceof Vn){let s=i[0];return r+s*Oa}else if(i[1]instanceof mn){let s=i[0];return r+s*Sa}else if(i[1]instanceof Cr){let s=i[0];return r+s*za}else if(i[1]instanceof Br){let s=i[0];return r+s*Ea}else if(i[1]instanceof Pr){let s=i[0];return r+s*Ta}else{let s=i[0];return r+s*qa}});return new Fi(n)}function Ba(e){let t=e[0],n=_n(t),r=Tt(n,qa),i=r[0],s=r[1],l=Tt(s,Ta),a=l[0],u=l[1],c=Tt(u,Ea),p=c[0],f=c[1],m=Tt(f,za),g=m[0],k=m[1],C=Tt(k,Sa),L=C[0],U=C[1],M=Tt(U,Oa),S=M[0],E=M[1],O=Tt(E,ja),V=O[0],tn=O[1],Wo=Tt(tn,Aa),Bc=Wo[0],Pc=Wo[1],Nc=o([[i,new Wi],[a,new Pr],[p,new Br],[g,new Cr],[L,new mn],[S,new Vn],[V,new qr],[Bc,new Tr],[Pc,new Kn]]),Mc=gt(Nc,br=>br[0]>0);return P(Mc,br=>t<0?[-1*br[0],br[1]]:br)}var Pa=o([["Africa/Abidjan",0],["Africa/Algiers",3600],["Africa/Bissau",0],["Africa/Cairo",7200],["Africa/Casablanca",3600],["Africa/Ceuta",3600],["Africa/El_Aaiun",3600],["Africa/Johannesburg",7200],["Africa/Juba",7200],["Africa/Khartoum",7200],["Africa/Lagos",3600],["Africa/Maputo",7200],["Africa/Monrovia",0],["Africa/Nairobi",10800],["Africa/Ndjamena",3600],["Africa/Sao_Tome",0],["Africa/Tripoli",7200],["Africa/Tunis",3600],["Africa/Windhoek",7200],["America/Adak",-36e3],["America/Anchorage",-32400],["America/Araguaina",-10800],["America/Argentina/Buenos_Aires",-10800],["America/Argentina/Catamarca",-10800],["America/Argentina/Cordoba",-10800],["America/Argentina/Jujuy",-10800],["America/Argentina/La_Rioja",-10800],["America/Argentina/Mendoza",-10800],["America/Argentina/Rio_Gallegos",-10800],["America/Argentina/Salta",-10800],["America/Argentina/San_Juan",-10800],["America/Argentina/San_Luis",-10800],["America/Argentina/Tucuman",-10800],["America/Argentina/Ushuaia",-10800],["America/Asuncion",-14400],["America/Bahia",-10800],["America/Bahia_Banderas",-21600],["America/Barbados",-14400],["America/Belem",-10800],["America/Belize",-21600],["America/Boa_Vista",-14400],["America/Bogota",-18e3],["America/Boise",-25200],["America/Cambridge_Bay",-25200],["America/Campo_Grande",-14400],["America/Cancun",-18e3],["America/Caracas",-14400],["America/Cayenne",-10800],["America/Chicago",-21600],["America/Chihuahua",-21600],["America/Ciudad_Juarez",-25200],["America/Costa_Rica",-21600],["America/Cuiaba",-14400],["America/Danmarkshavn",0],["America/Dawson",-25200],["America/Dawson_Creek",-25200],["America/Denver",-25200],["America/Detroit",-18e3],["America/Edmonton",-25200],["America/Eirunepe",-18e3],["America/El_Salvador",-21600],["America/Fort_Nelson",-25200],["America/Fortaleza",-10800],["America/Glace_Bay",-14400],["America/Goose_Bay",-14400],["America/Grand_Turk",-18e3],["America/Guatemala",-21600],["America/Guayaquil",-18e3],["America/Guyana",-14400],["America/Halifax",-14400],["America/Havana",-18e3],["America/Hermosillo",-25200],["America/Indiana/Indianapolis",-18e3],["America/Indiana/Knox",-21600],["America/Indiana/Marengo",-18e3],["America/Indiana/Petersburg",-18e3],["America/Indiana/Tell_City",-21600],["America/Indiana/Vevay",-18e3],["America/Indiana/Vincennes",-18e3],["America/Indiana/Winamac",-18e3],["America/Inuvik",-25200],["America/Iqaluit",-18e3],["America/Jamaica",-18e3],["America/Juneau",-32400],["America/Kentucky/Louisville",-18e3],["America/Kentucky/Monticello",-18e3],["America/La_Paz",-14400],["America/Lima",-18e3],["America/Los_Angeles",-28800],["America/Maceio",-10800],["America/Managua",-21600],["America/Manaus",-14400],["America/Martinique",-14400],["America/Matamoros",-21600],["America/Mazatlan",-25200],["America/Menominee",-21600],["America/Merida",-21600],["America/Metlakatla",-32400],["America/Mexico_City",-21600],["America/Miquelon",-10800],["America/Moncton",-14400],["America/Monterrey",-21600],["America/Montevideo",-10800],["America/New_York",-18e3],["America/Nome",-32400],["America/Noronha",-7200],["America/North_Dakota/Beulah",-21600],["America/North_Dakota/Center",-21600],["America/North_Dakota/New_Salem",-21600],["America/Nuuk",-7200],["America/Ojinaga",-21600],["America/Panama",-18e3],["America/Paramaribo",-10800],["America/Phoenix",-25200],["America/Port-au-Prince",-18e3],["America/Porto_Velho",-14400],["America/Puerto_Rico",-14400],["America/Punta_Arenas",-10800],["America/Rankin_Inlet",-21600],["America/Recife",-10800],["America/Regina",-21600],["America/Resolute",-21600],["America/Rio_Branco",-18e3],["America/Santarem",-10800],["America/Santiago",-14400],["America/Santo_Domingo",-14400],["America/Sao_Paulo",-10800],["America/Scoresbysund",-7200],["America/Sitka",-32400],["America/St_Johns",-12600],["America/Swift_Current",-21600],["America/Tegucigalpa",-21600],["America/Thule",-14400],["America/Tijuana",-28800],["America/Toronto",-18e3],["America/Vancouver",-28800],["America/Whitehorse",-25200],["America/Winnipeg",-21600],["America/Yakutat",-32400],["Antarctica/Casey",28800],["Antarctica/Davis",25200],["Antarctica/Macquarie",36e3],["Antarctica/Mawson",18e3],["Antarctica/Palmer",-10800],["Antarctica/Rothera",-10800],["Antarctica/Troll",0],["Antarctica/Vostok",18e3],["Asia/Almaty",18e3],["Asia/Amman",10800],["Asia/Anadyr",43200],["Asia/Aqtau",18e3],["Asia/Aqtobe",18e3],["Asia/Ashgabat",18e3],["Asia/Atyrau",18e3],["Asia/Baghdad",10800],["Asia/Baku",14400],["Asia/Bangkok",25200],["Asia/Barnaul",25200],["Asia/Beirut",7200],["Asia/Bishkek",21600],["Asia/Chita",32400],["Asia/Colombo",19800],["Asia/Damascus",10800],["Asia/Dhaka",21600],["Asia/Dili",32400],["Asia/Dubai",14400],["Asia/Dushanbe",18e3],["Asia/Famagusta",7200],["Asia/Gaza",7200],["Asia/Hebron",7200],["Asia/Ho_Chi_Minh",25200],["Asia/Hong_Kong",28800],["Asia/Hovd",25200],["Asia/Irkutsk",28800],["Asia/Jakarta",25200],["Asia/Jayapura",32400],["Asia/Jerusalem",7200],["Asia/Kabul",16200],["Asia/Kamchatka",43200],["Asia/Karachi",18e3],["Asia/Kathmandu",20700],["Asia/Khandyga",32400],["Asia/Kolkata",19800],["Asia/Krasnoyarsk",25200],["Asia/Kuching",28800],["Asia/Macau",28800],["Asia/Magadan",39600],["Asia/Makassar",28800],["Asia/Manila",28800],["Asia/Nicosia",7200],["Asia/Novokuznetsk",25200],["Asia/Novosibirsk",25200],["Asia/Omsk",21600],["Asia/Oral",18e3],["Asia/Pontianak",25200],["Asia/Pyongyang",32400],["Asia/Qatar",10800],["Asia/Qostanay",18e3],["Asia/Qyzylorda",18e3],["Asia/Riyadh",10800],["Asia/Sakhalin",39600],["Asia/Samarkand",18e3],["Asia/Seoul",32400],["Asia/Shanghai",28800],["Asia/Singapore",28800],["Asia/Srednekolymsk",39600],["Asia/Taipei",28800],["Asia/Tashkent",18e3],["Asia/Tbilisi",14400],["Asia/Tehran",12600],["Asia/Thimphu",21600],["Asia/Tokyo",32400],["Asia/Tomsk",25200],["Asia/Ulaanbaatar",28800],["Asia/Urumqi",21600],["Asia/Ust-Nera",36e3],["Asia/Vladivostok",36e3],["Asia/Yakutsk",32400],["Asia/Yangon",23400],["Asia/Yekaterinburg",18e3],["Asia/Yerevan",14400],["Atlantic/Azores",-3600],["Atlantic/Bermuda",-14400],["Atlantic/Canary",0],["Atlantic/Cape_Verde",-3600],["Atlantic/Faroe",0],["Atlantic/Madeira",0],["Atlantic/South_Georgia",-7200],["Atlantic/Stanley",-10800],["Australia/Adelaide",34200],["Australia/Brisbane",36e3],["Australia/Broken_Hill",34200],["Australia/Darwin",34200],["Australia/Eucla",31500],["Australia/Hobart",36e3],["Australia/Lindeman",36e3],["Australia/Lord_Howe",37800],["Australia/Melbourne",36e3],["Australia/Perth",28800],["Australia/Sydney",36e3],["Etc/GMT",0],["Etc/GMT+1",-3600],["Etc/GMT+10",-36e3],["Etc/GMT+11",-39600],["Etc/GMT+12",-43200],["Etc/GMT+2",-7200],["Etc/GMT+3",-10800],["Etc/GMT+4",-14400],["Etc/GMT+5",-18e3],["Etc/GMT+6",-21600],["Etc/GMT+7",-25200],["Etc/GMT+8",-28800],["Etc/GMT+9",-32400],["Etc/GMT-1",3600],["Etc/GMT-10",36e3],["Etc/GMT-11",39600],["Etc/GMT-12",43200],["Etc/GMT-13",46800],["Etc/GMT-14",50400],["Etc/GMT-2",7200],["Etc/GMT-3",10800],["Etc/GMT-4",14400],["Etc/GMT-5",18e3],["Etc/GMT-6",21600],["Etc/GMT-7",25200],["Etc/GMT-8",28800],["Etc/GMT-9",32400],["Etc/UTC",0],["Europe/Andorra",3600],["Europe/Astrakhan",14400],["Europe/Athens",7200],["Europe/Belgrade",3600],["Europe/Berlin",3600],["Europe/Brussels",3600],["Europe/Bucharest",7200],["Europe/Budapest",3600],["Europe/Chisinau",7200],["Europe/Dublin",3600],["Europe/Gibraltar",3600],["Europe/Helsinki",7200],["Europe/Istanbul",10800],["Europe/Kaliningrad",7200],["Europe/Kirov",10800],["Europe/Kyiv",7200],["Europe/Lisbon",0],["Europe/London",0],["Europe/Madrid",3600],["Europe/Malta",3600],["Europe/Minsk",10800],["Europe/Moscow",10800],["Europe/Paris",3600],["Europe/Prague",3600],["Europe/Riga",7200],["Europe/Rome",3600],["Europe/Samara",14400],["Europe/Saratov",14400],["Europe/Simferopol",10800],["Europe/Sofia",7200],["Europe/Tallinn",7200],["Europe/Tirane",3600],["Europe/Ulyanovsk",14400],["Europe/Vienna",3600],["Europe/Vilnius",7200],["Europe/Volgograd",10800],["Europe/Warsaw",3600],["Europe/Zurich",3600],["Indian/Chagos",21600],["Indian/Maldives",18e3],["Indian/Mauritius",14400],["Pacific/Apia",46800],["Pacific/Auckland",43200],["Pacific/Bougainville",39600],["Pacific/Chatham",45900],["Pacific/Easter",-21600],["Pacific/Efate",39600],["Pacific/Fakaofo",46800],["Pacific/Fiji",43200],["Pacific/Galapagos",-21600],["Pacific/Gambier",-32400],["Pacific/Guadalcanal",39600],["Pacific/Guam",36e3],["Pacific/Honolulu",-36e3],["Pacific/Kanton",46800],["Pacific/Kiritimati",50400],["Pacific/Kosrae",39600],["Pacific/Kwajalein",43200],["Pacific/Marquesas",-34200],["Pacific/Nauru",43200],["Pacific/Niue",-39600],["Pacific/Norfolk",39600],["Pacific/Noumea",39600],["Pacific/Pago_Pago",-39600],["Pacific/Palau",32400],["Pacific/Pitcairn",-28800],["Pacific/Port_Moresby",36e3],["Pacific/Rarotonga",-36e3],["Pacific/Tahiti",-36e3],["Pacific/Tarawa",43200],["Pacific/Tongatapu",46800]]);function Na(){return Date.now()*1e3}function Ma(){return-new Date().getTimezoneOffset()}function Ia(){return new $(Intl.DateTimeFormat().resolvedOptions().timeZone)}function Da(){return Math.floor(globalThis.performance.now()*1e3)}function Ua(e,t){let n=new Date((e+t)/1e3);return[[n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate()],[n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds()]]}var Gi=class extends d{constructor(t,n,r,i){super(),this.wall_time=t,this.offset=n,this.timezone=r,this.monotonic_time=i}};function Wa(e){{let t=e.wall_time;return ln(t,1e3)}}function Ga(e){return new Gi(e*1e3,0,new h,new h)}function Ra(e,t){let n=e.wall_time,r=e.monotonic_time,i=t.wall_time,s=t.monotonic_time,l;if(r instanceof $&&s instanceof $){let m=r[0],g=s[0];l=[m,g]}else l=[n,i];let a=l,u=a[0],c=a[1],p=u===c,f=u<c;return p?new ie:f?new J:new te}function fp(e){return Je(e===0,new b("Z"),()=>{let t=(()=>{let n=o([[e,new Kn]]),r=Ca(n);return Ba(r)})();if(t.hasLength(2)&&t.head[1]instanceof mn&&t.tail.head[1]instanceof Vn){let n=t.head[0],r=t.tail.head[0],i=o([n>0?St(o(["+",(()=>{let u=H(n);return zt(u,2,"0")})()])):St(o(["-",(()=>{let u=_n(n),c=H(u);return zt(c,2,"0")})()])),(()=>{let a=_n(r),u=H(a);return zt(u,2,"0")})()]),s=Ee(i,":");return new b(s)}else if(t.hasLength(1)&&t.head[1]instanceof mn){let n=t.head[0],r=o([n>0?St(o(["+",(()=>{let a=H(n);return zt(a,2,"0")})()])):St(o(["-",(()=>{let a=_n(n),u=H(a);return zt(u,2,"0")})()])),"00"]),i=Ee(r,":");return new b(i)}else return new y(void 0)})}function pp(e){{let t=e.wall_time,n=e.offset,r=Ua(t,n),i=r[0],s=r[1],l=fp(n);if(!l.isOk())throw I("let_assert","birl",1324,"to_parts","Pattern match failed, no pattern matched the value.",{value:l});let a=l[0];return[i,s,a]}}function Ha(e){let t=pp(e),n=t[0][0],r=t[0][1],i=t[0][2];return H(n)+"-"+(()=>{let l=H(r);return zt(l,2,"0")})()+"-"+(()=>{let l=H(i);return zt(l,2,"0")})()}function Ja(){let e=Na(),t=Ma(),n=Da(),r=Ia();return new Gi(e,t*6e7,(()=>{let i=vr(r,s=>Lr(Pa,a=>a[0]===s)?new $(s):new h);return Ko(i)})(),new $(n))}var B=class extends d{constructor(t,n,r,i,s,l,a){super(),this.scheme=t,this.userinfo=n,this.host=r,this.port=i,this.path=s,this.query=l,this.fragment=a}};function $p(e){return 48>=e&&e<=57||65>=e&&e<=90||97>=e&&e<=122||e===58||e===46}function nt(e,t){return new b((()=>{let n=t;return new B(n.scheme,n.userinfo,n.host,n.port,n.path,n.query,new $(e))})())}function hp(e,t,n,r){for(;;){let i=e,s=t,l=n,a=r;if(s.startsWith("#")&&a===0){let u=s.slice(1);return nt(u,l)}else if(s.startsWith("#")){let u=s.slice(1),c=ue(i,0,a),p,f=l;return p=new B(f.scheme,f.userinfo,f.host,f.port,f.path,new $(c),f.fragment),nt(u,p)}else{if(s==="")return new b((()=>{let u=l;return new B(u.scheme,u.userinfo,u.host,u.port,u.path,new $(i),u.fragment)})());{let c=hn(s)[1];e=i,t=c,n=l,r=a+1}}}}function qt(e,t){return hp(e,e,t,0)}function mp(e,t,n,r){for(;;){let i=e,s=t,l=n,a=r;if(s.startsWith("?")){let u=s.slice(1),c=ue(i,0,a),p,f=l;return p=new B(f.scheme,f.userinfo,f.host,f.port,c,f.query,f.fragment),qt(u,p)}else if(s.startsWith("#")){let u=s.slice(1),c=ue(i,0,a),p,f=l;return p=new B(f.scheme,f.userinfo,f.host,f.port,c,f.query,f.fragment),nt(u,p)}else{if(s==="")return new b((()=>{let u=l;return new B(u.scheme,u.userinfo,u.host,u.port,i,u.query,u.fragment)})());{let c=hn(s)[1];e=i,t=c,n=l,r=a+1}}}}function Zn(e,t){return mp(e,e,t,0)}function tt(e,t,n){for(;;){let r=e,i=t,s=n;if(r.startsWith("0"))e=r.slice(1),t=i,n=s*10;else if(r.startsWith("1"))e=r.slice(1),t=i,n=s*10+1;else if(r.startsWith("2"))e=r.slice(1),t=i,n=s*10+2;else if(r.startsWith("3"))e=r.slice(1),t=i,n=s*10+3;else if(r.startsWith("4"))e=r.slice(1),t=i,n=s*10+4;else if(r.startsWith("5"))e=r.slice(1),t=i,n=s*10+5;else if(r.startsWith("6"))e=r.slice(1),t=i,n=s*10+6;else if(r.startsWith("7"))e=r.slice(1),t=i,n=s*10+7;else if(r.startsWith("8"))e=r.slice(1),t=i,n=s*10+8;else if(r.startsWith("9"))e=r.slice(1),t=i,n=s*10+9;else if(r.startsWith("?")){let l=r.slice(1),a,u=i;return a=new B(u.scheme,u.userinfo,u.host,new $(s),u.path,u.query,u.fragment),qt(l,a)}else if(r.startsWith("#")){let l=r.slice(1),a,u=i;return a=new B(u.scheme,u.userinfo,u.host,new $(s),u.path,u.query,u.fragment),nt(l,a)}else if(r.startsWith("/")){let l,a=i;return l=new B(a.scheme,a.userinfo,a.host,new $(s),a.path,a.query,a.fragment),Zn(r,l)}else return r===""?new b((()=>{let l=i;return new B(l.scheme,l.userinfo,l.host,new $(s),l.path,l.query,l.fragment)})()):new y(void 0)}}function Ri(e,t){if(e.startsWith(":0")){let n=e.slice(2);return tt(n,t,0)}else if(e.startsWith(":1")){let n=e.slice(2);return tt(n,t,1)}else if(e.startsWith(":2")){let n=e.slice(2);return tt(n,t,2)}else if(e.startsWith(":3")){let n=e.slice(2);return tt(n,t,3)}else if(e.startsWith(":4")){let n=e.slice(2);return tt(n,t,4)}else if(e.startsWith(":5")){let n=e.slice(2);return tt(n,t,5)}else if(e.startsWith(":6")){let n=e.slice(2);return tt(n,t,6)}else if(e.startsWith(":7")){let n=e.slice(2);return tt(n,t,7)}else if(e.startsWith(":8")){let n=e.slice(2);return tt(n,t,8)}else if(e.startsWith(":9")){let n=e.slice(2);return tt(n,t,9)}else{if(e.startsWith(":"))return new y(void 0);if(e.startsWith("?")){let n=e.slice(1);return qt(n,t)}else if(e.startsWith("#")){let n=e.slice(1);return nt(n,t)}else return e.startsWith("/")?Zn(e,t):e===""?new b(t):new y(void 0)}}function Va(e,t,n,r){for(;;){let i=e,s=t,l=n,a=r;if(s==="")return new b((()=>{let u=l;return new B(u.scheme,u.userinfo,new $(i),u.port,u.path,u.query,u.fragment)})());if(s.startsWith(":")){let u=ue(i,0,a),c,p=l;return c=new B(p.scheme,p.userinfo,new $(u),p.port,p.path,p.query,p.fragment),Ri(s,c)}else if(s.startsWith("/")){let u=ue(i,0,a),c,p=l;return c=new B(p.scheme,p.userinfo,new $(u),p.port,p.path,p.query,p.fragment),Zn(s,c)}else if(s.startsWith("?")){let u=s.slice(1),c=ue(i,0,a),p,f=l;return p=new B(f.scheme,f.userinfo,new $(c),f.port,f.path,f.query,f.fragment),qt(u,p)}else if(s.startsWith("#")){let u=s.slice(1),c=ue(i,0,a),p,f=l;return p=new B(f.scheme,f.userinfo,new $(c),f.port,f.path,f.query,f.fragment),nt(u,p)}else{let c=hn(s)[1];e=i,t=c,n=l,r=a+1}}}function wp(e,t,n,r){for(;;){let i=e,s=t,l=n,a=r;if(s==="")return new b((()=>{let u=l;return new B(u.scheme,u.userinfo,new $(s),u.port,u.path,u.query,u.fragment)})());if(s.startsWith("]")&&a===0){let u=s.slice(1);return Ri(u,l)}else if(s.startsWith("]")){let u=s.slice(1),c=ue(i,0,a+1),p,f=l;return p=new B(f.scheme,f.userinfo,new $(c),f.port,f.path,f.query,f.fragment),Ri(u,p)}else{if(s.startsWith("/")&&a===0)return Zn(s,l);if(s.startsWith("/")){let u=ue(i,0,a),c,p=l;return c=new B(p.scheme,p.userinfo,new $(u),p.port,p.path,p.query,p.fragment),Zn(s,c)}else if(s.startsWith("?")&&a===0){let u=s.slice(1);return qt(u,l)}else if(s.startsWith("?")){let u=s.slice(1),c=ue(i,0,a),p,f=l;return p=new B(f.scheme,f.userinfo,new $(c),f.port,f.path,f.query,f.fragment),qt(u,p)}else if(s.startsWith("#")&&a===0){let u=s.slice(1);return nt(u,l)}else if(s.startsWith("#")){let u=s.slice(1),c=ue(i,0,a),p,f=l;return p=new B(f.scheme,f.userinfo,new $(c),f.port,f.path,f.query,f.fragment),nt(u,p)}else{let u=hn(s),c=u[0],p=u[1];if($p(c))e=i,t=p,n=l,r=a+1;else return Va(i,i,l,0)}}}}function gp(e,t){return wp(e,e,t,0)}function xp(e,t){return Va(e,e,t,0)}function Yn(e,t){if(e.startsWith("["))return gp(e,t);if(e.startsWith(":")){let n,r=t;return n=new B(r.scheme,r.userinfo,new $(""),r.port,r.path,r.query,r.fragment),Ri(e,n)}else return e===""?new b((()=>{let n=t;return new B(n.scheme,n.userinfo,new $(""),n.port,n.path,n.query,n.fragment)})()):xp(e,t)}function bp(e,t,n,r){for(;;){let i=e,s=t,l=n,a=r;if(s.startsWith("@")&&a===0){let u=s.slice(1);return Yn(u,l)}else if(s.startsWith("@")){let u=s.slice(1),c=ue(i,0,a),p,f=l;return p=new B(f.scheme,new $(c),f.host,f.port,f.path,f.query,f.fragment),Yn(u,p)}else{if(s==="")return Yn(i,l);if(s.startsWith("/"))return Yn(i,l);if(s.startsWith("?"))return Yn(i,l);if(s.startsWith("#"))return Yn(i,l);{let c=hn(s)[1];e=i,t=c,n=l,r=a+1}}}}function yp(e,t){return bp(e,e,t,0)}function Ql(e,t){if(e==="//")return new b((()=>{let n=t;return new B(n.scheme,n.userinfo,new $(""),n.port,n.path,n.query,n.fragment)})());if(e.startsWith("//")){let n=e.slice(2);return yp(n,t)}else return Zn(e,t)}function kp(e,t,n,r){for(;;){let i=e,s=t,l=n,a=r;if(s.startsWith("/")&&a===0)return Ql(s,l);if(s.startsWith("/")){let u=ue(i,0,a),c,p=l;return c=new B(new $(ke(u)),p.userinfo,p.host,p.port,p.path,p.query,p.fragment),Ql(s,c)}else if(s.startsWith("?")&&a===0){let u=s.slice(1);return qt(u,l)}else if(s.startsWith("?")){let u=s.slice(1),c=ue(i,0,a),p,f=l;return p=new B(new $(ke(c)),f.userinfo,f.host,f.port,f.path,f.query,f.fragment),qt(u,p)}else if(s.startsWith("#")&&a===0){let u=s.slice(1);return nt(u,l)}else if(s.startsWith("#")){let u=s.slice(1),c=ue(i,0,a),p,f=l;return p=new B(new $(ke(c)),f.userinfo,f.host,f.port,f.path,f.query,f.fragment),nt(u,p)}else{if(s.startsWith(":")&&a===0)return new y(void 0);if(s.startsWith(":")){let u=s.slice(1),c=ue(i,0,a),p,f=l;return p=new B(new $(ke(c)),f.userinfo,f.host,f.port,f.path,f.query,f.fragment),Ql(u,p)}else{if(s==="")return new b((()=>{let u=l;return new B(u.scheme,u.userinfo,u.host,u.port,i,u.query,u.fragment)})());{let c=hn(s)[1];e=i,t=c,n=l,r=a+1}}}}}function vp(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return T(r);{let i=n.head,s=n.tail,l;i===""||i==="."?l=r:i===".."&&r.hasLength(0)?l=o([]):i===".."&&r.atLeastLength(1)?l=r.tail:l=w(i,r);let a=l;e=s,t=a}}}function Lp(e){return vp(e,o([]))}function Nr(e){return Lp(cn(e,"/"))}function pe(e){let t,n=e.fragment;if(n instanceof $){let O=n[0];t=o(["#",O])}else t=o([]);let r=t,i,s=e.query;if(s instanceof $){let O=s[0];i=w("?",w(O,r))}else i=r;let l=i,a=w(e.path,l),u,c=e.host,p=pn(e.path,"/");if(c instanceof $&&!p&&c[0]!==""){let O=c[0];u=w("/",a)}else u=a;let f=u,m,g=e.host,k=e.port;if(g instanceof $&&k instanceof $){let O=k[0];m=w(":",w(H(O),f))}else m=f;let C=m,L,U=e.scheme,M=e.userinfo,S=e.host;if(U instanceof $&&M instanceof $&&S instanceof $){let O=U[0],V=M[0],tn=S[0];L=w(O,w("://",w(V,w("@",w(tn,C)))))}else if(U instanceof $&&M instanceof h&&S instanceof $){let O=U[0],V=S[0];L=w(O,w("://",w(V,C)))}else if(U instanceof $&&M instanceof $&&S instanceof h){let O=U[0];L=w(O,w(":",C))}else if(U instanceof $&&M instanceof h&&S instanceof h){let O=U[0];L=w(O,w(":",C))}else if(U instanceof h&&M instanceof h&&S instanceof $){let O=S[0];L=w("//",w(O,C))}else L=C;return St(L)}var Ap=new B(new h,new h,new h,new h,"",new h,new h);function ne(e){return kp(e,e,Ap,0)}function Xl(e,t){if(e instanceof xe||e instanceof WeakMap||e instanceof Map){let r={},i=e.get(t,r);return i===r?new b(new h):new b(new $(i))}let n=Number.isInteger(t);if(n&&t>=0&&t<8&&e instanceof R){let r=0;for(let i of e){if(r===t)return new b(new $(i));r++}return new y("Indexable")}return n&&Array.isArray(e)||e&&typeof e=="object"||e&&Object.getPrototypeOf(e)===Object.prototype?t in e?new b(new $(e[t])):new b(new h):new y(n?"Indexable":"Dict")}function Ya(e,t,n,r,i){if(!(e instanceof R||Array.isArray(e))){let l=new rt("List",ve(e),i);return[i,R.fromArray([l])]}let s=[];for(let l of e){let a=t(l),[u,c]=a;if(c instanceof nn){let[p,f]=n(a,r.toString());return[i,f]}s.push(u),r++}return[R.fromArray(s),i]}function Za(e){return Number.isInteger(e)?new b(e):new y(0)}function Qa(e){return typeof e=="string"?new b(e):new y("")}var rt=class extends d{constructor(t,n,r){super(),this.expected=t,this.found=n,this.path=r}},Pe=class extends d{constructor(t){super(),this.function=t}};function Ir(e,t){let n=t.function(e),r=n[0],i=n[1];return i.hasLength(0)?new b(r):new y(i)}function Me(e){return new Pe(t=>[e,o([])])}function to(e,t){return new Pe(n=>{let r=e.function(n),i=r[0],s=r[1];return[t(i),s]})}function Xa(e,t){return new Pe(n=>{let r=e.function(n),i=r[0],s=r[1],a=t(i).function(n),u=a,c=a[0];return s.hasLength(0)?u:[c,s]})}function jp(e,t,n){for(;;){let r=e,i=t,s=n;if(s.hasLength(0))return i;{let l=s.head,a=s.tail,u=l.function(r),c=u;if(u[1].hasLength(0))return c;e=r,t=i,n=a}}}function Ji(e,t){return new Pe(n=>{let r=e.function(n),i=r;return r[1].hasLength(0)?i:jp(n,i,t)})}function Op(e,t){return o([new rt(e,ve(t),o([]))])}function eu(e,t,n){let r=n(e);return r.isOk()?[r[0],o([])]:[r[0],o([new rt(t,ve(e),o([]))])]}function Sp(e){return eu(e,"Int",Za)}function tu(e,t){return new Pe(n=>[e,Op(t,n)])}var bt=new Pe(Sp);function zp(e){return eu(e,"String",Qa)}var Ae=new Pe(zp);function wn(e){return new Pe(t=>Ya(t,e.function,(n,r)=>Mr(n,o([r])),0,o([])))}function Mr(e,t){let n=Ji(Ae,o([to(bt,H)])),r=P(t,s=>{let l=s,a=Ir(l,n);return a.isOk()?a[0]:"<"+ve(l)+">"}),i=P(e[1],s=>{let l=s;return new rt(l.expected,l.found,K(r,s.path))});return[e[0],i]}function Ep(e,t,n,r,i){for(;;){let s=e,l=t,a=n,u=r,c=i;if(s.hasLength(0)){let p=a(u);return Mr(p,T(l))}else{let p=s.head,f=s.tail,m=Xl(u,p);if(m.isOk()&&m[0]instanceof $){let g=m[0][0];e=f,t=w(p,l),n=a,r=g,i=c}else{if(m.isOk()&&m[0]instanceof h)return c(u,w(p,l));{let g=m[0],L=[a(u)[0],o([new rt(g,ve(u),o([]))])];return Mr(L,T(l))}}}}}function Tp(e,t,n){return new Pe(r=>{let i=Ep(e,o([]),t.function,r,(p,f)=>{let k=[t.function(p)[0],o([new rt("Field","Nothing",o([]))])];return Mr(k,T(f))}),s=i[0],l=i[1],a=n(s).function(r),u=a[0],c=a[1];return[u,K(l,c)]})}function le(e,t,n){return Tp(o([e]),t,n)}function no(e,t,n,r){return new Pe(i=>{let s,l=Xl(i,e);if(l.isOk()&&l[0]instanceof $){let C=l[0][0];s=n.function(C)}else if(l.isOk()&&l[0]instanceof h)s=[t,o([])];else{let C=l[0];s=[t,o([new rt(C,ve(i),o([]))])]}let a;a=Mr(s,o([e]));let c=a,p=c[0],f=c[1],m=r(p).function(i),g=m[0],k=m[1];return[g,K(f,k)]})}function ro(e){return JSON.stringify(e)}function nu(e){return Object.fromEntries(e)}function ru(e){return e.toArray()}function iu(e){try{let t=JSON.parse(e);return new b(t)}catch(t){return new y(Cp(t,e))}}function Cp(e,t){return Bp(e)?new Qn:Pp(e,t)}function Bp(e){return/((unexpected (end|eof))|(end of data)|(unterminated string)|(json( parse error|\.parse)\: expected '(\:|\}|\])'))/i.test(e.message)}function Pp(e,t){let n=[Np,Mp,Dp,Ip];for(let r of n){let i=r(e,t);if(i)return i}return new it("",0)}function Np(e){let n=/unexpected token '(.)', ".+" is not valid JSON/i.exec(e.message);if(!n)return null;let r=Vi(n[1]);return new it(r,-1)}function Mp(e){let n=/unexpected token (.) in JSON at position (\d+)/i.exec(e.message);if(!n)return null;let r=Vi(n[1]),i=Number(n[2]);return new it(r,i)}function Ip(e,t){let r=/(unexpected character|expected .*) at line (\d+) column (\d+)/i.exec(e.message);if(!r)return null;let i=Number(r[2]),s=Number(r[3]),l=Up(i,s,t),a=Vi(t[l]);return new it(a,l)}function Dp(e){let n=/unexpected (identifier|token) "(.)"/i.exec(e.message);if(!n)return null;let r=Vi(n[2]);return new it(r,0)}function Vi(e){return"0x"+e.charCodeAt(0).toString(16).toUpperCase()}function Up(e,t,n){if(e===1)return t-1;let r=1,i=0;return n.split("").find((s,l)=>(s===`
`&&(r+=1),r===e?(i=l+t,!0):!1)),i}var Qn=class extends d{},it=class extends d{constructor(t){super(),this[0]=t}},Yi=class extends d{constructor(t){super(),this[0]=t}},Zi=class extends d{constructor(t){super(),this[0]=t}},io=class extends d{constructor(t){super(),this[0]=t}};function Fp(e,t){return Te(iu(e),n=>{let r=Ir(n,t);return Mi(r,i=>new io(i))})}function su(e,t){return Fp(e,t)}function Ct(e){return ro(e)}function $e(e){return e}function st(e){return e}function Bt(e){return nu(e)}function lo(e){return ru(e)}function Dr(e,t){let r=P(e,t);return lo(r)}var Ur=class extends d{constructor(t){super(),this.all=t}};function lu(e){return new Ur(o([t=>e(t.dispatch,t.emit,t.select,t.root)]))}function xn(e){return lu((t,n,r,i)=>e(t))}function z(){return new Ur(o([]))}function bn(e){return new Ur(ye(e,o([]),(t,n)=>{let r=n.all;return K(t,r)}))}var kn=class extends d{constructor(t){super(),this.content=t}},re=class extends d{constructor(t,n,r,i,s,l,a){super(),this.key=t,this.namespace=n,this.tag=r,this.attrs=i,this.children=s,this.self_closing=l,this.void=a}},Fr=class extends d{constructor(t){super(),this.subtree=t}},vn=class extends d{constructor(t,n,r){super(),this[0]=t,this[1]=n,this.as_property=r}},Wr=class extends d{constructor(t,n){super(),this[0]=t,this[1]=n}};function Rp(e){if(e instanceof vn)return new y(void 0);{let t=e[0],n=e[1],r=qi(t,2);return new b([r,n])}}function Hp(e,t,n){return Ll(e,t,(r,i,s)=>{let l=n+"-"+H(s);return ou(i,r,l)})}function ou(e,t,n){for(;;){let r=e,i=t,s=n;if(r instanceof kn)return i;if(r instanceof Fr){let l=r.subtree;e=l(),t=i,n=s}else{let l=r.attrs,a=r.children,u=ye(l,i,(c,p)=>{let f=Rp(p);if(f.isOk()){let m=f[0][0],g=f[0][1];return ze(c,s+"-"+m,g)}else return c});return Hp(a,u,s)}}}function au(e){return ou(e,F(),"0")}function A(e,t){return new vn(e,t,!1)}function Jp(e,t){return new vn(e,t,!0)}function cu(e,t){return new Wr("on"+e,t)}function _(e){return A("class",e)}function Gr(e){return A("class",(()=>{let n=an(e,r=>r[1]?new b(r[0]):new y(void 0));return Ee(n," ")})())}function Pt(e){return A("id",e)}function Xn(e){return A("value",e)}function Qi(e){return A("placeholder",e)}function oo(e){return Jp("disabled",e)}function Nt(e){return A("href",e)}function fu(e){return A("src",e)}function pu(e){return A("alt",e)}function D(e,t,n){return e==="area"?new re("","",e,t,o([]),!1,!0):e==="base"?new re("","",e,t,o([]),!1,!0):e==="br"?new re("","",e,t,o([]),!1,!0):e==="col"?new re("","",e,t,o([]),!1,!0):e==="embed"?new re("","",e,t,o([]),!1,!0):e==="hr"?new re("","",e,t,o([]),!1,!0):e==="img"?new re("","",e,t,o([]),!1,!0):e==="input"?new re("","",e,t,o([]),!1,!0):e==="link"?new re("","",e,t,o([]),!1,!0):e==="meta"?new re("","",e,t,o([]),!1,!0):e==="param"?new re("","",e,t,o([]),!1,!0):e==="source"?new re("","",e,t,o([]),!1,!0):e==="track"?new re("","",e,t,o([]),!1,!0):e==="wbr"?new re("","",e,t,o([]),!1,!0):new re("","",e,t,n,!1,!1)}function Hr(e,t,n,r){return new re("",e,t,n,r,!1,!1)}function Jr(e){return new kn(e)}function lt(){return new kn("")}var ao=class extends d{constructor(t){super(),this.dict=t}};function du(){return new ao(F())}var es=class extends d{constructor(t){super(),this[0]=t}},ts=class extends d{constructor(t,n){super(),this[0]=t,this[1]=n}},ns=class extends d{constructor(t,n){super(),this[0]=t,this[1]=n}};function _u(e){return q(e.created,F())&&q(e.removed,du())&&q(e.updated,F())}var rs=class extends d{constructor(t){super(),this[0]=t}},is=class extends d{constructor(t,n){super(),this[0]=t,this[1]=n}},Kr=class extends d{constructor(t){super(),this[0]=t}},ot=class extends d{constructor(t){super(),this[0]=t}},Vr=class extends d{constructor(t,n){super(),this[0]=t,this[1]=n}},ss=class extends d{constructor(t,n){super(),this[0]=t,this[1]=n}};var Yr=class extends d{},ls=class extends d{constructor(t,n){super(),this[0]=t,this[1]=n}},os=class extends d{constructor(t){super(),this[0]=t}},as=class extends d{constructor(t){super(),this[0]=t}};globalThis.customElements&&!globalThis.customElements.get("lustre-fragment")&&globalThis.customElements.define("lustre-fragment",class extends HTMLElement{constructor(){super()}});function uo(e,t,n){let r,i=[{prev:e,next:t,parent:e.parentNode}];for(;i.length;){let{prev:s,next:l,parent:a}=i.pop();for(;l.subtree!==void 0;)l=l.subtree();if(l.content!==void 0)if(s)if(s.nodeType===Node.TEXT_NODE)s.textContent!==l.content&&(s.textContent=l.content),r??=s;else{let u=document.createTextNode(l.content);a.replaceChild(u,s),r??=u}else{let u=document.createTextNode(l.content);a.appendChild(u),r??=u}else if(l.tag!==void 0){let u=Qp({prev:s,next:l,dispatch:n,stack:i});s?s!==u&&a.replaceChild(u,s):a.appendChild(u),r??=u}}return r}function Qp({prev:e,next:t,dispatch:n,stack:r}){let i=t.namespace||"http://www.w3.org/1999/xhtml",s=e&&e.nodeType===Node.ELEMENT_NODE&&e.localName===t.tag&&e.namespaceURI===(t.namespace||"http://www.w3.org/1999/xhtml"),l=s?e:i?document.createElementNS(i,t.tag):document.createElement(t.tag),a;if(Zr.has(l))a=Zr.get(l);else{let S=new Map;Zr.set(l,S),a=S}let u=s?new Set(a.keys()):null,c=s?new Set(Array.from(e.attributes,S=>S.name)):null,p=null,f=null,m=null;if(s&&t.tag==="textarea"){let S=t.children[Symbol.iterator]().next().value?.content;S!==void 0&&(l.value=S)}let g=[];for(let S of t.attrs){let E=S[0],O=S[1];if(S.as_property)l[E]!==O&&(l[E]=O),s&&c.delete(E);else if(E.startsWith("on")){let V=E.slice(2),tn=n(O,V==="input");a.has(V)||l.addEventListener(V,Qr),a.set(V,tn),s&&u.delete(V)}else if(E.startsWith("data-lustre-on-")){let V=E.slice(15),tn=n(Xp);a.has(V)||l.addEventListener(V,Qr),a.set(V,tn),l.setAttribute(E,O),s&&(u.delete(V),c.delete(E))}else E.startsWith("delegate:data-")||E.startsWith("delegate:aria-")?(l.setAttribute(E,O),g.push([E.slice(10),O])):E==="class"?p=p===null?O:p+" "+O:E==="style"?f=f===null?O:f+O:E==="dangerous-unescaped-html"?m=O:(l.getAttribute(E)!==O&&l.setAttribute(E,O),(E==="value"||E==="selected")&&(l[E]=O),s&&c.delete(E))}if(p!==null&&(l.setAttribute("class",p),s&&c.delete("class")),f!==null&&(l.setAttribute("style",f),s&&c.delete("style")),s){for(let S of c)l.removeAttribute(S);for(let S of u)a.delete(S),l.removeEventListener(S,Qr)}if(t.tag==="slot"&&window.queueMicrotask(()=>{for(let S of l.assignedElements())for(let[E,O]of g)S.hasAttribute(E)||S.setAttribute(E,O)}),t.key!==void 0&&t.key!=="")l.setAttribute("data-lustre-key",t.key);else if(m!==null)return l.innerHTML=m,l;let k=l.firstChild,C=null,L=null,U=null,M=us(t).next().value;if(s&&M!==void 0&&M.key!==void 0&&M.key!==""){C=new Set,L=$u(e),U=$u(t);for(let S of us(t))k=ed(k,S,l,r,U,L,C)}else for(let S of us(t))r.unshift({prev:k,next:S,parent:l}),k=k?.nextSibling;for(;k;){let S=k.nextSibling;l.removeChild(k),k=S}return l}var Zr=new WeakMap;function Qr(e){let t=e.currentTarget;if(!Zr.has(t)){t.removeEventListener(e.type,Qr);return}let n=Zr.get(t);if(!n.has(e.type)){t.removeEventListener(e.type,Qr);return}n.get(e.type)(e)}function Xp(e){let t=e.currentTarget,n=t.getAttribute(`data-lustre-on-${e.type}`),r=JSON.parse(t.getAttribute("data-lustre-data")||"{}"),i=JSON.parse(t.getAttribute("data-lustre-include")||"[]");switch(e.type){case"input":case"change":i.push("target.value");break}return{tag:n,data:i.reduce((s,l)=>{let a=l.split(".");for(let u=0,c=s,p=e;u<a.length;u++)u===a.length-1?c[a[u]]=p[a[u]]:(c[a[u]]??={},p=p[a[u]],c=c[a[u]]);return s},{data:r})}}function $u(e){let t=new Map;if(e)for(let n of us(e)){let r=n?.key||n?.getAttribute?.("data-lustre-key");r&&t.set(r,n)}return t}function ed(e,t,n,r,i,s,l){for(;e&&!i.has(e.getAttribute("data-lustre-key"));){let u=e.nextSibling;n.removeChild(e),e=u}if(s.size===0)return r.unshift({prev:e,next:t,parent:n}),e=e?.nextSibling,e;if(l.has(t.key))return console.warn(`Duplicate key found in Lustre vnode: ${t.key}`),r.unshift({prev:null,next:t,parent:n}),e;l.add(t.key);let a=s.get(t.key);if(!a&&!e)return r.unshift({prev:null,next:t,parent:n}),e;if(!a&&e!==null){let u=document.createTextNode("");return n.insertBefore(u,e),r.unshift({prev:u,next:t,parent:n}),e}return!a||a===e?(r.unshift({prev:e,next:t,parent:n}),e=e?.nextSibling,e):(n.insertBefore(a,e),r.unshift({prev:a,next:t,parent:n}),e)}function*us(e){for(let t of e.children)yield*hu(t)}function*hu(e){e.subtree!==void 0?yield*hu(e.subtree()):yield e}var co=class e{static start({init:t,update:n,view:r},i,s){if(!er())return new y(new Xr);let l=i instanceof HTMLElement?i:document.querySelector(i);if(!l)return new y(new cs(i));let a=new e(l,t(s),n,r);return new b(u=>a.send(u))}constructor(t,[n,r],i,s){this.root=t,this.#e=n,this.#s=i,this.#n=s,this.#t=window.setTimeout(()=>this.#r(r.all.toArray(),!0),0)}root;send(t){if(t instanceof Kr){if(t[0]instanceof as){this.#t=window.clearTimeout(this.#t),this.#i=[],this.#e=t[0][0];let n=this.#n(this.#e),r=(s,l=!1)=>a=>{let u=s(a);u instanceof b&&this.send(new ot(u[0],l))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));uo(i,n,r)}}else if(t instanceof ot){let n=t[0],r=t[1]??!1;this.#i.push(n),r?(this.#t=window.clearTimeout(this.#t),this.#r()):this.#t||(this.#t=window.setTimeout(()=>this.#r()))}else if(t instanceof Vr){let n=t[0],r=t[1];this.root.dispatchEvent(new CustomEvent(n,{detail:r,bubbles:!0,composed:!0}))}else if(t instanceof Yr)for(this.#t=window.clearTimeout(this.#t),this.#e=null,this.#s=null,this.#n=null,this.#i=null;this.root.firstChild;)this.root.firstChild.remove()}#e;#s;#n;#i=[];#t;#r(t=[]){this.#t=void 0,this.#l(t);let n=this.#n(this.#e),r=(s,l=!1)=>a=>{let u=s(a);u instanceof b&&this.send(new ot(u[0],l))},i=this.root.firstChild??this.root.appendChild(document.createTextNode(""));uo(i,n,r)}#l(t=[]){for(;this.#i.length>0;){let n=this.#i.shift(),[r,i]=this.#s(this.#e,n);t=t.concat(i.all.toArray()),this.#e=r}for(;t.length>0;){let n=t.shift(),r=a=>this.send(new ot(a)),i=(a,u)=>this.root.dispatchEvent(new CustomEvent(a,{detail:u,bubbles:!0,composed:!0})),s=()=>{},l=this.root;n({dispatch:r,emit:i,select:s,root:l})}this.#i.length>0&&this.#l(t)}},mu=co.start;var fo=class e{static start({init:t,update:n,view:r,on_attribute_change:i},s){let l=new e(t(s),n,r,i);return new b(a=>l.send(a))}constructor([t,n],r,i,s){this.#e=t,this.#s=r,this.#i=i,this.#t=i(t),this.#a=s,this.#r=new Map,this.#l=au(this.#t),this.#o(n.all.toArray())}send(t){if(t instanceof rs){for(let n of t[0]){let r=this.#a.get(n[0]);if(!r)continue;let i=r(n[1]);i instanceof y||this.#n.push(i)}this.#o()}else if(t instanceof is)this.#n=this.#n.concat(t[0].toArray()),this.#o(t[1].all.toArray());else if(!(t instanceof Kr))if(t instanceof ot)this.#n.push(t[0]),this.#o();else if(t instanceof Vr){let n=new ts(t[0],t[1]);for(let[r,i]of this.#r)i(n)}else if(t instanceof ss){let n=this.#l.get(t[0]);if(!n)return;let r=n(t[1]);if(r instanceof y)return;this.#n.push(r[0]),this.#o()}else if(t instanceof ls){let n=yl(this.#a),r=new ns(n,this.#t);this.#r=this.#r.set(t[0],t[1]),t[1](r)}else t instanceof os&&(this.#r=this.#r.delete(t[0]))}#e;#s;#n;#i;#t;#r;#l;#a;#o(t=[]){this.#u(t);let n=this.#i(this.#e),r=elements(this.#t,n);if(!_u(r)){let i=new es(r);for(let[s,l]of this.#r)l(i)}this.#t=n,this.#l=r.handlers}#u(t=[]){for(;this.#n.length>0;){let n=this.#n.shift(),[r,i]=this.#s(this.#e,n);t=t.concat(i.all.toArray()),this.#e=r}for(;t.length>0;)t.shift()({dispatch:a=>this.send(new ot(a)),emit:(a,u)=>this.root.dispatchEvent(new CustomEvent(a,{detail:u,bubbles:!0,composed:!0})),select:()=>{},root:null});this.#n.length>0&&this.#u(t)}},td=fo.start,er=()=>globalThis.window&&window.document;var po=class extends d{constructor(t,n,r,i){super(),this.init=t,this.update=n,this.view=r,this.on_attribute_change=i}};var cs=class extends d{constructor(t){super(),this.selector=t}},Xr=class extends d{};function wu(e,t,n){return new po(e,t,n,new h)}function gu(e,t,n){return Je(!er(),new y(new Xr),()=>mu(e,t,n))}function x(e){return Jr(e)}function _o(e,t){return D("article",e,t)}function fs(e,t){return D("h1",e,t)}function ei(e,t){return D("h2",e,t)}function Mt(e,t){return D("h3",e,t)}function he(e,t){return D("h4",e,t)}function bu(e,t){return D("h5",e,t)}function yu(e,t){return D("h6",e,t)}function ps(e,t){return D("main",e,t)}function ku(e,t){return D("nav",e,t)}function $o(e,t){return D("section",e,t)}function v(e,t){return D("div",e,t)}function vu(e){return D("hr",e,o([]))}function tr(e,t){return D("li",e,t)}function at(e,t){return D("p",e,t)}function me(e,t){return D("pre",e,t)}function ds(e,t){return D("ul",e,t)}function It(e,t){return D("a",e,t)}function Lu(e){return D("br",e,o([]))}function de(e,t){return D("code",e,t)}function Au(e,t){return D("em",e,t)}function Ln(e,t){return D("span",e,t)}function ti(e,t){return D("strong",e,t)}function ju(e){return D("img",e,o([]))}function _s(e,t){return Hr("http://www.w3.org/2000/svg","svg",e,t)}function ce(e,t){return D("button",e,t)}function ho(e){return D("input",e,o([]))}function ni(e,t){return D("label",e,t)}function $s(e,t){return D("textarea",e,o([Jr(t)]))}var Ou="http://www.w3.org/2000/svg";function nr(e){return Hr(Ou,"line",e,o([]))}function Su(e){return Hr(Ou,"polyline",e,o([]))}function hs(e,t){return cu(e,t)}function zu(e){return hs("click",t=>new b(e))}function X(e){return hs("mousedown",t=>new b(e))}function Eu(e){return hs("mouseenter",t=>new b(e))}function rd(e){let t=e;return Bl("target",Bl("value",ca))(t)}function rr(e){return hs("input",t=>{let n=rd(t);return Et(n,e)})}var sd={handle_external_links:!1,handle_internal_links:!0},Tu=window?.location?.href,go=()=>Tu?new b(wo(new URL(Tu))):new y(void 0),xo=(e,t=sd)=>{document.addEventListener("click",n=>{let r=Cu(n.target);if(r)try{let i=new URL(r.href),s=wo(i),l=i.host!==window.location.host;return!t.handle_external_links&&l||!t.handle_internal_links&&!l?void 0:(n.preventDefault(),l||(window.history.pushState({},"",r.href),window.requestAnimationFrame(()=>{i.hash&&document.getElementById(i.hash.slice(1))?.scrollIntoView()})),e(s))}catch{return}}),window.addEventListener("popstate",n=>{n.preventDefault();let r=new URL(window.location.href),i=wo(r);window.requestAnimationFrame(()=>{r.hash&&document.getElementById(r.hash.slice(1))?.scrollIntoView()}),e(i)}),window.addEventListener("modem-push",({detail:n})=>{e(n)}),window.addEventListener("modem-replace",({detail:n})=>{e(n)})},qu=e=>{window.history.pushState({},"",pe(e)),window.requestAnimationFrame(()=>{e.fragment[0]&&document.getElementById(e.fragment[0])?.scrollIntoView()}),window.dispatchEvent(new CustomEvent("modem-push",{detail:e}))};var Cu=e=>!e||e.tagName==="BODY"?null:e.tagName==="A"?e:Cu(e.parentElement),wo=e=>new B(e.protocol?new $(e.protocol.slice(0,-1)):new h,new h,e.hostname?new $(e.hostname):new h,e.port?new $(Number(e.port)):new h,e.pathname,e.search?new $(e.search.slice(1)):new h,e.hash?new $(e.hash.slice(1)):new h);function Bu(e){return xn(t=>Je(!er(),void 0,()=>xo(n=>{let i=e(n);return t(i)})))}var ld=new B(new h,new h,new h,new h,"",new h,new h);function An(e,t,n){return xn(r=>Je(!er(),void 0,()=>qu((()=>{let i=ld;return new B(i.scheme,i.userinfo,i.host,i.port,e,t,n)})())))}var Ie=class extends d{},Dt=class extends d{},bo=class extends d{},ri=class extends d{},ii=class extends d{},yo=class extends d{},ko=class extends d{},vo=class extends d{},Lo=class extends d{};var jn=class extends d{},De=class extends d{};function Pu(e){return e instanceof ko?"CONNECT":e instanceof ii?"DELETE":e instanceof Ie?"GET":e instanceof bo?"HEAD":e instanceof vo?"OPTIONS":e instanceof Lo?"PATCH":e instanceof Dt?"POST":e instanceof ri?"PUT":e instanceof yo?"TRACE":e[0]}function Nu(e){return e instanceof jn?"http":"https"}var ut=class extends d{constructor(t,n,r,i,s,l,a,u){super(),this.method=t,this.headers=n,this.body=r,this.scheme=i,this.host=s,this.port=l,this.path=a,this.query=u}};function Iu(e){return new B(new $(Nu(e.scheme)),new h,new $(e.host),e.port,e.path,e.query,new h)}function ms(e,t,n){let r=Al(e.headers,ke(t),n),i=e;return new ut(i.method,r,i.body,i.scheme,i.host,i.port,i.path,i.query)}function ir(e,t){let n=e.method,r=e.headers,i=e.scheme,s=e.host,l=e.port,a=e.path,u=e.query;return new ut(n,r,t,i,s,l,a,u)}function Ue(e,t){let n=e;return new ut(t,n.headers,n.body,n.scheme,n.host,n.port,n.path,n.query)}function ct(){return new ut(new Ie,o([]),"",new De,"localhost",new h,"",new h)}function Ut(e,t){let n=e;return new ut(n.method,n.headers,n.body,t,n.host,n.port,n.path,n.query)}function ws(e,t){let n=e;return new ut(n.method,n.headers,n.body,n.scheme,t,n.port,n.path,n.query)}function gs(e,t){let n=e;return new ut(n.method,n.headers,n.body,n.scheme,n.host,new $(t),n.path,n.query)}function ft(e,t){let n=e;return new ut(n.method,n.headers,n.body,n.scheme,n.host,n.port,t,n.query)}var Ft=class extends d{constructor(t,n,r,i,s,l){super(),this.saving=t,this.slug=n,this.title=r,this.subtitle=i,this.leading=s,this.content=l}};function Du(e,t,n,r,i){return new Ft(!1,e,t,n,r,i)}function xs(e){return e.saving}function bs(e){return e.slug}function ys(e){return e.title}function ks(e){return e.subtitle}function li(e){return e.leading}function oi(e){return e.content}function Uu(e,t){{let n=e.saving,r=e.title,i=e.subtitle,s=e.leading,l=e.content;return new Ft(n,t,r,i,s,l)}}function Fu(e,t){{let n=e.saving,r=e.slug,i=e.subtitle,s=e.leading,l=e.content;return new Ft(n,r,t,i,s,l)}}function Wu(e,t){{let n=e.saving,r=e.slug,i=e.title,s=e.leading,l=e.content;return new Ft(n,r,i,t,s,l)}}function Gu(e,t){{let n=e.saving,r=e.slug,i=e.title,s=e.subtitle,l=e.content;return new Ft(n,r,i,s,t,l)}}function Ru(e,t){{let n=e.saving,r=e.slug,i=e.title,s=e.subtitle,l=e.leading;return new Ft(n,r,i,s,l,t)}}var yt=class extends d{constructor(t,n,r){super(),this.status=t,this.headers=n,this.body=r}};var sr=class e{constructor(t){this.promise=t}static wrap(t){return t instanceof Promise?new e(t):t}static unwrap(t){return t instanceof e?t.promise:t}};function vs(e){return Promise.resolve(sr.wrap(e))}function Ju(e,t){return e.then(n=>t(sr.unwrap(n)))}function Ls(e,t){return e.then(n=>sr.wrap(t(sr.unwrap(n))))}function jo(e,t){return e.catch(n=>t(n))}function Ku(e,t){return Ls(e,r=>(t(r),r))}function As(e,t){return Ju(e,r=>{if(r.isOk()){let i=r[0];return t(i)}else{let i=r[0];return vs(new y(i))}})}async function Yu(e){try{return new b(await fetch(e))}catch(t){return new y(new js(t.toString()))}}function Zu(e){return new yt(e.status,R.fromArray([...e.headers]),e)}function pd(e){let t=pe(Iu(e)),n=Pu(e.method).toUpperCase(),r={headers:dd(e.headers),method:n};return[t,r]}function Qu(e){let[t,n]=pd(e);return n.method!=="GET"&&n.method!=="HEAD"&&(n.body=e.body),new globalThis.Request(t,n)}function dd(e){let t=new globalThis.Headers;for(let[n,r]of e)t.append(n.toLowerCase(),r);return t}async function Oo(e){let t;try{t=await e.body.text()}catch{return new y(new Os)}return new b(e.withFields({body:t}))}var js=class extends d{constructor(t){super(),this[0]=t}},Os=class extends d{};function Xu(e){let n=Qu(e),r=Yu(n);return As(r,i=>vs(new b(Zu(i))))}var Ss=class extends d{constructor(t){super(),this[0]=t}},ai=class extends d{constructor(t){super(),this[0]=t}},ui=class extends d{constructor(t){super(),this[0]=t}},zs=class extends d{},ci=class extends d{},fi=class extends d{constructor(t,n){super(),this[0]=t,this[1]=n}},pi=class extends d{},Es=class extends d{constructor(t){super(),this.run=t}};function $d(e,t,n){let r=Xu(e),i=As(r,Oo),s=Ls(i,a=>{if(a.isOk()){let u=a[0];return t.run(new b(u))}else return t.run(new y(new zs))}),l=jo(s,a=>t.run(new y(new zs)));Ku(l,n)}function pt(e,t){return xn(n=>$d(e,t,n))}function ec(e){if(e instanceof yt&&200<=e.status&&e.status<=299){let t=e.status,n=e.body;return new b(n)}else{if(e instanceof yt&&e.status===401)return new y(new pi);if(e instanceof yt&&e.status===404)return new y(new ci);if(e instanceof yt&&e.status===500){let t=e.body;return new y(new ai(t))}else{let t=e.status,n=e.body;return new y(new fi(t,n))}}}function Ts(e){return new Es(t=>{let r=Te(t,ec);return e(r)})}function Wt(e,t){return new Es(n=>{let i=Te(n,ec),s=Te(i,l=>{let a=su(l,e);if(a.isOk()){let u=a[0];return new b(u)}else{let u=a[0];return new y(new ui(u))}});return t(s)})}var ee=class extends d{},Y=class extends d{},N=class extends d{constructor(t){super(),this[0]=t}},kt=class extends d{constructor(t){super(),this[0]=t}},Fe=class extends d{constructor(t){super(),this[0]=t}};function je(e,t){if(e instanceof N){let n=e[0];return new N(t(n))}else if(e instanceof kt){let n=e[0];return new kt(t(n))}else return e}var lr=class extends d{},Oe=class extends d{},On=class extends d{constructor(t){super(),this.session=t}},Eo=class extends d{constructor(t,n,r){super(),this.subject=t,this.expiry=n,this.permissions=r}};function hd(e){return e instanceof lr?o([]):e instanceof Oe?o([]):e.session.permissions}function qs(e,t){return Lr(hd(e),n=>Lr(t,r=>r===n))}function To(e,t){let n,r=t.scheme;r instanceof $&&r[0]==="http"?n=Ut(e,new jn):r instanceof $&&r[0]==="https"?n=Ut(e,new De):n=Ut(e,new De);let i=n,s,l=t.host;if(l instanceof $){let f=l[0];s=ws(i,f)}else s=i;let a=s,u,c=t.port;if(c instanceof $){let f=c[0];u=gs(a,f)}else u=a;return u}function tc(e,t){let n=ct(),r=Ue(n,new Ie),i=ft(r,"/api/auth/logout"),s=ms(i,"credentials","include"),l=To(s,t);return pt(l,Ts(e))}function md(){return le("subject",Ae,e=>le("expiresAt",bt,t=>le("permissions",wn(Ae),n=>Me(new Eo(e,t,n)))))}function nc(){let e=md();return Xa(e,t=>Me(new On(t)))}function rc(e,t,n,r){let i,s=Bt(o([["username",$e(t)],["password",$e(n)]]));i=Ct(s);let l=i,a=ct(),u=Ue(a,new Dt),c=ft(u,"/api/auth"),p=ir(c,l),f=To(p,r);return pt(f,Wt(nc(),e))}function qo(e,t){let n=ct(),r=Ue(n,new Ie),i=ft(r,"/api/auth"),s=ms(i,"credentials","include"),l=To(s,t);return pt(l,Wt(nc(),e))}var G=class extends d{constructor(t,n,r,i,s,l,a,u,c,p,f){super(),this.id=t,this.slug=n,this.revision=r,this.author=i,this.tags=s,this.published_at=l,this.title=a,this.subtitle=u,this.leading=c,this.content=p,this.draft=f}};function or(e){if(e instanceof G&&e.content instanceof N){let t=e.slug,n=e.title,r=e.subtitle,i=e.leading,s=e.content[0],l=Du(t,n,r,i,s);return new $(l)}else return new h}function di(e,t){return qs(t,o(["post_edit_any"]))}function sc(e,t){return qs(t,o(["post_edit_any"]))}function lc(e,t){return qs(t,o(["post_edit_any"]))}function _i(e,t){let n,r=t.scheme;r instanceof $&&r[0]==="http"?n=Ut(e,new jn):r instanceof $&&r[0]==="https"?n=Ut(e,new De):n=Ut(e,new De);let i=n,s,l=t.host;if(l instanceof $){let f=l[0];s=ws(i,f)}else s=i;let a=s,u,c=t.port;if(c instanceof $){let f=c[0];u=gs(a,f)}else u=a;return u}function oc(e,t,n){let r,i=ct(),s=Ue(i,new ii),l=ft(s,"/api/articles/"+t);return r=_i(l,n),pt(r,Ts(e))}function ar(){return no("version",0,bt,e=>le("id",Ae,t=>le("author",Ae,n=>le("tags",Ji(wn(Ae),o([Me(o([]))])),r=>le("published_at",to(bt,s=>s===0?new h:new $(Ga(s))),i=>le("slug",Ae,s=>le("revision",bt,l=>le("title",Ae,a=>le("leading",Ae,u=>le("subtitle",Ae,c=>no("content","",Ae,p=>{let f;p===""?f=new ee:f=new N(p);let m=f;return Me(new G(t,s,l,n,r,i,a,c,u,m,new h))})))))))))))}function Gt(e,t,n){let r,i=ct(),s=Ue(i,new Ie),l=ft(s,"/api/articles/"+t);return r=_i(l,n),pt(r,Wt(ar(),e))}function wd(){return le("articles",Ji(wn(ar()),o([Me(o([]))])),e=>Me(e))}function $i(e,t){let n,r=ct(),i=Ue(r,new Ie),s=ft(i,"/api/articles");return n=_i(s,t),pt(n,Wt(wd(),e))}function Cs(e){{let t=e.id,n=e.slug,r=e.revision,i=e.author,s=e.tags,l=e.published_at,a=e.title,u=e.subtitle,c=e.leading,p=e.content,f;if(p instanceof N){let C=p[0];f=$e(C)}else f=$e("");let m=f,g;if(l instanceof $){let C=l[0];g=st(Wa(C))}else g=st(0);let k=g;return Bt(o([["struct_version",st(1)],["id",$e(t)],["revision",st(r)],["slug",$e(n)],["title",$e(a)],["leading",$e(c)],["subtitle",$e(u)],["author",$e(i)],["published_at",k],["tags",Dr(s,$e)],["content",m]]))}}function Bs(e,t,n){let r,i=ct(),s=Ue(i,new ri),l=ft(s,"/api/articles/"+t.id),a=ir(l,(()=>{let c=Cs(t);return Ct(c)})());return r=_i(a,n),pt(r,Wt(ar(),e))}function ac(e,t,n){let r,i=ct(),s=Ue(i,new Dt),l=ft(s,"/api/articles"),a=ir(l,(()=>{let c=Cs(t);return Ct(c)})());return r=_i(a,n),pt(r,Wt(ar(),e))}function ur(e,t){if(e instanceof G&&e.draft instanceof $){let n=e.draft[0],r=e;return new G(r.id,r.slug,r.revision,r.author,r.tags,r.published_at,r.title,r.subtitle,r.leading,r.content,new $(t(n)))}else return gd("draft_update: not an article with draft","src\\article\\article.gleam",316),e}function gd(e,t,n){let r="\x1B[90m",i="\x1B[39m",s=`${t}:${n}`,l=vt(e);if(globalThis.process?.stderr?.write){let a=`${r}${s}${i}
${l}
`;process.stderr.write(a)}else if(globalThis.Deno){let a=`${r}${s}${i}
${l}
`;globalThis.Deno.stderr.writeSync(new TextEncoder().encode(a))}else{let a=`${s}
${l}`;globalThis.console.log(a)}return e}function xd(e){let t='"';for(let n=0;n<e.length;n++){let r=e[n];r==`
`?t+="\\n":r=="\r"?t+="\\r":r=="	"?t+="\\t":r=="\f"?t+="\\f":r=="\\"?t+="\\\\":r=='"'?t+='\\"':r<" "||r>"~"&&r<"\xA0"?t+="\\u{"+r.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=r}return t+='"',t}function bd(e){let t="dict.from_list([",n=!0,r=[];return e.forEach((i,s)=>{r.push([s,i])}),r.sort(),r.forEach(([i,s])=>{n||(t=t+", "),t=t+"#("+vt(i)+", "+vt(s)+")",n=!1}),t+"])"}function yd(e){let t=globalThis.Object.keys(e).map(n=>{let r=vt(e[n]);return isNaN(parseInt(n))?`${n}: ${r}`:r}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function kd(e){let t=Object.getPrototypeOf(e)?.constructor?.name||"Object",n=[];for(let s of Object.keys(e))n.push(`${vt(s)}: ${vt(e[s])}`);let r=n.length?" "+n.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${r}})`}function vt(e){let t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return xd(e);if(t==="bigint"||t==="number")return e.toString();if(globalThis.Array.isArray(e))return`#(${e.map(vt).join(", ")})`;if(e instanceof R)return`[${e.toArray().map(vt).join(", ")}]`;if(e instanceof Ot)return`//utfcodepoint(${String.fromCodePoint(e.value)})`;if(e instanceof be)return vd(e);if(e instanceof d)return yd(e);if(Ld(e))return bd(e);if(e instanceof Set)return`//js(Set(${[...e].map(vt).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){let n=[];for(let r of Array(e.length).keys())n.push(String.fromCharCode(r+97));return`//fn(${n.join(", ")}) { ... }`}return kd(e)}function vd(e){let t=e.bitOffset+8*Math.trunc(e.bitSize/8),n=rn(e,e.bitOffset,t),r=e.bitSize%8;if(r>0){let i=zi(e,t,e.bitSize,!1,!1),s=Array.from(n.rawBuffer),l=`${i}:size(${r})`;return s.length===0?`<<${l}>>`:`<<${Array.from(n.rawBuffer).join(", ")}, ${l}>>`}else return`<<${Array.from(n.rawBuffer).join(", ")}>>`}function Ld(e){try{return e instanceof xe}catch{return!1}}var Lt=class extends d{},We=class extends d{},dt=class extends d{constructor(t){super(),this.slug=t}},Ge=class extends d{constructor(t){super(),this.id=t}},_t=class extends d{},$t=class extends d{},ht=class extends d{},Rt=class extends d{constructor(t){super(),this[0]=t}},hi=class extends d{constructor(t){super(),this.uri=t}};function Bo(e){let t=Nr(e.path);if(t.hasLength(0))return new Lt;if(t.hasLength(1)&&t.head==="")return new Lt;if(t.hasLength(1)&&t.head==="articles")return new We;if(t.hasLength(2)&&t.head==="article"){let n=t.tail.head;return new dt(n)}else if(t.hasLength(3)&&t.head==="article"&&t.tail.tail.head==="edit"){let n=t.tail.head;return new Ge(n)}else{if(t.hasLength(1)&&t.head==="about")return new _t;if(t.hasLength(1)&&t.head==="djot-demo")return new $t;if(t.hasLength(1)&&t.head==="url")return new ht;if(t.hasLength(2)&&t.head==="url"){let n=t.tail.head;return new Rt(n)}else return new hi(e)}}function cr(e){if(e instanceof Lt)return"/";if(e instanceof _t)return"/about";if(e instanceof We)return"/articles";if(e instanceof dt)return"/article/"+e.slug;if(e instanceof Ge)return"/article/"+e.id+"/edit";if(e instanceof $t)return"/djot-demo/";if(e instanceof ht)return"/url/";if(e instanceof Rt)return"/url/"+e[0];{let t=e.uri;return"/404?uri="+pe(t)}}function Re(e){let t,r=cr(e);t=ne(r);let i=t;if(!i.isOk())throw I("let_assert","routes/routes",49,"to_uri","Pattern match failed, no pattern matched the value.",{value:i});return i[0]}function Ad(e,t){for(;;){let n=e,r=t;if(n.hasLength(0)&&r.hasLength(0))return!0;if(n.hasLength(0))return!1;if(r.hasLength(0))return!1;{let i=n.head,s=n.tail,l=r.head,a=r.tail;if(q(i,l))e=s,t=a;else return!1}}}function uc(e,t){let n,i=cr(e);n=Nr(i);let s=n,l,u=cr(t);return l=Nr(u),Ad(s,l)}var mi=class extends d{constructor(t){super(),this[0]=t}},Sn=class extends d{},At=class extends d{constructor(t,n){super(),this.article=t,this.session=n}},mt=class extends d{constructor(t){super(),this.article=t}},zn=class extends d{constructor(t,n){super(),this.articles=t,this.session=n}},Ht=class extends d{},fr=class extends d{},pr=class extends d{constructor(t){super(),this.short=t}},fe=class extends d{constructor(t){super(),this.error=t}},dr=class extends d{},Ps=class extends d{constructor(t){super(),this.requested_uri=t}},En=class extends d{constructor(t){super(),this.content=t}},Tn=class extends d{constructor(t,n){super(),this.slug=t,this.available_slugs=n}},qn=class extends d{constructor(t){super(),this.id=t}},Jt=class extends d{constructor(t,n){super(),this.error=t,this.context=n}},Cn=class extends d{constructor(t){super(),this.attempted_action=t}},_r=class extends d{constructor(t){super(),this.msg=t}};function Ns(e){if(e instanceof mi){let t=e[0];return Re(t)}else if(e instanceof Sn){let t=ne("/");if(!t.isOk())throw I("let_assert","pages/pages",51,"to_uri","Pattern match failed, no pattern matched the value.",{value:t});return t[0]}else if(e instanceof zn){let t=ne("/articles");if(!t.isOk())throw I("let_assert","pages/pages",55,"to_uri","Pattern match failed, no pattern matched the value.",{value:t});return t[0]}else if(e instanceof Ht){let t=ne("/articles");if(!t.isOk())throw I("let_assert","pages/pages",59,"to_uri","Pattern match failed, no pattern matched the value.",{value:t});return t[0]}else if(e instanceof At){let t=e.article,n=ne("/article/"+t.slug);if(!n.isOk())throw I("let_assert","pages/pages",63,"to_uri","Pattern match failed, no pattern matched the value.",{value:n});return n[0]}else if(e instanceof mt){let t=e.article,n=ne("/article/"+t.id+"/edit");if(!n.isOk())throw I("let_assert","pages/pages",67,"to_uri","Pattern match failed, no pattern matched the value.",{value:n});return n[0]}else if(e instanceof fr){let t=ne("/url/");if(!t.isOk())throw I("let_assert","pages/pages",71,"to_uri","Pattern match failed, no pattern matched the value.",{value:t});return t[0]}else if(e instanceof pr){let t=e.short,n=ne("/url/");if(!n.isOk())throw I("let_assert","pages/pages",75,"to_uri","Pattern match failed, no pattern matched the value.",{value:n});return n[0]}else if(e instanceof fe){let t=e.error;if(t instanceof Tn){let n=t.slug,r=ne("/article/"+n);if(!r.isOk())throw I("let_assert","pages/pages",82,"to_uri","Pattern match failed, no pattern matched the value.",{value:r});return r[0]}else if(t instanceof qn){let n=t.id,r=ne("/article/"+n+"/edit");if(!r.isOk())throw I("let_assert","pages/pages",86,"to_uri","Pattern match failed, no pattern matched the value.",{value:r});return r[0]}else if(t instanceof Jt){let n=ne("/");if(!n.isOk())throw I("let_assert","pages/pages",90,"to_uri","Pattern match failed, no pattern matched the value.",{value:n});return n[0]}else if(t instanceof Cn){let n=ne("/");if(!n.isOk())throw I("let_assert","pages/pages",94,"to_uri","Pattern match failed, no pattern matched the value.",{value:n});return n[0]}else{let n=ne("/");if(!n.isOk())throw I("let_assert","pages/pages",98,"to_uri","Pattern match failed, no pattern matched the value.",{value:n});return n[0]}}else if(e instanceof dr){let t=ne("/about");if(!t.isOk())throw I("let_assert","pages/pages",104,"to_uri","Pattern match failed, no pattern matched the value.",{value:t});return t[0]}else if(e instanceof En){let t=e.content,n=ne("/djot-demo/"+t);if(!n.isOk())throw I("let_assert","pages/pages",108,"to_uri","Pattern match failed, no pattern matched the value.",{value:n});return n[0]}else return e.requested_uri}function Po(e){return P(e,t=>t.slug)}function Od(e){{let t=e.expected,n=e.found,r=e.path;return"expected: "+t+", found: "+n+", path: "+Ee(r,"/")}}function fc(e){if(e.hasLength(0))return"no errors";{let t=e.head,n=e.tail;return Od(t)+`
`+fc(n)}}function Sd(e){{let t=e.expected,n=e.found,r=e.path;return"expected: "+t+", found: "+n+", path: "+Ee(r,"/")}}function pc(e){if(e.hasLength(0))return"";{let t=e.head,n=e.tail;return Sd(t)+`
`+pc(n)}}function zd(e){if(e instanceof Qn)return"unexpected end of input";if(e instanceof it)return"unexpected byte: "+e[0];if(e instanceof Yi)return"unexpected sequence: "+e[0];if(e instanceof Zi){let t=e[0];return`unexpected format
`+fc(t)}else{let t=e[0];return`unable to decode
`+pc(t)}}function Ms(e){if(e instanceof Ss)return"bad url: "+e[0];if(e instanceof ai)return"internal server error: "+e[0];if(e instanceof ui){let t=e[0];return`json error
`+zd(t)}else{if(e instanceof ci)return"not found";if(e instanceof pi)return"unauthorized";if(e instanceof fi){let t=e[0],n=e[1];return"other error: "+H(t)+" "+n}else return"network error"}}var $r=class extends d{},wi=class extends d{},Is=class extends d{};function gi(e,t){return t instanceof $r?_s(K(e,o([A("viewBox","0 0 24 24"),A("fill","none"),A("stroke","currentColor"),A("stroke-width","2"),A("stroke-linecap","round"),A("stroke-linejoin","round")])),o([nr(o([A("x1","18"),A("y1","6"),A("x2","6"),A("y2","18")])),nr(o([A("x1","6"),A("y1","6"),A("x2","18"),A("y2","18")]))])):t instanceof wi?_s(K(e,o([A("viewBox","0 0 24 24"),A("fill","none"),A("stroke","currentColor"),A("stroke-width","2"),A("stroke-linecap","round"),A("stroke-linejoin","round")])),o([nr(o([A("x1","3"),A("y1","6"),A("x2","21"),A("y2","6")])),nr(o([A("x1","3"),A("y1","12"),A("x2","21"),A("y2","12")])),nr(o([A("x1","3"),A("y1","18"),A("x2","21"),A("y2","18")]))])):_s(K(e,o([A("viewBox","0 0 24 24"),A("fill","none"),A("stroke","currentColor"),A("stroke-width","2"),A("stroke-linecap","round"),A("stroke-linejoin","round")])),o([Su(o([A("points","20,6 9,17 4,12")]))]))}var No=class extends d{constructor(t,n){super(),this.content=t,this.references=n}},Us=class extends d{},xi=class extends d{constructor(t,n){super(),this.attributes=t,this.content=n}},bi=class extends d{constructor(t,n,r){super(),this.attributes=t,this.level=n,this.content=r}},yi=class extends d{constructor(t,n,r){super(),this.attributes=t,this.language=n,this.content=r}},ki=class extends d{},Se=class extends d{constructor(t){super(),this[0]=t}},Bn=class extends d{constructor(t,n){super(),this.content=t,this.destination=n}},Pn=class extends d{constructor(t,n){super(),this.content=t,this.destination=n}},Nn=class extends d{constructor(t){super(),this.content=t}},Mn=class extends d{constructor(t){super(),this.content=t}},hr=class extends d{constructor(t){super(),this.content=t}},vi=class extends d{constructor(t){super(),this[0]=t}},Li=class extends d{constructor(t){super(),this[0]=t}};function Ds(e,t,n){return t==="class"?kl(e,t,r=>r instanceof h?n:r[0]+" "+n):ze(e,t,n)}function qd(e){for(;;){let t=e;if(t.hasLength(0))return o([]);if(t.atLeastLength(1)&&t.head===`
`)e=t.tail;else{let n=t.head,r=t.tail;return w(n,r)}}}function mr(e){for(;;){let t=e;if(t.hasLength(0))return o([]);if(t.atLeastLength(1)&&t.head===" ")e=t.tail;else{let n=t.head,r=t.tail;return w(n,r)}}}function dc(e,t){for(;;){let n=e,r=t;if(r.hasLength(0))return n>=3?new $([new Us,r]):new h;if(r.atLeastLength(1)&&r.head===`
`)return n>=3?new $([new Us,r]):new h;if(r.atLeastLength(1)&&r.head===" "){let i=r.tail;e=n,t=i}else if(r.atLeastLength(1)&&r.head==="	"){let i=r.tail;e=n,t=i}else if(r.atLeastLength(1)&&r.head==="-"){let i=r.tail;e=n+1,t=i}else if(r.atLeastLength(1)&&r.head==="*"){let i=r.tail;e=n+1,t=i}else return new h}}function Cd(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return[r,o([])];if(n.atLeastLength(1)&&n.head===`
`){let i=n.tail;return[r+`
`,i]}else{let i=n.head;e=n.tail,t=r+i}}}function Bd(e,t,n){for(;;){let r=e,i=t,s=n;if(r.atLeastLength(1)&&r.head===`
`&&s===0){let l=r.tail;return new $([l])}else{if(s===0)return new $([r]);if(r.atLeastLength(1)&&r.head===i){let l=r.head;e=r.tail,t=i,n=s-1}else return r.hasLength(0)?new $([r]):new h}}}function Pd(e,t,n,r){for(;;){let i=e,s=t,l=n,a=r,u=Bd(i,s,l);if(u instanceof h){let c=Cd(i,a),p=c[0];e=c[1],t=s,n=l,r=p}else{let c=u[0][0];return[a,c]}}}function Nd(e,t){for(;;){let n=e,r=t;if(n.atLeastLength(1)&&n.head==="`")return new h;if(n.hasLength(0))return new $([new h,n]);if(n.atLeastLength(1)&&n.head===`
`&&r===""){let i=n.tail;return new $([new h,i])}else if(n.atLeastLength(1)&&n.head===`
`){let i=n.tail;return new $([new $(r),i])}else{let i=n.head;e=n.tail,t=r+i}}}function Md(e,t,n){for(;;){let r=e,i=t,s=n;if(r.atLeastLength(1)&&r.head===i){let l=r.head;e=r.tail,t=i,n=s+1}else if(r.atLeastLength(1)&&r.head===`
`&&s>=3){let l=r.tail;return new $([new h,s,l])}else if(r.atLeastLength(1)&&s>=3){let l=mr(r);return vr(Nd(l,""),a=>{let u=a[0],c=a[1];return[u,s,c]})}else return new h}}function _c(e,t,n){return Vo(Md(e,n,1),r=>{let i=r[0],s=r[1],l=r[2],a=Pd(l,n,s,""),u=a[0],c=a[1];return new $([new yi(t,i,u),c])})}function Id(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return new $([i,Hn(s),o([])]);if(r.atLeastLength(2)&&r.head===`
`&&r.tail.head===" "){let l=r.tail.tail;e=mr(l),t=i,n=s}else if(r.atLeastLength(1)&&r.head===`
`){let l=r.tail;return new $([i,Hn(s),l])}else{let l=r.head;e=r.tail,t=i,n=s+l}}}function Dd(e,t){for(;;){let n=e,r=t;if(n.atLeastLength(2)&&n.head==="]"&&n.tail.head===":"){let i=n.tail.tail;return Id(i,r,"")}else{if(n.hasLength(0))return new h;if(n.atLeastLength(1)&&n.head==="]")return new h;if(n.atLeastLength(1)&&n.head===`
`)return new h;{let i=n.head;e=n.tail,t=r+i}}}}function Ud(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return new h;if(r.atLeastLength(1)&&r.head===" "){let l=r.tail;return new $([i,s,l])}else{if(r.atLeastLength(1)&&r.head==="}")return new $([i,s,r]);{let l=r.head;e=r.tail,t=i,n=s+l}}}}function Fd(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return new h;if(r.atLeastLength(1)&&r.head==='"'){let l=r.tail;return new $([i,s,l])}else{let l=r.head;e=r.tail,t=i,n=s+l}}}function Wd(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return new h;if(n.atLeastLength(1)&&n.head===" ")return new h;if(n.atLeastLength(2)&&n.head==="="&&n.tail.head==='"'){let i=n.tail.tail;return Fd(i,r,"")}else if(n.atLeastLength(1)&&n.head==="="){let i=n.tail;return Ud(i,r,"")}else{let i=n.head;e=n.tail,t=r+i}}}function $c(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return new $([r,n]);if(n.atLeastLength(1)&&n.head==="}")return new $([r,n]);if(n.atLeastLength(1)&&n.head===" ")return new $([r,n]);if(n.atLeastLength(1)&&n.head==="#")return new h;if(n.atLeastLength(1)&&n.head===".")return new h;if(n.atLeastLength(1)&&n.head==="=")return new h;if(n.atLeastLength(1)&&n.head===`
`)return new h;{let i=n.head;e=n.tail,t=r+i}}}function Gd(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return new $([r,o([])]);if(n.atLeastLength(1)&&n.head===`
`){let i=n.tail;return new $([r,i])}else if(n.atLeastLength(1)&&n.head===" ")e=n.tail,t=r;else return new h}}function Rd(e,t){for(;;){let n=e,r=t,i=mr(n);if(i.hasLength(0))return new h;if(i.atLeastLength(1)&&i.head==="}"){let s=i.tail;return Gd(s,r)}else if(i.atLeastLength(1)&&i.head==="#"){let s=i.tail,l=$c(s,"");if(l instanceof $){let a=l[0][0];e=l[0][1],t=Ds(r,"id",a)}else return new h}else if(i.atLeastLength(1)&&i.head==="."){let s=i.tail,l=$c(s,"");if(l instanceof $){let a=l[0][0];e=l[0][1],t=Ds(r,"class",a)}else return new h}else{let s=Wd(i,"");if(s instanceof $){let l=s[0][0],a=s[0][1];e=s[0][2],t=Ds(r,l,a)}else return new h}}}function Hd(e){return e==="#"||e==="?"||e==="!"?!1:e!==","}function Jd(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;if(n.atLeastLength(1)&&n.head===" "&&q(n.tail,o([]))){let i=n.tail;return r}else if(n.atLeastLength(1)&&n.head===`
`&&q(n.tail,o([]))){let i=n.tail;return r}else if(n.atLeastLength(1)&&n.head===" "&&r==="")e=n.tail,t=r;else if(n.atLeastLength(1)&&n.head===`
`&&r==="")e=n.tail,t=r;else if(n.atLeastLength(1)&&n.head===" ")e=n.tail,t=r+"-";else if(n.atLeastLength(1)&&n.head===`
`)e=n.tail,t=r+"-";else{let i=n.head;e=n.tail,t=r+i}}}function Kd(e){let n=Rn(e),r=gt(n,Hd);return Jd(r,"")}function Vd(e,t,n){for(;;){let r=e,i=t,s=n;if(i<0)return new h;if(r.hasLength(0)&&i>0)return new h;if(r.hasLength(0)&&i===0)return new $([s,o([])]);if(r.atLeastLength(1)&&r.head===" "&&i===0){let l=r.tail;return new $([s,l])}else if(r.atLeastLength(1)&&r.head==="#")e=r.tail,t=i-1,n=s;else return new h}}function Yd(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return[T(s),o([])];if(r.hasLength(1)&&r.head===`
`)return[T(s),o([])];if(r.atLeastLength(2)&&r.head===`
`&&r.tail.head===`
`){let l=r.tail.tail;return[T(s),l]}else if(r.atLeastLength(2)&&r.head===`
`&&r.tail.head==="#"){let l=r.tail.tail,a=Vd(l,i-1,w(`
`,s));if(a instanceof $){let u=a[0][0];e=a[0][1],t=i,n=u}else return[T(s),r]}else{let l=r.head;e=r.tail,t=i,n=w(l,s)}}}function Zd(e,t,n,r){for(;;){let i=e,s=t,l=n,a=r;if(i.hasLength(0))return[!0,a,i];if(i.atLeastLength(1)&&i.head==="`")e=i.tail,t=s,n=l+1,r=a;else return i.atLeastLength(1)&&s===l?[!0,a,i]:[!1,a+Or("`",l),i]}}function Qd(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return[s,r];if(r.atLeastLength(1)&&r.head==="`"){let l=r.tail,a=Zd(l,i,1,s),u=a[0],c=a[1],p=a[2];if(u)return[c,p];e=p,t=i,n=c}else{let l=r.head;e=r.tail,t=i,n=s+l}}}function Xd(e,t){for(;;){let n=e,r=t;if(n.atLeastLength(1)&&n.head==="`")e=n.tail,t=r+1;else{let i=Qd(n,r,""),s=i[0],l=i[1],a;pn(s," `")?a=Pi(s):a=s;let c=a,p;Bi(c,"` ")?p=Ni(c):p=c;let m=p;return[new hr(m),l]}}}function e_(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return new h;if(r.atLeastLength(1)&&r.head==="`")return new h;if(r.atLeastLength(2)&&r.head==="	"&&r.tail.head===i){let l=r.tail.head;e=r.tail.tail,t=i,n=w(" ",w(l,s))}else if(r.atLeastLength(2)&&r.head===`
`&&r.tail.head===i){let l=r.tail.head;e=r.tail.tail,t=i,n=w(" ",w(l,s))}else if(r.atLeastLength(2)&&r.head===" "&&r.tail.head===i){let l=r.tail.head;e=r.tail.tail,t=i,n=w(" ",w(l,s))}else if(r.atLeastLength(1)&&r.head===i){let l=r.head,a=r.tail,u=T(s);if(u.hasLength(0))return new h;{let c=u;return new $([c,a])}}else{let l=r.head;e=r.tail,t=i,n=w(l,s)}}}function hc(e,t,n,r){for(;;){let i=e,s=t,l=n,a=r;if(i.hasLength(0))return new h;if(i.atLeastLength(1)&&i.head===")"&&s){let u=i.tail;return new $([l,new Li(a),u])}else if(i.atLeastLength(1)&&i.head==="]"&&!s){let u=i.tail;return new $([l,new vi(a),u])}else if(i.atLeastLength(1)&&i.head===`
`&&s)e=i.tail,t=s,n=l,r=a;else if(i.atLeastLength(1)&&i.head===`
`&&!s)e=i.tail,t=s,n=l,r=a+" ";else{let u=i.head;e=i.tail,t=s,n=l,r=a+u}}}function t_(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return new h;if(n.atLeastLength(2)&&n.head==="]"&&n.tail.head==="["){let i=n.tail.tail,s=T(r);return hc(i,!1,s,"")}else if(n.atLeastLength(2)&&n.head==="]"&&n.tail.head==="("){let i=n.tail.tail,s=T(r);return hc(i,!0,s,"")}else{let i=n.head;e=n.tail,t=w(i,r)}}}function n_(e,t){for(;;){let n=e,r=t;if(n.atLeastLength(1)&&n.head==="#")e=n.tail,t=r+1;else{if(n.hasLength(0)&&r>0)return new $([r,o([])]);if(n.atLeastLength(1)&&n.head===" "&&r!==0){let i=n.tail;return new $([r,i])}else if(n.atLeastLength(1)&&n.head===`
`&&r!==0){let i=n.tail;return new $([r,i])}else return new h}}}function Fs(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head,s=n.tail;if(i instanceof Se){let l=i[0];e=s,t=r+l}else if(i instanceof hr){let l=i.content;e=s,t=r+l}else if(i instanceof Mn){let l=i.content;e=K(l,s),t=r}else if(i instanceof Nn){let l=i.content;e=K(l,s),t=r}else if(i instanceof Bn){let l=i.content,a=Fs(l,r);e=s,t=a}else if(i instanceof Pn){let l=i.content,a=Fs(l,r);e=s,t=a}else e=s,t=r}}}function r_(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return[T(r),o([])];if(n.hasLength(1)&&n.head===`
`)return[T(r),o([])];if(n.atLeastLength(2)&&n.head===`
`&&n.tail.head===`
`){let i=n.tail.tail;return[T(r),i]}else{let i=n.head;e=n.tail,t=w(i,r)}}}function mc(e,t){let n=e_(e,t,o([]));if(n instanceof h)return new h;{let r=n[0][0],i=n[0][1],s=Ws(r,"",o([]));return new $([s,i])}}function Ws(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0)&&i==="")return T(s);if(r.hasLength(0))return T(w(new Se(i),s));if(r.atLeastLength(2)&&r.head==="\\"){let l=r.tail.head,a=r.tail.tail;l===`
`?(e=a,t="",n=w(new ki,w(new Se(i),s))):l===" "?(e=a,t=i+"&nbsp;",n=s):l==="!"||l==='"'||l==="#"||l==="$"||l==="%"||l==="&"||l==="'"||l==="("||l===")"||l==="*"||l==="+"||l===","||l==="-"||l==="."||l==="/"||l===":"||l===";"||l==="<"||l==="="||l===">"||l==="?"||l==="@"||l==="["||l==="\\"||l==="]"||l==="^"||l==="_"||l==="`"||l==="{"||l==="|"||l==="}"||l==="~"?(e=a,t=i+l,n=s):(e=K(o([l]),a),t=i+"\\",n=s)}else if(r.atLeastLength(2)&&r.head==="_"&&r.tail.head!==" "&&r.tail.head!=="	"&&r.tail.head!==`
`){let l=r.tail.head,a=r.tail.tail,u=w(l,a),c=mc(u,"_");if(c instanceof h)e=u,t=i+"_",n=s;else{let p=c[0][0];e=c[0][1],t="",n=w(new Nn(p),w(new Se(i),s))}}else if(r.atLeastLength(2)&&r.head==="*"&&r.tail.head!==" "&&r.tail.head!=="	"&&r.tail.head!==`
`){let l=r.tail.head,a=r.tail.tail,u=w(l,a),c=mc(u,"*");if(c instanceof h)e=u,t=i+"*",n=s;else{let p=c[0][0];e=c[0][1],t="",n=w(new Mn(p),w(new Se(i),s))}}else if(r.atLeastLength(1)&&r.head==="["){let l=r.tail,a=wc(l,(u,c)=>new Bn(u,c));if(a instanceof h)e=l,t=i+"[",n=s;else{let u=a[0][0];e=a[0][1],t="",n=w(u,w(new Se(i),s))}}else if(r.atLeastLength(2)&&r.head==="!"&&r.tail.head==="["){let l=r.tail.tail,a=wc(l,(u,c)=>new Pn(u,c));if(a instanceof h)e=l,t=i+"![",n=s;else{let u=a[0][0];e=a[0][1],t="",n=w(u,w(new Se(i),s))}}else if(r.atLeastLength(1)&&r.head==="`"){let l=r.tail,a=Xd(l,1),u=a[0];e=a[1],t="",n=w(u,w(new Se(i),s))}else if(r.atLeastLength(1)&&r.head===`
`){let l=r.tail;e=mr(l),t=i+`
`,n=s}else{let l=r.head;e=r.tail,t=i+l,n=s}}}function wc(e,t){let n=t_(e,o([]));if(n instanceof h)return new h;{let r=n[0][0],i=n[0][1],s=n[0][2],l=Ws(r,"",o([])),a;i instanceof vi&&i[0]===""?a=new vi(Fs(l,"")):a=i;let u=a;return new $([t(l,u),s])}}function Kt(e,t){let n=r_(e,o([])),r=n[0],i=n[1],s=Ws(r,"",o([]));return[new xi(t,s),i]}function i_(e,t,n){let r=n_(e,1);if(r instanceof $){let i=r[0][0],s=r[0][1],l=mr(s),a=Yd(l,i,o([])),u=a[0],c=a[1],p=Ws(u,"",o([])),f=Fs(p,""),m,g=Kd(f);if(g==="")m=[t,n];else{let M=g;if(Ye(t,M).isOk())m=[t,n];else{let E=ze(t,M,"#"+M),O=Ds(n,"id",M);m=[E,O]}}let k=m,C=k[0],L=k[1];return[new bi(L,i,p),C,c]}else{let i=Kt(w("#",e),n),s=i[0],l=i[1];return[s,t,l]}}function s_(e,t,n,r){for(;;){let i=e,s=t,l=n,a=r,u=qd(i),c=mr(u);if(c.hasLength(0))return new No(T(l),s);if(c.atLeastLength(1)&&c.head==="{"){let p=c.tail,f=Rd(p,a);if(f instanceof h){let m=Kt(c,a),g=m[0];e=m[1],t=s,n=w(g,l),r=F()}else{let m=f[0][0];e=f[0][1],t=s,n=l,r=m}}else if(c.atLeastLength(1)&&c.head==="#"){let p=c.tail,f=i_(p,s,a),m=f[0],g=f[1];e=f[2],t=g,n=w(m,l),r=F()}else if(c.atLeastLength(1)&&c.head==="~"){let p=c.head,f=c.tail,m=_c(f,a,p);if(m instanceof h){let g=Kt(c,a),k=g[0];e=g[1],t=s,n=w(k,l),r=F()}else{let g=m[0][0];e=m[0][1],t=s,n=w(g,l),r=F()}}else if(c.atLeastLength(1)&&c.head==="`"){let p=c.head,f=c.tail,m=_c(f,a,p);if(m instanceof h){let g=Kt(c,a),k=g[0];e=g[1],t=s,n=w(k,l),r=F()}else{let g=m[0][0];e=m[0][1],t=s,n=w(g,l),r=F()}}else if(c.atLeastLength(1)&&c.head==="["){let p=c.tail,f=Dd(p,"");if(f instanceof h){let m=Kt(c,a),g=m[0];e=m[1],t=s,n=w(g,l),r=F()}else{let m=f[0][0],g=f[0][1],k=f[0][2],C=ze(s,m,g);e=k,t=C,n=l,r=F()}}else if(c.atLeastLength(1)&&c.head==="-"){let p=c.tail,f=dc(1,p);if(f instanceof h){let m=Kt(c,a),g=m[0];e=m[1],t=s,n=w(g,l),r=F()}else{let m=f[0][0];e=f[0][1],t=s,n=w(m,l),r=F()}}else if(c.atLeastLength(1)&&c.head==="*"){let p=c.tail,f=dc(1,p);if(f instanceof h){let m=Kt(c,a),g=m[0];e=m[1],t=s,n=w(g,l),r=F()}else{let m=f[0][0];e=f[0][1],t=s,n=w(m,l),r=F()}}else{let p=Kt(c,a),f=p[0];e=p[1],t=s,n=w(f,l),r=F()}}}function gc(e){let n=Ti(e,`\r
`,`
`),r=Rn(n);return s_(r,F(),o([]),F())}function xc(e,t){if(e instanceof Li)return e[0];{let n=e[0],r=Ye(t,n);return r.isOk()?r[0]:""}}function Mo(e,t){for(;;){let n=e,r=t;if(n.hasLength(0))return r;{let i=n.head,s=n.tail;if(i instanceof Se){let l=i[0];e=s,t=r+l}else if(i instanceof hr){let l=i.content;e=s,t=r+l}else if(i instanceof Mn){let l=i.content;e=K(l,s),t=r}else if(i instanceof Nn){let l=i.content;e=K(l,s),t=r}else if(i instanceof Bn){let l=i.content,a=Mo(l,r);e=s,t=a}else if(i instanceof Pn){let l=i.content,a=Mo(l,r);e=s,t=a}else e=s,t=r}}}function Vt(e,t){let r=on(e),i=Gn(r,(s,l)=>jr(s[0],l[0]));return ye(i,t,(s,l)=>w(A(l[0],l[1]),s))}function l_(e,t,n){if(t instanceof ki)return o([Lu(o([]))]);if(t instanceof Se){let r=t[0];return o([x(r)])}else if(t instanceof Mn){let r=t.content;return o([ti(o([_("font-bold")]),wt(e,r,n))])}else if(t instanceof Nn){let r=t.content;return o([Au(o([_("italic")]),wt(e,r,n))])}else if(t instanceof Bn){let r=t.content,i=t.destination;return o([It(o([Nt(xc(i,n)),_("text-pink-700 hover:underline cursor-pointer")]),wt(e,r,n))])}else if(t instanceof Pn){let r=t.content,i=t.destination;return o([ju(o([fu(xc(i,n)),pu(Mo(r,"")),_("max-w-full h-auto rounded-lg shadow-lg mt-8")]))])}else{let r=t.content;return o([de(o([_("bg-zinc-800 px-1 py-0.5 rounded text-sm font-mono")]),o([x(r)]))])}}function wt(e,t,n){for(;;){let r=e,i=t,s=n;if(i.hasLength(0))return r;{let l=i.head,a=i.tail;e=l_(r,l,s),t=a,n=s}}}function o_(e,t,n){let r;if(t instanceof xi){let s=t.attributes,l=t.content;r=at(Vt(s,o([_("pt-8")])),wt(o([]),l,n))}else if(t instanceof bi){let s=t.attributes,l=t.level,a=t.content;l===1?r=fs(Vt(s,o([_("text-3xl text-pink-700 font-light")])),wt(o([]),a,n)):l===2?r=ei(Vt(s,o([_("text-2xl text-pink-600 font-light pt-16")])),wt(o([]),a,n)):l===3?r=Mt(Vt(s,o([_("text-xl text-pink-600 font-light pt-12")])),wt(o([]),a,n)):l===4?r=he(Vt(s,o([_("text-lg text-pink-600 font-light pt-8")])),wt(o([]),a,n)):l===5?r=bu(Vt(s,o([_("text-base text-pink-600 font-light pt-6")])),wt(o([]),a,n)):r=yu(Vt(s,o([_("text-sm text-pink-600 font-light pt-4")])),wt(o([]),a,n))}else if(t instanceof yi){let s=t.attributes,l=t.language,a=t.content;r=me(Vt(s,o([_("pt-8")])),o([de((()=>{if(l instanceof $){let u=l[0];return o([_("language-"+u+" bg-zinc-800 p-4 rounded-md block overflow-x-auto")])}else return o([_("bg-zinc-800 p-4 rounded-md block overflow-x-auto")])})(),o([x(a)]))]))}else r=vu(o([_("border-zinc-700 my-8")]));return w(r,e)}function a_(e,t,n){for(;;){let r=e,i=t,s=n;if(r.hasLength(0))return s;{let l=r.head,a=r.tail,u=o_(s,l,i);e=a,t=i,n=u}}}function u_(e){return T(a_(e.content,e.references,o([lt()])))}function Gs(e){let n=gc(e);return u_(n)}function wr(e,t){localStorage.setItem(e,t)}function bc(e){let t=localStorage.getItem(e);return t?new b(t):new y(void 0)}function yc(e){return JSON.parse(e)}var Yt=class extends d{},In=class extends d{constructor(t){super(),this.articles=t}};function Rs(e){let t;if(e instanceof Yt)t=Bt(o([["version",st(0)]]));else{let r=e.articles;t=Bt(o([["version",st(1)],["articles",Dr(r,Cs)]]))}return Ct(t)}function kc(){return le("version",bt,e=>e===0?Me(new Yt):e===1?le("articles",wn(ar()),t=>Me(new In(t))):tu(new Yt,"Unsupported model version"))}function vc(e,t,n){return xn(r=>{let i=bc(e);if(i.isOk()){let s=i[0],l=Ir(yc(s),t);if(l.isOk()){let a=l[0];return r(n(new $(a)))}else return r(n(new h))}else return r(n(new h))})}var gr="jst_lustre_state";var j=class extends d{constructor(t,n,r,i,s,l,a,u,c){super(),this.base_uri=t,this.route=n,this.session=r,this.articles=i,this.djot_demo_content=s,this.edit_view_mode=l,this.profile_menu_open=a,this.notice=u,this.debug_use_local_storage=c}},Qt=class extends d{},Ai=class extends d{},Js=class extends d{constructor(t){super(),this.uri=t}},en=class extends d{constructor(t){super(),this.uri=t}},Ks=class extends d{},Vs=class extends d{},Uo=class extends d{constructor(t){super(),this.opt=t}},Ys=class extends d{constructor(t){super(),this.article=t}},He=class extends d{constructor(t,n){super(),this.id=t,this.result=n}},Xt=class extends d{constructor(t){super(),this.result=t}},Zs=class extends d{constructor(t,n){super(),this.article=t,this.text=n}},Qs=class extends d{constructor(t,n){super(),this.article=t,this.text=n}},Xs=class extends d{constructor(t,n){super(),this.article=t,this.text=n}},el=class extends d{constructor(t,n){super(),this.article=t,this.text=n}},tl=class extends d{constructor(t,n){super(),this.article=t,this.content=n}},xr=class extends d{constructor(t,n){super(),this.id=t,this.result=n}},nl=class extends d{constructor(t){super(),this.article=t}},rl=class extends d{constructor(t){super(),this.article=t}},ji=class extends d{},il=class extends d{constructor(t){super(),this.result=t}},sl=class extends d{constructor(t){super(),this.article=t}},ll=class extends d{constructor(t,n){super(),this.id=t,this.result=n}},ol=class extends d{constructor(t){super(),this.article=t}},al=class extends d{constructor(t){super(),this.article=t}},ul=class extends d{constructor(t,n){super(),this.username=t,this.password=n}},cl=class extends d{constructor(t){super(),this.result=t}},Oi=class extends d{},fl=class extends d{constructor(t){super(),this.result=t}},pl=class extends d{},Si=class extends d{constructor(t){super(),this.result=t}},dl=class extends d{constructor(t){super(),this.content=t}},_l=class extends d{},$l=class extends d{},hl=class extends d{constructor(t){super(),this.res=t}},Fo=class extends d{},ml=class extends d{},wl=class extends d{};function p_(e){Z("fetch_articles_model called","src\\jst_lustre.gleam",822);let t=e[0],n=e[1],r,i=t;r=new j(i.base_uri,i.route,i.session,new Y,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage);let s=r,l=bn(o([n,$i(a=>new Xt(a),s.base_uri)]));return[s,l]}function Hs(e,t){let n=Bo(t);if(n instanceof _t)return[(()=>{let r=e;return new j(r.base_uri,n,r.session,r.articles,r.djot_demo_content,r.edit_view_mode,r.profile_menu_open,r.notice,r.debug_use_local_storage)})(),z()];if(n instanceof dt){let r=n.slug,i=e.articles;if(i instanceof ee)return[(()=>{let s=e;return new j(s.base_uri,n,s.session,new Y,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage)})(),$i(s=>new Xt(s),e.base_uri)];if(i instanceof N){let s=i[0],l=vl(s,z(),(c,p)=>{let f=p.slug===r,m=p.content;return f&&m instanceof ee?[bn(o([c,Gt(g=>new He(p.id,g),p.id,e.base_uri)])),(()=>{let g=p;return new G(g.id,g.slug,g.revision,g.author,g.tags,g.published_at,g.title,g.subtitle,g.leading,new Y,g.draft)})()]:[c,p]}),a=l[0],u=l[1];return[(()=>{let c=e;return new j(c.base_uri,n,c.session,new N(u),c.djot_demo_content,c.edit_view_mode,c.profile_menu_open,c.notice,c.debug_use_local_storage)})(),a]}else return[(()=>{let s=e;return new j(s.base_uri,n,s.session,s.articles,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage)})(),z()]}else if(n instanceof Ge){let r=n.id,i=e.articles;if(i instanceof ee)return[(()=>{let s=e;return new j(s.base_uri,n,s.session,new Y,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage)})(),$i(s=>new Xt(s),e.base_uri)];if(i instanceof N){let s=i[0],l=vl(s,z(),(c,p)=>{let f;if(p.draft instanceof $)f=p;else{let L=p;f=new G(L.id,L.slug,L.revision,L.author,L.tags,L.published_at,L.title,L.subtitle,L.leading,L.content,or(p))}let g=f,k=g.id===r,C=g.content;return k&&C instanceof ee?[bn(o([c,Gt(L=>new He(g.id,L),g.id,e.base_uri)])),(()=>{let L=g;return new G(L.id,L.slug,L.revision,L.author,L.tags,L.published_at,L.title,L.subtitle,L.leading,new Y,or(g))})()]:[c,g]}),a=l[0],u=l[1];return Z(cr(n),"src\\jst_lustre.gleam",908),[(()=>{let c=e;return new j(c.base_uri,n,c.session,new N(u),c.djot_demo_content,c.edit_view_mode,c.profile_menu_open,c.notice,c.debug_use_local_storage)})(),a]}else return[(()=>{let s=e;return new j(s.base_uri,n,s.session,s.articles,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage)})(),z()]}else return n instanceof We?e.articles instanceof ee?[(()=>{let i=e;return new j(i.base_uri,n,i.session,new Y,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage)})(),$i(i=>new Xt(i),e.base_uri)]:[(()=>{let i=e;return new j(i.base_uri,n,i.session,i.articles,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage)})(),z()]:n instanceof Lt?[(()=>{let r=e;return new j(r.base_uri,n,r.session,r.articles,r.djot_demo_content,r.edit_view_mode,r.profile_menu_open,r.notice,r.debug_use_local_storage)})(),z()]:n instanceof ht?[(()=>{let r=e;return new j(r.base_uri,n,r.session,r.articles,r.djot_demo_content,r.edit_view_mode,r.profile_menu_open,r.notice,r.debug_use_local_storage)})(),z()]:n instanceof Rt?[(()=>{let r=e;return new j(r.base_uri,n,r.session,r.articles,r.djot_demo_content,r.edit_view_mode,r.profile_menu_open,r.notice,r.debug_use_local_storage)})(),z()]:n instanceof $t?[(()=>{let r=e;return new j(r.base_uri,n,r.session,r.articles,r.djot_demo_content,r.edit_view_mode,r.profile_menu_open,r.notice,r.debug_use_local_storage)})(),z()]:[(()=>{let r=e;return new j(r.base_uri,n,r.session,r.articles,r.djot_demo_content,r.edit_view_mode,r.profile_menu_open,r.notice,r.debug_use_local_storage)})(),z()]}function Lc(e,t){if(t instanceof hl){let n=t.res;Z("GotLocalModelResult called","src\\jst_lustre.gleam",198),Z(n,"src\\jst_lustre.gleam",199);let r=Re(e.route);if(n instanceof $){let i=n[0];if(i instanceof Yt)return Hs(e,r);{let s=i.articles;return Hs((()=>{let l=e;return new j(l.base_uri,l.route,l.session,new N(s),l.djot_demo_content,l.edit_view_mode,l.profile_menu_open,l.notice,!0)})(),r)}}else{let i,s=e;i=new j(s.base_uri,s.route,s.session,s.articles,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,!1);let a=Hs(i,r);return p_(a)}}else if(t instanceof Js){let n=t.uri;return Hs(e,n)}else if(t instanceof en){let n=t.uri;return Z("user mouse down navigation","src\\jst_lustre.gleam",229),Z(n,"src\\jst_lustre.gleam",230),[e,An(pe(n),new h,new h)]}else{if(t instanceof Ks)return[(()=>{let n=e;return new j(n.base_uri,n.route,n.session,n.articles,n.djot_demo_content,n.edit_view_mode,!e.profile_menu_open,n.notice,n.debug_use_local_storage)})(),z()];if(t instanceof Vs)return[(()=>{let n=e;return new j(n.base_uri,n.route,n.session,n.articles,n.djot_demo_content,n.edit_view_mode,n.profile_menu_open,"",n.debug_use_local_storage)})(),z()];if(t instanceof Uo){let n=t.opt;if(n instanceof $&&n[0]instanceof In){let r=n[0].articles;return[(()=>{let i=e;return new j(i.base_uri,i.route,i.session,new N(r),i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage)})(),z()]}else return n instanceof $&&n[0]instanceof Yt?[e,z()]:[e,z()]}else if(t instanceof Xt){let n=t.result,r=e.route;if(n.isOk()&&r instanceof dt){let i=n[0],s=r.slug,l=xt(i,a=>a.slug===s);if(l.isOk()&&l[0]instanceof G&&l[0].content instanceof ee){let a=l[0].id,u=P(i,c=>{if(c.slug===s){let f=c;return new G(f.id,f.slug,f.revision,f.author,f.tags,f.published_at,f.title,f.subtitle,f.leading,new Y,f.draft)}else return c});return[(()=>{let c=e;return new j(c.base_uri,c.route,c.session,new N(u),c.djot_demo_content,c.edit_view_mode,c.profile_menu_open,c.notice,c.debug_use_local_storage)})(),Gt(c=>new He(a,c),a,e.base_uri)]}else if(l.isOk()&&l[0]instanceof G&&l[0].content instanceof ee){let a=l[0].id,u=P(i,c=>{if(c.slug===s){let f=c;return new G(f.id,f.slug,f.revision,f.author,f.tags,f.published_at,f.title,f.subtitle,f.leading,new Y,f.draft)}else return c});return[(()=>{let c=e;return new j(c.base_uri,c.route,c.session,new N(u),c.djot_demo_content,c.edit_view_mode,c.profile_menu_open,c.notice,c.debug_use_local_storage)})(),Gt(c=>new He(a,c),a,e.base_uri)]}else return l.isOk()?(Z("article exists. content is pending or loading.","src\\jst_lustre.gleam",302),[e,z()]):[e,An((()=>{let a=e.route,u=Re(a),c=new hi(u);return cr(c)})(),new h,new h)]}else if(n.isOk()&&r instanceof Ge){let i=n[0],s=r.id;return[(()=>{let l=e;return new j(l.base_uri,l.route,l.session,new N(i),l.djot_demo_content,l.edit_view_mode,l.profile_menu_open,l.notice,l.debug_use_local_storage)})(),Gt(l=>new He(s,l),s,e.base_uri)]}else if(n.isOk()){let i=n[0];return[(()=>{let s=e;return new j(s.base_uri,s.route,s.session,new N(i),s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage)})(),z()]}else{let i=n[0];return[(()=>{let s=e;return new j(s.base_uri,s.route,s.session,new Fe(i),s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage)})(),z()]}}else if(t instanceof He){let n=t.id,r=t.result;if(r.isOk()){let i=r[0],s=n===i.id;if(!s)throw I("let_assert","jst_lustre",336,"update","Pattern match failed, no pattern matched the value.",{value:s});let l,a=e.articles;l=je(a,c=>P(c,p=>n===p.id?i:p));let u=l;return[(()=>{let c=e;return new j(c.base_uri,c.route,c.session,u,c.djot_demo_content,c.edit_view_mode,c.profile_menu_open,c.notice,c.debug_use_local_storage)})(),z()]}else{let i=r[0],s,l=e.articles;s=je(l,u=>P(u,c=>{if(n===c.id){let f=c;return new G(f.id,f.slug,f.revision,f.author,f.tags,f.published_at,f.title,f.subtitle,f.leading,new Fe(i),f.draft)}else return c}));let a=s;return[(()=>{let u=e;return new j(u.base_uri,u.route,u.session,a,u.djot_demo_content,u.edit_view_mode,u.profile_menu_open,u.notice,u.debug_use_local_storage)})(),z()]}}else if(t instanceof Ys){let n=t.article,r=n.content;if(r instanceof ee){let i,s=e.articles;i=je(s,a=>P(a,u=>{if(n.id===u.id){let p=u;return new G(p.id,p.slug,p.revision,p.author,p.tags,p.published_at,p.title,p.subtitle,p.leading,new Y,p.draft)}else return u}));let l=i;return[(()=>{let a=e;return new j(a.base_uri,a.route,a.session,l,a.djot_demo_content,a.edit_view_mode,a.profile_menu_open,a.notice,a.debug_use_local_storage)})(),Gt(a=>new He(n.id,a),n.id,e.base_uri)]}else return r instanceof Fe?[e,Gt(i=>new He(n.id,i),n.id,e.base_uri)]:r instanceof Y?[e,z()]:r instanceof N?[e,z()]:[e,z()]}else if(t instanceof Zs){let n=t.article,r=t.text;if(n instanceof G&&n.draft instanceof $){let i=ur(n,s=>Uu(s,r));return[(()=>{let s=e;return new j(s.base_uri,s.route,s.session,je(e.articles,l=>P(l,a=>n.id===a.id?i:a)),s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage)})(),z()]}else return[e,z()]}else if(t instanceof Qs){let n=t.article,r=t.text,i=ur(n,l=>Fu(l,r)),s=je(e.articles,l=>P(l,a=>n.id===a.id?i:a));return[(()=>{let l=e;return new j(l.base_uri,l.route,l.session,s,l.djot_demo_content,l.edit_view_mode,l.profile_menu_open,l.notice,l.debug_use_local_storage)})(),z()]}else if(t instanceof Xs){let n=t.article,r=t.text,i=ur(n,l=>Gu(l,r)),s=je(e.articles,l=>P(l,a=>n.id===a.id?i:a));return[(()=>{let l=e;return new j(l.base_uri,l.route,l.session,s,l.djot_demo_content,l.edit_view_mode,l.profile_menu_open,l.notice,l.debug_use_local_storage)})(),z()]}else if(t instanceof el){let n=t.article,r=t.text,i=ur(n,l=>Wu(l,r)),s=je(e.articles,l=>P(l,a=>n.id===a.id?i:a));return[(()=>{let l=e;return new j(l.base_uri,l.route,l.session,s,l.djot_demo_content,l.edit_view_mode,l.profile_menu_open,l.notice,l.debug_use_local_storage)})(),z()]}else if(t instanceof tl){let n=t.article,r=t.content,i=ur(n,s=>Ru(s,r));return[(()=>{let s=e;return new j(s.base_uri,s.route,s.session,je(e.articles,l=>P(l,a=>n.id===a.id?i:a)),s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage)})(),z()]}else if(t instanceof rl){let n=t.article;Z("article draft discard clicked","src\\jst_lustre.gleam",510);let r=je(e.articles,i=>P(i,s=>{if(n.id===s.id){let a=n;return new G(a.id,a.slug,a.revision,a.author,a.tags,a.published_at,a.title,a.subtitle,a.leading,a.content,new h)}else return s}));return[(()=>{let i=e;return new j(i.base_uri,i.route,i.session,r,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,i.notice,i.debug_use_local_storage)})(),An((()=>{let i=Ns(new At(n,e.session));return pe(i)})(),new h,new h)]}else if(t instanceof nl){let n=t.article,r=n.draft;if(r instanceof $){let i=r[0],s,l=n;s=new G(l.id,bs(i),l.revision,l.author,l.tags,l.published_at,ys(i),ks(i),li(i),new N(oi(i)),new $(i));let a=s,u=je(e.articles,c=>P(c,p=>n.id===p.id?a:p));return[(()=>{let c=e;return new j(c.base_uri,c.route,c.session,u,c.djot_demo_content,c.edit_view_mode,c.profile_menu_open,c.notice,c.debug_use_local_storage)})(),bn(o([Bs(c=>new xr(a.id,c),a,e.base_uri),An((()=>{let c=Ns(new At(a,e.session));return pe(c)})(),new h,new h)]))]}else return[e,z()]}else if(t instanceof xr){let n=t.id,r=t.result;if(r.isOk()){let i=r[0],s=je(e.articles,l=>P(l,a=>n===a.id?i:a));return[(()=>{let l=e;return new j(l.base_uri,l.route,l.session,s,l.djot_demo_content,l.edit_view_mode,l.profile_menu_open,l.notice,l.debug_use_local_storage)})(),z()]}else{let i=r[0];return Z("article update response error","src\\jst_lustre.gleam",591),Z(i,"src\\jst_lustre.gleam",592),[e,z()]}}else if(t instanceof ul){let n=t.username,r=t.password;return[(()=>{let i=e;return new j(i.base_uri,i.route,new lr,i.articles,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,"login, CLICK",i.debug_use_local_storage)})(),rc(i=>new cl(i),n,r,e.base_uri)]}else if(t instanceof cl){let n=t.result;if(n.isOk()){let r=n[0];return[(()=>{let i=e;return new j(i.base_uri,i.route,r,i.articles,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,"login, OK",i.debug_use_local_storage)})(),z()]}else{let r=n[0];return Z(r,"src\\jst_lustre.gleam",611),[(()=>{let i=e;return new j(i.base_uri,i.route,new Oe,i.articles,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,"login, ERROR",i.debug_use_local_storage)})(),z()]}}else{if(t instanceof Oi)return[(()=>{let n=e;return new j(n.base_uri,n.route,new Oe,n.articles,n.djot_demo_content,n.edit_view_mode,n.profile_menu_open,n.notice,n.debug_use_local_storage)})(),tc(n=>new fl(n),e.base_uri)];if(t instanceof fl)return[(()=>{let n=e;return new j(n.base_uri,n.route,new Oe,n.articles,n.djot_demo_content,n.edit_view_mode,n.profile_menu_open,n.notice,n.debug_use_local_storage)})(),z()];if(t instanceof pl)return[(()=>{let n=e;return new j(n.base_uri,n.route,n.session,n.articles,n.djot_demo_content,n.edit_view_mode,n.profile_menu_open,"auth check, CLICK",n.debug_use_local_storage)})(),qo(n=>new Si(n),e.base_uri)];if(t instanceof Si){let n=t.result;if(n.isOk()){let r=n[0];return[(()=>{let i=e;return new j(i.base_uri,i.route,r,i.articles,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,"auth check, OK",i.debug_use_local_storage)})(),z()]}else{let r=n[0];return Z("session check response error","src\\jst_lustre.gleam",644),Z(r,"src\\jst_lustre.gleam",645),[(()=>{let i=e;return new j(i.base_uri,i.route,new Oe,i.articles,i.djot_demo_content,i.edit_view_mode,i.profile_menu_open,"auth check, ERROR",i.debug_use_local_storage)})(),z()]}}else if(t instanceof dl){let n=t.content;return[(()=>{let r=e;return new j(r.base_uri,r.route,r.session,r.articles,n,r.edit_view_mode,r.profile_menu_open,r.notice,r.debug_use_local_storage)})(),z()]}else if(t instanceof _l){let n;e.edit_view_mode instanceof Qt?n=new Ai:n=new Qt;let i=n;return[(()=>{let s=e;return new j(s.base_uri,s.route,s.session,s.articles,s.djot_demo_content,i,s.profile_menu_open,s.notice,s.debug_use_local_storage)})(),z()]}else if(t instanceof ji){Z("article create clicked","src\\jst_lustre.gleam",676);let n=new G("","new-article",1,"current-user",o([]),new h,"New Article","A new article subtitle","This is a new article. Start editing to customize it.",new N(`# New Article

Start writing your article content here...`),new h);return[e,ac(r=>new il(r),n,e.base_uri)]}else if(t instanceof il){let n=t.result;if(n.isOk()){let r=n[0];Z("article created successfully with id: "+r.id,"src\\jst_lustre.gleam",708);let i,s=e.articles;if(s instanceof N){let a=s[0];i=new N(w(r,a))}else i=s;let l=i;return[(()=>{let a=e;return new j(a.base_uri,a.route,a.session,l,a.djot_demo_content,a.edit_view_mode,a.profile_menu_open,a.notice,a.debug_use_local_storage)})(),An((()=>{let a=new Ge(r.id),u=Re(a);return pe(u)})(),new h,new h)]}else{let r=n[0];return Z("article creation error","src\\jst_lustre.gleam",728),Z(r,"src\\jst_lustre.gleam",729),[e,z()]}}else if(t instanceof sl){let n=t.article;return Z("article delete clicked","src\\jst_lustre.gleam",736),[e,bn(o([oc(r=>new ll(n.id,r),n.id,e.base_uri),An((()=>{let r=new We,i=Re(r);return pe(i)})(),new h,new h)]))]}else if(t instanceof ll){let n=t.id,r=t.result;if(r.isOk()){let i=je(e.articles,s=>gt(s,l=>l.id!==n));return[(()=>{let s=e;return new j(s.base_uri,s.route,s.session,i,s.djot_demo_content,s.edit_view_mode,s.profile_menu_open,s.notice,s.debug_use_local_storage)})(),z()]}else{let i=r[0];return Z("article delete response error","src\\jst_lustre.gleam",764),Z(i,"src\\jst_lustre.gleam",765),[e,z()]}}else if(t instanceof ol){let n=t.article;Z("article publish clicked","src\\jst_lustre.gleam",771);let r,i=n;return r=new G(i.id,i.slug,i.revision,i.author,i.tags,new $(Ja()),i.title,i.subtitle,i.leading,i.content,i.draft),[e,Bs(l=>new xr(n.id,l),r,e.base_uri)]}else if(t instanceof al){let n=t.article;return Z("article unpublish clicked","src\\jst_lustre.gleam",783),[e,Bs(r=>new xr(n.id,r),(()=>{let r=n;return new G(r.id,r.slug,r.revision,r.author,r.tags,new h,r.title,r.subtitle,r.leading,r.content,r.draft)})(),e.base_uri)]}else{if(e.debug_use_local_storage)wr(gr,"");else{let r=new In((()=>{let i=e.articles;return i instanceof ee?o([]):i instanceof Y?o([]):i instanceof N?i[0]:i instanceof kt?o([]):o([])})());wr(gr,Rs(r))}return[(()=>{let r=e;return new j(r.base_uri,r.route,r.session,r.articles,r.djot_demo_content,r.edit_view_mode,r.profile_menu_open,r.notice,!e.debug_use_local_storage)})(),z()]}}}}function d_(e,t){if(e.debug_use_local_storage){let r=Lc(e,t),i=r[0],s=r[1],l=a=>new In((()=>{let u=a.articles;return u instanceof ee?o([]):u instanceof Y?o([]):u instanceof N?u[0]:u instanceof kt?o([]):o([])})());return t instanceof Xt?wr(gr,Rs(l(i))):t instanceof He&&wr(gr,Rs(l(i))),[i,s]}else return Lc(e,t)}function __(e){let t=e.route;if(t instanceof Lt)return new Sn;if(t instanceof We){let n=e.articles;if(n instanceof Y)return new Ht;if(n instanceof ee)return new fe(new _r("articles not initialized"));if(n instanceof Fe){let r=n[0];return new fe(new Jt(r,"Failed to load article list"))}else if(n instanceof N){let r=n[0];return new zn(r,e.session)}else{let r=n[0];return new zn(r,e.session)}}else if(t instanceof dt){let n=t.slug,r=e.articles;if(r instanceof Y)return new Ht;if(r instanceof ee)return new fe(new _r("articles not initialized"));if(r instanceof Fe){let i=r[0];return new fe(new Jt(i,"Failed to load articles"))}else if(r instanceof N){let i=r[0],s=xt(i,l=>l.slug===n);if(s.isOk()){let l=s[0];return new At(l,e.session)}else return new fe(new Tn(n,Po(i)))}else{let i=r[0],s=xt(i,l=>l.slug===n);if(s.isOk()){let l=s[0];return new At(l,e.session)}else return new fe(new Tn(n,Po(i)))}}else if(t instanceof Ge){let n=t.id,r=e.articles;if(r instanceof Y)return new Ht;if(r instanceof ee)return new fe(new _r("articles not initialized"));if(r instanceof Fe){let i=r[0];return new fe(new Jt(i,"Failed to load articles for editing"))}else if(r instanceof N){let i=r[0],s=xt(i,l=>l.id===n);if(s.isOk()){let l=s[0],a=di(l,e.session),u=l.draft;return a&&u instanceof $?new mt(l):a&&u instanceof h?new mt((()=>{let c=l;return new G(c.id,c.slug,c.revision,c.author,c.tags,c.published_at,c.title,c.subtitle,c.leading,c.content,or(l))})()):new fe(new Cn("edit article"))}else return new fe(new qn(n))}else{let i=r[0],s=xt(i,l=>l.id===n);if(s.isOk()){let l=s[0],a=di(l,e.session),u=l.draft;return a&&u instanceof $?new mt(l):a&&u instanceof h?new mt((()=>{let c=l;return new G(c.id,c.slug,c.revision,c.author,c.tags,c.published_at,c.title,c.subtitle,c.leading,c.content,or(l))})()):new fe(new Cn("edit article"))}else return new fe(new qn(n))}}else{if(t instanceof ht)return new fr;if(t instanceof Rt){let n=t[0];return new pr(n)}else{if(t instanceof $t)return new En(e.djot_demo_content);if(t instanceof _t)return new dr;{let n=t.uri;return new Ps(n)}}}}function Io(e){if(e==="")return lt();{let t=e;return v(o([zu(new Vs),_("h-5 w-full cursor-pointer bg-zinc-700 text-mono text-zinc-200 text-xs px-8")]),o([x(t)]))}}function $_(){return v(o([_("mt-8 p-4 bg-zinc-800 rounded-lg border border-zinc-700")]),o([Mt(o([_("text-lg text-pink-700 font-light")]),o([x("Djot Quick Reference")])),at(o([_("text-zinc-300 mb-6")]),o([ti(o([]),o([x("Note: ")])),x("This editor uses Djot format. See the "),It(o([Nt("https://htmlpreview.github.io/?https://github.com/jgm/djot/blob/master/doc/syntax.html"),_("text-zinc-300 underline")]),o([x("djot syntax documentation")])),x(" for complete details.")])),v(o([_("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm")]),o([v(o([]),o([he(o([_("text-pink-700 font-medium mb-2")]),o([x("Headings")])),de(o([_("text-zinc-300")]),o([me(o([_("text-zinc-300")]),o([x(`# H1
## H2
### H3`)]))]))])),v(o([]),o([he(o([_("text-pink-700 font-medium mb-2")]),o([x("Text")])),de(o([_("text-zinc-300")]),o([me(o([_("text-zinc-300")]),o([x("_italic_\n*bold*\n`code`")]))]))])),v(o([]),o([he(o([_("text-pink-700 font-medium mb-2")]),o([x("Lists")])),de(o([_("text-zinc-300")]),o([me(o([_("text-zinc-300")]),o([x(`- item 1
- item 2

  - nested`)]))]))])),v(o([]),o([he(o([_("text-pink-700 font-medium mb-2")]),o([x("Links")])),de(o([_("text-zinc-300")]),o([me(o([_("text-zinc-300")]),o([x(`[text](url)
[text](url){title="tooltip"}`)]))]))])),v(o([]),o([he(o([_("text-pink-700 font-medium mb-2")]),o([x("Code Blocks")])),de(o([_("text-zinc-300")]),o([me(o([_("text-zinc-300")]),o([x("```\ncode here\n```")]))]))])),v(o([]),o([he(o([_("text-pink-700 font-medium mb-2")]),o([x("Blockquotes")])),de(o([_("text-zinc-300")]),o([me(o([_("text-zinc-300")]),o([x("> quoted text")]))]))]))]))]))}function Ac(e,t,n,r,i){let s=_("block text-sm font-medium text-zinc-400 mb-1"),l;t instanceof Fo?l=_("w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 font-light text-zinc-100 focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"):t instanceof ml?l=_("w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 text-3xl text-pink-700 font-light focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"):t instanceof wl?l=_("w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 text-md text-zinc-500 font-light focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"):l=_("w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 font-bold text-zinc-100 focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200");let a=l;return v(o([_("mb-4")]),o([ni(o([s]),o([x(e)])),ho(o([a,Xn(n),Pt("edit-"+i+"-"+e),rr(r)]))]))}function jc(e){let t=e.published_at;if(t instanceof $){let n=t[0],r=Ha(n);return Ln(o([_("text-xs text-zinc-500 px-2 pt-2 w-max border-t border-r border-zinc-700 group-hover:border-pink-700 transition-colors duration-25")]),o([x(r)]))}else return Ln(o([_("text-xs text-zinc-500 px-2 pt-2 w-max italic border-t border-r border-zinc-700 group-hover:border-pink-700 transition-colors duration-25")]),o([x("not published")]))}function Oc(e){return v(o([_("text-xs text-zinc-400 pt-0 border-r border-zinc-700 pr-2 group-hover:border-pink-700 transition-colors duration-25")]),o([Ln(o([_("text-zinc-500 font-light")]),o([x("by ")])),Ln(o([_("text-zinc-300")]),o([x(e)]))]))}function Sc(e){return e.hasLength(0)?lt():v(o([_("flex justify-end align-end gap-0 ml-auto flex-wrap border-b border-r border-zinc-700 pb-1 pr-2 hover:border-pink-700 group-hover:border-pink-700 transition-colors duration-25 mt-2")]),P(e,n=>Ln(o([_("text-xs cursor-pointer text-zinc-500 px-2 hover:border-pink-700 hover:text-pink-700 transition-colors duration-25")]),o([x(n)]))))}function zc(e,t){let n=di(e,t),r=lc(e,t),i=sc(e,t);return v(o([_("flex justify-start h-10")]),o([n?ce(o([_("text-gray-500 pe-4 text-underline pb-2 hover:text-teal-300 hover:border-teal-300 border-b border-zinc-700"),X(new en(Re(new Ge(e.id))))]),o([x("Edit")])):lt(),r&&q(e.published_at,new h)?ce(o([_("text-gray-500 pe-4 text-underline pb-2 hover:text-green-300 hover:border-green-300 border-b border-zinc-700"),X(new ol(e))]),o([x("Publish")])):lt(),r&&!q(e.published_at,new h)?ce(o([_("text-gray-500 pe-4 text-underline pb-2 hover:text-yellow-300 hover:border-yellow-300 border-b border-zinc-700"),X(new al(e))]),o([x("Unpublish")])):lt(),i?ce(o([_("text-gray-500 pe-4 text-underline pb-2 hover:text-red-400 hover:border-red-400 border-b border-zinc-700"),X(new sl(e))]),o([x("Delete")])):lt()]))}function h_(e,t){return o([v(o([_("mb-4")]),o([v(o([_("flex items-center justify-between mb-1")]),o([ni(o([_("block text-sm font-medium text-zinc-400")]),o([x("Slug")])),Ln(o([_("text-xs text-zinc-500")]),o([x("rev "+H(t.revision))]))])),ho(o([_("w-full bg-zinc-800 border border-zinc-600 rounded-md p-2 font-light text-zinc-100 focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"),Xn(bs(e)),Pt("edit-"+t.slug+"-Slug"),rr(n=>new Zs(t,n))]))])),Ac("Title",new ml,ys(e),n=>new Qs(t,n),t.slug),Ac("Subtitle",new wl,ks(e),n=>new el(t,n),t.slug),v(o([_("mb-4")]),o([ni(o([_("block text-sm font-medium text-zinc-400 mb-1")]),o([x("Leading")])),$s(o([_("w-full h-24 bg-zinc-800 border border-zinc-600 rounded-md p-2 font-bold text-zinc-100 resize-none focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"),Xn(li(e)),Pt("edit-"+t.slug+"-Leading"),rr(n=>new Xs(t,n)),Qi("Write a compelling leading paragraph...")]),li(e))])),v(o([_("mb-4")]),o([ni(o([_("block text-sm font-medium text-zinc-400 mb-1")]),o([x("Content")])),$s(o([_("w-full h-96 bg-zinc-800 border border-zinc-600 rounded-md p-4 font-mono text-sm text-zinc-100 resize-none focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"),Xn(oi(e)),rr(n=>new tl(t,n)),Qi("Write your article content in Djot format...")]),oi(e))])),v(o([_("flex justify-between gap-4")]),o([zc(t,new Oe),v(o([_("flex gap-4")]),o([ce(o([_("px-4 py-2 bg-zinc-700 text-zinc-300 rounded-md hover:bg-zinc-600 transition-colors duration-200"),X(new rl(t)),oo(xs(e))]),o([x("Discard Changes")])),ce(o([_("px-4 py-2 bg-teal-700 text-white rounded-md hover:bg-teal-600 transition-colors duration-200"),X(new nl(t)),oo(xs(e))]),o([xs(e)?x("Saving..."):x("Save Article")]))]))]))])}function we(e,t){return fs(o([Pt("article-title-"+t),_("text-3xl text-pink-700 font-light"),_("article-title")]),o([x(e)]))}function gl(e,t){return v(o([Pt("article-subtitle-"+t),_("text-md text-zinc-500 font-light italic"),_("article-subtitle")]),o([x(e)]))}function Ec(e,t){return at(o([Pt("article-lead-"+t),_("font-bold pt-8"),_("article-leading")]),o([x(e)]))}function oe(e){return at(o([_("pt-8")]),o([x(e)]))}function m_(){return o([we("Loading","loading"),oe("Loading...")])}function w_(e,t){let n;t instanceof Oe?n=gt(e,m=>m.published_at instanceof $):n=e;let r=n,i,l=Gn(r,(f,m)=>{let g=f.published_at,k=m.published_at;if(g instanceof h&&k instanceof h)return jr(f.slug,m.slug);if(g instanceof h&&k instanceof $)return new J;if(g instanceof $&&k instanceof h)return new te;{let C=g[0],L=k[0];return Ra(L,C)}});i=P(l,f=>{{let m=f.slug,g=f.tags,k=f.title,C=f.subtitle,L=f.leading,U,M=new dt(m);U=Re(M);let S=U;return _o(o([_("mt-14")]),o([It(o([_("group block border-l border-zinc-700 pl-4 hover:border-pink-700 transition-colors duration-25"),Nt(pe(S)),Eu(new Ys(f)),X(new en(S))]),o([v(o([_("flex justify-between gap-4")]),o([v(o([_("flex flex-col")]),o([Mt(o([Pt("article-title-"+m),_("article-title"),_("text-xl text-pink-700 font-light")]),o([x(k)])),gl(C,m)])),v(o([_("flex flex-col items-end")]),o([jc(f),Oc(f.author)]))])),oe(L),v(o([_("flex justify-end mt-2")]),o([Sc(g)]))]))]))}});let a=i,u=o([v(o([_("flex justify-between items-center mb-4")]),o([we("Articles","articles"),t instanceof On?ce(o([_("text-gray-500 pe-4 text-underline pt-2 hover:text-teal-300 hover:border-teal-300 border-t border-zinc-700 border-e"),X(new ji)]),o([x("New")])):lt()]))]),c;return a.hasLength(0)?c=o([v(o([_("mt-14 text-center")]),o([v(o([_("border-l border-zinc-700 pl-4 py-8")]),o([Mt(o([_("text-xl text-zinc-500 font-light mb-4")]),o([x("No articles yet")])),t instanceof On?v(o([_("space-y-4")]),o([oe("Ready to share your thoughts? Create your first article to get started."),ce(o([_("inline-block px-6 py-2 bg-pink-700 text-white rounded-md hover:bg-pink-600 transition-colors duration-200 font-medium"),X(new ji)]),o([x("Create Your First Article")]))])):v(o([_("space-y-4")]),o([oe("No published articles are available yet."),oe("Check back later for new content!")]))]))]))]):c=a,K(u,c)}function g_(e,t){return o([we("Article not found",t),oe("The article you are looking for does not exist.")])}function x_(e,t){if(e instanceof N)return o([we("Article not found",t),oe("The article you are looking for does not exist.")]);if(e instanceof kt)return o([we("Article not found",t),oe("The article you are looking for might not exist yet. Please check back later.")]);if(e instanceof Fe){let n=e[0];return o([we("There was an error loading the article",t),oe(Ms(n))])}else return e instanceof Y?o([we("Loading article",t),oe("Loading article...")]):o([we("Loading article",t),oe("Loading article...")])}function b_(){return o([we("About","about"),oe(`I'm a software developer and a writer. I'm also a father and a husband. 
      I'm also a software developer and a writer. I'm also a father and a 
      husband. I'm also a software developer and a writer. I'm also a father 
      and a husband. I'm also a software developer and a writer. I'm also a 
      father and a husband.`),oe(`If you enjoy these glimpses into my mind, feel free to come back
       semi-regularly. But not too regularly, you creep.`)])}function y_(){return o([we("URL Shortener","url-shortener"),oe("URL shortening service coming soon. This feature is currently under development."),v(o([_("mt-8 p-6 bg-zinc-800 rounded-lg border border-zinc-700")]),o([Mt(o([_("text-lg text-pink-700 font-light mb-4")]),o([x("Planned Features")])),ds(o([_("list-disc list-inside space-y-2 text-zinc-300")]),o([tr(o([]),o([x("Create short URLs")])),tr(o([]),o([x("Track click analytics")])),tr(o([]),o([x("Custom short codes")])),tr(o([]),o([x("URL expiration")]))]))]))])}function k_(e){return o([we("404 - Page Not Found","not-found"),gl("The page you're looking for doesn't exist.","not-found"),oe("The page at "+pe(e)+" could not be found.")])}function Dn(e){return at(o([_("pt-8 text-orange-500")]),o([x(e)]))}function Tc(e,t){let n,r=e.content;if(r instanceof ee)n=o([Dn("content not initialized")]);else if(r instanceof Y)n=o([Dn("loading")]);else if(r instanceof N){let s=r[0];n=Gs(s)}else if(r instanceof kt){let s=r[0];n=Gs(s)}else{let s=r[0];n=o([Dn(Ms(s))])}let i=n;return o([_o(o([_("with-transition")]),w(v(o([_("flex flex-col justify-between")]),o([zc(e,t),v(o([_("flex gap-2 justify-between")]),o([v(o([_("flex flex-col justify-between")]),o([we(e.title,e.slug),gl(e.subtitle,e.slug)])),v(o([_("flex flex-col items-end")]),o([jc(e),Oc(e.author)]))])),v(o([_("flex justify-between mt-2")]),o([Sc(e.tags)]))])),w(Ec(e.leading,e.slug),i)))])}function v_(e,t){let n=t.draft;if(n instanceof h)return o([Dn("no draft..")]);{let r=n[0],i,s=oi(r);s===""?i="Start typing in the editor to see the preview here...":i=s;let l=i,a=new G(t.id,bs(r),t.revision,t.author,t.tags,t.published_at,ys(r),ks(r),li(r),new N(l),new h),u=Tc(a,new Oe);return o([v(o([_("lg:hidden mb-4 flex justify-center")]),o([ce(o([_("px-4 py-2 bg-pink-700 text-white rounded-md hover:bg-pink-700 transition-colors duration-200"),X(new _l)]),o([e.edit_view_mode instanceof Qt?x("Show Preview"):x("Show Editor")]))])),v(o([Gr(o([["grid gap-8 h-screen",!0],["grid-cols-2 lg:grid-cols-2",!0]]))]),o([v(o([Gr(o([["space-y-4",!0],["lg:block",!0],["lg:col-span-1",!0],["col-span-2",q(e.edit_view_mode,new Qt)],["hidden",q(e.edit_view_mode,new Ai)]]))]),h_(r,t)),v(o([Gr(o([["max-w-screen-md mx-auto px-10 py-10 overflow-y-auto",!0],["lg:block",!0],["lg:col-span-1",!0],["col-span-2",q(e.edit_view_mode,new Ai)],["hidden",q(e.edit_view_mode,new Qt)]]))]),u)])),$_()])}}function L_(e,t){return It(o([Nt(pe(e)),_("text-pink-700 hover:underline cursor-pointer"),X(new en(e))]),o([x(t)]))}function A_(){let e=ne("/article/nats-all-the-way-down");if(!e.isOk())throw I("let_assert","jst_lustre",1324,"view_index","Pattern match failed, no pattern matched the value.",{value:e});let t=e[0];return o([we("Welcome to jst.dev!","welcome"),gl(`...or, A lession on overengineering for fun and.. 
      well just for fun.`,"welcome"),Ec(`This site and it's underlying IT-infrastructure is the primary 
      place for me to experiment with technologies and topologies. I 
      also share some of my thoughts and learnings here.`,"welcome"),at(o([_("mt-14")]),o([x(`This site and it's underlying IT-infrastructure is the primary 
        place for me to experiment with technologies and topologies. I 
        also share some of my thoughts and learnings here. Feel free to 
        check out my overview, `),L_(t,"NATS all the way down ->")])),oe("It to is a work in progress and I mostly keep it here for my own reference."),oe(`I'm also a software developer and a writer. I'm also a father and a 
        husband. I'm also a software developer and a writer. I'm also a father 
        and a husband. I'm also a software developer and a writer. I'm also a 
        father and a husband. I'm also a software developer and a writer.`)])}function j_(){return o([we("Articles","articles"),oe("Loading articles...")])}function qc(e,t){return It(o([_(""),Nt(pe(e)),X(new en(e))]),t)}function Zt(e,t,n,r){return tr(K(r,o([Gr(o([["border-transparent border-b-2 hover:border-pink-700 cursor-pointer",!0],["text-pink-700",uc(e,t)]])),X(new en(Re(e)))])),o([qc(Re(e),o([x(n)]))]))}function Do(e){let t=o([_("block w-full text-left px-4 py-2 text-sm text-zinc-200 hover:bg-teal-800 transition-colors cursor-pointe")]);return ku(o([_("py-2 border-b bg-zinc-800 border-pink-700 font-mono relative")]),o([v(o([_("flex justify-between px-10 items-center max-w-screen-md mx-auto")]),o([v(o([]),o([qc(Ns(new Sn),o([x("jst.dev")]))])),v(o([_("flex items-center space-x-8")]),o([ds(o([_("hidden sm:flex space-x-8 pr-2")]),o([Zt(new We,e.route,"Articles",o([])),Zt(new _t,e.route,"About",o([])),Zt(new ht,e.route,"Short Urls",o([])),Zt(new $t,e.route,"Djot Demo",o([]))])),v(o([_("relative")]),o([ce(o([_("p-2 rounded-md bg-zinc-700 hover:bg-zinc-600 transition-colors"),X(new Ks)]),o([e.profile_menu_open?gi(o([_("w-6 h-6")]),new $r):gi(o([_("w-6 h-6")]),new wi)])),e.profile_menu_open?v(o([_("absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-zinc-700 ring-1 ring-black ring-opacity-5 z-50")]),o([v(o([_("py-1")]),o([ds(o([_("sm:hidden flex flex-col border-b border-zinc-400")]),o([Zt(new We,e.route,"Articles",t),Zt(new _t,e.route,"About",t),Zt(new ht,e.route,"Short urls",t),Zt(new $t,e.route,"Djot Demo",t)])),(()=>{let r=e.session;return r instanceof Oe?ce(o([_("block w-full text-left px-4 py-2 text-sm text-zinc-200 hover:bg-green-800 transition-colors cursor-pointe"),X(new ul("johan-st","password"))]),o([x("Login")])):r instanceof lr?ce(o([_("block w-full text-left px-4 py-2 text-sm bg-zinc-700 text-zinc-400 hover:bg-orange-800 transition-colors cursor-not-allowed opacity-60"),X(new Oi)]),o([x("logging in..")])):ce(o([_("block w-full text-left px-4 py-2 text-sm text-zinc-200 hover:bg-orange-800 transition-colors cursor-pointe"),X(new Oi)]),o([x("Logout")]))})(),ce(o([_("block w-full text-left px-4 py-2 text-sm text-zinc-200 hover:bg-teal-800 transition-colors cursor-pointe"),X(new pl)]),o([x("Check")])),e.debug_use_local_storage?ce(o([_("block w-full text-left px-4 py-2 text-sm text-zinc-200 hover:bg-orange-800 transition-colors cursor-pointe"),X(new $l)]),o([v(o([_("flex justify-between")]),o([x("LocalStorage"),gi(o([_("w-6 text-green-400")]),new Is)]))])):ce(o([_("block w-full text-left px-4 py-2 text-sm text-zinc-200 hover:bg-green-800 transition-colors cursor-pointe"),X(new $l)]),o([v(o([_("flex justify-between ")]),o([x("LocalStorage"),gi(o([_("w-6 text-orange-400")]),new $r)]))]))]))])):v(o([]),o([]))]))]))]))]))}function O_(e){let t;e===""?t=o([v(o([_("text-zinc-500 italic text-center mt-8")]),o([x("Start typing in the editor to see the preview here...")]))]):t=Gs(e);let n=t;return o([we("Djot Demo","djot-demo"),v(o([_("grid grid-cols-1 lg:grid-cols-2 gap-6")]),o([$o(o([_("space-y-4")]),o([v(o([_("flex items-center justify-between")]),o([ei(o([_("text-xl text-pink-700 font-light")]),o([x("Editor")])),v(o([_("text-xs text-zinc-500")]),o([x("Live preview updates as you type")]))])),v(o([_("relative")]),o([$s(o([_("w-full h-[400px] lg:h-[600px] bg-zinc-800 border border-zinc-600 rounded-lg p-4 font-mono text-sm text-zinc-100 resize-none focus:border-pink-700 focus:ring-1 focus:ring-pink-700 focus:outline-none transition-colors duration-200"),Qi(`# Start typing your article content here...

## Headings

- Lists
- Work too

**Bold** and *italic* text

[Link text](url)`),Xn(e),rr(r=>new dl(r)),A("spellcheck","false")]),e),v(o([_("absolute bottom-2 right-2 text-xs text-zinc-500 bg-zinc-800 px-2 py-1 rounded")]),o([x((()=>{let r=fn(e);return El(r)})()),x(" chars")]))]))])),$o(o([_("space-y-4")]),o([v(o([_("flex items-center justify-between")]),o([ei(o([_("text-xl text-pink-700 font-light")]),o([x("Preview")])),v(o([_("text-xs text-zinc-500")]),o([x("Rendered output")]))])),v(o([_("w-full h-[400px] lg:h-[600px] bg-zinc-900 border border-zinc-600 rounded-lg p-6 overflow-y-auto prose prose-invert prose-pink max-w-none")]),n)]))])),v(o([_("mt-8 p-4 bg-zinc-800 rounded-lg border border-zinc-700")]),o([Mt(o([_("text-lg text-pink-700 font-light")]),o([x("Quick Reference")])),at(o([_("text-zinc-300")]),o([ti(o([]),o([x("Note: ")])),x("The djot implementation is a work in progress. Not all features are supported yet.")])),at(o([_("mb-6")]),o([x("See the "),It(o([Nt("https://htmlpreview.github.io/?https://github.com/jgm/djot/blob/master/doc/syntax.html"),_("text-zinc-300 underline")]),o([x("djot syntax documentation")])),x(" for more details.")])),v(o([_("grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm")]),o([v(o([]),o([he(o([_("text-pink-700 font-medium mb-2")]),o([x("Headings")])),de(o([_("text-zinc-300")]),o([me(o([_("text-zinc-300")]),o([x(`# H1
## H2
### H3`)]))]))])),v(o([]),o([he(o([_("text-pink-700 font-medium mb-2")]),o([x("Text")])),de(o([_("text-zinc-300")]),o([me(o([_("text-zinc-300")]),o([x("_italic_\n*bold*\n`code`")]))]))])),v(o([]),o([he(o([_("text-pink-700 font-medium mb-2")]),o([x("Lists")])),de(o([_("text-zinc-300")]),o([me(o([_("text-zinc-300")]),o([x(`- item 1
- item 2

  - nested`)]))]))])),v(o([]),o([he(o([_("text-pink-700 font-medium mb-2")]),o([x("Links")])),de(o([_("text-zinc-300")]),o([me(o([_("text-zinc-300")]),o([x(`[text](url)
[text](url){title="tooltip"}`)]))]))])),v(o([]),o([he(o([_("text-pink-700 font-medium mb-2")]),o([x("Code Blocks")])),de(o([_("text-zinc-300")]),o([me(o([_("text-zinc-300")]),o([x("```\ncode here\n```")]))]))])),v(o([]),o([he(o([_("text-pink-700 font-medium mb-2")]),o([x("Blockquotes")])),de(o([_("text-zinc-300")]),o([me(o([_("text-zinc-300")]),o([x("> quoted text")]))]))]))]))]))])}function S_(e){let t=__(e),n;if(t instanceof mi)n=m_();else if(t instanceof Sn)n=A_();else if(t instanceof zn){let l=t.articles,a=t.session;n=w_(l,a)}else if(t instanceof Ht)n=j_();else if(t instanceof At){let l=t.article,a=t.session;n=Tc(l,a)}else if(t instanceof mt){let l=t.article;n=v_(e,l)}else if(t instanceof fe){let l=t.error;if(l instanceof Tn){let a=l.slug;n=x_(e.articles,a)}else if(l instanceof qn){let a=l.id;n=g_(e.articles,a)}else if(l instanceof Jt){let a=l.error;n=o([Dn(Ms(a))])}else if(l instanceof Cn){let a=l.attempted_action;n=o([Dn("Authentication required: "+a)])}else{let a=l.msg;n=o([Dn(a)])}}else if(t instanceof dr)n=b_();else if(t instanceof fr)n=y_();else if(t instanceof pr){let l=t.short;throw I("todo","jst_lustre",959,"view","short info",{})}else if(t instanceof En){let l=t.content;n=O_(l)}else{let l=t.requested_uri;n=k_(l)}let r=n,i;return t instanceof En?i=l=>v(o([_("min-h-screen bg-zinc-900 text-zinc-100 selection:bg-pink-700 selection:text-zinc-100 ")]),o([Io(e.notice),Do(e),ps(o([_("mx-auto px-10 py-10")]),l)])):t instanceof mt?i=l=>v(o([_("min-h-screen bg-zinc-900 text-zinc-100 selection:bg-pink-700 selection:text-zinc-100 ")]),o([Io(e.notice),Do(e),ps(o([_("mx-auto px-10 py-10")]),l)])):i=l=>v(o([_("min-h-screen bg-zinc-900 text-zinc-100 selection:bg-pink-700 selection:text-zinc-100 ")]),o([Io(e.notice),Do(e),ps(o([_("max-w-screen-md mx-auto px-10 py-10")]),l)])),i(r)}var z_=`# Quick Start for Markdown users

Djot is a lot like Markdown.  Here are some of the main
differences you need to be aware of in making the transition.

#### Blank lines

In djot you need blank lines around block-level
elements.  Hence, instead of

\`\`\`
This is some text.
## My next heading
\`\`\`

you must write

\`\`\`
This is some text.

## My next heading
\`\`\`

Instead of

\`\`\`\`
This is some text.
\`\`\` lua
local foo = bar.baz or false
\`\`\`
\`\`\`\`

you must write

\`\`\`\`
This is some text.

\`\`\` lua
local foo = bar.baz or false
\`\`\`
\`\`\`\`

Instead of

\`\`\`
Text.
> a blockquote.
\`\`\`

you must write

\`\`\`
Text.

> a blockquote.
\`\`\`

And instead of

\`\`\`
Before a thematic break.
****
After a thematic break.
\`\`\`

you must write

\`\`\`
Before a thematic break.

****

After a thematic break.
\`\`\`

#### Lists

A special case of this is that you always need a blank line before a
list, even if it's a sublist. So, while in Markdown you can write

\`\`\`
- one
  - two
  - three
\`\`\`

in djot you must write

\`\`\`
- one

  - two
  - three
\`\`\`

#### Headings

There are no Setext-style (underlined) headings, only ATX- (\`#\`) style.

Heading content can extend over several lines, which may or
may not be preceded by \`#\` characters:

\`\`\`
## This is a single
## level-2 heading

### This is a single
level-3 heading
\`\`\`

As a result, headings must always have a blank line following.

Trailing \`#\` characters in a heading are read as part of the
content and not ignored.

#### Code blocks

There are no indented code blocks, only fenced with \` \`\`\` \`.

#### Block quotes

You need a space after the \`>\` character, unless it is followed
by a newline.

#### Emphasis

Use single \`_\` delimiters for regular emphasis and
single \`*\` delimiters for strong emphasis.

#### Links

There is no special syntax for adding a title to a link, as
in Markdown:

\`\`\`
[link](http://example.com "Go to my website")
\`\`\`

If you want a title attribute on a link, use the general attribute syntax:

\`\`\`
[link](http://example.com){title="Go to my website"}
\`\`\`

#### Hard line breaks

In Markdown you can create a hard line break by ending a line
with two spaces. In djot you use a backslash before the newline.

\`\`\`
A new\\
line.
\`\`\`

#### Raw HTML

In Markdown you can just insert raw HTML "as is."  In djot,
you must mark it as raw HTML:

\`\`\`\`
This is raw HTML: \`<a id="foo">\`{=html}.

Here is a raw HTML block:

\`\`\` =html
<table>
<tr><td>foo</td></tr>
</table>
\`\`\`
\`\`\`\`

#### Tables

Pipe tables always require a pipe character at the start and end
of each line, unlike in many Markdown implementations.  So, this
is not a table:

\`\`\`
a|b
-|-
1|2
\`\`\`

but this is:

\`\`\`
| a | b |
| - | - |
| 1 | 2 |
\`\`\`


#### That's enough to get started!

Here we have just focused on things that might trip up
Markdown users.  If you keep these in mind, you should be
able to start using djot without looking at any more
documentation.

However, we haven't discussed any of the things
you can do in djot but not Markdown. See the [syntax
description](https://htmlpreview.github.io/?https://github.com/jgm/djot/blob/master/doc/syntax.html)
to find about the new constructions that are available.
`;function E_(e){let t=go();if(!t.isOk())throw I("let_assert","jst_lustre",65,"init","Pattern match failed, no pattern matched the value.",{value:t});let n=t[0],r=vc(gr,kc(),l=>new hl(l)),i=new j(n,Bo(n),new Oe,new ee,z_,new Qt,!1,"",!0),s=Bu(l=>{let a=l;return new Js(a)});return[i,bn(o([s,r,qo(l=>new Si(l),i.base_uri)]))]}function Cc(){let e=wu(E_,d_,S_),t=gu(e,"#app",void 0);if(!t.isOk())throw I("let_assert","jst_lustre",37,"main","Pattern match failed, no pattern matched the value.",{value:t})}function Z(e,t,n){let r="\x1B[90m",i="\x1B[39m",s=`${t}:${n}`,l=jt(e);if(globalThis.process?.stderr?.write){let a=`${r}${s}${i}
${l}
`;process.stderr.write(a)}else if(globalThis.Deno){let a=`${r}${s}${i}
${l}
`;globalThis.Deno.stderr.writeSync(new TextEncoder().encode(a))}else{let a=`${s}
${l}`;globalThis.console.log(a)}return e}function T_(e){let t='"';for(let n=0;n<e.length;n++){let r=e[n];r==`
`?t+="\\n":r=="\r"?t+="\\r":r=="	"?t+="\\t":r=="\f"?t+="\\f":r=="\\"?t+="\\\\":r=='"'?t+='\\"':r<" "||r>"~"&&r<"\xA0"?t+="\\u{"+r.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}":t+=r}return t+='"',t}function q_(e){let t="dict.from_list([",n=!0,r=[];return e.forEach((i,s)=>{r.push([s,i])}),r.sort(),r.forEach(([i,s])=>{n||(t=t+", "),t=t+"#("+jt(i)+", "+jt(s)+")",n=!1}),t+"])"}function C_(e){let t=globalThis.Object.keys(e).map(n=>{let r=jt(e[n]);return isNaN(parseInt(n))?`${n}: ${r}`:r}).join(", ");return t?`${e.constructor.name}(${t})`:e.constructor.name}function B_(e){let t=Object.getPrototypeOf(e)?.constructor?.name||"Object",n=[];for(let s of Object.keys(e))n.push(`${jt(s)}: ${jt(e[s])}`);let r=n.length?" "+n.join(", ")+" ":"";return`//js(${t==="Object"?"":t+" "}{${r}})`}function jt(e){let t=typeof e;if(e===!0)return"True";if(e===!1)return"False";if(e===null)return"//js(null)";if(e===void 0)return"Nil";if(t==="string")return T_(e);if(t==="bigint"||t==="number")return e.toString();if(globalThis.Array.isArray(e))return`#(${e.map(jt).join(", ")})`;if(e instanceof R)return`[${e.toArray().map(jt).join(", ")}]`;if(e instanceof Ot)return`//utfcodepoint(${String.fromCodePoint(e.value)})`;if(e instanceof be)return P_(e);if(e instanceof d)return C_(e);if(N_(e))return q_(e);if(e instanceof Set)return`//js(Set(${[...e].map(jt).join(", ")}))`;if(e instanceof RegExp)return`//js(${e})`;if(e instanceof Date)return`//js(Date("${e.toISOString()}"))`;if(e instanceof Function){let n=[];for(let r of Array(e.length).keys())n.push(String.fromCharCode(r+97));return`//fn(${n.join(", ")}) { ... }`}return B_(e)}function P_(e){let t=e.bitOffset+8*Math.trunc(e.bitSize/8),n=rn(e,e.bitOffset,t),r=e.bitSize%8;if(r>0){let i=zi(e,t,e.bitSize,!1,!1),s=Array.from(n.rawBuffer),l=`${i}:size(${r})`;return s.length===0?`<<${l}>>`:`<<${Array.from(n.rawBuffer).join(", ")}, ${l}>>`}else return`<<${Array.from(n.rawBuffer).join(", ")}>>`}function N_(e){try{return e instanceof xe}catch{return!1}}Cc();
